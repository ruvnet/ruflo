{"version":3,"sources":["../../../../src/cli/agents/coder.ts"],"sourcesContent":["/**\r\n * Coder Agent - Specialized in software development and code generation\r\n */\r\n\r\nimport { BaseAgent } from './base-agent.js';\r\nimport type {\r\n  AgentCapabilities,\r\n  AgentConfig,\r\n  AgentEnvironment,\r\n  TaskDefinition,\r\n} from '../../swarm/types.js';\r\nimport type { ILogger } from '../../core/logger.js';\r\nimport type { IEventBus } from '../../core/event-bus.js';\r\nimport type { DistributedMemorySystem } from '../../memory/distributed-memory.js';\r\n\r\n// Type definitions for coder activities\r\ninterface CodeFile {\r\n  path: string;\r\n  content: string;\r\n  type: string;\r\n}\r\n\r\ninterface TestFile {\r\n  path: string;\r\n  content: string;\r\n  framework: string;\r\n}\r\n\r\ninterface DatabaseTable {\r\n  name: string;\r\n  columns: string[];\r\n}\r\n\r\nexport class CoderAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: AgentEnvironment,\r\n    logger: ILogger,\r\n    eventBus: IEventBus,\r\n    memory: DistributedMemorySystem,\r\n  ) {\r\n    super(id, 'coder', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      codeGeneration: true,\r\n      codeReview: true,\r\n      testing: true,\r\n      documentation: true,\r\n      research: false,\r\n      analysis: true,\r\n      webSearch: false,\r\n      apiIntegration: true,\r\n      fileSystem: true,\r\n      terminalAccess: true,\r\n      languages: [\r\n        'typescript',\r\n        'javascript',\r\n        'python',\r\n        'rust',\r\n        'go',\r\n        'java',\r\n        'cpp',\r\n        'csharp',\r\n        'php',\r\n        'ruby',\r\n        'swift',\r\n        'kotlin',\r\n      ],\r\n      frameworks: [\r\n        'deno',\r\n        'node',\r\n        'react',\r\n        'vue',\r\n        'svelte',\r\n        'angular',\r\n        'express',\r\n        'fastify',\r\n        'nextjs',\r\n        'nuxtjs',\r\n        'django',\r\n        'flask',\r\n        'spring',\r\n        'rails',\r\n      ],\r\n      domains: [\r\n        'web-development',\r\n        'backend-development',\r\n        'frontend-development',\r\n        'api-development',\r\n        'database-design',\r\n        'devops',\r\n        'mobile-development',\r\n        'microservices',\r\n        'fullstack-development',\r\n        'system-architecture',\r\n      ],\r\n      tools: [\r\n        'git',\r\n        'editor',\r\n        'debugger',\r\n        'linter',\r\n        'formatter',\r\n        'compiler',\r\n        'bundler',\r\n        'package-manager',\r\n        'docker',\r\n        'kubernetes',\r\n        'ci-cd',\r\n        'testing-framework',\r\n      ],\r\n      maxConcurrentTasks: 3,\r\n      maxMemoryUsage: 1024 * 1024 * 1024, // 1GB\r\n      maxExecutionTime: 1800000, // 30 minutes\r\n      reliability: 0.95,\r\n      speed: 0.75,\r\n      quality: 0.95,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.7,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 12,\r\n      maxConcurrentTasks: 3,\r\n      timeoutThreshold: 1800000,\r\n      reportingInterval: 60000,\r\n      heartbeatInterval: 15000,\r\n      permissions: [\r\n        'file-read',\r\n        'file-write',\r\n        'terminal-access',\r\n        'git-access',\r\n        'package-install',\r\n        'docker-access',\r\n      ],\r\n      trustedAgents: [],\r\n      expertise: {\r\n        'code-generation': 0.95,\r\n        debugging: 0.9,\r\n        testing: 0.85,\r\n        refactoring: 0.92,\r\n        architecture: 0.8,\r\n        performance: 0.85,\r\n      },\r\n      preferences: {\r\n        codeStyle: 'functional',\r\n        testFramework: 'jest',\r\n        lintingStrict: true,\r\n        documentation: 'comprehensive',\r\n        errorHandling: 'robust',\r\n      },\r\n    };\r\n  }\r\n\r\n  override async executeTask(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Coder executing task', {\r\n      agentId: this.id,\r\n      taskType: task.type,\r\n      taskId: task.id,\r\n    });\r\n\r\n    try {\r\n      switch (task.type) {\r\n        case 'code-generation':\r\n          return await this.generateCode(task);\r\n        case 'code-review':\r\n          return await this.reviewCode(task);\r\n        case 'refactoring':\r\n          return await this.refactorCode(task);\r\n        case 'testing':\r\n          return await this.writeTests(task);\r\n        case 'debugging':\r\n          return await this.debugCode(task);\r\n        case 'api-development':\r\n          return await this.developAPI(task);\r\n        case 'database-design':\r\n          return await this.designDatabase(task);\r\n        case 'performance-optimization':\r\n          return await this.optimizePerformance(task);\r\n        default:\r\n          return await this.performGeneralDevelopment(task);\r\n      }\r\n    } catch (error) {\r\n      this.logger.error('Coding task failed', {\r\n        agentId: this.id,\r\n        taskId: task.id,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async generateCode(task: TaskDefinition): Promise<any> {\r\n    const requirements = task.input?.requirements || task.description;\r\n    const language = task.input?.language || 'typescript';\r\n    const framework = task.input?.framework;\r\n    const style = task.input?.style || 'functional';\r\n\r\n    this.logger.info('Generating code', {\r\n      requirements,\r\n      language,\r\n      framework,\r\n      style,\r\n    });\r\n\r\n    const result = {\r\n      requirements,\r\n      language,\r\n      framework,\r\n      style,\r\n      files: [] as CodeFile[],\r\n      tests: [] as TestFile[],\r\n      documentation: '',\r\n      metrics: {\r\n        linesOfCode: 0,\r\n        complexity: 0,\r\n        testCoverage: 0,\r\n        quality: 0,\r\n      },\r\n      dependencies: [] as string[],\r\n      buildInstructions: [] as string[],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Store development progress\r\n    await this.memory.store(\r\n      `code:${task.id}:progress`,\r\n      {\r\n        status: 'generating',\r\n        startTime: new Date(),\r\n        requirements,\r\n      },\r\n      {\r\n        type: 'code-progress',\r\n        tags: ['coding', this.id, language],\r\n        partition: 'tasks',\r\n      },\r\n    );\r\n\r\n    // Simulate code generation\r\n    await this.delay(3000);\r\n\r\n    result.files = [\r\n      {\r\n        path: `src/main.${this.getFileExtension(language)}`,\r\n        content: this.generateSampleCode(language, requirements),\r\n        type: 'main',\r\n      },\r\n      {\r\n        path: `src/types.${this.getFileExtension(language)}`,\r\n        content: this.generateTypesCode(language),\r\n        type: 'types',\r\n      },\r\n    ];\r\n\r\n    result.tests = [\r\n      {\r\n        path: `tests/main.test.${this.getFileExtension(language)}`,\r\n        content: this.generateTestCode(language, requirements),\r\n        framework: 'jest',\r\n      },\r\n    ];\r\n\r\n    result.documentation = this.generateDocumentation(requirements, language);\r\n    result.metrics = {\r\n      linesOfCode: 150,\r\n      complexity: 3.2,\r\n      testCoverage: 85,\r\n      quality: 0.92,\r\n    };\r\n\r\n    result.dependencies = this.suggestDependencies(language, framework) as any[];\r\n    result.buildInstructions = this.generateBuildInstructions(language, framework) as string[];\r\n\r\n    // Store final results\r\n    await this.memory.store(`code:${task.id}:results`, result, {\r\n      type: 'code-results',\r\n      tags: ['coding', 'completed', this.id, language],\r\n      partition: 'tasks',\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  private async reviewCode(task: TaskDefinition): Promise<any> {\r\n    const code = task.input?.code;\r\n    const files = task.input?.files || [];\r\n    const focus = task.input?.focus || ['quality', 'security', 'performance'];\r\n\r\n    this.logger.info('Reviewing code', {\r\n      filesCount: files.length,\r\n      focus,\r\n    });\r\n\r\n    const review = {\r\n      files: [] as any[],\r\n      overallScore: 0,\r\n      issues: [] as any[],\r\n      suggestions: [] as any[],\r\n      metrics: {\r\n        maintainability: 0,\r\n        readability: 0,\r\n        performance: 0,\r\n        security: 0,\r\n        testability: 0,\r\n      },\r\n      recommendations: [] as any[],\r\n      priorityFixes: [] as any[],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate code review\r\n    await this.delay(2500);\r\n\r\n    review.overallScore = 0.88;\r\n    review.issues = [\r\n      {\r\n        type: 'performance',\r\n        severity: 'medium',\r\n        message: 'Potential memory leak in async handler',\r\n        file: 'src/handlers.ts',\r\n        line: 45,\r\n        suggestion: 'Add proper cleanup in finally block',\r\n      },\r\n      {\r\n        type: 'security',\r\n        severity: 'high',\r\n        message: 'Input validation missing',\r\n        file: 'src/api.ts',\r\n        line: 23,\r\n        suggestion: 'Implement input sanitization',\r\n      },\r\n    ];\r\n\r\n    review.metrics = {\r\n      maintainability: 0.85,\r\n      readability: 0.9,\r\n      performance: 0.82,\r\n      security: 0.75,\r\n      testability: 0.88,\r\n    };\r\n\r\n    return review;\r\n  }\r\n\r\n  private async refactorCode(task: TaskDefinition): Promise<any> {\r\n    const code = task.input?.code;\r\n    const goals = task.input?.goals || ['maintainability', 'performance'];\r\n    const preserveAPI = task.input?.preserveAPI || true;\r\n\r\n    this.logger.info('Refactoring code', {\r\n      goals,\r\n      preserveAPI,\r\n    });\r\n\r\n    const refactoring = {\r\n      originalFiles: [] as any[],\r\n      refactoredFiles: [] as any[],\r\n      changes: [] as string[],\r\n      improvements: {\r\n        maintainability: 0,\r\n        performance: 0,\r\n        readability: 0,\r\n        testability: 0,\r\n      },\r\n      breakingChanges: [] as any[],\r\n      migrationGuide: '',\r\n      testResults: {\r\n        passed: 0,\r\n        failed: 0,\r\n        coverage: 0,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate refactoring\r\n    await this.delay(4000);\r\n\r\n    refactoring.changes = [\r\n      'Extracted common functionality into utility functions',\r\n      'Improved error handling with custom error classes',\r\n      'Optimized database queries using connection pooling',\r\n      'Added comprehensive type definitions',\r\n    ];\r\n\r\n    refactoring.improvements = {\r\n      maintainability: 0.25,\r\n      performance: 0.15,\r\n      readability: 0.3,\r\n      testability: 0.2,\r\n    };\r\n\r\n    return refactoring;\r\n  }\r\n\r\n  private async writeTests(task: TaskDefinition): Promise<any> {\r\n    const code = task.input?.code;\r\n    const testType = task.input?.type || 'unit';\r\n    const coverage = task.input?.coverage || 80;\r\n    const framework = task.input?.framework || 'jest';\r\n\r\n    this.logger.info('Writing tests', {\r\n      testType,\r\n      coverage,\r\n      framework,\r\n    });\r\n\r\n    const testing = {\r\n      testType,\r\n      framework,\r\n      targetCoverage: coverage,\r\n      testFiles: [] as any[],\r\n      testSuites: [] as any[],\r\n      coverage: {\r\n        lines: 0,\r\n        functions: 0,\r\n        branches: 0,\r\n        statements: 0,\r\n      },\r\n      testResults: {\r\n        total: 0,\r\n        passed: 0,\r\n        failed: 0,\r\n        skipped: 0,\r\n      },\r\n      mockingStrategy: '',\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate test writing\r\n    await this.delay(2000);\r\n\r\n    testing.testFiles = [\r\n      {\r\n        path: 'tests/unit/service.test.ts',\r\n        content: this.generateTestCode('typescript', 'service tests'),\r\n        testCount: 12,\r\n      },\r\n      {\r\n        path: 'tests/integration/api.test.ts',\r\n        content: this.generateTestCode('typescript', 'API integration tests'),\r\n        testCount: 8,\r\n      },\r\n    ];\r\n\r\n    testing.coverage = {\r\n      lines: 87,\r\n      functions: 92,\r\n      branches: 78,\r\n      statements: 89,\r\n    };\r\n\r\n    testing.testResults = {\r\n      total: 20,\r\n      passed: 19,\r\n      failed: 1,\r\n      skipped: 0,\r\n    };\r\n\r\n    return testing;\r\n  }\r\n\r\n  private async debugCode(task: TaskDefinition): Promise<any> {\r\n    const code = task.input?.code;\r\n    const error = task.input?.error;\r\n    const symptoms = task.input?.symptoms || [];\r\n    const environment = task.input?.environment || 'development';\r\n\r\n    this.logger.info('Debugging code', {\r\n      error: error?.message,\r\n      symptoms,\r\n      environment,\r\n    });\r\n\r\n    const debugging = {\r\n      error,\r\n      symptoms,\r\n      environment,\r\n      investigation: [] as string[],\r\n      rootCause: '',\r\n      solution: '',\r\n      fixes: [] as any[],\r\n      preventionMeasures: [] as string[],\r\n      testCases: [] as any[],\r\n      confidence: 0,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate debugging\r\n    await this.delay(3500);\r\n\r\n    debugging.investigation = [\r\n      'Analyzed stack trace and error context',\r\n      'Reviewed recent code changes',\r\n      'Checked environment configuration',\r\n      'Examined dependency versions',\r\n    ];\r\n\r\n    debugging.rootCause = 'Race condition in async event handler';\r\n    debugging.solution = 'Implement proper synchronization using mutex';\r\n    debugging.confidence = 0.92;\r\n\r\n    return debugging;\r\n  }\r\n\r\n  private async developAPI(task: TaskDefinition): Promise<any> {\r\n    const spec = task.input?.spec;\r\n    const framework = task.input?.framework || 'express';\r\n    const database = task.input?.database || 'postgresql';\r\n    const auth = task.input?.auth || 'jwt';\r\n\r\n    this.logger.info('Developing API', {\r\n      framework,\r\n      database,\r\n      auth,\r\n    });\r\n\r\n    const api = {\r\n      framework,\r\n      database,\r\n      auth,\r\n      endpoints: [] as any[],\r\n      models: [] as any[],\r\n      middleware: [] as any[],\r\n      documentation: '',\r\n      security: {\r\n        authentication: auth,\r\n        authorization: 'rbac',\r\n        inputValidation: true,\r\n        rateLimiting: true,\r\n        cors: true,\r\n      },\r\n      testing: {\r\n        unit: true,\r\n        integration: true,\r\n        e2e: false,\r\n      },\r\n      deployment: {\r\n        containerized: true,\r\n        scalable: true,\r\n        monitoring: true,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate API development\r\n    await this.delay(5000);\r\n\r\n    api.endpoints = [\r\n      { method: 'GET', path: '/api/users', description: 'List users' },\r\n      { method: 'POST', path: '/api/users', description: 'Create user' },\r\n      { method: 'GET', path: '/api/users/:id', description: 'Get user by ID' },\r\n      { method: 'PUT', path: '/api/users/:id', description: 'Update user' },\r\n      { method: 'DELETE', path: '/api/users/:id', description: 'Delete user' },\r\n    ];\r\n\r\n    return api;\r\n  }\r\n\r\n  private async designDatabase(task: TaskDefinition): Promise<any> {\r\n    const requirements = task.input?.requirements;\r\n    const dbType = task.input?.type || 'relational';\r\n    const engine = task.input?.engine || 'postgresql';\r\n\r\n    this.logger.info('Designing database', {\r\n      dbType,\r\n      engine,\r\n    });\r\n\r\n    const design = {\r\n      type: dbType,\r\n      engine,\r\n      schema: {},\r\n      tables: [] as DatabaseTable[],\r\n      relationships: [],\r\n      indexes: [],\r\n      constraints: [],\r\n      migrations: [],\r\n      performance: {\r\n        queryOptimization: true,\r\n        indexingStrategy: 'balanced',\r\n        cachingLayer: 'redis',\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate database design\r\n    await this.delay(3000);\r\n\r\n    design.tables = [\r\n      { name: 'users', columns: ['id', 'email', 'password', 'created_at'] },\r\n      { name: 'posts', columns: ['id', 'user_id', 'title', 'content', 'created_at'] },\r\n      { name: 'comments', columns: ['id', 'post_id', 'user_id', 'content', 'created_at'] },\r\n    ];\r\n\r\n    return design;\r\n  }\r\n\r\n  private async optimizePerformance(task: TaskDefinition): Promise<any> {\r\n    const code = task.input?.code;\r\n    const metrics = task.input?.metrics;\r\n    const targets = task.input?.targets || ['speed', 'memory'];\r\n\r\n    this.logger.info('Optimizing performance', {\r\n      targets,\r\n    });\r\n\r\n    const optimization = {\r\n      targets,\r\n      analysis: {\r\n        bottlenecks: [] as string[],\r\n        hotspots: [] as string[],\r\n        recommendations: [] as string[],\r\n      },\r\n      optimizations: [],\r\n      results: {\r\n        speedImprovement: 0,\r\n        memoryReduction: 0,\r\n        throughputIncrease: 0,\r\n      },\r\n      tradeoffs: [],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate performance optimization\r\n    await this.delay(4000);\r\n\r\n    optimization.analysis.bottlenecks = [\r\n      'Database queries in loops',\r\n      'Large object instantiation',\r\n      'Inefficient algorithms',\r\n    ];\r\n\r\n    optimization.results = {\r\n      speedImprovement: 0.35,\r\n      memoryReduction: 0.22,\r\n      throughputIncrease: 0.45,\r\n    };\r\n\r\n    return optimization;\r\n  }\r\n\r\n  private async performGeneralDevelopment(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Performing general development', {\r\n      description: task.description,\r\n    });\r\n\r\n    // Default to code generation\r\n    return await this.generateCode(task);\r\n  }\r\n\r\n  // Helper methods\r\n  private getFileExtension(language: string): string {\r\n    const extensions = {\r\n      typescript: 'ts',\r\n      javascript: 'js',\r\n      python: 'py',\r\n      rust: 'rs',\r\n      go: 'go',\r\n      java: 'java',\r\n      cpp: 'cpp',\r\n      csharp: 'cs',\r\n      php: 'php',\r\n      ruby: 'rb',\r\n      swift: 'swift',\r\n      kotlin: 'kt',\r\n    };\r\n    return extensions[language as keyof typeof extensions] || 'txt';\r\n  }\r\n\r\n  private generateSampleCode(language: string, requirements: string): string {\r\n    const templates = {\r\n      typescript: `\r\n// ${requirements}\r\nexport class Application {\r\n  constructor() {\r\n    console.log('Application initialized');\r\n  }\r\n\r\n  public start(): void {\r\n    // Implementation here\r\n  }\r\n}\r\n`,\r\n      javascript: `\r\n// ${requirements}\r\nclass Application {\r\n  constructor() {\r\n    console.log('Application initialized');\r\n  }\r\n\r\n  start() {\r\n    // Implementation here\r\n  }\r\n}\r\n\r\nmodule.exports = Application;\r\n`,\r\n      python: `\r\n# ${requirements}\r\nclass Application:\r\n    def __init__(self):\r\n        print('Application initialized')\r\n    \r\n    def start(self):\r\n        # Implementation here\r\n        pass\r\n`,\r\n    };\r\n    return (\r\n      templates[language as keyof typeof templates] ||\r\n      `// ${requirements}\\n// Code implementation\\n`\r\n    );\r\n  }\r\n\r\n  private generateTypesCode(language: string): string {\r\n    if (language === 'typescript') {\r\n      return `\r\nexport interface User {\r\n  id: string;\r\n  email: string;\r\n  name: string;\r\n  createdAt: Date;\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  data: T;\r\n  success: boolean;\r\n  message?: string;\r\n}\r\n`;\r\n    }\r\n    return '// Type definitions\\n';\r\n  }\r\n\r\n  private generateTestCode(language: string, description: string): string {\r\n    const templates = {\r\n      typescript: `\r\nimport { Application } from '../src/main';\r\n\r\ndescribe('${description}', () => {\r\n  let app: Application;\r\n\r\n  beforeEach(() => {\r\n    app = new Application();\r\n  });\r\n\r\n  test('should initialize correctly', () => {\r\n    expect(app).toBeDefined();\r\n  });\r\n\r\n  test('should start successfully', () => {\r\n    expect(() => app.start()).not.toThrow();\r\n  });\r\n});\r\n`,\r\n      javascript: `\r\nconst Application = require('../src/main');\r\n\r\ndescribe('${description}', () => {\r\n  let app;\r\n\r\n  beforeEach(() => {\r\n    app = new Application();\r\n  });\r\n\r\n  test('should initialize correctly', () => {\r\n    expect(app).toBeDefined();\r\n  });\r\n\r\n  test('should start successfully', () => {\r\n    expect(() => app.start()).not.toThrow();\r\n  });\r\n});\r\n`,\r\n    };\r\n    return templates[language as keyof typeof templates] || `// Test code for ${description}\\n`;\r\n  }\r\n\r\n  private generateDocumentation(requirements: string, language: string): string {\r\n    return `\r\n# ${requirements}\r\n\r\n## Overview\r\nThis ${language} application implements the specified requirements.\r\n\r\n## Installation\r\n\\`\\`\\`bash\r\nnpm install\r\n\\`\\`\\`\r\n\r\n## Usage\r\n\\`\\`\\`${language}\r\n// Example usage\r\n\\`\\`\\`\r\n\r\n## API Reference\r\n- Method 1: Description\r\n- Method 2: Description\r\n\r\n## Testing\r\n\\`\\`\\`bash\r\nnpm test\r\n\\`\\`\\`\r\n`;\r\n  }\r\n\r\n  private suggestDependencies(language: string, framework?: string): string[] {\r\n    const baseDeps = {\r\n      typescript: ['typescript', '@types/node'],\r\n      javascript: ['lodash', 'axios'],\r\n      python: ['requests', 'pytest'],\r\n      rust: ['serde', 'tokio'],\r\n      go: ['gin', 'gorm'],\r\n    };\r\n\r\n    const frameworkDeps = {\r\n      express: ['express', 'cors', 'helmet'],\r\n      react: ['react', 'react-dom', '@types/react'],\r\n      vue: ['vue', 'vue-router'],\r\n      django: ['django', 'djangorestframework'],\r\n      spring: ['spring-boot', 'spring-data-jpa'],\r\n    };\r\n\r\n    const deps = baseDeps[language as keyof typeof baseDeps] || [];\r\n    if (framework && frameworkDeps[framework as keyof typeof frameworkDeps]) {\r\n      deps.push(...frameworkDeps[framework as keyof typeof frameworkDeps]);\r\n    }\r\n\r\n    return deps;\r\n  }\r\n\r\n  private generateBuildInstructions(language: string, framework?: string): string[] {\r\n    const instructions = {\r\n      typescript: ['npm install', 'npm run build', 'npm start'],\r\n      javascript: ['npm install', 'npm start'],\r\n      python: ['python -m pip install -r requirements.txt', 'python main.py'],\r\n      rust: ['cargo build --release', 'cargo run'],\r\n      go: ['go mod tidy', 'go build', './main'],\r\n    };\r\n\r\n    return (\r\n      instructions[language as keyof typeof instructions] || ['Build instructions not available']\r\n    );\r\n  }\r\n\r\n  private async delay(ms: number): Promise<void> {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  override getAgentStatus(): any {\r\n    return {\r\n      ...super.getAgentStatus(),\r\n      specialization: 'Software Development & Code Generation',\r\n      programmingLanguages: this.capabilities.languages,\r\n      frameworks: this.capabilities.frameworks,\r\n      currentProjects: this.getCurrentTasks().length,\r\n      averageDevelopmentTime: '15-30 minutes',\r\n      codeQualityScore: this.metrics.codeQuality,\r\n      testCoverage: this.metrics.testCoverage,\r\n      lastCodeGenerated: this.getLastTaskCompletedTime(),\r\n      preferredStyle: this.config.preferences?.codeStyle || 'functional',\r\n    };\r\n  }\r\n}\r\n\r\nexport const createCoderAgent = (\r\n  id: string,\r\n  config: Partial<AgentConfig>,\r\n  environment: Partial<AgentEnvironment>,\r\n  logger: ILogger,\r\n  eventBus: IEventBus,\r\n  memory: DistributedMemorySystem,\r\n): CoderAgent => {\r\n  const defaultConfig = {\r\n    autonomyLevel: 0.7,\r\n    learningEnabled: true,\r\n    adaptationEnabled: true,\r\n    maxTasksPerHour: 15,\r\n    maxConcurrentTasks: 2,\r\n    timeoutThreshold: 300000,\r\n    reportingInterval: 45000,\r\n    heartbeatInterval: 20000,\r\n    permissions: [\r\n      'file-read',\r\n      'file-write',\r\n      'directory-create',\r\n      'code-execution',\r\n      'package-management',\r\n      'git-operations',\r\n    ],\r\n    trustedAgents: [],\r\n    expertise: {\r\n      'code-generation': 0.95,\r\n      debugging: 0.9,\r\n      refactoring: 0.88,\r\n      testing: 0.85,\r\n      'performance-optimization': 0.87,\r\n    },\r\n    preferences: {\r\n      codingStyle: 'clean',\r\n      testingApproach: 'comprehensive',\r\n      documentationLevel: 'moderate',\r\n      refactoringFrequency: 'regular',\r\n    },\r\n  };\r\n  const defaultEnv = {\r\n    runtime: 'deno' as const,\r\n    version: '1.40.0',\r\n    workingDirectory: './agents/coder',\r\n    tempDirectory: './tmp/coder',\r\n    logDirectory: './logs/coder',\r\n    apiEndpoints: {},\r\n    credentials: {},\r\n    availableTools: ['git', 'editor', 'debugger', 'linter', 'formatter', 'compiler'],\r\n    toolConfigs: {\r\n      git: { autoCommit: false, autoSync: true },\r\n      linter: { strict: true, autoFix: true },\r\n      formatter: { style: 'prettier', tabSize: 2 },\r\n    },\r\n  };\r\n\r\n  return new CoderAgent(\r\n    id,\r\n    { ...defaultConfig, ...config } as AgentConfig,\r\n    { ...defaultEnv, ...environment } as AgentEnvironment,\r\n    logger,\r\n    eventBus,\r\n    memory,\r\n  );\r\n};\r\n"],"names":["BaseAgent","CoderAgent","id","config","environment","logger","eventBus","memory","getDefaultCapabilities","codeGeneration","codeReview","testing","documentation","research","analysis","webSearch","apiIntegration","fileSystem","terminalAccess","languages","frameworks","domains","tools","maxConcurrentTasks","maxMemoryUsage","maxExecutionTime","reliability","speed","quality","getDefaultConfig","autonomyLevel","learningEnabled","adaptationEnabled","maxTasksPerHour","timeoutThreshold","reportingInterval","heartbeatInterval","permissions","trustedAgents","expertise","debugging","refactoring","architecture","performance","preferences","codeStyle","testFramework","lintingStrict","errorHandling","executeTask","task","info","agentId","taskType","type","taskId","generateCode","reviewCode","refactorCode","writeTests","debugCode","developAPI","designDatabase","optimizePerformance","performGeneralDevelopment","error","Error","message","String","requirements","input","description","language","framework","style","result","files","tests","metrics","linesOfCode","complexity","testCoverage","dependencies","buildInstructions","timestamp","Date","store","status","startTime","tags","partition","delay","path","getFileExtension","content","generateSampleCode","generateTypesCode","generateTestCode","generateDocumentation","suggestDependencies","generateBuildInstructions","code","focus","filesCount","length","review","overallScore","issues","suggestions","maintainability","readability","security","testability","recommendations","priorityFixes","severity","file","line","suggestion","goals","preserveAPI","originalFiles","refactoredFiles","changes","improvements","breakingChanges","migrationGuide","testResults","passed","failed","coverage","testType","targetCoverage","testFiles","testSuites","lines","functions","branches","statements","total","skipped","mockingStrategy","testCount","symptoms","investigation","rootCause","solution","fixes","preventionMeasures","testCases","confidence","spec","database","auth","api","endpoints","models","middleware","authentication","authorization","inputValidation","rateLimiting","cors","unit","integration","e2e","deployment","containerized","scalable","monitoring","method","dbType","engine","design","schema","tables","relationships","indexes","constraints","migrations","queryOptimization","indexingStrategy","cachingLayer","name","columns","targets","optimization","bottlenecks","hotspots","optimizations","results","speedImprovement","memoryReduction","throughputIncrease","tradeoffs","extensions","typescript","javascript","python","rust","go","java","cpp","csharp","php","ruby","swift","kotlin","templates","baseDeps","frameworkDeps","express","react","vue","django","spring","deps","push","instructions","ms","Promise","resolve","setTimeout","getAgentStatus","specialization","programmingLanguages","capabilities","currentProjects","getCurrentTasks","averageDevelopmentTime","codeQualityScore","codeQuality","lastCodeGenerated","getLastTaskCompletedTime","preferredStyle","createCoderAgent","defaultConfig","codingStyle","testingApproach","documentationLevel","refactoringFrequency","defaultEnv","runtime","version","workingDirectory","tempDirectory","logDirectory","apiEndpoints","credentials","availableTools","toolConfigs","git","autoCommit","autoSync","linter","strict","autoFix","formatter","tabSize"],"mappings":"AAIA,SAASA,SAAS,QAAQ,kBAAkB;AA6B5C,OAAO,MAAMC,mBAAmBD;IAC9B,YACEE,EAAU,EACVC,MAAmB,EACnBC,WAA6B,EAC7BC,MAAe,EACfC,QAAmB,EACnBC,MAA+B,CAC/B;QACA,KAAK,CAACL,IAAI,SAASC,QAAQC,aAAaC,QAAQC,UAAUC;IAC5D;IAEUC,yBAA4C;QACpD,OAAO;YACLC,gBAAgB;YAChBC,YAAY;YACZC,SAAS;YACTC,eAAe;YACfC,UAAU;YACVC,UAAU;YACVC,WAAW;YACXC,gBAAgB;YAChBC,YAAY;YACZC,gBAAgB;YAChBC,WAAW;gBACT;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;aACD;YACDC,YAAY;gBACV;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;aACD;YACDC,SAAS;gBACP;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;aACD;YACDC,OAAO;gBACL;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;aACD;YACDC,oBAAoB;YACpBC,gBAAgB,OAAO,OAAO;YAC9BC,kBAAkB;YAClBC,aAAa;YACbC,OAAO;YACPC,SAAS;QACX;IACF;IAEUC,mBAAyC;QACjD,OAAO;YACLC,eAAe;YACfC,iBAAiB;YACjBC,mBAAmB;YACnBC,iBAAiB;YACjBV,oBAAoB;YACpBW,kBAAkB;YAClBC,mBAAmB;YACnBC,mBAAmB;YACnBC,aAAa;gBACX;gBACA;gBACA;gBACA;gBACA;gBACA;aACD;YACDC,eAAe,EAAE;YACjBC,WAAW;gBACT,mBAAmB;gBACnBC,WAAW;gBACX7B,SAAS;gBACT8B,aAAa;gBACbC,cAAc;gBACdC,aAAa;YACf;YACAC,aAAa;gBACXC,WAAW;gBACXC,eAAe;gBACfC,eAAe;gBACfnC,eAAe;gBACfoC,eAAe;YACjB;QACF;IACF;IAEA,MAAeC,YAAYC,IAAoB,EAAgB;QA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"}