{"version":3,"sources":["../../../../src/cli/simple-commands/migrate-hooks.js"],"sourcesContent":["#!/usr/bin/env node\r\n\r\n/**\r\n * CLI command wrapper for migrate-hooks script\r\n */\r\n\r\nimport { execSync } from 'child_process';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\nimport { promises as fs } from 'fs';\r\n\r\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\r\n\r\nexport async function migrateHooksCommand(flags, args) {\r\n  console.log('üîÑ Claude Flow Hooks Migration\\n');\r\n\r\n  try {\r\n    // Find the migration script\r\n    const scriptPath = path.join(__dirname, '../../../scripts/migrate-hooks.js');\r\n\r\n    // Check if script exists\r\n    try {\r\n      await fs.access(scriptPath);\r\n    } catch {\r\n      console.error('‚ùå Migration script not found. Please ensure you have the latest version.');\r\n      process.exit(1);\r\n    }\r\n\r\n    // Build command with any additional arguments\r\n    const command = ['node', scriptPath];\r\n    if (args.length > 0) {\r\n      command.push(...args);\r\n    }\r\n\r\n    // Execute the migration script\r\n    execSync(command.join(' '), {\r\n      stdio: 'inherit',\r\n      cwd: process.cwd(),\r\n    });\r\n  } catch (error) {\r\n    console.error('‚ùå Migration failed:', error.message);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\n// Export the command configuration\r\nexport const migrateHooksCommandConfig = {\r\n  handler: migrateHooksCommand,\r\n  description: 'Migrate settings.json hooks to Claude Code 1.0.51+ format',\r\n  usage: 'migrate-hooks [settings-file]',\r\n  examples: [\r\n    'claude-flow migrate-hooks                    # Migrate all found settings.json files',\r\n    'claude-flow migrate-hooks .claude/settings.json  # Migrate specific file',\r\n  ],\r\n  details: `\r\nMigrates old hooks format to new Claude Code 1.0.51+ format:\r\n  ‚Ä¢ Converts object-based hooks to array-based format\r\n  ‚Ä¢ Creates backup before making changes\r\n  ‚Ä¢ Removes unsupported fields (mcpServers, features, performance)\r\n  ‚Ä¢ Searches common locations if no file specified\r\n\r\nThe migration is safe and creates backups of original files.`,\r\n};\r\n"],"names":["execSync","path","fileURLToPath","promises","fs","__dirname","dirname","url","migrateHooksCommand","flags","args","console","log","scriptPath","join","access","error","process","exit","command","length","push","stdio","cwd","message","migrateHooksCommandConfig","handler","description","usage","examples","details"],"mappings":";AAMA,SAASA,QAAQ,QAAQ,gBAAgB;AACzC,OAAOC,UAAU,OAAO;AACxB,SAASC,aAAa,QAAQ,MAAM;AACpC,SAASC,YAAYC,EAAE,QAAQ,KAAK;AAEpC,MAAMC,YAAYJ,KAAKK,OAAO,CAACJ,cAAc,YAAYK,GAAG;AAE5D,OAAO,eAAeC,oBAAoBC,KAAK,EAAEC,IAAI;IACnDC,QAAQC,GAAG,CAAC;IAEZ,IAAI;QAEF,MAAMC,aAAaZ,KAAKa,IAAI,CAACT,WAAW;QAGxC,IAAI;YACF,MAAMD,GAAGW,MAAM,CAACF;QAClB,EAAE,OAAM;YACNF,QAAQK,KAAK,CAAC;YACdC,QAAQC,IAAI,CAAC;QACf;QAGA,MAAMC,UAAU;YAAC;YAAQN;SAAW;QACpC,IAAIH,KAAKU,MAAM,GAAG,GAAG;YACnBD,QAAQE,IAAI,IAAIX;QAClB;QAGAV,SAASmB,QAAQL,IAAI,CAAC,MAAM;YAC1BQ,OAAO;YACPC,KAAKN,QAAQM,GAAG;QAClB;IACF,EAAE,OAAOP,OAAO;QACdL,QAAQK,KAAK,CAAC,uBAAuBA,MAAMQ,OAAO;QAClDP,QAAQC,IAAI,CAAC;IACf;AACF;AAGA,OAAO,MAAMO,4BAA4B;IACvCC,SAASlB;IACTmB,aAAa;IACbC,OAAO;IACPC,UAAU;QACR;QACA;KACD;IACDC,SAAS,CAAC;;;;;;;4DAOgD,CAAC;AAC7D,EAAE"}