{"version":3,"sources":["../../../src/utils/errors.ts"],"sourcesContent":["/**\r\n * Custom error types for Claude-Flow\r\n */\r\n\r\n/**\r\n * Base error class for all Claude-Flow errors\r\n */\r\nexport class ClaudeFlowError extends Error {\r\n  constructor(\r\n    message: string,\r\n    public readonly code: string,\r\n    public readonly details?: unknown,\r\n  ) {\r\n    super(message);\r\n    this.name = 'ClaudeFlowError';\r\n    Error.captureStackTrace(this, this.constructor);\r\n  }\r\n\r\n  toJSON() {\r\n    return {\r\n      name: this.name,\r\n      message: this.message,\r\n      code: this.code,\r\n      details: this.details,\r\n      stack: this.stack,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Terminal-related errors\r\n */\r\nexport class TerminalError extends ClaudeFlowError {\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, 'TERMINAL_ERROR', details);\r\n    this.name = 'TerminalError';\r\n  }\r\n}\r\n\r\nexport class TerminalSpawnError extends TerminalError {\r\n  override readonly code = 'TERMINAL_SPAWN_ERROR';\r\n\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, details);\r\n  }\r\n}\r\n\r\nexport class TerminalCommandError extends TerminalError {\r\n  override readonly code = 'TERMINAL_COMMAND_ERROR';\r\n\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, details);\r\n  }\r\n}\r\n\r\n/**\r\n * Memory-related errors\r\n */\r\nexport class MemoryError extends ClaudeFlowError {\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, 'MEMORY_ERROR', details);\r\n    this.name = 'MemoryError';\r\n  }\r\n}\r\n\r\nexport class MemoryBackendError extends MemoryError {\r\n  override readonly code = 'MEMORY_BACKEND_ERROR';\r\n\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, details);\r\n  }\r\n}\r\n\r\nexport class MemoryConflictError extends MemoryError {\r\n  override readonly code = 'MEMORY_CONFLICT_ERROR';\r\n\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, details);\r\n  }\r\n}\r\n\r\n/**\r\n * Coordination-related errors\r\n */\r\nexport class CoordinationError extends ClaudeFlowError {\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, 'COORDINATION_ERROR', details);\r\n    this.name = 'CoordinationError';\r\n  }\r\n}\r\n\r\nexport class DeadlockError extends CoordinationError {\r\n  override readonly code = 'DEADLOCK_ERROR';\r\n\r\n  constructor(\r\n    message: string,\r\n    public readonly agents: string[],\r\n    public readonly resources: string[],\r\n  ) {\r\n    super(message, { agents, resources });\r\n  }\r\n}\r\n\r\nexport class ResourceLockError extends CoordinationError {\r\n  override readonly code = 'RESOURCE_LOCK_ERROR';\r\n\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, details);\r\n  }\r\n}\r\n\r\n/**\r\n * MCP-related errors\r\n */\r\nexport class MCPError extends ClaudeFlowError {\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, 'MCP_ERROR', details);\r\n    this.name = 'MCPError';\r\n  }\r\n}\r\n\r\nexport class MCPTransportError extends MCPError {\r\n  override readonly code = 'MCP_TRANSPORT_ERROR';\r\n\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, details);\r\n  }\r\n}\r\n\r\nexport class MCPMethodNotFoundError extends MCPError {\r\n  override readonly code = 'MCP_METHOD_NOT_FOUND';\r\n\r\n  constructor(method: string) {\r\n    super(`Method not found: ${method}`, { method });\r\n  }\r\n}\r\n\r\n/**\r\n * Configuration errors\r\n */\r\nexport class ConfigError extends ClaudeFlowError {\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, 'CONFIG_ERROR', details);\r\n    this.name = 'ConfigError';\r\n  }\r\n}\r\n\r\nexport class ValidationError extends ConfigError {\r\n  override readonly code = 'VALIDATION_ERROR';\r\n\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, details);\r\n  }\r\n}\r\n\r\n/**\r\n * Task-related errors\r\n */\r\nexport class TaskError extends ClaudeFlowError {\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, 'TASK_ERROR', details);\r\n    this.name = 'TaskError';\r\n  }\r\n}\r\n\r\nexport class TaskTimeoutError extends TaskError {\r\n  override readonly code = 'TASK_TIMEOUT_ERROR';\r\n\r\n  constructor(taskId: string, timeout: number) {\r\n    super(`Task ${taskId} timed out after ${timeout}ms`, { taskId, timeout });\r\n  }\r\n}\r\n\r\nexport class TaskDependencyError extends TaskError {\r\n  override readonly code = 'TASK_DEPENDENCY_ERROR';\r\n\r\n  constructor(taskId: string, dependencies: string[]) {\r\n    super(`Task ${taskId} has unmet dependencies`, { taskId, dependencies });\r\n  }\r\n}\r\n\r\n/**\r\n * System errors\r\n */\r\nexport class SystemError extends ClaudeFlowError {\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, 'SYSTEM_ERROR', details);\r\n    this.name = 'SystemError';\r\n  }\r\n}\r\n\r\nexport class InitializationError extends SystemError {\r\n  override readonly code = 'INITIALIZATION_ERROR';\r\n\r\n  constructor(componentOrMessage: string, details?: unknown) {\r\n    // If the message already contains the word \"initialize\", use it as-is\r\n    const message = componentOrMessage.includes('initialize')\r\n      ? componentOrMessage\r\n      : `Failed to initialize ${componentOrMessage}`;\r\n    super(\r\n      message,\r\n      details ? { component: componentOrMessage, ...details } : { component: componentOrMessage },\r\n    );\r\n  }\r\n}\r\n\r\nexport class ShutdownError extends SystemError {\r\n  override readonly code = 'SHUTDOWN_ERROR';\r\n\r\n  constructor(message: string, details?: unknown) {\r\n    super(message, details);\r\n  }\r\n}\r\n\r\n/**\r\n * Error utilities\r\n */\r\nexport function isClaudeFlowError(error: unknown): error is ClaudeFlowError {\r\n  return error instanceof ClaudeFlowError;\r\n}\r\n\r\nexport function formatError(error: unknown): string {\r\n  if (error instanceof Error) {\r\n    return `${error.name}: ${error.message}`;\r\n  }\r\n  return String(error);\r\n}\r\n\r\nexport function getErrorDetails(error: unknown): unknown {\r\n  if (isClaudeFlowError(error)) {\r\n    return error.details;\r\n  }\r\n  return undefined;\r\n}\r\n"],"names":["ClaudeFlowError","Error","message","code","details","name","captureStackTrace","toJSON","stack","TerminalError","TerminalSpawnError","TerminalCommandError","MemoryError","MemoryBackendError","MemoryConflictError","CoordinationError","DeadlockError","agents","resources","ResourceLockError","MCPError","MCPTransportError","MCPMethodNotFoundError","method","ConfigError","ValidationError","TaskError","TaskTimeoutError","taskId","timeout","TaskDependencyError","dependencies","SystemError","InitializationError","componentOrMessage","includes","component","ShutdownError","isClaudeFlowError","error","formatError","String","getErrorDetails","undefined"],"mappings":"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"}