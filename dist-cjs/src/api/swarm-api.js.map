{"version":3,"sources":["../../../src/api/swarm-api.ts"],"sourcesContent":["/**\r\n * Swarm API - RESTful API for swarm coordination and management\r\n * Provides HTTP endpoints for swarm operations, agent management, and task orchestration\r\n */\r\n\r\nimport { Router } from 'express';\r\nimport { ILogger } from '../core/logger.js';\r\nimport { ClaudeAPIClient } from './claude-client.js';\r\nimport { ConfigManager } from '../config/config-manager.js';\r\nimport { ICoordinationManager } from '../coordination/manager.js';\r\nimport { SwarmCoordinator } from '../swarm/coordinator.js';\r\nimport { AgentManager } from '../agents/agent-manager.js';\r\nimport { ResourceManager } from '../resources/resource-manager.js';\r\nimport { SwarmConfig } from '../utils/types.js';\r\nimport { ValidationError, SwarmError } from '../utils/errors.js';\r\nimport { nanoid } from 'nanoid';\r\n\r\nexport interface SwarmApiConfig {\r\n  rateLimit: {\r\n    windowMs: number;\r\n    maxRequests: number;\r\n  };\r\n  authentication: {\r\n    enabled: boolean;\r\n    apiKeys?: string[];\r\n    jwtSecret?: string;\r\n  };\r\n  cors: {\r\n    origins: string[];\r\n    methods: string[];\r\n  };\r\n  swagger: {\r\n    enabled: boolean;\r\n    title: string;\r\n    version: string;\r\n    description: string;\r\n  };\r\n}\r\n\r\nexport interface SwarmCreateRequest {\r\n  name: string;\r\n  topology: 'hierarchical' | 'mesh' | 'ring' | 'star';\r\n  maxAgents?: number;\r\n  strategy?: 'balanced' | 'specialized' | 'adaptive';\r\n  config?: Partial<SwarmConfig>;\r\n}\r\n\r\nexport interface AgentSpawnRequest {\r\n  type: string;\r\n  name?: string;\r\n  capabilities?: string[];\r\n  config?: Record<string, unknown>;\r\n}\r\n\r\nexport interface TaskOrchestrationRequest {\r\n  task: string;\r\n  priority?: 'low' | 'medium' | 'high' | 'critical';\r\n  strategy?: 'parallel' | 'sequential' | 'adaptive';\r\n  maxAgents?: number;\r\n  requirements?: string[];\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\nexport interface SwarmMetrics {\r\n  swarmId: string;\r\n  agentCount: number;\r\n  activeTasks: number;\r\n  completedTasks: number;\r\n  failedTasks: number;\r\n  averageResponseTime: number;\r\n  resourceUtilization: Record<string, number>;\r\n  healthScore: number;\r\n}\r\n\r\n/**\r\n * Swarm API implementation\r\n */\r\nexport class SwarmApi {\r\n  private router: Router;\r\n  private swarms = new Map<string, SwarmCoordinator>();\r\n\r\n  constructor(\r\n    private config: SwarmApiConfig,\r\n    private logger: ILogger,\r\n    private claudeClient: ClaudeAPIClient,\r\n    private configManager: ConfigManager,\r\n    private coordinationManager: ICoordinationManager,\r\n    private agentManager: AgentManager,\r\n    private resourceManager: ResourceManager,\r\n  ) {\r\n    this.router = Router();\r\n    this.setupRoutes();\r\n    this.setupMiddleware();\r\n  }\r\n\r\n  getRouter(): Router {\r\n    return this.router;\r\n  }\r\n\r\n  private setupMiddleware(): void {\r\n    // Request logging\r\n    this.router.use((req, res, next) => {\r\n      this.logger.info('Swarm API request', {\r\n        method: req.method,\r\n        path: req.path,\r\n        ip: req.ip,\r\n        userAgent: req.get('User-Agent'),\r\n      });\r\n      next();\r\n    });\r\n\r\n    // Request validation\r\n    this.router.use((req, res, next) => {\r\n      if (req.method === 'POST' || req.method === 'PUT') {\r\n        if (!req.body) {\r\n          return res.status(400).json({\r\n            error: 'Request body is required',\r\n            code: 'MISSING_BODY',\r\n          });\r\n        }\r\n      }\r\n      next();\r\n    });\r\n\r\n    // Error handling\r\n    this.router.use((err: Error, req: any, res: any, _next: any) => {\r\n      this.logger.error('Swarm API error', {\r\n        error: err.message,\r\n        stack: err.stack,\r\n        method: req.method,\r\n        path: req.path,\r\n      });\r\n\r\n      if (err instanceof ValidationError) {\r\n        return res.status(400).json({\r\n          error: err.message,\r\n          code: 'VALIDATION_ERROR',\r\n          details: err.details,\r\n        });\r\n      }\r\n\r\n      if (err instanceof SwarmError) {\r\n        return res.status(409).json({\r\n          error: err.message,\r\n          code: 'SWARM_ERROR',\r\n          details: err.details,\r\n        });\r\n      }\r\n\r\n      res.status(500).json({\r\n        error: 'Internal server error',\r\n        code: 'INTERNAL_ERROR',\r\n      });\r\n    });\r\n  }\r\n\r\n  private setupRoutes(): void {\r\n    // Health check\r\n    this.router.get('/health', async (req, res) => {\r\n      try {\r\n        const health = await this.getSystemHealth();\r\n        res.json(health);\r\n      } catch (error) {\r\n        res.status(500).json({\r\n          healthy: false,\r\n          error: error instanceof Error ? error.message : 'Unknown error',\r\n        });\r\n      }\r\n    });\r\n\r\n    // Swarm management\r\n    this.router.post('/swarms', this.createSwarm.bind(this));\r\n    this.router.get('/swarms', this.listSwarms.bind(this));\r\n    this.router.get('/swarms/:swarmId', this.getSwarm.bind(this));\r\n    this.router.delete('/swarms/:swarmId', this.destroySwarm.bind(this));\r\n    this.router.post('/swarms/:swarmId/scale', this.scaleSwarm.bind(this));\r\n\r\n    // Agent management\r\n    this.router.post('/swarms/:swarmId/agents', this.spawnAgent.bind(this));\r\n    this.router.get('/swarms/:swarmId/agents', this.listAgents.bind(this));\r\n    this.router.get('/swarms/:swarmId/agents/:agentId', this.getAgent.bind(this));\r\n    this.router.delete('/swarms/:swarmId/agents/:agentId', this.terminateAgent.bind(this));\r\n\r\n    // Task orchestration\r\n    this.router.post('/swarms/:swarmId/tasks', this.orchestrateTask.bind(this));\r\n    this.router.get('/swarms/:swarmId/tasks', this.listTasks.bind(this));\r\n    this.router.get('/swarms/:swarmId/tasks/:taskId', this.getTask.bind(this));\r\n    this.router.delete('/swarms/:swarmId/tasks/:taskId', this.cancelTask.bind(this));\r\n\r\n    // Metrics and monitoring\r\n    this.router.get('/swarms/:swarmId/metrics', this.getSwarmMetrics.bind(this));\r\n    this.router.get('/swarms/:swarmId/status', this.getSwarmStatus.bind(this));\r\n    this.router.get('/system/metrics', this.getSystemMetrics.bind(this));\r\n  }\r\n\r\n  private async createSwarm(req: any, res: any): Promise<void> {\r\n    try {\r\n      const request = req.body as SwarmCreateRequest;\r\n      \r\n      // Validate request\r\n      if (!request.name || !request.topology) {\r\n        return res.status(400).json({\r\n          error: 'Name and topology are required',\r\n          code: 'VALIDATION_ERROR',\r\n        });\r\n      }\r\n\r\n      // Create swarm configuration\r\n      const swarmConfig: SwarmConfig = {\r\n        name: request.name,\r\n        topology: request.topology,\r\n        maxAgents: request.maxAgents || 8,\r\n        strategy: request.strategy || 'balanced',\r\n        ...request.config,\r\n      };\r\n\r\n      // Generate swarm ID\r\n      const swarmId = `swarm_${Date.now()}_${nanoid(10)}`;\r\n\r\n      // Create swarm coordinator\r\n      const swarm = new SwarmCoordinator(\r\n        swarmId,\r\n        swarmConfig,\r\n        this.logger,\r\n        this.claudeClient,\r\n        this.configManager,\r\n        this.coordinationManager,\r\n        this.agentManager,\r\n        this.resourceManager,\r\n      );\r\n\r\n      // Initialize swarm\r\n      await swarm.initialize();\r\n\r\n      // Store swarm\r\n      this.swarms.set(swarmId, swarm);\r\n\r\n      this.logger.info('Swarm created', {\r\n        swarmId,\r\n        name: request.name,\r\n        topology: request.topology,\r\n      });\r\n\r\n      res.status(201).json({\r\n        swarmId,\r\n        name: request.name,\r\n        topology: request.topology,\r\n        maxAgents: swarmConfig.maxAgents,\r\n        strategy: swarmConfig.strategy,\r\n        status: 'active',\r\n        createdAt: new Date().toISOString(),\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async listSwarms(req: any, res: any): Promise<void> {\r\n    try {\r\n      const swarmList = Array.from(this.swarms.entries()).map(([swarmId, swarm]) => ({\r\n        swarmId,\r\n        name: swarm.getConfig().name,\r\n        topology: swarm.getConfig().topology,\r\n        agentCount: swarm.getAgentCount(),\r\n        status: swarm.getStatus(),\r\n        createdAt: swarm.getCreatedAt(),\r\n      }));\r\n\r\n      res.json({\r\n        swarms: swarmList,\r\n        total: swarmList.length,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async getSwarm(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const config = swarm.getConfig();\r\n      const status = swarm.getStatus();\r\n      const agents = await swarm.getAgents();\r\n      const metrics = await swarm.getMetrics();\r\n\r\n      res.json({\r\n        swarmId,\r\n        config,\r\n        status,\r\n        agents: agents.map(agent => ({\r\n          id: agent.id,\r\n          type: agent.type,\r\n          name: agent.name,\r\n          status: agent.status,\r\n          capabilities: agent.capabilities,\r\n        })),\r\n        metrics,\r\n        createdAt: swarm.getCreatedAt(),\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async destroySwarm(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      await swarm.destroy();\r\n      this.swarms.delete(swarmId);\r\n\r\n      this.logger.info('Swarm destroyed', { swarmId });\r\n\r\n      res.json({\r\n        message: 'Swarm destroyed successfully',\r\n        swarmId,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async scaleSwarm(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const { targetSize } = req.body;\r\n\r\n      if (!targetSize || targetSize < 1) {\r\n        return res.status(400).json({\r\n          error: 'Valid targetSize is required',\r\n          code: 'VALIDATION_ERROR',\r\n        });\r\n      }\r\n\r\n      const swarm = this.swarms.get(swarmId);\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      await swarm.scale(targetSize);\r\n\r\n      res.json({\r\n        message: 'Swarm scaled successfully',\r\n        swarmId,\r\n        newSize: targetSize,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async spawnAgent(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const request = req.body as AgentSpawnRequest;\r\n\r\n      if (!request.type) {\r\n        return res.status(400).json({\r\n          error: 'Agent type is required',\r\n          code: 'VALIDATION_ERROR',\r\n        });\r\n      }\r\n\r\n      const swarm = this.swarms.get(swarmId);\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const agent = await swarm.spawnAgent({\r\n        type: request.type,\r\n        name: request.name,\r\n        capabilities: request.capabilities || [],\r\n        config: request.config,\r\n      });\r\n\r\n      res.status(201).json({\r\n        agent: {\r\n          id: agent.id,\r\n          type: agent.type,\r\n          name: agent.name,\r\n          status: agent.status,\r\n          capabilities: agent.capabilities,\r\n        },\r\n        swarmId,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async orchestrateTask(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const request = req.body as TaskOrchestrationRequest;\r\n\r\n      if (!request.task) {\r\n        return res.status(400).json({\r\n          error: 'Task description is required',\r\n          code: 'VALIDATION_ERROR',\r\n        });\r\n      }\r\n\r\n      const swarm = this.swarms.get(swarmId);\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const task = await swarm.orchestrateTask({\r\n        description: request.task,\r\n        priority: request.priority || 'medium',\r\n        strategy: request.strategy || 'adaptive',\r\n        maxAgents: request.maxAgents,\r\n        requirements: request.requirements,\r\n        metadata: request.metadata,\r\n      });\r\n\r\n      res.status(201).json({\r\n        task: {\r\n          id: task.id,\r\n          description: task.description,\r\n          status: task.status,\r\n          priority: task.priority,\r\n          strategy: task.strategy,\r\n        },\r\n        swarmId,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async getSwarmMetrics(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const metrics = await swarm.getMetrics();\r\n      res.json(metrics);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async getSwarmStatus(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const status = await swarm.getDetailedStatus();\r\n      res.json(status);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async getSystemHealth(): Promise<{\r\n    healthy: boolean;\r\n    services: Record<string, { healthy: boolean; error?: string }>;\r\n    metrics: Record<string, number>;\r\n  }> {\r\n    const services: Record<string, { healthy: boolean; error?: string }> = {};\r\n    let allHealthy = true;\r\n\r\n    // Check Claude API health\r\n    const claudeHealth = this.claudeClient.getHealthStatus();\r\n    services.claude = {\r\n      healthy: claudeHealth?.healthy || false,\r\n      error: claudeHealth?.error,\r\n    };\r\n    allHealthy = allHealthy && services.claude.healthy;\r\n\r\n    // Check coordination manager health\r\n    const coordHealth = await this.coordinationManager.getHealthStatus();\r\n    services.coordination = {\r\n      healthy: coordHealth.healthy,\r\n      error: coordHealth.error,\r\n    };\r\n    allHealthy = allHealthy && services.coordination.healthy;\r\n\r\n    // Check agent manager health\r\n    const agentHealth = await this.agentManager.getHealthStatus();\r\n    services.agents = {\r\n      healthy: agentHealth.healthy,\r\n      error: agentHealth.error,\r\n    };\r\n    allHealthy = allHealthy && services.agents.healthy;\r\n\r\n    // Collect metrics\r\n    const metrics = {\r\n      totalSwarms: this.swarms.size,\r\n      ...coordHealth.metrics,\r\n      ...agentHealth.metrics,\r\n    };\r\n\r\n    return {\r\n      healthy: allHealthy,\r\n      services,\r\n      metrics,\r\n    };\r\n  }\r\n\r\n  private async getSystemMetrics(req: any, res: any): Promise<void> {\r\n    try {\r\n      const systemMetrics = await this.getSystemHealth();\r\n      const swarmMetrics = await Promise.all(\r\n        Array.from(this.swarms.values()).map(async (swarm) => {\r\n          const metrics = await swarm.getMetrics();\r\n          return {\r\n            swarmId: swarm.getId(),\r\n            ...metrics,\r\n          };\r\n        }),\r\n      );\r\n\r\n      res.json({\r\n        system: systemMetrics,\r\n        swarms: swarmMetrics,\r\n        timestamp: new Date().toISOString(),\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // Additional helper methods\r\n  private async listAgents(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const agents = await swarm.getAgents();\r\n      res.json({\r\n        agents: agents.map(agent => ({\r\n          id: agent.id,\r\n          type: agent.type,\r\n          name: agent.name,\r\n          status: agent.status,\r\n          capabilities: agent.capabilities,\r\n          createdAt: agent.createdAt,\r\n        })),\r\n        total: agents.length,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async getAgent(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId, agentId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const agent = await swarm.getAgent(agentId);\r\n      if (!agent) {\r\n        return res.status(404).json({\r\n          error: 'Agent not found',\r\n          code: 'AGENT_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      res.json(agent);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async terminateAgent(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId, agentId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      await swarm.terminateAgent(agentId);\r\n      res.json({\r\n        message: 'Agent terminated successfully',\r\n        agentId,\r\n        swarmId,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async listTasks(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const tasks = await swarm.getTasks();\r\n      res.json({\r\n        tasks: tasks.map(task => ({\r\n          id: task.id,\r\n          description: task.description,\r\n          status: task.status,\r\n          priority: task.priority,\r\n          assignedTo: task.assignedTo,\r\n          createdAt: task.createdAt,\r\n          completedAt: task.completedAt,\r\n        })),\r\n        total: tasks.length,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async getTask(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId, taskId } = req.params;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      const task = await swarm.getTask(taskId);\r\n      if (!task) {\r\n        return res.status(404).json({\r\n          error: 'Task not found',\r\n          code: 'TASK_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      res.json(task);\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async cancelTask(req: any, res: any): Promise<void> {\r\n    try {\r\n      const { swarmId, taskId } = req.params;\r\n      const { reason } = req.body;\r\n      const swarm = this.swarms.get(swarmId);\r\n\r\n      if (!swarm) {\r\n        return res.status(404).json({\r\n          error: 'Swarm not found',\r\n          code: 'SWARM_NOT_FOUND',\r\n        });\r\n      }\r\n\r\n      await swarm.cancelTask(taskId, reason || 'User requested cancellation');\r\n      res.json({\r\n        message: 'Task cancelled successfully',\r\n        taskId,\r\n        swarmId,\r\n      });\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clean up resources\r\n   */\r\n  async destroy(): Promise<void> {\r\n    this.logger.info('Destroying Swarm API');\r\n\r\n    // Destroy all swarms\r\n    for (const [swarmId, swarm] of this.swarms) {\r\n      try {\r\n        await swarm.destroy();\r\n      } catch (error) {\r\n        this.logger.error('Error destroying swarm', { swarmId, error });\r\n      }\r\n    }\r\n\r\n    this.swarms.clear();\r\n  }\r\n}"],"names":["Router","SwarmCoordinator","ValidationError","SwarmError","nanoid","SwarmApi","router","swarms","Map","config","logger","claudeClient","configManager","coordinationManager","agentManager","resourceManager","setupRoutes","setupMiddleware","getRouter","use","req","res","next","info","method","path","ip","userAgent","get","body","status","json","error","code","err","_next","message","stack","details","health","getSystemHealth","healthy","Error","post","createSwarm","bind","listSwarms","getSwarm","delete","destroySwarm","scaleSwarm","spawnAgent","listAgents","getAgent","terminateAgent","orchestrateTask","listTasks","getTask","cancelTask","getSwarmMetrics","getSwarmStatus","getSystemMetrics","request","name","topology","swarmConfig","maxAgents","strategy","swarmId","Date","now","swarm","initialize","set","createdAt","toISOString","swarmList","Array","from","entries","map","getConfig","agentCount","getAgentCount","getStatus","getCreatedAt","total","length","params","agents","getAgents","metrics","getMetrics","agent","id","type","capabilities","destroy","targetSize","scale","newSize","task","description","priority","requirements","metadata","getDetailedStatus","services","allHealthy","claudeHealth","getHealthStatus","claude","coordHealth","coordination","agentHealth","totalSwarms","size","systemMetrics","swarmMetrics","Promise","all","values","getId","system","timestamp","agentId","tasks","getTasks","assignedTo","completedAt","taskId","reason","clear"],"mappings":"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"}