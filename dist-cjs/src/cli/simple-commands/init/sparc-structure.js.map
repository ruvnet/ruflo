{"version":3,"sources":["../../../../../src/cli/simple-commands/init/sparc-structure.js"],"sourcesContent":["// sparc-structure.js - Create SPARC development structure\r\n\r\nimport { createBasicRoomodesConfig } from './sparc/roomodes-config.js';\r\nimport { errors } from '../../node-compat.js';\r\nimport { promises as fs } from 'fs';\r\nimport { createBasicSparcWorkflow } from './sparc/workflows.js';\r\nimport { createRooReadme } from './sparc/roo-readme.js';\r\nimport { createClaudeSlashCommands } from './claude-commands/slash-commands.js';\r\nimport { cwd } from '../../node-compat.js';\r\nimport process from 'process';\r\n\r\n// Helper function to create SPARC structure manually\r\nexport async function createSparcStructureManually() {\r\n  try {\r\n    // Ensure we're in the working directory\r\n    const workingDir = process.env.PWD || cwd();\r\n\r\n    // Create .roo directory structure in working directory (legacy support)\r\n    const rooDirectories = [\r\n      `${workingDir}/.roo`,\r\n      `${workingDir}/.roo/templates`,\r\n      `${workingDir}/.roo/workflows`,\r\n      `${workingDir}/.roo/modes`,\r\n      `${workingDir}/.roo/configs`,\r\n    ];\r\n\r\n    for (const dir of rooDirectories) {\r\n      try {\r\n        await fs.mkdir(dir, { recursive: true });\r\n        console.log(`  ✓ Created ${dir}/`);\r\n      } catch (err) {\r\n        if (!(err instanceof errors.AlreadyExists)) {\r\n          throw err;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Create .roomodes file (copy from existing if available, or create basic version)\r\n    let roomodesContent;\r\n    try {\r\n      // Check if .roomodes already exists and read it\r\n      roomodesContent = await fs.readFile(`${workingDir}/.roomodes`, 'utf8');\r\n      console.log('  ✓ Using existing .roomodes configuration');\r\n    } catch {\r\n      // Create basic .roomodes configuration\r\n      roomodesContent = createBasicRoomodesConfig();\r\n      await fs.writeFile(`${workingDir}/.roomodes`, roomodesContent, 'utf8');\r\n      console.log('  ✓ Created .roomodes configuration');\r\n    }\r\n\r\n    // Create basic workflow templates\r\n    const basicWorkflow = createBasicSparcWorkflow();\r\n    await fs.writeFile(`${workingDir}/.roo/workflows/basic-tdd.json`, basicWorkflow, 'utf8');\r\n    console.log('  ✓ Created .roo/workflows/basic-tdd.json');\r\n\r\n    // Create README for .roo directory\r\n    const rooReadme = createRooReadme();\r\n    await fs.writeFile(`${workingDir}/.roo/README.md`, rooReadme, 'utf8');\r\n    console.log('  ✓ Created .roo/README.md');\r\n\r\n    // Create Claude Code slash commands for SPARC modes\r\n    await createClaudeSlashCommands(workingDir);\r\n\r\n    console.log('  ✅ Basic SPARC structure created successfully');\r\n  } catch (err) {\r\n    console.log(`  ❌ Failed to create SPARC structure: ${err.message}`);\r\n  }\r\n}\r\n"],"names":["createBasicRoomodesConfig","errors","promises","fs","createBasicSparcWorkflow","createRooReadme","createClaudeSlashCommands","cwd","process","createSparcStructureManually","workingDir","env","PWD","rooDirectories","dir","mkdir","recursive","console","log","err","AlreadyExists","roomodesContent","readFile","writeFile","basicWorkflow","rooReadme","message"],"mappings":"AAEA,SAASA,yBAAyB,QAAQ,6BAA6B;AACvE,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,YAAYC,EAAE,QAAQ,KAAK;AACpC,SAASC,wBAAwB,QAAQ,uBAAuB;AAChE,SAASC,eAAe,QAAQ,wBAAwB;AACxD,SAASC,yBAAyB,QAAQ,sCAAsC;AAChF,SAASC,GAAG,QAAQ,uBAAuB;AAC3C,OAAOC,aAAa,UAAU;AAG9B,OAAO,eAAeC;IACpB,IAAI;QAEF,MAAMC,aAAaF,QAAQG,GAAG,CAACC,GAAG,IAAIL;QAGtC,MAAMM,iBAAiB;YACrB,GAAGH,WAAW,KAAK,CAAC;YACpB,GAAGA,WAAW,eAAe,CAAC;YAC9B,GAAGA,WAAW,eAAe,CAAC;YAC9B,GAAGA,WAAW,WAAW,CAAC;YAC1B,GAAGA,WAAW,aAAa,CAAC;SAC7B;QAED,KAAK,MAAMI,OAAOD,eAAgB;YAChC,IAAI;gBACF,MAAMV,GAAGY,KAAK,CAACD,KAAK;oBAAEE,WAAW;gBAAK;gBACtCC,QAAQC,GAAG,CAAC,CAAC,YAAY,EAAEJ,IAAI,CAAC,CAAC;YACnC,EAAE,OAAOK,KAAK;gBACZ,IAAI,CAAEA,CAAAA,eAAelB,OAAOmB,aAAa,AAAD,GAAI;oBAC1C,MAAMD;gBACR;YACF;QACF;QAGA,IAAIE;QACJ,IAAI;YAEFA,kBAAkB,MAAMlB,GAAGmB,QAAQ,CAAC,GAAGZ,WAAW,UAAU,CAAC,EAAE;YAC/DO,QAAQC,GAAG,CAAC;QACd,EAAE,OAAM;YAENG,kBAAkBrB;YAClB,MAAMG,GAAGoB,SAAS,CAAC,GAAGb,WAAW,UAAU,CAAC,EAAEW,iBAAiB;YAC/DJ,QAAQC,GAAG,CAAC;QACd;QAGA,MAAMM,gBAAgBpB;QACtB,MAAMD,GAAGoB,SAAS,CAAC,GAAGb,WAAW,8BAA8B,CAAC,EAAEc,eAAe;QACjFP,QAAQC,GAAG,CAAC;QAGZ,MAAMO,YAAYpB;QAClB,MAAMF,GAAGoB,SAAS,CAAC,GAAGb,WAAW,eAAe,CAAC,EAAEe,WAAW;QAC9DR,QAAQC,GAAG,CAAC;QAGZ,MAAMZ,0BAA0BI;QAEhCO,QAAQC,GAAG,CAAC;IACd,EAAE,OAAOC,KAAK;QACZF,QAAQC,GAAG,CAAC,CAAC,sCAAsC,EAAEC,IAAIO,OAAO,EAAE;IACpE;AACF"}