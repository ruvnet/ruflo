{
  "version": 3,
  "sources": ["../../src/api/claude-client.ts"],
  "sourcesContent": ["/**\n * Claude API client for Claude-Flow\n * Provides direct integration with Claude's API including temperature and model selection\n */\n\nimport { EventEmitter } from 'events';\nimport { ILogger } from '../core/logger.js';\nimport { ConfigManager } from '../config/config-manager.js';\nimport { getErrorMessage } from '../utils/error-handler.js';\nimport { \n  ClaudeAPIError,\n  ClaudeInternalServerError,\n  ClaudeServiceUnavailableError,\n  ClaudeRateLimitError,\n  ClaudeTimeoutError,\n  ClaudeNetworkError,\n  ClaudeAuthenticationError,\n  ClaudeValidationError,\n  HealthCheckResult,\n  getUserFriendlyError,\n} from './claude-api-errors.js';\nimport { circuitBreaker, CircuitBreaker } from '../utils/helpers.js';\n\nexport interface ClaudeAPIConfig {\n  apiKey: string;\n  apiUrl?: string;\n  model?: ClaudeModel;\n  temperature?: number;\n  maxTokens?: number;\n  topP?: number;\n  topK?: number;\n  systemPrompt?: string;\n  timeout?: number;\n  retryAttempts?: number;\n  retryDelay?: number;\n  // Enhanced error handling options\n  enableHealthCheck?: boolean;\n  healthCheckInterval?: number;\n  circuitBreakerThreshold?: number;\n  circuitBreakerTimeout?: number;\n  circuitBreakerResetTimeout?: number;\n  retryJitter?: boolean;\n}\n\nexport type ClaudeModel =\n  | 'claude-3-opus-20240229'\n  | 'claude-3-sonnet-20240229'\n  | 'claude-3-haiku-20240307'\n  | 'claude-2.1'\n  | 'claude-2.0'\n  | 'claude-instant-1.2';\n\nexport interface ClaudeMessage {\n  role: 'user' | 'assistant';\n  content: string;\n}\n\nexport interface ClaudeRequest {\n  model: ClaudeModel;\n  messages: ClaudeMessage[];\n  system?: string;\n  max_tokens: number;\n  temperature?: number;\n  top_p?: number;\n  top_k?: number;\n  metadata?: {\n    user_id?: string;\n  };\n  stop_sequences?: string[];\n  stream?: boolean;\n}\n\nexport interface ClaudeResponse {\n  id: string;\n  type: 'message';\n  role: 'assistant';\n  content: Array<{\n    type: 'text';\n    text: string;\n  }>;\n  model: ClaudeModel;\n  stop_reason: 'end_turn' | 'max_tokens' | 'stop_sequence';\n  stop_sequence?: string;\n  usage: {\n    input_tokens: number;\n    output_tokens: number;\n  };\n}\n\nexport interface ClaudeStreamEvent {\n  type:\n    | 'message_start'\n    | 'content_block_start'\n    | 'content_block_delta'\n    | 'content_block_stop'\n    | 'message_delta'\n    | 'message_stop'\n    | 'ping'\n    | 'error';\n  message?: Partial<ClaudeResponse>;\n  index?: number;\n  delta?: {\n    type?: 'text_delta';\n    text?: string;\n    stop_reason?: string;\n    stop_sequence?: string;\n  };\n  content_block?: {\n    type: 'text';\n    text: string;\n  };\n  usage?: {\n    output_tokens: number;\n  };\n  error?: {\n    type: string;\n    message: string;\n  };\n}\n\nexport class ClaudeAPIClient extends EventEmitter {\n  private config: ClaudeAPIConfig;\n  private logger: ILogger;\n  private configManager: ConfigManager;\n  private defaultModel: ClaudeModel = 'claude-3-sonnet-20240229';\n  private defaultTemperature: number = 0.7;\n  private defaultMaxTokens: number = 4096;\n  private circuitBreaker: CircuitBreaker;\n  private lastHealthCheck?: HealthCheckResult;\n  private healthCheckTimer?: NodeJS.Timeout;\n\n  constructor(logger: ILogger, configManager: ConfigManager, config?: Partial<ClaudeAPIConfig>) {\n    super();\n    this.logger = logger;\n    this.configManager = configManager;\n\n    // Load config from environment and merge with provided config\n    this.config = this.loadConfiguration(config);\n    \n    // Initialize circuit breaker for API reliability\n    this.circuitBreaker = circuitBreaker('claude-api', {\n      threshold: this.config.circuitBreakerThreshold || 5,\n      timeout: this.config.circuitBreakerTimeout || 60000,\n      resetTimeout: this.config.circuitBreakerResetTimeout || 300000,\n    });\n\n    // Start health check if enabled\n    if (this.config.enableHealthCheck) {\n      this.startHealthCheck();\n    }\n  }\n\n  /**\n   * Load configuration from various sources\n   */\n  private loadConfiguration(overrides?: Partial<ClaudeAPIConfig>): ClaudeAPIConfig {\n    // Start with defaults\n    const config: ClaudeAPIConfig = {\n      apiKey: '',\n      apiUrl: 'https://api.anthropic.com/v1/messages',\n      model: this.defaultModel,\n      temperature: this.defaultTemperature,\n      maxTokens: this.defaultMaxTokens,\n      topP: 1,\n      topK: undefined,\n      systemPrompt: undefined,\n      timeout: 60000, // 60 seconds\n      retryAttempts: 3,\n      retryDelay: 1000,\n      // Enhanced error handling defaults\n      enableHealthCheck: false,\n      healthCheckInterval: 300000, // 5 minutes\n      circuitBreakerThreshold: 5,\n      circuitBreakerTimeout: 60000,\n      circuitBreakerResetTimeout: 300000,\n      retryJitter: true,\n    };\n\n    // Load from environment variables\n    if (process.env.ANTHROPIC_API_KEY) {\n      config.apiKey = process.env.ANTHROPIC_API_KEY;\n    }\n    if (process.env.CLAUDE_API_URL) {\n      config.apiUrl = process.env.CLAUDE_API_URL;\n    }\n    if (process.env.CLAUDE_MODEL) {\n      config.model = process.env.CLAUDE_MODEL as ClaudeModel;\n    }\n    if (process.env.CLAUDE_TEMPERATURE) {\n      config.temperature = parseFloat(process.env.CLAUDE_TEMPERATURE);\n    }\n    if (process.env.CLAUDE_MAX_TOKENS) {\n      config.maxTokens = parseInt(process.env.CLAUDE_MAX_TOKENS, 10);\n    }\n\n    // Load from config manager if available\n    const claudeConfig = this.configManager.get('claude');\n    if (claudeConfig) {\n      Object.assign(config, claudeConfig);\n    }\n\n    // Apply overrides\n    if (overrides) {\n      Object.assign(config, overrides);\n    }\n\n    // Validate configuration\n    this.validateConfiguration(config);\n\n    return config;\n  }\n\n  /**\n   * Validate configuration settings\n   */\n  private validateConfiguration(config: ClaudeAPIConfig): void {\n    if (!config.apiKey) {\n      throw new ClaudeAuthenticationError('Claude API key is required. Set ANTHROPIC_API_KEY environment variable.');\n    }\n\n    if (config.temperature !== undefined) {\n      if (config.temperature < 0 || config.temperature > 1) {\n        throw new ClaudeValidationError('Temperature must be between 0 and 1');\n      }\n    }\n\n    if (config.topP !== undefined) {\n      if (config.topP < 0 || config.topP > 1) {\n        throw new ClaudeValidationError('Top-p must be between 0 and 1');\n      }\n    }\n\n    if (config.maxTokens !== undefined && (config.maxTokens < 1 || config.maxTokens > 100000)) {\n      throw new ClaudeValidationError('Max tokens must be between 1 and 100000');\n    }\n  }\n\n  /**\n   * Update configuration dynamically\n   */\n  updateConfig(updates: Partial<ClaudeAPIConfig>): void {\n    this.config = { ...this.config, ...updates };\n    this.validateConfiguration(this.config);\n    this.logger.info('Claude API configuration updated', {\n      model: this.config.model,\n      temperature: this.config.temperature,\n      maxTokens: this.config.maxTokens,\n    });\n  }\n\n  /**\n   * Get current configuration\n   */\n  getConfig(): ClaudeAPIConfig {\n    return { ...this.config };\n  }\n\n  /**\n   * Send a message to Claude API\n   */\n  async sendMessage(\n    messages: ClaudeMessage[],\n    options?: {\n      model?: ClaudeModel;\n      temperature?: number;\n      maxTokens?: number;\n      systemPrompt?: string;\n      stream?: boolean;\n    },\n  ): Promise<ClaudeResponse | AsyncIterable<ClaudeStreamEvent>> {\n    const request: ClaudeRequest = {\n      model: options?.model || this.config.model || 'claude-3-opus-20240229',\n      messages,\n      system: options?.systemPrompt || this.config.systemPrompt,\n      max_tokens: options?.maxTokens || this.config.maxTokens || 4096,\n      temperature: options?.temperature ?? this.config.temperature,\n      top_p: this.config.topP,\n      top_k: this.config.topK,\n      stream: options?.stream || false,\n    };\n\n    this.logger.debug('Sending Claude API request', {\n      model: request.model,\n      temperature: request.temperature,\n      maxTokens: request.max_tokens,\n      messageCount: messages.length,\n      stream: request.stream,\n    });\n\n    if (request.stream) {\n      return this.streamRequest(request);\n    } else {\n      return this.sendRequest(request);\n    }\n  }\n\n  /**\n   * Send a non-streaming request\n   */\n  private async sendRequest(request: ClaudeRequest): Promise<ClaudeResponse> {\n    let lastError: ClaudeAPIError | undefined;\n\n    for (let attempt = 0; attempt < (this.config.retryAttempts || 3); attempt++) {\n      try {\n        const controller = new AbortController();\n        const timeout = setTimeout(() => controller.abort(), this.config.timeout || 30000);\n\n        const response = await fetch(this.config.apiUrl || 'https://api.anthropic.com/v1/messages', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'anthropic-version': '2023-06-01',\n            'x-api-key': this.config.apiKey,\n          },\n          body: JSON.stringify(request),\n          signal: controller.signal,\n        });\n\n        clearTimeout(timeout);\n\n        if (!response.ok) {\n          const errorText = await response.text();\n          let errorData: any;\n          \n          try {\n            errorData = JSON.parse(errorText);\n          } catch {\n            errorData = { message: errorText };\n          }\n\n          throw this.createAPIError(response.status, errorData);\n        }\n\n        const data = (await response.json()) as ClaudeResponse;\n\n        this.logger.info('Claude API response received', {\n          model: data.model,\n          inputTokens: data.usage.input_tokens,\n          outputTokens: data.usage.output_tokens,\n          stopReason: data.stop_reason,\n        });\n\n        this.emit('response', data);\n        return data;\n      } catch (error) {\n        lastError = this.transformError(error);\n        \n        // Don't retry non-retryable errors\n        if (!lastError.retryable) {\n          this.handleError(lastError);\n          throw lastError;\n        }\n\n        this.logger.warn(\n          `Claude API request failed (attempt ${attempt + 1}/${this.config.retryAttempts})`,\n          {\n            error: lastError.message,\n            statusCode: lastError.statusCode,\n            retryable: lastError.retryable,\n          },\n        );\n\n        if (attempt < (this.config.retryAttempts || 3) - 1) {\n          const delay = this.calculateRetryDelay(attempt, lastError);\n          await this.delay(delay);\n        }\n      }\n    }\n\n    this.handleError(lastError!);\n    throw lastError;\n  }\n\n  /**\n   * Send a streaming request\n   */\n  private async *streamRequest(request: ClaudeRequest): AsyncIterable<ClaudeStreamEvent> {\n    const controller = new AbortController();\n    const timeout = setTimeout(() => controller.abort(), (this.config.timeout || 30000) * 2); // Double timeout for streaming\n\n    try {\n      const response = await fetch(this.config.apiUrl || 'https://api.anthropic.com/v1/messages', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'anthropic-version': '2023-06-01',\n          'x-api-key': this.config.apiKey,\n        },\n        body: JSON.stringify({ ...request, stream: true }),\n        signal: controller.signal,\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        let errorData: any;\n        \n        try {\n          errorData = JSON.parse(errorText);\n        } catch {\n          errorData = { message: errorText };\n        }\n\n        throw this.createAPIError(response.status, errorData);\n      }\n\n      if (!response.body) {\n        throw new ClaudeAPIError('Response body is null');\n      }\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder();\n      let buffer = '';\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n\n        buffer += decoder.decode(value, { stream: true });\n        const lines = buffer.split('\\n');\n        buffer = lines.pop() || '';\n\n        for (const line of lines) {\n          if (line.startsWith('data: ')) {\n            const data = line.slice(6);\n            if (data === '[DONE]') continue;\n\n            try {\n              const event = JSON.parse(data) as ClaudeStreamEvent;\n              this.emit('stream_event', event);\n              yield event;\n            } catch (e) {\n              this.logger.warn('Failed to parse stream event', { data, error: e });\n            }\n          }\n        }\n      }\n    } catch (error) {\n      clearTimeout(timeout);\n      \n      // Handle abort/timeout\n      if (error instanceof Error && error.name === 'AbortError') {\n        throw new ClaudeTimeoutError(\n          'Request timed out',\n          this.config.timeout || 60000,\n        );\n      }\n      \n      throw error;\n    } finally {\n      clearTimeout(timeout);\n    }\n  }\n\n  /**\n   * Helper method for simple completions\n   */\n  async complete(\n    prompt: string,\n    options?: {\n      model?: ClaudeModel;\n      temperature?: number;\n      maxTokens?: number;\n      systemPrompt?: string;\n    },\n  ): Promise<string> {\n    const messages: ClaudeMessage[] = [{ role: 'user', content: prompt }];\n    const response = (await this.sendMessage(messages, options)) as ClaudeResponse;\n    return response.content[0].text;\n  }\n\n  /**\n   * Helper method for streaming completions\n   */\n  async *streamComplete(\n    prompt: string,\n    options?: {\n      model?: ClaudeModel;\n      temperature?: number;\n      maxTokens?: number;\n      systemPrompt?: string;\n    },\n  ): AsyncIterable<string> {\n    const messages: ClaudeMessage[] = [{ role: 'user', content: prompt }];\n    const stream = (await this.sendMessage(messages, {\n      ...options,\n      stream: true,\n    })) as AsyncIterable<ClaudeStreamEvent>;\n\n    for await (const event of stream) {\n      if (event.type === 'content_block_delta' && event.delta?.text) {\n        yield event.delta.text;\n      }\n    }\n  }\n\n  /**\n   * Get available models\n   */\n  getAvailableModels(): ClaudeModel[] {\n    return [\n      'claude-3-opus-20240229',\n      'claude-3-sonnet-20240229',\n      'claude-3-haiku-20240307',\n      'claude-2.1',\n      'claude-2.0',\n      'claude-instant-1.2',\n    ];\n  }\n\n  /**\n   * Get model information\n   */\n  getModelInfo(model: ClaudeModel): {\n    name: string;\n    contextWindow: number;\n    description: string;\n  } {\n    const modelInfo: Record<\n      ClaudeModel,\n      { name: string; contextWindow: number; description: string }\n    > = {\n      'claude-3-opus-20240229': {\n        name: 'Claude 3 Opus',\n        contextWindow: 200000,\n        description: 'Most capable model, best for complex tasks',\n      },\n      'claude-3-sonnet-20240229': {\n        name: 'Claude 3 Sonnet',\n        contextWindow: 200000,\n        description: 'Balanced performance and speed',\n      },\n      'claude-3-haiku-20240307': {\n        name: 'Claude 3 Haiku',\n        contextWindow: 200000,\n        description: 'Fastest model, best for simple tasks',\n      },\n      'claude-2.1': {\n        name: 'Claude 2.1',\n        contextWindow: 200000,\n        description: 'Previous generation, enhanced capabilities',\n      },\n      'claude-2.0': {\n        name: 'Claude 2.0',\n        contextWindow: 100000,\n        description: 'Previous generation model',\n      },\n      'claude-instant-1.2': {\n        name: 'Claude Instant 1.2',\n        contextWindow: 100000,\n        description: 'Fast, cost-effective model',\n      },\n    };\n\n    return (\n      modelInfo[model] || {\n        name: model,\n        contextWindow: 100000,\n        description: 'Unknown model',\n      }\n    );\n  }\n\n  /**\n   * Delay helper for retries\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Start periodic health checks\n   */\n  private startHealthCheck(): void {\n    this.performHealthCheck(); // Initial check\n    \n    this.healthCheckTimer = setInterval(\n      () => this.performHealthCheck(),\n      this.config.healthCheckInterval || 300000,\n    );\n  }\n\n  /**\n   * Perform a health check on the API\n   */\n  async performHealthCheck(): Promise<HealthCheckResult> {\n    const startTime = Date.now();\n    \n    try {\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 10000); // 10 second timeout\n\n      const response = await fetch(this.config.apiUrl || '', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'anthropic-version': '2023-06-01',\n          'x-api-key': this.config.apiKey,\n        },\n        body: JSON.stringify({\n          model: this.config.model,\n          messages: [{ role: 'user', content: 'Hi' }],\n          max_tokens: 1,\n        }),\n        signal: controller.signal,\n      });\n\n      clearTimeout(timeout);\n      \n      const latency = Date.now() - startTime;\n      const healthy = response.ok || response.status === 429; // Rate limit is still \"healthy\"\n      \n      this.lastHealthCheck = {\n        healthy,\n        latency,\n        error: healthy ? undefined : `Status: ${response.status}`,\n        timestamp: new Date(),\n      };\n\n      this.logger.debug('Claude API health check completed', this.lastHealthCheck);\n      this.emit('health_check', this.lastHealthCheck);\n      \n      return this.lastHealthCheck;\n    } catch (error) {\n      const latency = Date.now() - startTime;\n      \n      this.lastHealthCheck = {\n        healthy: false,\n        latency,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        timestamp: new Date(),\n      };\n\n      this.logger.warn('Claude API health check failed', this.lastHealthCheck);\n      this.emit('health_check', this.lastHealthCheck);\n      \n      return this.lastHealthCheck;\n    }\n  }\n\n  /**\n   * Get last health check result\n   */\n  getHealthStatus(): HealthCheckResult | undefined {\n    return this.lastHealthCheck;\n  }\n\n  /**\n   * Create appropriate error based on status code\n   */\n  private createAPIError(statusCode: number, errorData: any): ClaudeAPIError {\n    const message = errorData.error?.message || errorData.message || 'Unknown error';\n\n    switch (statusCode) {\n      case 400:\n        return new ClaudeValidationError(message, errorData);\n      case 401:\n      case 403:\n        return new ClaudeAuthenticationError(message, errorData);\n      case 429:\n        const retryAfter = errorData.error?.retry_after;\n        return new ClaudeRateLimitError(message, retryAfter, errorData);\n      case 500:\n        return new ClaudeInternalServerError(message, errorData);\n      case 503:\n        return new ClaudeServiceUnavailableError(message, errorData);\n      default:\n        return new ClaudeAPIError(message, statusCode, statusCode >= 500, errorData);\n    }\n  }\n\n  /**\n   * Transform generic errors to Claude API errors\n   */\n  private transformError(error: unknown): ClaudeAPIError {\n    if (error instanceof ClaudeAPIError) {\n      return error;\n    }\n\n    if (error instanceof Error) {\n      // Network errors\n      if (error.message.includes('fetch failed') || error.message.includes('ECONNREFUSED')) {\n        return new ClaudeNetworkError(error.message);\n      }\n      \n      // Timeout errors\n      if (error.name === 'AbortError' || error.message.includes('timeout')) {\n        return new ClaudeTimeoutError(error.message, this.config.timeout || 60000);\n      }\n    }\n\n    return new ClaudeAPIError(\n      error instanceof Error ? error.message : String(error),\n      undefined,\n      true, // Assume unknown errors are retryable\n    );\n  }\n\n  /**\n   * Calculate retry delay with exponential backoff and jitter\n   */\n  private calculateRetryDelay(attempt: number, error: ClaudeAPIError): number {\n    // If rate limit error with retry-after header, use that\n    if (error instanceof ClaudeRateLimitError && error.retryAfter) {\n      return error.retryAfter * 1000; // Convert to milliseconds\n    }\n\n    const baseDelay = this.config.retryDelay || 1000;\n    const maxDelay = 30000; // 30 seconds max\n    \n    // Exponential backoff: delay = baseDelay * (2 ^ attempt)\n    let delay = Math.min(baseDelay * Math.pow(2, attempt), maxDelay);\n    \n    // Add jitter to prevent thundering herd\n    if (this.config.retryJitter) {\n      const jitter = Math.random() * 0.3 * delay; // Up to 30% jitter\n      delay = delay + jitter;\n    }\n\n    return Math.floor(delay);\n  }\n\n  /**\n   * Handle errors with user-friendly messages and logging\n   */\n  private handleError(error: ClaudeAPIError): void {\n    const errorInfo = getUserFriendlyError(error);\n    \n    this.logger.error(`${errorInfo.title}: ${errorInfo.message}`, {\n      error: error.message,\n      code: error.code,\n      statusCode: error.statusCode,\n      retryable: error.retryable,\n      details: error.details,\n    });\n\n    // Log suggestions in debug mode\n    if (this.logger.level === 'debug' && errorInfo.suggestions.length > 0) {\n      this.logger.debug('Suggestions to resolve the issue:', errorInfo.suggestions);\n    }\n\n    this.emit('error', {\n      error,\n      userFriendly: errorInfo,\n    });\n  }\n\n  /**\n   * Clean up resources\n   */\n  destroy(): void {\n    if (this.healthCheckTimer) {\n      clearInterval(this.healthCheckTimer);\n      this.healthCheckTimer = undefined;\n    }\n    this.removeAllListeners();\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
