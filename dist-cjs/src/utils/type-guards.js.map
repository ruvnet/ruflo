{"version":3,"sources":["../../../src/utils/type-guards.ts"],"sourcesContent":["/**\r\n * Type guard utility functions for safe type checking\r\n */\r\n\r\n/**\r\n * Check if a value is an object (non-null and typeof object)\r\n */\r\nexport function isObject(value: unknown): value is Record<string, unknown> {\r\n  return typeof value === 'object' && value !== null;\r\n}\r\n\r\n/**\r\n * Check if a value is an Error instance or has error-like properties\r\n */\r\nexport function isError(value: unknown): value is Error {\r\n  return value instanceof Error;\r\n}\r\n\r\n/**\r\n * Check if a value has a message property (error-like)\r\n */\r\nexport function hasMessage(value: unknown): value is { message: string } {\r\n  return isObject(value) && 'message' in value && typeof value.message === 'string';\r\n}\r\n\r\n/**\r\n * Check if a value has a stack property (error-like)\r\n */\r\nexport function hasStack(value: unknown): value is { stack: string } {\r\n  return isObject(value) && 'stack' in value && typeof value.stack === 'string';\r\n}\r\n\r\n/**\r\n * Check if a value is an error-like object\r\n */\r\nexport function isErrorLike(value: unknown): value is { message: string; stack?: string } {\r\n  return hasMessage(value);\r\n}\r\n\r\n/**\r\n * Check if a value has a code property\r\n */\r\nexport function hasCode(value: unknown): value is { code: string | number } {\r\n  return (\r\n    isObject(value) &&\r\n    'code' in value &&\r\n    (typeof value.code === 'string' || typeof value.code === 'number')\r\n  );\r\n}\r\n\r\n/**\r\n * Check if a value has an agentId property\r\n */\r\nexport function hasAgentId(value: unknown): value is { agentId: { id: string } } {\r\n  return (\r\n    isObject(value) &&\r\n    'agentId' in value &&\r\n    isObject(value.agentId) &&\r\n    'id' in value.agentId &&\r\n    typeof value.agentId.id === 'string'\r\n  );\r\n}\r\n\r\n/**\r\n * Check if a value has a pid property (process-like)\r\n */\r\nexport function hasPid(value: unknown): value is { pid: number } {\r\n  return isObject(value) && 'pid' in value && typeof value.pid === 'number';\r\n}\r\n\r\n/**\r\n * Safely get error message from unknown value\r\n */\r\nexport function getErrorMessage(error: unknown): string {\r\n  if (typeof error === 'string') {\r\n    return error;\r\n  }\r\n  if (isError(error)) {\r\n    return error.message;\r\n  }\r\n  if (hasMessage(error)) {\r\n    return error.message;\r\n  }\r\n  return String(error);\r\n}\r\n\r\n/**\r\n * Safely get error stack from unknown value\r\n */\r\nexport function getErrorStack(error: unknown): string | undefined {\r\n  if (isError(error)) {\r\n    return error.stack;\r\n  }\r\n  if (hasStack(error)) {\r\n    return error.stack;\r\n  }\r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is a string\r\n */\r\nexport function isString(value: unknown): value is string {\r\n  return typeof value === 'string';\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is a number\r\n */\r\nexport function isNumber(value: unknown): value is number {\r\n  return typeof value === 'number' && !isNaN(value);\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is a boolean\r\n */\r\nexport function isBoolean(value: unknown): value is boolean {\r\n  return typeof value === 'boolean';\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is an array\r\n */\r\nexport function isArray<T = unknown>(value: unknown): value is T[] {\r\n  return Array.isArray(value);\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is a function\r\n */\r\nexport function isFunction(value: unknown): value is (...args: any[]) => any {\r\n  return typeof value === 'function';\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is null or undefined\r\n */\r\nexport function isNullOrUndefined(value: unknown): value is null | undefined {\r\n  return value === null || value === undefined;\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is defined (not null or undefined)\r\n */\r\nexport function isDefined<T>(value: T | null | undefined): value is T {\r\n  return value !== null && value !== undefined;\r\n}\r\n\r\n/**\r\n * Type guard for agent load update event data\r\n */\r\nexport function hasAgentLoad(value: unknown): value is { agentId: { id: string }; load: number } {\r\n  return (\r\n    isObject(value) &&\r\n    'agentId' in value &&\r\n    isObject(value.agentId) &&\r\n    'id' in value.agentId &&\r\n    typeof value.agentId.id === 'string' &&\r\n    'load' in value &&\r\n    typeof value.load === 'number'\r\n  );\r\n}\r\n\r\n/**\r\n * Type guard for task event data\r\n */\r\nexport function hasAgentTask(value: unknown): value is { agentId: { id: string }; task: unknown } {\r\n  return (\r\n    isObject(value) &&\r\n    'agentId' in value &&\r\n    isObject(value.agentId) &&\r\n    'id' in value.agentId &&\r\n    typeof value.agentId.id === 'string' &&\r\n    'task' in value\r\n  );\r\n}\r\n\r\n/**\r\n * Type guard for work stealing event data\r\n */\r\nexport function hasWorkStealingData(value: unknown): value is {\r\n  sourceAgent: { id: string };\r\n  targetAgent: { id: string };\r\n  taskCount: number;\r\n} {\r\n  return (\r\n    isObject(value) &&\r\n    'sourceAgent' in value &&\r\n    isObject(value.sourceAgent) &&\r\n    'id' in value.sourceAgent &&\r\n    typeof value.sourceAgent.id === 'string' &&\r\n    'targetAgent' in value &&\r\n    isObject(value.targetAgent) &&\r\n    'id' in value.targetAgent &&\r\n    typeof value.targetAgent.id === 'string' &&\r\n    'taskCount' in value &&\r\n    typeof value.taskCount === 'number'\r\n  );\r\n}\r\n"],"names":["isObject","value","isError","Error","hasMessage","message","hasStack","stack","isErrorLike","hasCode","code","hasAgentId","agentId","id","hasPid","pid","getErrorMessage","error","String","getErrorStack","undefined","isString","isNumber","isNaN","isBoolean","isArray","Array","isFunction","isNullOrUndefined","isDefined","hasAgentLoad","load","hasAgentTask","hasWorkStealingData","sourceAgent","targetAgent","taskCount"],"mappings":"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"}