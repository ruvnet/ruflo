{"version":3,"sources":["../../../../src/cli/simple-commands/verification.js"],"sourcesContent":["/**\r\n * Verification and Truth Enforcement System\r\n * Implements mandatory verification for multi-agent operations\r\n */\r\n\r\nimport { exec } from 'child_process';\r\nimport { promisify } from 'util';\r\nimport fs from 'fs/promises';\r\nimport path from 'path';\r\nimport crypto from 'crypto';\r\n\r\nconst execAsync = promisify(exec);\r\n\r\n// Verification modes\r\nconst VERIFICATION_MODES = {\r\n  strict: { threshold: 0.95, autoRollback: true, requireConsensus: true },\r\n  moderate: { threshold: 0.85, autoRollback: false, requireConsensus: true },\r\n  development: { threshold: 0.75, autoRollback: false, requireConsensus: false }\r\n};\r\n\r\n// Agent-specific verification requirements\r\nconst AGENT_VERIFICATION = {\r\n  coder: ['compile', 'test', 'lint', 'typecheck'],\r\n  reviewer: ['code-analysis', 'security-scan', 'performance-check'],\r\n  tester: ['unit-tests', 'integration-tests', 'coverage-check'],\r\n  planner: ['task-decomposition', 'dependency-check', 'feasibility'],\r\n  architect: ['design-validation', 'scalability-check', 'pattern-compliance']\r\n};\r\n\r\nclass VerificationSystem {\r\n  constructor() {\r\n    this.mode = 'moderate';\r\n    this.scores = new Map();\r\n    this.verificationHistory = [];\r\n    this.memoryPath = '.swarm/verification-memory.json';\r\n  }\r\n\r\n  async initialize(mode = 'moderate') {\r\n    this.mode = mode;\r\n    await this.loadMemory();\r\n    console.log(`âœ… Verification system initialized in ${mode} mode`);\r\n    console.log(`   Threshold: ${VERIFICATION_MODES[mode].threshold}`);\r\n    console.log(`   Auto-rollback: ${VERIFICATION_MODES[mode].autoRollback}`);\r\n    console.log(`   Consensus required: ${VERIFICATION_MODES[mode].requireConsensus}`);\r\n  }\r\n\r\n  async loadMemory() {\r\n    try {\r\n      const data = await fs.readFile(this.memoryPath, 'utf8');\r\n      const memory = JSON.parse(data);\r\n      this.scores = new Map(memory.scores);\r\n      this.verificationHistory = memory.history || [];\r\n    } catch (error) {\r\n      // Initialize empty memory if file doesn't exist\r\n      this.scores = new Map();\r\n      this.verificationHistory = [];\r\n    }\r\n  }\r\n\r\n  async saveMemory() {\r\n    const memory = {\r\n      scores: Array.from(this.scores.entries()),\r\n      history: this.verificationHistory,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n    \r\n    await fs.mkdir(path.dirname(this.memoryPath), { recursive: true });\r\n    await fs.writeFile(this.memoryPath, JSON.stringify(memory, null, 2));\r\n  }\r\n\r\n  async verifyTask(taskId, agentType, claims) {\r\n    console.log(`\\nðŸ” Verifying task ${taskId} (Agent: ${agentType})`);\r\n    \r\n    const requirements = AGENT_VERIFICATION[agentType] || ['basic-check'];\r\n    const results = [];\r\n    let totalScore = 0;\r\n\r\n    for (const check of requirements) {\r\n      const result = await this.runVerification(check, claims);\r\n      results.push(result);\r\n      totalScore += result.score;\r\n      \r\n      console.log(`   ${result.passed ? 'âœ…' : 'âŒ'} ${check}: ${result.score.toFixed(2)}`);\r\n    }\r\n\r\n    const averageScore = totalScore / requirements.length;\r\n    const threshold = VERIFICATION_MODES[this.mode].threshold;\r\n    const passed = averageScore >= threshold;\r\n\r\n    const verification = {\r\n      taskId,\r\n      agentType,\r\n      score: averageScore,\r\n      passed,\r\n      threshold,\r\n      timestamp: new Date().toISOString(),\r\n      results\r\n    };\r\n\r\n    this.verificationHistory.push(verification);\r\n    await this.saveMemory();\r\n\r\n    console.log(`\\nðŸ“Š Verification Score: ${averageScore.toFixed(2)}/${threshold}`);\r\n    console.log(`   Status: ${passed ? 'âœ… PASSED' : 'âŒ FAILED'}`);\r\n\r\n    if (!passed && VERIFICATION_MODES[this.mode].autoRollback) {\r\n      console.log('\\nðŸ”„ Auto-rollback triggered due to verification failure');\r\n      await this.triggerRollback(taskId);\r\n    }\r\n\r\n    return verification;\r\n  }\r\n\r\n  async runVerification(checkType, claims) {\r\n    // Simulate different verification checks\r\n    const verificationChecks = {\r\n      'compile': async () => {\r\n        try {\r\n          const { stdout } = await execAsync('npm run typecheck 2>&1 || true');\r\n          return { score: stdout.includes('error') ? 0.5 : 1.0, passed: !stdout.includes('error') };\r\n        } catch {\r\n          return { score: 0.5, passed: false };\r\n        }\r\n      },\r\n      'test': async () => {\r\n        try {\r\n          const { stdout } = await execAsync('npm test 2>&1 || true');\r\n          return { score: stdout.includes('PASS') ? 1.0 : 0.6, passed: stdout.includes('PASS') };\r\n        } catch {\r\n          return { score: 0.6, passed: false };\r\n        }\r\n      },\r\n      'lint': async () => {\r\n        try {\r\n          const { stdout } = await execAsync('npm run lint 2>&1 || true');\r\n          return { score: stdout.includes('warning') ? 0.8 : 1.0, passed: true };\r\n        } catch {\r\n          return { score: 0.7, passed: false };\r\n        }\r\n      },\r\n      'typecheck': async () => {\r\n        try {\r\n          const { stdout } = await execAsync('npm run typecheck 2>&1 || true');\r\n          return { score: stdout.includes('error') ? 0.6 : 1.0, passed: !stdout.includes('error') };\r\n        } catch {\r\n          return { score: 0.6, passed: false };\r\n        }\r\n      },\r\n      'default': async () => {\r\n        // Simulate verification based on claims\r\n        const claimScore = claims && claims.success ? 0.85 : 0.65;\r\n        return { score: claimScore, passed: claimScore >= 0.75 };\r\n      }\r\n    };\r\n\r\n    const check = verificationChecks[checkType] || verificationChecks.default;\r\n    return await check();\r\n  }\r\n\r\n  async triggerRollback(taskId) {\r\n    console.log(`ðŸ”„ Rolling back task ${taskId}...`);\r\n    // Simulate rollback process\r\n    await new Promise(resolve => setTimeout(resolve, 1000));\r\n    console.log(`âœ… Rollback completed for task ${taskId}`);\r\n  }\r\n\r\n  async getAgentReliability(agentId) {\r\n    const agentHistory = this.verificationHistory.filter(v => v.agentType === agentId);\r\n    if (agentHistory.length === 0) return 1.0;\r\n\r\n    const totalScore = agentHistory.reduce((sum, v) => sum + v.score, 0);\r\n    return totalScore / agentHistory.length;\r\n  }\r\n\r\n  async generateTruthReport() {\r\n    const report = {\r\n      mode: this.mode,\r\n      threshold: VERIFICATION_MODES[this.mode].threshold,\r\n      totalVerifications: this.verificationHistory.length,\r\n      passedVerifications: this.verificationHistory.filter(v => v.passed).length,\r\n      averageScore: 0,\r\n      agentReliability: {},\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    if (this.verificationHistory.length > 0) {\r\n      const totalScore = this.verificationHistory.reduce((sum, v) => sum + v.score, 0);\r\n      report.averageScore = totalScore / this.verificationHistory.length;\r\n    }\r\n\r\n    // Calculate per-agent reliability\r\n    const agentTypes = [...new Set(this.verificationHistory.map(v => v.agentType))];\r\n    for (const agent of agentTypes) {\r\n      report.agentReliability[agent] = await this.getAgentReliability(agent);\r\n    }\r\n\r\n    return report;\r\n  }\r\n}\r\n\r\n// Helper function to generate filtered report for specific agent\r\nasync function generateFilteredReport(system, filteredHistory, agentType) {\r\n  const report = {\r\n    mode: system.mode,\r\n    threshold: VERIFICATION_MODES[system.mode].threshold,\r\n    totalVerifications: filteredHistory.length,\r\n    passedVerifications: filteredHistory.filter(v => v.passed).length,\r\n    averageScore: 0,\r\n    agentReliability: {},\r\n    timestamp: new Date().toISOString()\r\n  };\r\n\r\n  if (filteredHistory.length > 0) {\r\n    const totalScore = filteredHistory.reduce((sum, v) => sum + v.score, 0);\r\n    report.averageScore = totalScore / filteredHistory.length;\r\n    report.agentReliability[agentType] = report.averageScore;\r\n  }\r\n\r\n  return report;\r\n}\r\n\r\n// CLI command handlers\r\nexport async function verificationCommand(args, flags) {\r\n  const system = new VerificationSystem();\r\n  const subcommand = args[0] || 'status';\r\n  \r\n  // Handle help flag\r\n  if (flags.help || subcommand === '--help' || subcommand === 'help') {\r\n    const { COMMAND_HELP } = await import('../help-text.js');\r\n    console.log(COMMAND_HELP.verify);\r\n    return;\r\n  }\r\n\r\n  switch (subcommand) {\r\n    case 'init':\r\n      const mode = args[1] || flags.mode || 'moderate';\r\n      await system.initialize(mode);\r\n      break;\r\n\r\n    case 'verify':\r\n      const taskId = args[1] || flags.taskId || `task-${Date.now()}`;\r\n      const agentType = flags.agent || 'coder';\r\n      const claims = { success: flags.success !== false };\r\n      await system.verifyTask(taskId, agentType, claims);\r\n      break;\r\n\r\n    case 'truth':\r\n    case 'score':\r\n      await system.loadMemory();\r\n      \r\n      // Filter by agent if specified\r\n      let filteredHistory = system.verificationHistory;\r\n      if (flags.agent) {\r\n        filteredHistory = system.verificationHistory.filter(v => v.agentType === flags.agent);\r\n        if (filteredHistory.length === 0) {\r\n          console.log(`\\nâš ï¸ No verification history found for agent: ${flags.agent}`);\r\n          return;\r\n        }\r\n      }\r\n      \r\n      // Filter by taskId if specified\r\n      if (flags.taskId) {\r\n        filteredHistory = filteredHistory.filter(v => v.taskId === flags.taskId);\r\n        if (filteredHistory.length === 0) {\r\n          console.log(`\\nâš ï¸ No verification history found for task: ${flags.taskId}`);\r\n          return;\r\n        }\r\n      }\r\n      \r\n      // Filter by threshold if specified\r\n      if (flags.threshold) {\r\n        const threshold = parseFloat(flags.threshold);\r\n        filteredHistory = filteredHistory.filter(v => v.score < threshold);\r\n        if (filteredHistory.length === 0) {\r\n          console.log(`\\nâœ… All verifications meet or exceed threshold: ${threshold}`);\r\n          return;\r\n        }\r\n      }\r\n      \r\n      // Generate report (with filtered data if agent specified)\r\n      const report = flags.agent ? \r\n        await generateFilteredReport(system, filteredHistory, flags.agent) :\r\n        await system.generateTruthReport();\r\n      \r\n      // JSON output only mode\r\n      if (flags.json) {\r\n        console.log(JSON.stringify(report, null, 2));\r\n        return;\r\n      }\r\n      \r\n      // Basic report (shown when not in JSON mode)\r\n      console.log('\\nðŸ“Š Truth Scoring Report' + (flags.agent ? ` - Agent: ${flags.agent}` : ''));\r\n      console.log('â”'.repeat(50));\r\n      console.log(`Mode: ${report.mode || system.mode}`);\r\n      console.log(`Threshold: ${report.threshold || VERIFICATION_MODES[system.mode].threshold}`);\r\n      console.log(`Total Verifications: ${report.totalVerifications}`);\r\n      console.log(`Passed: ${report.passedVerifications}`);\r\n      console.log(`Average Score: ${report.averageScore.toFixed(3)}`);\r\n      \r\n      if (flags.agent) {\r\n        // Show detailed info for specific agent\r\n        console.log(`\\nðŸ¤– ${flags.agent} Agent Details:`);\r\n        console.log(`   Reliability: ${(report.agentReliability[flags.agent] * 100).toFixed(1)}%`);\r\n        console.log(`   Total Tasks: ${filteredHistory.length}`);\r\n        console.log(`   Passed: ${filteredHistory.filter(v => v.passed).length}`);\r\n        console.log(`   Failed: ${filteredHistory.filter(v => !v.passed).length}`);\r\n        \r\n        if (flags.detailed || flags.detail) {\r\n          console.log('\\nðŸ“‹ Verification History:');\r\n          const recentAgent = filteredHistory.slice(-10);\r\n          for (const v of recentAgent) {\r\n            const time = new Date(v.timestamp).toLocaleTimeString();\r\n            console.log(`   ${v.passed ? 'âœ…' : 'âŒ'} [${time}] ${v.taskId}: ${v.score.toFixed(3)}`);\r\n            if (v.results && flags.verbose) {\r\n              for (const [check, result] of Object.entries(v.results)) {\r\n                console.log(`      â€¢ ${check}: ${result.passed ? 'âœ“' : 'âœ—'} (${result.score.toFixed(2)})`);\r\n              }\r\n            }\r\n          }\r\n          \r\n          // Score distribution\r\n          const scores = filteredHistory.map(v => v.score);\r\n          const minScore = Math.min(...scores);\r\n          const maxScore = Math.max(...scores);\r\n          console.log('\\nðŸ“Š Score Distribution:');\r\n          console.log(`   Min Score: ${minScore.toFixed(3)}`);\r\n          console.log(`   Max Score: ${maxScore.toFixed(3)}`);\r\n          console.log(`   Average: ${report.averageScore.toFixed(3)}`);\r\n          \r\n          // Performance trend\r\n          if (filteredHistory.length > 5) {\r\n            const recent5 = filteredHistory.slice(-5);\r\n            const older5 = filteredHistory.slice(-10, -5);\r\n            const recentAvg = recent5.reduce((sum, v) => sum + v.score, 0) / recent5.length;\r\n            const olderAvg = older5.length > 0 ? \r\n              older5.reduce((sum, v) => sum + v.score, 0) / older5.length : 0;\r\n            \r\n            console.log('\\nðŸ“ˆ Performance Trend:');\r\n            if (olderAvg > 0) {\r\n              const trend = recentAvg - olderAvg;\r\n              const trendSymbol = trend > 0 ? 'â†‘' : trend < 0 ? 'â†“' : 'â†’';\r\n              console.log(`   Recent Average: ${recentAvg.toFixed(3)} ${trendSymbol}`);\r\n              console.log(`   Previous Average: ${olderAvg.toFixed(3)}`);\r\n              console.log(`   Change: ${trend >= 0 ? '+' : ''}${(trend * 100).toFixed(1)}%`);\r\n            } else {\r\n              console.log(`   Recent Average: ${recentAvg.toFixed(3)}`);\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        console.log('\\nðŸ¤– Agent Reliability:');\r\n        for (const [agent, reliability] of Object.entries(report.agentReliability)) {\r\n          console.log(`   ${agent}: ${(reliability * 100).toFixed(1)}%`);\r\n        }\r\n      }\r\n      \r\n      // Detailed report with --report flag\r\n      if (flags.report) {\r\n        console.log('\\nðŸ“ˆ Detailed Verification Breakdown:');\r\n        console.log(`   Pass Rate: ${((report.passedVerifications / report.totalVerifications) * 100).toFixed(1)}%`);\r\n        console.log(`   Failure Rate: ${(((report.totalVerifications - report.passedVerifications) / report.totalVerifications) * 100).toFixed(1)}%`);\r\n        \r\n        // Show recent history\r\n        if (system.verificationHistory.length > 0) {\r\n          console.log('\\nðŸ“œ Last 10 Verifications:');\r\n          const recent = system.verificationHistory.slice(-10);\r\n          for (const v of recent) {\r\n            const time = new Date(v.timestamp).toLocaleTimeString();\r\n            console.log(`   ${v.passed ? 'âœ…' : 'âŒ'} [${time}] ${v.taskId} (${v.agentType}): ${v.score.toFixed(3)}`);\r\n          }\r\n        }\r\n        \r\n        // Performance metrics\r\n        console.log('\\nðŸŽ¯ Target Metrics Comparison:');\r\n        console.log(`   Truth Accuracy: ${report.averageScore >= 0.95 ? 'âœ…' : 'âŒ'} ${(report.averageScore * 100).toFixed(1)}% (target: 95%)`);\r\n        console.log(`   Pass Rate: ${report.passedVerifications/report.totalVerifications >= 0.9 ? 'âœ…' : 'âŒ'} ${((report.passedVerifications/report.totalVerifications) * 100).toFixed(1)}% (target: 90%)`);\r\n      }\r\n      \r\n      // Failure analysis with --analyze flag\r\n      if (flags.analyze) {\r\n        console.log('\\nðŸ” Failure Pattern Analysis:');\r\n        \r\n        // Analyze failures by agent\r\n        const failures = system.verificationHistory.filter(v => !v.passed);\r\n        if (failures.length > 0) {\r\n          const failuresByAgent = {};\r\n          for (const f of failures) {\r\n            failuresByAgent[f.agentType] = (failuresByAgent[f.agentType] || 0) + 1;\r\n          }\r\n          \r\n          console.log('   Failures by Agent:');\r\n          for (const [agent, count] of Object.entries(failuresByAgent)) {\r\n            const percentage = (count / failures.length * 100).toFixed(1);\r\n            console.log(`   â€¢ ${agent}: ${count} failures (${percentage}%)`);\r\n          }\r\n          \r\n          // Common failure scores\r\n          const failureScores = failures.map(f => f.score);\r\n          const avgFailureScore = failureScores.reduce((a, b) => a + b, 0) / failureScores.length;\r\n          console.log(`\\n   Average Failure Score: ${avgFailureScore.toFixed(3)}`);\r\n          console.log(`   Score Gap to Threshold: ${(report.threshold - avgFailureScore).toFixed(3)}`);\r\n          \r\n          // Recommendations\r\n          console.log('\\nðŸ’¡ Recommendations:');\r\n          if (avgFailureScore < 0.5) {\r\n            console.log('   â€¢ Critical: Major quality issues detected');\r\n            console.log('   â€¢ Consider switching to development mode for debugging');\r\n            console.log('   â€¢ Review agent configurations and requirements');\r\n          } else if (avgFailureScore < report.threshold) {\r\n            console.log('   â€¢ Moderate: Close to threshold but needs improvement');\r\n            console.log('   â€¢ Focus on failing agents: ' + Object.keys(failuresByAgent).join(', '));\r\n            console.log('   â€¢ Consider adjusting verification requirements');\r\n          }\r\n        } else {\r\n          console.log('   âœ… No failures detected!');\r\n        }\r\n      }\r\n      \r\n      // Export to file with --export flag\r\n      if (flags.export) {\r\n        const exportPath = typeof flags.export === 'string' ? flags.export : `truth-report-${Date.now()}.json`;\r\n        const exportData = {\r\n          report,\r\n          filteredHistory,\r\n          metadata: {\r\n            exported: new Date().toISOString(),\r\n            filters: {\r\n              agent: flags.agent || null,\r\n              taskId: flags.taskId || null,\r\n              threshold: flags.threshold || null\r\n            },\r\n            command: 'truth',\r\n            version: '2.0.0-alpha.89'\r\n          }\r\n        };\r\n        \r\n        try {\r\n          await fs.writeFile(exportPath, JSON.stringify(exportData, null, 2));\r\n          console.log(`\\nðŸ“ Report exported to: ${exportPath}`);\r\n        } catch (error) {\r\n          console.error(`\\nâŒ Failed to export report: ${error.message}`);\r\n        }\r\n      }\r\n      break;\r\n\r\n    case 'status':\r\n    default:\r\n      await system.loadMemory();\r\n      console.log('\\nðŸ” Verification System Status');\r\n      console.log('â”'.repeat(50));\r\n      console.log(`Mode: ${system.mode}`);\r\n      console.log(`Verifications: ${system.verificationHistory.length}`);\r\n      console.log(`Recent: ${system.verificationHistory.slice(-5).length} verifications`);\r\n      \r\n      if (system.verificationHistory.length > 0) {\r\n        const recent = system.verificationHistory.slice(-5);\r\n        console.log('\\nðŸ“œ Recent Verifications:');\r\n        for (const v of recent) {\r\n          console.log(`   ${v.passed ? 'âœ…' : 'âŒ'} ${v.taskId} (${v.agentType}): ${v.score.toFixed(2)}`);\r\n        }\r\n      }\r\n      \r\n      console.log('\\nðŸ’¡ Commands:');\r\n      console.log('   verify init [mode]     - Initialize system');\r\n      console.log('   verify verify [taskId] - Verify a task');\r\n      console.log('   verify truth          - Show truth scores');\r\n      console.log('   verify status         - Show system status');\r\n      break;\r\n  }\r\n}\r\n\r\n// Truth command shortcut\r\nexport async function truthCommand(args, flags) {\r\n  // Handle help flag\r\n  if (flags.help || args[0] === '--help' || args[0] === 'help') {\r\n    const { COMMAND_HELP } = await import('../help-text.js');\r\n    console.log(COMMAND_HELP.truth);\r\n    return;\r\n  }\r\n  return verificationCommand(['truth', ...args], flags);\r\n}\r\n\r\n// Pair programming command\r\nexport async function pairCommand(args, flags) {\r\n  // Handle help flag\r\n  if (flags.help || args[0] === '--help' || args[0] === 'help') {\r\n    const { COMMAND_HELP } = await import('../help-text.js');\r\n    console.log(COMMAND_HELP.pair);\r\n    return;\r\n  }\r\n  console.log('\\nðŸ‘¥ Pair Programming with Verification');\r\n  console.log('â”'.repeat(50));\r\n  \r\n  const system = new VerificationSystem();\r\n  await system.initialize('strict');\r\n  \r\n  console.log('\\nðŸŽ¯ Verification-First Development Mode Activated');\r\n  console.log('   â€¢ All changes require verification');\r\n  console.log('   â€¢ Truth threshold: 0.95');\r\n  console.log('   â€¢ Real-time validation enabled');\r\n  console.log('   â€¢ Auto-rollback on failures');\r\n  \r\n  if (flags.start) {\r\n    console.log('\\nðŸš€ Starting pair programming session...');\r\n    console.log('   Monitoring file changes...');\r\n    console.log('   Running continuous verification...');\r\n    \r\n    // Simulate monitoring\r\n    let iteration = 0;\r\n    const interval = setInterval(async () => {\r\n      iteration++;\r\n      console.log(`\\n[${new Date().toISOString()}] Verification cycle ${iteration}`);\r\n      \r\n      const taskId = `pair-${Date.now()}`;\r\n      const result = await system.verifyTask(taskId, 'coder', { success: Math.random() > 0.3 });\r\n      \r\n      if (iteration >= 3 || !result.passed) {\r\n        clearInterval(interval);\r\n        console.log('\\nâœ¨ Pair programming session complete');\r\n      }\r\n    }, 3000);\r\n  } else {\r\n    console.log('\\nðŸ’¡ Use --start to begin a pair programming session');\r\n  }\r\n}\r\n\r\n// Export for use in command registry\r\nexport default {\r\n  verificationCommand,\r\n  truthCommand,\r\n  pairCommand\r\n};"],"names":["exec","promisify","fs","path","execAsync","VERIFICATION_MODES","strict","threshold","autoRollback","requireConsensus","moderate","development","AGENT_VERIFICATION","coder","reviewer","tester","planner","architect","VerificationSystem","mode","scores","Map","verificationHistory","memoryPath","initialize","loadMemory","console","log","data","readFile","memory","JSON","parse","history","error","saveMemory","Array","from","entries","timestamp","Date","toISOString","mkdir","dirname","recursive","writeFile","stringify","verifyTask","taskId","agentType","claims","requirements","results","totalScore","check","result","runVerification","push","score","passed","toFixed","averageScore","length","verification","triggerRollback","checkType","verificationChecks","stdout","includes","claimScore","success","default","Promise","resolve","setTimeout","getAgentReliability","agentId","agentHistory","filter","v","reduce","sum","generateTruthReport","report","totalVerifications","passedVerifications","agentReliability","agentTypes","Set","map","agent","generateFilteredReport","system","filteredHistory","verificationCommand","args","flags","subcommand","help","COMMAND_HELP","verify","now","parseFloat","json","repeat","detailed","detail","recentAgent","slice","time","toLocaleTimeString","verbose","Object","minScore","Math","min","maxScore","max","recent5","older5","recentAvg","olderAvg","trend","trendSymbol","reliability","recent","analyze","failures","failuresByAgent","f","count","percentage","failureScores","avgFailureScore","a","b","keys","join","export","exportPath","exportData","metadata","exported","filters","command","version","message","truthCommand","truth","pairCommand","pair","start","iteration","interval","setInterval","random","clearInterval"],"mappings":"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"}