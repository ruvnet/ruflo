{
  "version": 3,
  "sources": ["../../src/mcp/lifecycle-manager.ts"],
  "sourcesContent": ["/**\n * MCP Server Lifecycle Manager\n * Handles server lifecycle operations including start, stop, restart, and health checks\n */\n\nimport { EventEmitter } from 'node:events';\nimport type { ILogger } from '../core/logger.js';\nimport type { MCPConfig, MCPSession, MCPMetrics, HealthStatus } from '../utils/types.js';\nimport { MCPError } from '../utils/errors.js';\nimport type { IMCPServer } from './server.js';\n\nexport enum LifecycleState {\n  STOPPED = 'stopped',\n  STARTING = 'starting',\n  RUNNING = 'running',\n  STOPPING = 'stopping',\n  RESTARTING = 'restarting',\n  ERROR = 'error',\n}\n\nexport interface LifecycleEvent {\n  timestamp: Date;\n  state: LifecycleState;\n  previousState?: LifecycleState;\n  error?: Error;\n  details?: Record<string, unknown>;\n}\n\nexport interface HealthCheckResult {\n  healthy: boolean;\n  state: LifecycleState;\n  uptime: number;\n  lastRestart?: Date;\n  error?: string;\n  metrics?: Record<string, number>;\n  components: {\n    server: boolean;\n    transport: boolean;\n    sessions: boolean;\n    tools: boolean;\n    auth: boolean;\n    loadBalancer: boolean;\n  };\n}\n\nexport interface LifecycleManagerConfig {\n  healthCheckInterval: number;\n  gracefulShutdownTimeout: number;\n  maxRestartAttempts: number;\n  restartDelay: number;\n  enableAutoRestart: boolean;\n  enableHealthChecks: boolean;\n}\n\n/**\n * MCP Server Lifecycle Manager\n * Manages the complete lifecycle of MCP servers with robust error handling\n */\nexport class MCPLifecycleManager extends EventEmitter {\n  private state: LifecycleState = LifecycleState.STOPPED;\n  private server?: IMCPServer;\n  private healthCheckTimer?: NodeJS.Timeout;\n  private startTime?: Date;\n  private lastRestart?: Date;\n  private restartAttempts = 0;\n  private shutdownPromise?: Promise<void>;\n  private history: LifecycleEvent[] = [];\n\n  private readonly config: LifecycleManagerConfig = {\n    healthCheckInterval: 30000, // 30 seconds\n    gracefulShutdownTimeout: 10000, // 10 seconds\n    maxRestartAttempts: 3,\n    restartDelay: 5000, // 5 seconds\n    enableAutoRestart: true,\n    enableHealthChecks: true,\n  };\n\n  constructor(\n    private mcpConfig: MCPConfig,\n    private logger: ILogger,\n    private serverFactory: () => IMCPServer,\n    config?: Partial<LifecycleManagerConfig>,\n  ) {\n    super();\n\n    if (config) {\n      Object.assign(this.config, config);\n    }\n\n    this.setupEventHandlers();\n  }\n\n  /**\n   * Start the MCP server\n   */\n  async start(): Promise<void> {\n    if (this.state !== LifecycleState.STOPPED) {\n      throw new MCPError(`Cannot start server in state: ${this.state}`);\n    }\n\n    this.setState(LifecycleState.STARTING);\n    this.logger.info('Starting MCP server lifecycle manager');\n\n    try {\n      // Create server instance\n      this.server = this.serverFactory();\n\n      // Start the server\n      await this.server.start();\n\n      // Record start time\n      this.startTime = new Date();\n      this.restartAttempts = 0;\n\n      // Start health checks\n      if (this.config.enableHealthChecks) {\n        this.startHealthChecks();\n      }\n\n      this.setState(LifecycleState.RUNNING);\n      this.logger.info('MCP server started successfully');\n    } catch (error) {\n      this.setState(LifecycleState.ERROR, error as Error);\n      this.logger.error('Failed to start MCP server', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Stop the MCP server gracefully\n   */\n  async stop(): Promise<void> {\n    if (this.state === LifecycleState.STOPPED) {\n      return;\n    }\n\n    if (this.shutdownPromise) {\n      return this.shutdownPromise;\n    }\n\n    this.setState(LifecycleState.STOPPING);\n    this.logger.info('Stopping MCP server');\n\n    this.shutdownPromise = this.performShutdown();\n    await this.shutdownPromise;\n    this.shutdownPromise = undefined;\n  }\n\n  /**\n   * Restart the MCP server\n   */\n  async restart(): Promise<void> {\n    if (this.state === LifecycleState.STOPPED) {\n      return this.start();\n    }\n\n    this.setState(LifecycleState.RESTARTING);\n    this.logger.info('Restarting MCP server');\n\n    try {\n      await this.stop();\n\n      // Add restart delay\n      if (this.config.restartDelay > 0) {\n        await new Promise((resolve) => setTimeout(resolve, this.config.restartDelay));\n      }\n\n      await this.start();\n      this.lastRestart = new Date();\n      this.restartAttempts++;\n\n      this.logger.info('MCP server restarted successfully');\n    } catch (error) {\n      this.setState(LifecycleState.ERROR, error as Error);\n      this.logger.error('Failed to restart MCP server', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Perform comprehensive health check\n   */\n  async healthCheck(): Promise<HealthCheckResult> {\n    const startTime = Date.now();\n    const result: HealthCheckResult = {\n      healthy: false,\n      state: this.state,\n      uptime: this.getUptime(),\n      lastRestart: this.lastRestart,\n      components: {\n        server: false,\n        transport: false,\n        sessions: false,\n        tools: false,\n        auth: false,\n        loadBalancer: false,\n      },\n    };\n\n    try {\n      if (!this.server || this.state !== LifecycleState.RUNNING) {\n        result.error = 'Server not running';\n        return result;\n      }\n\n      // Check server health\n      const serverHealth = await this.server.getHealthStatus();\n      result.components.server = serverHealth.healthy;\n      result.metrics = serverHealth.metrics;\n\n      if (serverHealth.error) {\n        result.error = serverHealth.error;\n      }\n\n      // Check individual components\n      result.components.transport = serverHealth.metrics?.transportConnections !== undefined;\n      result.components.sessions = serverHealth.metrics?.activeSessions !== undefined;\n      result.components.tools = (serverHealth.metrics?.registeredTools || 0) > 0;\n      result.components.auth = serverHealth.metrics?.authenticatedSessions !== undefined;\n      result.components.loadBalancer = serverHealth.metrics?.rateLimitedRequests !== undefined;\n\n      // Overall health assessment\n      result.healthy =\n        result.components.server &&\n        result.components.transport &&\n        result.components.sessions &&\n        result.components.tools;\n\n      const checkDuration = Date.now() - startTime;\n      if (result.metrics) {\n        result.metrics.healthCheckDuration = checkDuration;\n      }\n\n      this.logger.debug('Health check completed', {\n        healthy: result.healthy,\n        duration: checkDuration,\n        components: result.components,\n      });\n\n      return result;\n    } catch (error) {\n      result.error = error instanceof Error ? error.message : 'Unknown error';\n      this.logger.error('Health check failed', error);\n      return result;\n    }\n  }\n\n  /**\n   * Get current server state\n   */\n  getState(): LifecycleState {\n    return this.state;\n  }\n\n  /**\n   * Get server metrics\n   */\n  getMetrics(): MCPMetrics | undefined {\n    return this.server?.getMetrics();\n  }\n\n  /**\n   * Get active sessions\n   */\n  getSessions(): MCPSession[] {\n    return this.server?.getSessions() || [];\n  }\n\n  /**\n   * Get server uptime in milliseconds\n   */\n  getUptime(): number {\n    return this.startTime ? Date.now() - this.startTime.getTime() : 0;\n  }\n\n  /**\n   * Get lifecycle event history\n   */\n  getHistory(): LifecycleEvent[] {\n    return [...this.history];\n  }\n\n  /**\n   * Force terminate server (emergency stop)\n   */\n  async forceStop(): Promise<void> {\n    this.logger.warn('Force stopping MCP server');\n\n    // Stop health checks\n    this.stopHealthChecks();\n\n    // Force close server\n    if (this.server) {\n      try {\n        await this.server.stop();\n      } catch (error) {\n        this.logger.error('Error during force stop', error);\n      }\n      this.server = undefined;\n    }\n\n    this.setState(LifecycleState.STOPPED);\n    this.startTime = undefined;\n  }\n\n  /**\n   * Enable or disable auto-restart\n   */\n  setAutoRestart(enabled: boolean): void {\n    this.config.enableAutoRestart = enabled;\n    this.logger.info('Auto-restart', { enabled });\n  }\n\n  /**\n   * Enable or disable health checks\n   */\n  setHealthChecks(enabled: boolean): void {\n    this.config.enableHealthChecks = enabled;\n\n    if (enabled && this.state === LifecycleState.RUNNING) {\n      this.startHealthChecks();\n    } else {\n      this.stopHealthChecks();\n    }\n\n    this.logger.info('Health checks', { enabled });\n  }\n\n  private setState(newState: LifecycleState, error?: Error): void {\n    const previousState = this.state;\n    this.state = newState;\n\n    const event: LifecycleEvent = {\n      timestamp: new Date(),\n      state: newState,\n      previousState,\n      error,\n    };\n\n    this.history.push(event);\n\n    // Keep only last 100 events\n    if (this.history.length > 100) {\n      this.history.shift();\n    }\n\n    this.emit('stateChange', event);\n    this.logger.info('State change', {\n      from: previousState,\n      to: newState,\n      error: error?.message,\n    });\n  }\n\n  private setupEventHandlers(): void {\n    // Handle uncaught errors\n    process.on('uncaughtException', (error) => {\n      this.logger.error('Uncaught exception', error);\n      this.handleServerError(error);\n    });\n\n    process.on('unhandledRejection', (reason) => {\n      this.logger.error('Unhandled rejection', reason);\n      this.handleServerError(reason instanceof Error ? reason : new Error(String(reason)));\n    });\n\n    // Handle process signals\n    process.on('SIGINT', () => {\n      this.logger.info('Received SIGINT, shutting down gracefully');\n      this.stop().catch((error) => {\n        this.logger.error('Error during graceful shutdown', error);\n        process.exit(1);\n      });\n    });\n\n    process.on('SIGTERM', () => {\n      this.logger.info('Received SIGTERM, shutting down gracefully');\n      this.stop().catch((error) => {\n        this.logger.error('Error during graceful shutdown', error);\n        process.exit(1);\n      });\n    });\n  }\n\n  private async handleServerError(error: Error): Promise<void> {\n    this.logger.error('Server error detected', error);\n    this.setState(LifecycleState.ERROR, error);\n\n    if (this.config.enableAutoRestart && this.restartAttempts < this.config.maxRestartAttempts) {\n      this.logger.info('Attempting auto-restart', {\n        attempt: this.restartAttempts + 1,\n        maxAttempts: this.config.maxRestartAttempts,\n      });\n\n      try {\n        await this.restart();\n      } catch (restartError) {\n        this.logger.error('Auto-restart failed', restartError);\n      }\n    } else {\n      this.logger.error('Max restart attempts reached or auto-restart disabled');\n      await this.forceStop();\n    }\n  }\n\n  private startHealthChecks(): void {\n    if (this.healthCheckTimer) {\n      return;\n    }\n\n    this.healthCheckTimer = setInterval(async () => {\n      try {\n        const health = await this.healthCheck();\n\n        if (!health.healthy && this.state === LifecycleState.RUNNING) {\n          this.logger.warn('Health check failed', health);\n          this.handleServerError(new Error(health.error || 'Health check failed'));\n        }\n      } catch (error) {\n        this.logger.error('Health check error', error);\n      }\n    }, this.config.healthCheckInterval);\n\n    this.logger.debug('Health checks started', { interval: this.config.healthCheckInterval });\n  }\n\n  private stopHealthChecks(): void {\n    if (this.healthCheckTimer) {\n      clearInterval(this.healthCheckTimer);\n      this.healthCheckTimer = undefined;\n      this.logger.debug('Health checks stopped');\n    }\n  }\n\n  private async performShutdown(): Promise<void> {\n    try {\n      // Stop health checks\n      this.stopHealthChecks();\n\n      // Graceful shutdown with timeout\n      const shutdownPromise = this.server?.stop() || Promise.resolve();\n      const timeoutPromise = new Promise<never>((_, reject) => {\n        setTimeout(\n          () => reject(new Error('Shutdown timeout')),\n          this.config.gracefulShutdownTimeout,\n        );\n      });\n\n      await Promise.race([shutdownPromise, timeoutPromise]);\n\n      this.server = undefined;\n      this.setState(LifecycleState.STOPPED);\n      this.startTime = undefined;\n\n      this.logger.info('MCP server stopped successfully');\n    } catch (error) {\n      this.logger.error('Error during shutdown', error);\n      await this.forceStop();\n      throw error;\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": ["LifecycleState"]
}
