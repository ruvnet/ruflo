{"version":3,"sources":["../../../src/config/ruv-swarm-config.ts"],"sourcesContent":["/**\r\n * ruv-swarm configuration management for Claude Code integration\r\n *\r\n * This module handles configuration settings for ruv-swarm integration,\r\n * including topology preferences, agent limits, and coordination patterns.\r\n */\r\n\r\nimport { readFileSync, writeFileSync, existsSync } from 'fs';\r\nimport { join } from 'path';\r\nimport type { ILogger } from '../core/logger.js';\r\nimport { deepMerge } from '../utils/helpers.js';\r\n\r\n/**\r\n * ruv-swarm integration configuration\r\n */\r\nexport interface RuvSwarmConfig {\r\n  // Core swarm settings\r\n  swarm: {\r\n    defaultTopology: 'mesh' | 'hierarchical' | 'ring' | 'star';\r\n    maxAgents: number;\r\n    defaultStrategy: 'balanced' | 'specialized' | 'adaptive';\r\n    autoInit: boolean;\r\n    enableHooks: boolean;\r\n  };\r\n\r\n  // Agent configuration\r\n  agents: {\r\n    defaultCapabilities: string[];\r\n    spawnTimeout: number;\r\n    heartbeatInterval: number;\r\n    maxRetries: number;\r\n  };\r\n\r\n  // Task orchestration\r\n  tasks: {\r\n    defaultStrategy: 'parallel' | 'sequential' | 'adaptive';\r\n    defaultPriority: 'low' | 'medium' | 'high' | 'critical';\r\n    timeout: number;\r\n    enableMonitoring: boolean;\r\n  };\r\n\r\n  // Memory and persistence\r\n  memory: {\r\n    enablePersistence: boolean;\r\n    compressionLevel: number;\r\n    ttl: number;\r\n    maxSize: number;\r\n  };\r\n\r\n  // Neural capabilities\r\n  neural: {\r\n    enableTraining: boolean;\r\n    patterns: string[];\r\n    learningRate: number;\r\n    trainingIterations: number;\r\n  };\r\n\r\n  // Performance monitoring\r\n  monitoring: {\r\n    enableMetrics: boolean;\r\n    metricsInterval: number;\r\n    enableAlerts: boolean;\r\n    alertThresholds: {\r\n      cpu: number;\r\n      memory: number;\r\n      taskFailureRate: number;\r\n    };\r\n  };\r\n\r\n  // Integration settings\r\n  integration: {\r\n    enableMCPTools: boolean;\r\n    enableCLICommands: boolean;\r\n    enableHooks: boolean;\r\n    workingDirectory?: string;\r\n    sessionTimeout: number;\r\n  };\r\n}\r\n\r\n/**\r\n * Default ruv-swarm configuration\r\n */\r\nexport const defaultRuvSwarmConfig: RuvSwarmConfig = {\r\n  swarm: {\r\n    defaultTopology: 'mesh',\r\n    maxAgents: 8,\r\n    defaultStrategy: 'adaptive',\r\n    autoInit: true,\r\n    enableHooks: true,\r\n  },\r\n\r\n  agents: {\r\n    defaultCapabilities: ['filesystem', 'search', 'memory', 'coordination'],\r\n    spawnTimeout: 30000,\r\n    heartbeatInterval: 5000,\r\n    maxRetries: 3,\r\n  },\r\n\r\n  tasks: {\r\n    defaultStrategy: 'adaptive',\r\n    defaultPriority: 'medium',\r\n    timeout: 300000, // 5 minutes\r\n    enableMonitoring: true,\r\n  },\r\n\r\n  memory: {\r\n    enablePersistence: true,\r\n    compressionLevel: 6,\r\n    ttl: 86400000, // 24 hours\r\n    maxSize: 100 * 1024 * 1024, // 100MB\r\n  },\r\n\r\n  neural: {\r\n    enableTraining: true,\r\n    patterns: ['convergent', 'divergent', 'lateral', 'systems'],\r\n    learningRate: 0.1,\r\n    trainingIterations: 10,\r\n  },\r\n\r\n  monitoring: {\r\n    enableMetrics: true,\r\n    metricsInterval: 10000,\r\n    enableAlerts: true,\r\n    alertThresholds: {\r\n      cpu: 80,\r\n      memory: 85,\r\n      taskFailureRate: 20,\r\n    },\r\n  },\r\n\r\n  integration: {\r\n    enableMCPTools: true,\r\n    enableCLICommands: true,\r\n    enableHooks: true,\r\n    sessionTimeout: 3600000, // 1 hour\r\n  },\r\n};\r\n\r\n/**\r\n * ruv-swarm configuration manager\r\n */\r\nexport class RuvSwarmConfigManager {\r\n  private config: RuvSwarmConfig;\r\n  private configPath: string;\r\n\r\n  constructor(\r\n    private logger: ILogger,\r\n    configPath?: string,\r\n  ) {\r\n    this.configPath = configPath || join(process.cwd(), '.claude', 'ruv-swarm-config.json');\r\n    this.config = this.loadConfig();\r\n  }\r\n\r\n  /**\r\n   * Load configuration from file or use defaults\r\n   */\r\n  private loadConfig(): RuvSwarmConfig {\r\n    try {\r\n      if (existsSync(this.configPath)) {\r\n        const configData = readFileSync(this.configPath, 'utf-8');\r\n        const userConfig = JSON.parse(configData) as Partial<RuvSwarmConfig>;\r\n\r\n        // Merge with defaults\r\n        const mergedConfig = deepMerge(defaultRuvSwarmConfig, userConfig);\r\n\r\n        this.logger.debug('Loaded ruv-swarm config from file', {\r\n          path: this.configPath,\r\n          config: mergedConfig,\r\n        });\r\n\r\n        return mergedConfig;\r\n      }\r\n    } catch (error) {\r\n      this.logger.warn('Failed to load ruv-swarm config, using defaults', {\r\n        error:\r\n          error instanceof Error ? (error instanceof Error ? error.message : String(error)) : error,\r\n      });\r\n    }\r\n\r\n    this.logger.debug('Using default ruv-swarm config');\r\n    return { ...defaultRuvSwarmConfig };\r\n  }\r\n\r\n  /**\r\n   * Save configuration to file\r\n   */\r\n  saveConfig(): void {\r\n    try {\r\n      const configDir = join(this.configPath, '..');\r\n\r\n      // Ensure config directory exists\r\n      if (!existsSync(configDir)) {\r\n        const fs = require('fs');\r\n        fs.mkdirSync(configDir, { recursive: true });\r\n      }\r\n\r\n      writeFileSync(this.configPath, JSON.stringify(this.config, null, 2), 'utf-8');\r\n\r\n      this.logger.debug('Saved ruv-swarm config to file', { path: this.configPath });\r\n    } catch (error) {\r\n      this.logger.error('Failed to save ruv-swarm config', {\r\n        error:\r\n          error instanceof Error ? (error instanceof Error ? error.message : String(error)) : error,\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get current configuration\r\n   */\r\n  getConfig(): RuvSwarmConfig {\r\n    return { ...this.config };\r\n  }\r\n\r\n  /**\r\n   * Update configuration\r\n   */\r\n  updateConfig(updates: Partial<RuvSwarmConfig>): void {\r\n    this.config = deepMerge(this.config, updates);\r\n    this.saveConfig();\r\n\r\n    this.logger.info('Updated ruv-swarm config', { updates });\r\n  }\r\n\r\n  /**\r\n   * Reset configuration to defaults\r\n   */\r\n  resetConfig(): void {\r\n    this.config = { ...defaultRuvSwarmConfig };\r\n    this.saveConfig();\r\n\r\n    this.logger.info('Reset ruv-swarm config to defaults');\r\n  }\r\n\r\n  /**\r\n   * Get specific configuration section\r\n   */\r\n  getSwarmConfig() {\r\n    return this.config.swarm;\r\n  }\r\n  getAgentsConfig() {\r\n    return this.config.agents;\r\n  }\r\n  getTasksConfig() {\r\n    return this.config.tasks;\r\n  }\r\n  getMemoryConfig() {\r\n    return this.config.memory;\r\n  }\r\n  getNeuralConfig() {\r\n    return this.config.neural;\r\n  }\r\n  getMonitoringConfig() {\r\n    return this.config.monitoring;\r\n  }\r\n  getIntegrationConfig() {\r\n    return this.config.integration;\r\n  }\r\n\r\n  /**\r\n   * Update specific configuration section\r\n   */\r\n  updateSwarmConfig(updates: Partial<RuvSwarmConfig['swarm']>): void {\r\n    this.updateConfig({ swarm: { ...this.config.swarm, ...updates } });\r\n  }\r\n\r\n  updateAgentsConfig(updates: Partial<RuvSwarmConfig['agents']>): void {\r\n    this.updateConfig({ agents: { ...this.config.agents, ...updates } });\r\n  }\r\n\r\n  updateTasksConfig(updates: Partial<RuvSwarmConfig['tasks']>): void {\r\n    this.updateConfig({ tasks: { ...this.config.tasks, ...updates } });\r\n  }\r\n\r\n  updateMemoryConfig(updates: Partial<RuvSwarmConfig['memory']>): void {\r\n    this.updateConfig({ memory: { ...this.config.memory, ...updates } });\r\n  }\r\n\r\n  updateNeuralConfig(updates: Partial<RuvSwarmConfig['neural']>): void {\r\n    this.updateConfig({ neural: { ...this.config.neural, ...updates } });\r\n  }\r\n\r\n  updateMonitoringConfig(updates: Partial<RuvSwarmConfig['monitoring']>): void {\r\n    this.updateConfig({ monitoring: { ...this.config.monitoring, ...updates } });\r\n  }\r\n\r\n  updateIntegrationConfig(updates: Partial<RuvSwarmConfig['integration']>): void {\r\n    this.updateConfig({ integration: { ...this.config.integration, ...updates } });\r\n  }\r\n\r\n  /**\r\n   * Validate configuration\r\n   */\r\n  validateConfig(): { valid: boolean; errors: string[] } {\r\n    const errors: string[] = [];\r\n\r\n    // Validate swarm settings\r\n    if (this.config.swarm.maxAgents < 1 || this.config.swarm.maxAgents > 100) {\r\n      errors.push('swarm.maxAgents must be between 1 and 100');\r\n    }\r\n\r\n    // Validate agent settings\r\n    if (this.config.agents.spawnTimeout < 1000) {\r\n      errors.push('agents.spawnTimeout must be at least 1000ms');\r\n    }\r\n\r\n    if (this.config.agents.heartbeatInterval < 1000) {\r\n      errors.push('agents.heartbeatInterval must be at least 1000ms');\r\n    }\r\n\r\n    // Validate task settings\r\n    if (this.config.tasks.timeout < 10000) {\r\n      errors.push('tasks.timeout must be at least 10000ms');\r\n    }\r\n\r\n    // Validate memory settings\r\n    if (this.config.memory.maxSize < 1024 * 1024) {\r\n      // 1MB minimum\r\n      errors.push('memory.maxSize must be at least 1MB');\r\n    }\r\n\r\n    if (this.config.memory.compressionLevel < 0 || this.config.memory.compressionLevel > 9) {\r\n      errors.push('memory.compressionLevel must be between 0 and 9');\r\n    }\r\n\r\n    // Validate neural settings\r\n    if (this.config.neural.learningRate <= 0 || this.config.neural.learningRate > 1) {\r\n      errors.push('neural.learningRate must be between 0 and 1');\r\n    }\r\n\r\n    if (this.config.neural.trainingIterations < 1) {\r\n      errors.push('neural.trainingIterations must be at least 1');\r\n    }\r\n\r\n    // Validate monitoring settings\r\n    const { alertThresholds } = this.config.monitoring;\r\n    if (alertThresholds.cpu < 0 || alertThresholds.cpu > 100) {\r\n      errors.push('monitoring.alertThresholds.cpu must be between 0 and 100');\r\n    }\r\n\r\n    if (alertThresholds.memory < 0 || alertThresholds.memory > 100) {\r\n      errors.push('monitoring.alertThresholds.memory must be between 0 and 100');\r\n    }\r\n\r\n    if (alertThresholds.taskFailureRate < 0 || alertThresholds.taskFailureRate > 100) {\r\n      errors.push('monitoring.alertThresholds.taskFailureRate must be between 0 and 100');\r\n    }\r\n\r\n    return {\r\n      valid: errors.length === 0,\r\n      errors,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get configuration as command-line arguments for ruv-swarm\r\n   */\r\n  getCommandArgs(): string[] {\r\n    const args: string[] = [];\r\n\r\n    // Add swarm configuration\r\n    args.push('--topology', this.config.swarm.defaultTopology);\r\n    args.push('--max-agents', String(this.config.swarm.maxAgents));\r\n    args.push('--strategy', this.config.swarm.defaultStrategy);\r\n\r\n    if (this.config.swarm.enableHooks) {\r\n      args.push('--enable-hooks');\r\n    }\r\n\r\n    // Add task configuration\r\n    args.push('--task-strategy', this.config.tasks.defaultStrategy);\r\n    args.push('--task-priority', this.config.tasks.defaultPriority);\r\n    args.push('--task-timeout', String(this.config.tasks.timeout));\r\n\r\n    if (this.config.tasks.enableMonitoring) {\r\n      args.push('--enable-monitoring');\r\n    }\r\n\r\n    // Add memory configuration\r\n    if (this.config.memory.enablePersistence) {\r\n      args.push('--enable-persistence');\r\n      args.push('--compression-level', String(this.config.memory.compressionLevel));\r\n      args.push('--memory-ttl', String(this.config.memory.ttl));\r\n    }\r\n\r\n    // Add neural configuration\r\n    if (this.config.neural.enableTraining) {\r\n      args.push('--enable-training');\r\n      args.push('--learning-rate', String(this.config.neural.learningRate));\r\n      args.push('--training-iterations', String(this.config.neural.trainingIterations));\r\n    }\r\n\r\n    return args;\r\n  }\r\n}\r\n\r\n/**\r\n * Create or get singleton instance of ruv-swarm config manager\r\n */\r\nlet configManagerInstance: RuvSwarmConfigManager | null = null;\r\n\r\nexport function getRuvSwarmConfigManager(\r\n  logger: ILogger,\r\n  configPath?: string,\r\n): RuvSwarmConfigManager {\r\n  if (!configManagerInstance) {\r\n    configManagerInstance = new RuvSwarmConfigManager(logger, configPath);\r\n  }\r\n  return configManagerInstance;\r\n}\r\n\r\nexport default {\r\n  RuvSwarmConfigManager,\r\n  getRuvSwarmConfigManager,\r\n  defaultRuvSwarmConfig,\r\n};\r\n"],"names":["readFileSync","writeFileSync","existsSync","join","deepMerge","defaultRuvSwarmConfig","swarm","defaultTopology","maxAgents","defaultStrategy","autoInit","enableHooks","agents","defaultCapabilities","spawnTimeout","heartbeatInterval","maxRetries","tasks","defaultPriority","timeout","enableMonitoring","memory","enablePersistence","compressionLevel","ttl","maxSize","neural","enableTraining","patterns","learningRate","trainingIterations","monitoring","enableMetrics","metricsInterval","enableAlerts","alertThresholds","cpu","taskFailureRate","integration","enableMCPTools","enableCLICommands","sessionTimeout","RuvSwarmConfigManager","config","configPath","logger","process","cwd","loadConfig","configData","userConfig","JSON","parse","mergedConfig","debug","path","error","warn","Error","message","String","saveConfig","configDir","fs","require","mkdirSync","recursive","stringify","getConfig","updateConfig","updates","info","resetConfig","getSwarmConfig","getAgentsConfig","getTasksConfig","getMemoryConfig","getNeuralConfig","getMonitoringConfig","getIntegrationConfig","updateSwarmConfig","updateAgentsConfig","updateTasksConfig","updateMemoryConfig","updateNeuralConfig","updateMonitoringConfig","updateIntegrationConfig","validateConfig","errors","push","valid","length","getCommandArgs","args","configManagerInstance","getRuvSwarmConfigManager"],"mappings":"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"}