{"version":3,"sources":["../../../../src/mcp/tools/_template.ts"],"sourcesContent":["/**\r\n * Tool Template for Filesystem-Based Tool Discovery\r\n *\r\n * This template provides the structure for individual MCP tools\r\n * following the progressive disclosure pattern.\r\n *\r\n * Usage:\r\n * 1. Copy this file to appropriate category directory\r\n * 2. Rename to match tool name (e.g., spawn.ts for agents/spawn)\r\n * 3. Update all [PLACEHOLDER] values\r\n * 4. Implement handler logic\r\n */\r\n\r\nimport type { MCPTool, ClaudeFlowToolContext } from '../types.js';\r\nimport type { ILogger } from '../../interfaces/logger.js';\r\n\r\n/**\r\n * Input interface for this tool\r\n * Define strongly-typed input parameters\r\n *\r\n * REPLACE: Rename ToolTemplateInput to match your tool name (e.g., AgentSpawnInput)\r\n */\r\ninterface ToolTemplateInput {\r\n  // Define input properties with types\r\n  // Example:\r\n  // name: string;\r\n  // config?: Record<string, unknown>;\r\n\r\n  // PLACEHOLDER: Add your input properties here\r\n  exampleProperty?: string;\r\n}\r\n\r\n/**\r\n * Result interface for this tool\r\n * Define strongly-typed return value\r\n *\r\n * REPLACE: Rename ToolTemplateResult to match your tool name (e.g., AgentSpawnResult)\r\n */\r\ninterface ToolTemplateResult {\r\n  success: boolean;\r\n  // Define result properties\r\n  // Example:\r\n  // resourceId: string;\r\n  // status: string;\r\n\r\n  // PLACEHOLDER: Add your result properties here\r\n  message?: string;\r\n}\r\n\r\n/**\r\n * Create tool template\r\n *\r\n * REPLACE: Update function name to match your tool (e.g., createAgentSpawnTool)\r\n * REPLACE: Update JSDoc description\r\n *\r\n * @param logger - Logger instance for structured logging\r\n * @returns MCPTool definition\r\n */\r\nexport function createToolTemplateTool(logger: ILogger): MCPTool {\r\n  return {\r\n    // REPLACE: Update name to match your tool (e.g., 'agents/spawn')\r\n    name: 'category/toolname',\r\n\r\n    // REPLACE: Update description with detailed information about your tool\r\n    description: 'Template for creating new MCP tools with progressive disclosure. Copy and customize this file.',\r\n\r\n    inputSchema: {\r\n      type: 'object',\r\n      properties: {\r\n        // Define JSON schema for input validation\r\n        // Example:\r\n        // name: {\r\n        //   type: 'string',\r\n        //   description: 'Resource name',\r\n        //   minLength: 1,\r\n        //   maxLength: 100,\r\n        // },\r\n      },\r\n      required: [], // List required properties\r\n    },\r\n\r\n    // Optional: Metadata for progressive disclosure\r\n    metadata: {\r\n      // REPLACE: Update category to match your tool's purpose\r\n      category: 'system', // agents, tasks, memory, system, etc.\r\n      // REPLACE: Add relevant searchable tags\r\n      tags: ['template', 'example'], // Searchable tags\r\n      examples: [\r\n        {\r\n          description: 'Example usage scenario',\r\n          input: {\r\n            // Example input object\r\n          },\r\n          expectedOutput: {\r\n            // Expected result object\r\n          },\r\n        },\r\n      ],\r\n      detailLevel: 'standard', // 'basic' | 'standard' | 'full'\r\n    },\r\n\r\n    /**\r\n     * Tool execution handler\r\n     *\r\n     * @param input - Validated input parameters\r\n     * @param context - Tool execution context with orchestrator, etc.\r\n     * @returns Tool result\r\n     */\r\n    handler: async (\r\n      input: any,\r\n      context?: ClaudeFlowToolContext\r\n    ): Promise<ToolTemplateResult> => {\r\n      // Validate context availability\r\n      if (!context?.orchestrator) {\r\n        throw new Error('Orchestrator not available in tool context');\r\n      }\r\n\r\n      // Cast input to typed interface\r\n      const validatedInput = input as ToolTemplateInput;\r\n\r\n      // REPLACE: Update log message to match your tool\r\n      logger.info('category/toolname invoked', {\r\n        input: validatedInput,\r\n        sessionId: context.sessionId,\r\n      });\r\n\r\n      try {\r\n        // ============================================\r\n        // IMPLEMENT TOOL LOGIC HERE\r\n        // ============================================\r\n\r\n        // Example:\r\n        // const result = await context.orchestrator.someMethod(validatedInput);\r\n\r\n        // ============================================\r\n        // END TOOL LOGIC\r\n        // ============================================\r\n\r\n        // Log success\r\n        logger.info('[namespace]/[toolname] completed successfully', {\r\n          input: validatedInput,\r\n        });\r\n\r\n        return {\r\n          success: true,\r\n          // Include result data\r\n        };\r\n      } catch (error) {\r\n        // Log error\r\n        logger.error('[namespace]/[toolname] failed', {\r\n          error,\r\n          input: validatedInput,\r\n        });\r\n\r\n        // Re-throw for MCP error handling\r\n        throw error;\r\n      }\r\n    },\r\n  };\r\n}\r\n\r\n/**\r\n * Export lightweight metadata for tool discovery\r\n * This is loaded without executing the full tool definition\r\n *\r\n * REPLACE: Update all fields to match your tool\r\n */\r\nexport const toolMetadata = {\r\n  name: 'category/toolname',\r\n  description: 'Brief one-line description of the tool',\r\n  category: 'system',\r\n  detailLevel: 'standard' as const,\r\n  tags: ['template', 'example'],\r\n};\r\n"],"names":["createToolTemplateTool","logger","name","description","inputSchema","type","properties","required","metadata","category","tags","examples","input","expectedOutput","detailLevel","handler","context","orchestrator","Error","validatedInput","info","sessionId","success","error","toolMetadata"],"mappings":"AA0DA,OAAO,SAASA,uBAAuBC,MAAe;IACpD,OAAO;QAELC,MAAM;QAGNC,aAAa;QAEbC,aAAa;YACXC,MAAM;YACNC,YAAY,CASZ;YACAC,UAAU,EAAE;QACd;QAGAC,UAAU;YAERC,UAAU;YAEVC,MAAM;gBAAC;gBAAY;aAAU;YAC7BC,UAAU;gBACR;oBACER,aAAa;oBACbS,OAAO,CAEP;oBACAC,gBAAgB,CAEhB;gBACF;aACD;YACDC,aAAa;QACf;QASAC,SAAS,OACPH,OACAI;YAGA,IAAI,CAACA,SAASC,cAAc;gBAC1B,MAAM,IAAIC,MAAM;YAClB;YAGA,MAAMC,iBAAiBP;YAGvBX,OAAOmB,IAAI,CAAC,6BAA6B;gBACvCR,OAAOO;gBACPE,WAAWL,QAAQK,SAAS;YAC9B;YAEA,IAAI;gBAaFpB,OAAOmB,IAAI,CAAC,iDAAiD;oBAC3DR,OAAOO;gBACT;gBAEA,OAAO;oBACLG,SAAS;gBAEX;YACF,EAAE,OAAOC,OAAO;gBAEdtB,OAAOsB,KAAK,CAAC,iCAAiC;oBAC5CA;oBACAX,OAAOO;gBACT;gBAGA,MAAMI;YACR;QACF;IACF;AACF;AAQA,OAAO,MAAMC,eAAe;IAC1BtB,MAAM;IACNC,aAAa;IACbM,UAAU;IACVK,aAAa;IACbJ,MAAM;QAAC;QAAY;KAAU;AAC/B,EAAE"}