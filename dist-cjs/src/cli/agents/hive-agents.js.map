{"version":3,"sources":["../../../../src/cli/agents/hive-agents.ts"],"sourcesContent":["/**\r\n * Hive Mind Agent Templates\r\n * Specialized agents for the Hive Mind swarm system\r\n */\r\n\r\nimport { BaseAgent } from './base-agent.js';\r\nimport type { AgentCapabilities, AgentConfig, TaskDefinition } from '../../swarm/types.js';\r\n\r\nexport interface HiveAgentConfig {\r\n  type: 'queen' | 'worker' | 'scout' | 'guardian' | 'architect';\r\n  specialization?: string;\r\n  consensusWeight?: number;\r\n  knowledgeDomains?: string[];\r\n}\r\n\r\n/**\r\n * Queen Agent - Orchestrator and decision maker\r\n */\r\nexport class QueenAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: any,\r\n    logger: any,\r\n    eventBus: any,\r\n    memory: any,\r\n  ) {\r\n    super(id, 'coordinator', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      // Core capabilities\r\n      codeGeneration: false,\r\n      codeReview: true,\r\n      testing: false,\r\n      documentation: true,\r\n      research: true,\r\n      analysis: true,\r\n\r\n      // Communication capabilities\r\n      webSearch: true,\r\n      apiIntegration: true,\r\n      fileSystem: true,\r\n      terminalAccess: false,\r\n\r\n      // Specialized capabilities\r\n      languages: ['javascript', 'typescript'],\r\n      frameworks: ['node.js'],\r\n      domains: ['orchestration', 'coordination'],\r\n      tools: ['consensus', 'delegation'],\r\n\r\n      // Resource limits\r\n      maxConcurrentTasks: 5,\r\n      maxMemoryUsage: 512,\r\n      maxExecutionTime: 300000,\r\n\r\n      // Performance characteristics\r\n      reliability: 0.95,\r\n      speed: 0.8,\r\n      quality: 0.9,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.8,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 20,\r\n      maxConcurrentTasks: 5,\r\n      timeoutThreshold: 30000,\r\n      reportingInterval: 5000,\r\n      heartbeatInterval: 10000,\r\n      permissions: ['orchestrate', 'delegate', 'consensus'],\r\n    };\r\n  }\r\n\r\n  public async executeTask(task: TaskDefinition): Promise<any> {\r\n    // Queen agent execution logic\r\n    return {\r\n      result: 'orchestrated',\r\n      taskId: task.id,\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  getSystemPrompt(): string {\r\n    return `You are ${this.id}, a Queen agent in the Hive Mind swarm.\r\n\r\nROLE: Orchestrator and Decision Maker\r\n- Coordinate all swarm activities\r\n- Make final decisions after consensus\r\n- Delegate tasks to appropriate agents\r\n- Monitor overall progress and quality\r\n\r\nRESPONSIBILITIES:\r\n1. Task decomposition and planning\r\n2. Agent assignment and coordination\r\n3. Consensus facilitation\r\n4. Quality assurance\r\n5. Strategic decision making\r\n\r\nCONSENSUS PROTOCOL:\r\n- Propose major decisions for voting\r\n- Facilitate discussion among agents\r\n- Calculate consensus thresholds\r\n- Make tie-breaking decisions when needed\r\n\r\nCOMMUNICATION STYLE:\r\n- Clear and authoritative\r\n- Balanced and fair\r\n- Strategic thinking\r\n- Focus on swarm objectives`;\r\n  }\r\n\r\n  async analyzeObjective(objective: string): Promise<any> {\r\n    return {\r\n      complexity: 'high',\r\n      requiredAgents: ['architect', 'worker', 'scout', 'guardian'],\r\n      estimatedTasks: 5,\r\n      strategy: 'hierarchical',\r\n      consensusRequired: true,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Worker Agent - Implementation and execution\r\n */\r\nexport class WorkerAgent extends BaseAgent {\r\n  private specialization: string;\r\n\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: any,\r\n    logger: any,\r\n    eventBus: any,\r\n    memory: any,\r\n    specialization: string = 'general',\r\n  ) {\r\n    super(id, 'coder', config, environment, logger, eventBus, memory);\r\n    this.specialization = specialization;\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      // Core capabilities\r\n      codeGeneration: true,\r\n      codeReview: false,\r\n      testing: true,\r\n      documentation: false,\r\n      research: false,\r\n      analysis: false,\r\n\r\n      // Communication capabilities\r\n      webSearch: false,\r\n      apiIntegration: true,\r\n      fileSystem: true,\r\n      terminalAccess: true,\r\n\r\n      // Specialized capabilities\r\n      languages: ['javascript', 'typescript', 'python'],\r\n      frameworks: ['node.js', 'react', 'express'],\r\n      domains: ['backend', 'frontend', 'fullstack'],\r\n      tools: ['git', 'npm', 'docker'],\r\n\r\n      // Resource limits\r\n      maxConcurrentTasks: 3,\r\n      maxMemoryUsage: 1024,\r\n      maxExecutionTime: 600000,\r\n\r\n      // Performance characteristics\r\n      reliability: 0.9,\r\n      speed: 0.9,\r\n      quality: 0.85,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.7,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 15,\r\n      maxConcurrentTasks: 3,\r\n      timeoutThreshold: 60000,\r\n      reportingInterval: 10000,\r\n      heartbeatInterval: 15000,\r\n      permissions: ['code', 'test', 'debug', 'build'],\r\n    };\r\n  }\r\n\r\n  public async executeTask(task: TaskDefinition): Promise<any> {\r\n    // Worker agent execution logic\r\n    return {\r\n      result: 'implemented',\r\n      taskId: task.id,\r\n      specialization: this.specialization,\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  getSystemPrompt(): string {\r\n    return `You are ${this.id}, a Worker agent in the Hive Mind swarm.\r\n\r\nROLE: Implementation and Execution Specialist\r\n- Execute assigned tasks efficiently\r\n- Implement solutions based on designs\r\n- Collaborate with other workers\r\n- Report progress and issues\r\n\r\nSPECIALIZATION: ${this.specialization || 'general'}\r\n\r\nRESPONSIBILITIES:\r\n1. Task implementation\r\n2. Code development\r\n3. Testing and validation\r\n4. Bug fixing\r\n5. Performance optimization\r\n\r\nWORK PROTOCOL:\r\n- Accept tasks from Queen or consensus\r\n- Provide effort estimates\r\n- Request help when blocked\r\n- Share knowledge with swarm\r\n\r\nCOMMUNICATION STYLE:\r\n- Technical and precise\r\n- Progress-focused\r\n- Collaborative\r\n- Solution-oriented`;\r\n  }\r\n\r\n  async estimateEffort(task: any): Promise<number> {\r\n    // Estimate based on task type and specialization match\r\n    const baseEffort = task.complexity || 5;\r\n    const specializationBonus = task.type === this.specialization ? 0.8 : 1.0;\r\n    return Math.round(baseEffort * specializationBonus);\r\n  }\r\n}\r\n\r\n/**\r\n * Scout Agent - Research and exploration\r\n */\r\nexport class ScoutAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: any,\r\n    logger: any,\r\n    eventBus: any,\r\n    memory: any,\r\n  ) {\r\n    super(id, 'researcher', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      // Core capabilities\r\n      codeGeneration: false,\r\n      codeReview: false,\r\n      testing: false,\r\n      documentation: true,\r\n      research: true,\r\n      analysis: true,\r\n\r\n      // Communication capabilities\r\n      webSearch: true,\r\n      apiIntegration: true,\r\n      fileSystem: false,\r\n      terminalAccess: false,\r\n\r\n      // Specialized capabilities\r\n      languages: [],\r\n      frameworks: [],\r\n      domains: ['research', 'analysis', 'discovery'],\r\n      tools: ['web-search', 'data-analysis'],\r\n\r\n      // Resource limits\r\n      maxConcurrentTasks: 4,\r\n      maxMemoryUsage: 768,\r\n      maxExecutionTime: 300000,\r\n\r\n      // Performance characteristics\r\n      reliability: 0.85,\r\n      speed: 0.95,\r\n      quality: 0.9,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.9,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 25,\r\n      maxConcurrentTasks: 4,\r\n      timeoutThreshold: 45000,\r\n      reportingInterval: 8000,\r\n      heartbeatInterval: 12000,\r\n      permissions: ['research', 'analyze', 'web-search'],\r\n    };\r\n  }\r\n\r\n  public async executeTask(task: TaskDefinition): Promise<any> {\r\n    // Scout agent execution logic\r\n    return {\r\n      result: 'researched',\r\n      taskId: task.id,\r\n      findings: [],\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  getSystemPrompt(): string {\r\n    return `You are ${this.id}, a Scout agent in the Hive Mind swarm.\r\n\r\nROLE: Research and Exploration Specialist\r\n- Explore new territories and solutions\r\n- Research best practices and patterns\r\n- Identify potential risks and opportunities\r\n- Gather intelligence for the swarm\r\n\r\nRESPONSIBILITIES:\r\n1. Information gathering\r\n2. Technology research\r\n3. Risk assessment\r\n4. Opportunity identification\r\n5. Knowledge synthesis\r\n\r\nSCOUTING PROTOCOL:\r\n- Proactively investigate unknowns\r\n- Report findings to swarm\r\n- Suggest new approaches\r\n- Validate assumptions\r\n\r\nCOMMUNICATION STYLE:\r\n- Curious and investigative\r\n- Evidence-based\r\n- Forward-thinking\r\n- Risk-aware`;\r\n  }\r\n\r\n  async scout(topic: string): Promise<any> {\r\n    return {\r\n      findings: [`Best practices for ${topic}`, `Common pitfalls in ${topic}`],\r\n      risks: ['Technical debt', 'Scalability concerns'],\r\n      opportunities: ['New framework available', 'Performance optimization possible'],\r\n      recommendations: ['Consider microservices', 'Implement caching'],\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Guardian Agent - Quality and validation\r\n */\r\nexport class GuardianAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: any,\r\n    logger: any,\r\n    eventBus: any,\r\n    memory: any,\r\n  ) {\r\n    super(id, 'reviewer', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      // Core capabilities\r\n      codeGeneration: false,\r\n      codeReview: true,\r\n      testing: true,\r\n      documentation: false,\r\n      research: false,\r\n      analysis: true,\r\n\r\n      // Communication capabilities\r\n      webSearch: false,\r\n      apiIntegration: false,\r\n      fileSystem: true,\r\n      terminalAccess: false,\r\n\r\n      // Specialized capabilities\r\n      languages: ['javascript', 'typescript'],\r\n      frameworks: ['jest', 'eslint'],\r\n      domains: ['quality-assurance', 'security', 'review'],\r\n      tools: ['linting', 'testing', 'security-scan'],\r\n\r\n      // Resource limits\r\n      maxConcurrentTasks: 2,\r\n      maxMemoryUsage: 512,\r\n      maxExecutionTime: 180000,\r\n\r\n      // Performance characteristics\r\n      reliability: 0.98,\r\n      speed: 0.7,\r\n      quality: 0.95,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.6,\r\n      learningEnabled: true,\r\n      adaptationEnabled: false,\r\n      maxTasksPerHour: 10,\r\n      maxConcurrentTasks: 2,\r\n      timeoutThreshold: 90000,\r\n      reportingInterval: 15000,\r\n      heartbeatInterval: 20000,\r\n      permissions: ['review', 'test', 'validate'],\r\n    };\r\n  }\r\n\r\n  public async executeTask(task: TaskDefinition): Promise<any> {\r\n    // Guardian agent execution logic\r\n    return {\r\n      result: 'reviewed',\r\n      taskId: task.id,\r\n      quality: 'high',\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  getSystemPrompt(): string {\r\n    return `You are ${this.id}, a Guardian agent in the Hive Mind swarm.\r\n\r\nROLE: Quality Assurance and Protection\r\n- Ensure code quality and standards\r\n- Identify security vulnerabilities\r\n- Validate implementations\r\n- Protect swarm from errors\r\n\r\nRESPONSIBILITIES:\r\n1. Code review\r\n2. Security analysis\r\n3. Quality validation\r\n4. Standard enforcement\r\n5. Risk mitigation\r\n\r\nGUARDIAN PROTOCOL:\r\n- Review all implementations\r\n- Flag potential issues\r\n- Suggest improvements\r\n- Enforce best practices\r\n\r\nCOMMUNICATION STYLE:\r\n- Protective and thorough\r\n- Constructive criticism\r\n- Standards-focused\r\n- Security-minded`;\r\n  }\r\n\r\n  async validateWork(work: any): Promise<any> {\r\n    return {\r\n      qualityScore: 0.85,\r\n      issues: ['Missing error handling', 'Incomplete tests'],\r\n      securityConcerns: ['Input validation needed'],\r\n      recommendations: ['Add unit tests', 'Implement logging'],\r\n      approved: true,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Architect Agent - System design and planning\r\n */\r\nexport class ArchitectAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: any,\r\n    logger: any,\r\n    eventBus: any,\r\n    memory: any,\r\n  ) {\r\n    super(id, 'architect', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      // Core capabilities\r\n      codeGeneration: false,\r\n      codeReview: true,\r\n      testing: false,\r\n      documentation: true,\r\n      research: true,\r\n      analysis: true,\r\n\r\n      // Communication capabilities\r\n      webSearch: true,\r\n      apiIntegration: false,\r\n      fileSystem: true,\r\n      terminalAccess: false,\r\n\r\n      // Specialized capabilities\r\n      languages: ['javascript', 'typescript'],\r\n      frameworks: ['architecture-patterns'],\r\n      domains: ['system-design', 'architecture', 'planning'],\r\n      tools: ['design-patterns', 'documentation'],\r\n\r\n      // Resource limits\r\n      maxConcurrentTasks: 2,\r\n      maxMemoryUsage: 1024,\r\n      maxExecutionTime: 240000,\r\n\r\n      // Performance characteristics\r\n      reliability: 0.92,\r\n      speed: 0.75,\r\n      quality: 0.95,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.85,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 8,\r\n      maxConcurrentTasks: 2,\r\n      timeoutThreshold: 120000,\r\n      reportingInterval: 20000,\r\n      heartbeatInterval: 25000,\r\n      permissions: ['design', 'plan', 'architect'],\r\n    };\r\n  }\r\n\r\n  public async executeTask(task: TaskDefinition): Promise<any> {\r\n    // Architect agent execution logic\r\n    return {\r\n      result: 'designed',\r\n      taskId: task.id,\r\n      architecture: 'planned',\r\n      timestamp: new Date().toISOString(),\r\n    };\r\n  }\r\n\r\n  getSystemPrompt(): string {\r\n    return `You are ${this.id}, an Architect agent in the Hive Mind swarm.\r\n\r\nROLE: System Design and Architecture\r\n- Design system architecture\r\n- Plan technical solutions\r\n- Define interfaces and contracts\r\n- Ensure scalability and maintainability\r\n\r\nRESPONSIBILITIES:\r\n1. System architecture design\r\n2. Technical planning\r\n3. Interface definition\r\n4. Pattern selection\r\n5. Documentation\r\n\r\nARCHITECTURE PROTOCOL:\r\n- Design before implementation\r\n- Consider all requirements\r\n- Plan for scalability\r\n- Document decisions\r\n\r\nCOMMUNICATION STYLE:\r\n- Strategic and systematic\r\n- Pattern-focused\r\n- Future-oriented\r\n- Technically detailed`;\r\n  }\r\n\r\n  async designSystem(requirements: any): Promise<any> {\r\n    return {\r\n      architecture: 'microservices',\r\n      components: ['API Gateway', 'Auth Service', 'Business Logic', 'Database'],\r\n      patterns: ['Repository', 'Factory', 'Observer'],\r\n      technologies: ['Node.js', 'PostgreSQL', 'Redis', 'Docker'],\r\n      interfaces: ['REST API', 'WebSocket', 'Message Queue'],\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Factory for creating Hive agents\r\n */\r\nexport class HiveAgentFactory {\r\n  static createAgent(\r\n    config: HiveAgentConfig & { name: string },\r\n    agentConfig: AgentConfig,\r\n    environment: any,\r\n    logger: any,\r\n    eventBus: any,\r\n    memory: any,\r\n  ): BaseAgent {\r\n    switch (config.type) {\r\n      case 'queen':\r\n        return new QueenAgent(config.name, agentConfig, environment, logger, eventBus, memory);\r\n\r\n      case 'worker':\r\n        return new WorkerAgent(\r\n          config.name,\r\n          agentConfig,\r\n          environment,\r\n          logger,\r\n          eventBus,\r\n          memory,\r\n          config.specialization,\r\n        );\r\n\r\n      case 'scout':\r\n        return new ScoutAgent(config.name, agentConfig, environment, logger, eventBus, memory);\r\n\r\n      case 'guardian':\r\n        return new GuardianAgent(config.name, agentConfig, environment, logger, eventBus, memory);\r\n\r\n      case 'architect':\r\n        return new ArchitectAgent(config.name, agentConfig, environment, logger, eventBus, memory);\r\n\r\n      default:\r\n        throw new Error(`Unknown Hive agent type: ${config.type}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create a balanced swarm for an objective\r\n   */\r\n  static createBalancedSwarm(\r\n    objective: string,\r\n    maxAgents: number = 8,\r\n    agentConfig: AgentConfig,\r\n    environment: any,\r\n    logger: any,\r\n    eventBus: any,\r\n    memory: any,\r\n  ): BaseAgent[] {\r\n    const agents: BaseAgent[] = [];\r\n\r\n    // Always include a Queen\r\n    agents.push(\r\n      new QueenAgent('Queen-Genesis', agentConfig, environment, logger, eventBus, memory),\r\n    );\r\n\r\n    // Determine agent composition based on objective\r\n    const needsDesign =\r\n      objective.toLowerCase().includes('build') || objective.toLowerCase().includes('create');\r\n    const needsResearch =\r\n      objective.toLowerCase().includes('research') || objective.toLowerCase().includes('analyze');\r\n\r\n    if (needsDesign && agents.length < maxAgents) {\r\n      agents.push(\r\n        new ArchitectAgent('Architect-Prime', agentConfig, environment, logger, eventBus, memory),\r\n      );\r\n    }\r\n\r\n    if (needsResearch && agents.length < maxAgents) {\r\n      agents.push(\r\n        new ScoutAgent('Scout-Alpha', agentConfig, environment, logger, eventBus, memory),\r\n      );\r\n    }\r\n\r\n    // Add workers based on remaining slots\r\n    const workerCount = Math.min(3, maxAgents - agents.length - 1); // -1 for Guardian\r\n    for (let i = 0; i < workerCount; i++) {\r\n      const specializations = ['backend', 'frontend', 'database', 'integration'];\r\n      const spec = specializations[i % specializations.length];\r\n      agents.push(\r\n        new WorkerAgent(\r\n          `Worker-${i + 1}`,\r\n          agentConfig,\r\n          environment,\r\n          logger,\r\n          eventBus,\r\n          memory,\r\n          spec,\r\n        ),\r\n      );\r\n    }\r\n\r\n    // Always include a Guardian if space\r\n    if (agents.length < maxAgents) {\r\n      agents.push(\r\n        new GuardianAgent('Guardian-Omega', agentConfig, environment, logger, eventBus, memory),\r\n      );\r\n    }\r\n\r\n    return agents;\r\n  }\r\n\r\n  /**\r\n   * Get agent capabilities matrix\r\n   */\r\n  static getCapabilitiesMatrix(): Map<string, string[]> {\r\n    return new Map([\r\n      ['queen', ['orchestration', 'consensus', 'decision-making', 'delegation']],\r\n      ['worker', ['implementation', 'coding', 'testing', 'debugging']],\r\n      ['scout', ['research', 'exploration', 'analysis', 'discovery']],\r\n      ['guardian', ['validation', 'security', 'quality', 'review']],\r\n      ['architect', ['design', 'planning', 'architecture', 'patterns']],\r\n    ]);\r\n  }\r\n}\r\n"],"names":["BaseAgent","QueenAgent","id","config","environment","logger","eventBus","memory","getDefaultCapabilities","codeGeneration","codeReview","testing","documentation","research","analysis","webSearch","apiIntegration","fileSystem","terminalAccess","languages","frameworks","domains","tools","maxConcurrentTasks","maxMemoryUsage","maxExecutionTime","reliability","speed","quality","getDefaultConfig","autonomyLevel","learningEnabled","adaptationEnabled","maxTasksPerHour","timeoutThreshold","reportingInterval","heartbeatInterval","permissions","executeTask","task","result","taskId","timestamp","Date","toISOString","getSystemPrompt","analyzeObjective","objective","complexity","requiredAgents","estimatedTasks","strategy","consensusRequired","WorkerAgent","specialization","estimateEffort","baseEffort","specializationBonus","type","Math","round","ScoutAgent","findings","scout","topic","risks","opportunities","recommendations","GuardianAgent","validateWork","work","qualityScore","issues","securityConcerns","approved","ArchitectAgent","architecture","designSystem","requirements","components","patterns","technologies","interfaces","HiveAgentFactory","createAgent","agentConfig","name","Error","createBalancedSwarm","maxAgents","agents","push","needsDesign","toLowerCase","includes","needsResearch","length","workerCount","min","i","specializations","spec","getCapabilitiesMatrix","Map"],"mappings":"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"}