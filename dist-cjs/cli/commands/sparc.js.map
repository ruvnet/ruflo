{
  "version": 3,
  "sources": ["../../../src/cli/commands/sparc.ts"],
  "sourcesContent": ["import { success, error, warning, info } from '../cli-core.js';\nimport type { CommandContext } from '../cli-core.js';\nimport chalk from 'chalk';\nconst { blue, yellow, green, magenta, cyan } = chalk;\n\ninterface SparcMode {\n  slug: string;\n  name: string;\n  roleDefinition: string;\n  customInstructions: string;\n  groups: string[];\n  source: string;\n}\n\ninterface SparcConfig {\n  customModes: SparcMode[];\n}\n\nlet sparcConfig: SparcConfig | null = null;\n\nasync function loadSparcConfig(): Promise<SparcConfig> {\n  if (sparcConfig) {\n    return sparcConfig;\n  }\n\n  try {\n    const configPath = '.roomodes';\n    const { readFile } = await import('fs/promises');\n    const content = await readFile(configPath, 'utf-8');\n    sparcConfig = JSON.parse(content);\n    return sparcConfig!;\n  } catch (error) {\n    throw new Error(\n      `Failed to load SPARC configuration: ${error instanceof Error ? error.message : String(error)}`,\n    );\n  }\n}\n\nexport async function sparcAction(ctx: CommandContext): Promise<void> {\n  const subcommand = ctx.args[0];\n\n  switch (subcommand) {\n    case 'modes':\n      await listSparcModes(ctx);\n      break;\n    case 'info':\n      await showModeInfo(ctx);\n      break;\n    case 'run':\n      await runSparcMode(ctx);\n      break;\n    case 'tdd':\n      await runTddFlow(ctx);\n      break;\n    case 'workflow':\n      await runSparcWorkflow(ctx);\n      break;\n    default:\n      await showSparcHelp();\n      break;\n  }\n}\n\nasync function listSparcModes(ctx: CommandContext): Promise<void> {\n  try {\n    const config = await loadSparcConfig();\n    const verbose = ctx.flags.verbose as boolean;\n\n    success('Available SPARC Modes:');\n    console.log();\n\n    for (const mode of config.customModes) {\n      console.log(`${cyan('\u2022')} ${green(mode.name)} ${blue(`(${mode.slug})`)}`);\n      if (verbose) {\n        console.log(`  ${mode.roleDefinition}`);\n        console.log(`  Tools: ${mode.groups.join(', ')}`);\n        console.log();\n      }\n    }\n\n    if (!verbose) {\n      console.log();\n      info('Use --verbose for detailed descriptions');\n    }\n  } catch (err) {\n    error(`Failed to list SPARC modes: ${(err as Error).message}`);\n  }\n}\n\nasync function showModeInfo(ctx: CommandContext): Promise<void> {\n  const modeSlug = ctx.args[1];\n  if (!modeSlug) {\n    error('Usage: sparc info <mode-slug>');\n    return;\n  }\n\n  try {\n    const config = await loadSparcConfig();\n    const mode = config.customModes.find((m) => m.slug === modeSlug);\n\n    if (!mode) {\n      error(`Mode not found: ${modeSlug}`);\n      console.log('Available modes:');\n      for (const m of config.customModes) {\n        console.log(`  ${m.slug} - ${m.name}`);\n      }\n      return;\n    }\n\n    success(`SPARC Mode: ${mode.name}`);\n    console.log();\n    console.log(blue('Role Definition:'));\n    console.log(mode.roleDefinition);\n    console.log();\n    console.log(blue('Custom Instructions:'));\n    console.log(mode.customInstructions);\n    console.log();\n    console.log(blue('Tool Groups:'));\n    console.log(mode.groups.join(', '));\n    console.log();\n    console.log(blue('Source:'));\n    console.log(mode.source);\n  } catch (err) {\n    error(`Failed to show mode info: ${(err as Error).message}`);\n  }\n}\n\nasync function runSparcMode(ctx: CommandContext): Promise<void> {\n  const modeSlug = ctx.args[1];\n  const taskDescription = ctx.args.slice(2).join(' ');\n\n  if (!modeSlug || !taskDescription) {\n    error('Usage: sparc run <mode-slug> <task-description>');\n    return;\n  }\n\n  try {\n    const config = await loadSparcConfig();\n    const mode = config.customModes.find((m) => m.slug === modeSlug);\n\n    if (!mode) {\n      error(`Mode not found: ${modeSlug}`);\n      return;\n    }\n\n    // Build the enhanced task prompt using SPARC methodology\n    const enhancedTask = buildSparcPrompt(mode, taskDescription, ctx.flags);\n    const instanceId = `sparc-${modeSlug}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n\n    // Build tools based on mode groups\n    const tools = buildToolsFromGroups(mode.groups);\n\n    if (ctx.flags.dryRun || ctx.flags['dry-run']) {\n      warning('DRY RUN - SPARC Mode Configuration:');\n      console.log(`Mode: ${mode.name} (${mode.slug})`);\n      console.log(`Instance ID: ${instanceId}`);\n      console.log(`Tools: ${tools}`);\n      console.log(`Task: ${taskDescription}`);\n      console.log();\n      console.log('Enhanced prompt preview:');\n      console.log(enhancedTask.substring(0, 300) + '...');\n      return;\n    }\n\n    success(`Starting SPARC mode: ${mode.name}`);\n    console.log(`\uD83D\uDCDD Instance ID: ${instanceId}`);\n    console.log(`\uD83C\uDFAF Mode: ${mode.slug}`);\n    console.log(`\uD83D\uDD27 Tools: ${tools}`);\n    console.log(`\uD83D\uDCCB Task: ${taskDescription}`);\n    console.log();\n\n    // Execute Claude with SPARC configuration\n    await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);\n  } catch (err) {\n    error(`Failed to run SPARC mode: ${(err as Error).message}`);\n  }\n}\n\nasync function runTddFlow(ctx: CommandContext): Promise<void> {\n  const taskDescription = ctx.args.slice(1).join(' ');\n\n  if (!taskDescription) {\n    error('Usage: sparc tdd <task-description>');\n    return;\n  }\n\n  try {\n    const config = await loadSparcConfig();\n\n    // Build TDD workflow using SPARC methodology\n    const workflow = [\n      {\n        mode: 'spec-pseudocode',\n        phase: 'Specification',\n        description: `Create detailed spec and pseudocode for: ${taskDescription}`,\n      },\n      { mode: 'tdd', phase: 'Red', description: `Write failing tests for: ${taskDescription}` },\n      {\n        mode: 'code',\n        phase: 'Green',\n        description: `Implement minimal code to pass tests for: ${taskDescription}`,\n      },\n      {\n        mode: 'refinement-optimization-mode',\n        phase: 'Refactor',\n        description: `Refactor and optimize implementation for: ${taskDescription}`,\n      },\n      {\n        mode: 'integration',\n        phase: 'Integration',\n        description: `Integrate and verify complete solution for: ${taskDescription}`,\n      },\n    ];\n\n    if (ctx.flags.dryRun || ctx.flags['dry-run']) {\n      warning('DRY RUN - TDD Workflow:');\n      for (const step of workflow) {\n        console.log(`${cyan(step.phase)}: ${step.mode} - ${step.description}`);\n      }\n      return;\n    }\n\n    success('Starting SPARC TDD Workflow');\n    console.log('Following Test-Driven Development with SPARC methodology');\n    console.log();\n\n    for (let i = 0; i < workflow.length; i++) {\n      const step = workflow[i];\n      const mode = config.customModes.find((m) => m.slug === step.mode);\n\n      if (!mode) {\n        warning(`Mode not found: ${step.mode}, skipping step`);\n        continue;\n      }\n\n      info(`Phase ${i + 1}/5: ${step.phase} (${mode.name})`);\n      console.log(`\uD83D\uDCCB ${step.description}`);\n      console.log();\n\n      const enhancedTask = buildSparcPrompt(mode, step.description, {\n        ...ctx.flags,\n        tddPhase: step.phase,\n        workflowStep: i + 1,\n        totalSteps: workflow.length,\n      });\n\n      const tools = buildToolsFromGroups(mode.groups);\n      const instanceId = `sparc-tdd-${step.phase.toLowerCase()}-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`;\n\n      await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);\n\n      // Store phase completion in memory for next step\n      if (ctx.flags.sequential !== false) {\n        console.log('Phase completed. Press Enter to continue to next phase, or Ctrl+C to stop...');\n        await new Promise<void>(async (resolve) => {\n          const readline = await import('readline');\n          const rl = readline.createInterface({\n            input: process.stdin,\n            output: process.stdout,\n          });\n          rl.question('', () => {\n            rl.close();\n            resolve();\n          });\n        });\n      }\n    }\n\n    success('SPARC TDD Workflow completed!');\n  } catch (err) {\n    error(`Failed to run TDD flow: ${(err as Error).message}`);\n  }\n}\n\nasync function runSparcWorkflow(ctx: CommandContext): Promise<void> {\n  const workflowFile = ctx.args[1];\n\n  if (!workflowFile) {\n    error('Usage: sparc workflow <workflow-file.json>');\n    return;\n  }\n\n  try {\n    const { readFile } = await import('fs/promises');\n    const workflowContent = await readFile(workflowFile, 'utf-8');\n    const workflow = JSON.parse(workflowContent);\n\n    if (!workflow.steps || !Array.isArray(workflow.steps)) {\n      error(\"Invalid workflow file: missing 'steps' array\");\n      return;\n    }\n\n    const config = await loadSparcConfig();\n\n    success(`Loading SPARC workflow: ${workflow.name || 'Unnamed'}`);\n    console.log(`\uD83D\uDCCB Steps: ${workflow.steps.length}`);\n    console.log(`\uD83D\uDCDD Description: ${workflow.description || 'No description'}`);\n    console.log();\n\n    if (ctx.flags.dryRun || ctx.flags['dry-run']) {\n      warning('DRY RUN - Workflow Steps:');\n      for (let i = 0; i < workflow.steps.length; i++) {\n        const step = workflow.steps[i];\n        console.log(`${i + 1}. ${cyan(step.mode)} - ${step.description || step.task}`);\n      }\n      return;\n    }\n\n    for (let i = 0; i < workflow.steps.length; i++) {\n      const step = workflow.steps[i];\n      const mode = config.customModes.find((m) => m.slug === step.mode);\n\n      if (!mode) {\n        warning(`Mode not found: ${step.mode}, skipping step ${i + 1}`);\n        continue;\n      }\n\n      info(`Step ${i + 1}/${workflow.steps.length}: ${mode.name}`);\n      console.log(`\uD83D\uDCCB ${step.description || step.task}`);\n      console.log();\n\n      const enhancedTask = buildSparcPrompt(mode, step.description || step.task, {\n        ...ctx.flags,\n        workflowStep: i + 1,\n        totalSteps: workflow.steps.length,\n        workflowName: workflow.name,\n      });\n\n      const tools = buildToolsFromGroups(mode.groups);\n      const instanceId = `sparc-workflow-${i + 1}-${Date.now()}-${Math.random().toString(36).substr(2, 5)}`;\n\n      await executeClaudeWithSparc(enhancedTask, tools, instanceId, ctx.flags);\n\n      if (workflow.sequential !== false && i < workflow.steps.length - 1) {\n        console.log('Step completed. Press Enter to continue, or Ctrl+C to stop...');\n        await new Promise<void>((resolve) => {\n          const readline = require('readline');\n          const rl = readline.createInterface({\n            input: process.stdin,\n            output: process.stdout,\n          });\n          rl.question('', () => {\n            rl.close();\n            resolve();\n          });\n        });\n      }\n    }\n\n    success('SPARC workflow completed!');\n  } catch (err) {\n    error(`Failed to run workflow: ${(err as Error).message}`);\n  }\n}\n\nfunction buildSparcPrompt(mode: SparcMode, taskDescription: string, flags: any): string {\n  const memoryNamespace = flags.namespace || mode.slug || 'default';\n\n  return `# SPARC Development Mode: ${mode.name}\n\n## Your Role\n${mode.roleDefinition}\n\n## Your Task\n${taskDescription}\n\n## Mode-Specific Instructions\n${mode.customInstructions}\n\n## SPARC Development Environment\n\nYou are working within the SPARC (Specification, Pseudocode, Architecture, Refinement, Completion) methodology using claude-flow orchestration features.\n\n### Available Development Tools\n- **Memory Persistence**: Use \\`npx claude-flow memory store <key> \"<value>\"\\` to save progress and findings\n- **Memory Retrieval**: Use \\`npx claude-flow memory query <search>\\` to access previous work\n- **Namespace**: Your work is stored in the \"${memoryNamespace}\" namespace\n\n### SPARC Methodology Integration\n${\n  flags.tddPhase\n    ? `\n**Current TDD Phase**: ${flags.tddPhase}\n- Follow the Red-Green-Refactor cycle\n- Store test results and refactoring notes in memory\n`\n    : ''\n}\n\n${\n  flags.workflowStep\n    ? `\n**Workflow Progress**: Step ${flags.workflowStep} of ${flags.totalSteps}\n- Review previous steps: \\`npx claude-flow memory query previous_steps\\`\n- Store this step's output: \\`npx claude-flow memory store step_${flags.workflowStep}_output \"<results>\"\\`\n`\n    : ''\n}\n\n### Best Practices\n1. **Modular Development**: Keep all files under 500 lines\n2. **Environment Safety**: Never hardcode secrets or environment values\n3. **Memory Usage**: Store key findings and decisions in memory for future reference\n4. **Tool Integration**: Use \\`new_task\\` for subtasks and \\`attempt_completion\\` when finished\n\n### Memory Commands Examples\n\\`\\`\\`bash\n# Store your progress\nnpx claude-flow memory store ${memoryNamespace}_progress \"Current status and findings\"\n\n# Check for previous work\nnpx claude-flow memory query ${memoryNamespace}\n\n# Store phase-specific results\nnpx claude-flow memory store ${memoryNamespace}_${flags.tddPhase || 'results'} \"Phase output and decisions\"\n\\`\\`\\`\n\n### Integration with Other SPARC Modes\nWhen working with other SPARC modes, use memory to:\n- Share findings with spec-pseudocode mode\n- Pass requirements to architect mode  \n- Coordinate with code and tdd modes\n- Communicate results to integration mode\n\nNow proceed with your task following the SPARC methodology and your specific role instructions.`;\n}\n\nfunction buildToolsFromGroups(groups: string[]): string {\n  const toolMappings: Record<string, string[]> = {\n    read: ['View', 'LS', 'GlobTool', 'GrepTool'],\n    edit: ['Edit', 'Replace', 'MultiEdit', 'Write'],\n    browser: ['WebFetch'],\n    mcp: ['mcp_tools'],\n    command: ['Bash', 'Terminal'],\n  };\n\n  const tools = new Set<string>();\n\n  // Always include basic tools\n  tools.add('View');\n  tools.add('Edit');\n  tools.add('Bash');\n\n  for (const group of groups) {\n    if (Array.isArray(group)) {\n      // Handle nested group definitions\n      const groupName = group[0];\n      if (toolMappings[groupName]) {\n        toolMappings[groupName].forEach((tool) => tools.add(tool));\n      }\n    } else if (toolMappings[group]) {\n      toolMappings[group].forEach((tool) => tools.add(tool));\n    }\n  }\n\n  return Array.from(tools).join(',');\n}\n\nasync function executeClaudeWithSparc(\n  enhancedTask: string,\n  tools: string,\n  instanceId: string,\n  flags: any,\n): Promise<void> {\n  const claudeArgs = [enhancedTask];\n  claudeArgs.push('--allowedTools', tools);\n\n  if (flags.noPermissions || flags['no-permissions']) {\n    claudeArgs.push('--dangerously-skip-permissions');\n  }\n\n  if (flags.config) {\n    claudeArgs.push('--mcp-config', flags.config);\n  }\n\n  if (flags.verbose) {\n    claudeArgs.push('--verbose');\n  }\n\n  try {\n    const { spawn } = await import('child_process');\n    const child = spawn('claude', claudeArgs, {\n      env: {\n        ...process.env,\n        CLAUDE_INSTANCE_ID: instanceId,\n        CLAUDE_SPARC_MODE: 'true',\n        CLAUDE_FLOW_MEMORY_ENABLED: 'true',\n        CLAUDE_FLOW_MEMORY_NAMESPACE: flags.namespace || 'sparc',\n      },\n      stdio: 'inherit',\n    });\n\n    const status = await new Promise<{ success: boolean; code: number | null }>((resolve) => {\n      child.on('close', (code) => {\n        resolve({ success: code === 0, code });\n      });\n    });\n\n    if ((status as any).success) {\n      success(`SPARC instance ${instanceId} completed successfully`);\n    } else {\n      error(`SPARC instance ${instanceId} exited with code ${(status as any).code}`);\n    }\n  } catch (err) {\n    error(`Failed to execute Claude: ${(err as Error).message}`);\n  }\n}\n\nasync function showSparcHelp(): Promise<void> {\n  console.log(\n    `${cyan('SPARC')} - ${green('Specification, Pseudocode, Architecture, Refinement, Completion')}`,\n  );\n  console.log();\n  console.log('SPARC development methodology with TDD and multi-agent coordination.');\n  console.log();\n  console.log(blue('Commands:'));\n  console.log('  modes                    List all available SPARC modes');\n  console.log('  info <mode>              Show detailed information about a mode');\n  console.log('  run <mode> <task>        Execute a task using a specific SPARC mode');\n  console.log('  tdd <task>               Run full TDD workflow using SPARC methodology');\n  console.log('  workflow <file>          Execute a custom SPARC workflow from JSON file');\n  console.log();\n  console.log(blue('Common Modes:'));\n  console.log('  spec-pseudocode          Create specifications and pseudocode');\n  console.log('  architect                Design system architecture');\n  console.log('  code                     Implement code solutions');\n  console.log('  tdd                      Test-driven development');\n  console.log('  debug                    Debug and troubleshoot issues');\n  console.log('  security-review          Security analysis and review');\n  console.log('  docs-writer              Documentation creation');\n  console.log('  integration              System integration and testing');\n  console.log();\n  console.log(blue('Options:'));\n  console.log('  --namespace <ns>         Memory namespace for this session');\n  console.log('  --no-permissions         Skip permission prompts');\n  console.log('  --config <file>          MCP configuration file');\n  console.log('  --verbose               Enable verbose output');\n  console.log('  --dry-run               Preview what would be executed');\n  console.log('  --sequential            Wait between workflow steps (default: true)');\n  console.log();\n  console.log(blue('Examples:'));\n  console.log(\n    `  ${yellow('claude-flow sparc modes')}                              # List all modes`,\n  );\n  console.log(\n    `  ${yellow('claude-flow sparc run code')} \"implement user auth\"      # Run specific mode`,\n  );\n  console.log(\n    `  ${yellow('claude-flow sparc tdd')} \"payment processing system\"    # Full TDD workflow`,\n  );\n  console.log(\n    `  ${yellow('claude-flow sparc workflow')} project-workflow.json     # Custom workflow`,\n  );\n  console.log();\n  console.log(blue('TDD Workflow:'));\n  console.log('  1. Specification - Define requirements and create pseudocode');\n  console.log('  2. Red Phase - Write failing tests');\n  console.log('  3. Green Phase - Implement minimal code to pass tests');\n  console.log('  4. Refactor Phase - Optimize and clean up code');\n  console.log('  5. Integration - Verify complete solution');\n  console.log();\n  console.log('For more information: https://github.com/ruvnet/claude-code-flow/docs/sparc.md');\n}\n"],
  "mappings": "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",
  "names": ["chalk", "error"]
}
