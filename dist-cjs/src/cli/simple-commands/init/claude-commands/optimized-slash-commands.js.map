{"version":3,"sources":["../../../../../../src/cli/simple-commands/init/claude-commands/optimized-slash-commands.js"],"sourcesContent":["// optimized-slash-commands.js - Create batchtools-optimized Claude Code slash commands\r\n\r\nimport {\r\n  createOptimizedSparcSlashCommand,\r\n  createOptimizedMainSparcCommand,\r\n} from './optimized-sparc-commands.js';\r\nimport { createOptimizedClaudeFlowCommands } from './optimized-claude-flow-commands.js';\r\nimport { copyTemplates } from '../template-copier.js';\r\nimport { promises as fs } from 'fs';\r\nimport { join } from 'path';\r\n\r\n// Create batchtools-optimized Claude Code slash commands for SPARC modes\r\nexport async function createOptimizedClaudeSlashCommands(workingDir, selectedModes = null) {\r\n  try {\r\n    console.log('\\nüöÄ Creating batchtools-optimized Claude Code slash commands...');\r\n\r\n    // Use template copier with optimized flag\r\n    const optimizedOptions = {\r\n      sparc: true,\r\n      optimized: true,\r\n      force: true,\r\n      dryRun: false,\r\n      selectedModes: selectedModes,\r\n    };\r\n\r\n    // Check if .roomodes exists for dynamic generation\r\n    const roomodesPath = `${workingDir}/.roomodes`;\r\n    try {\r\n      const roomodesContent = await fs.readFile(roomodesPath, 'utf8');\r\n      const roomodes = JSON.parse(roomodesContent);\r\n\r\n      // Filter modes if selective initialization is requested\r\n      const modesToCreate = selectedModes\r\n        ? roomodes.customModes.filter((mode) => selectedModes.includes(mode.slug))\r\n        : roomodes.customModes;\r\n\r\n      console.log(`  üìù Creating optimized commands for ${modesToCreate.length} modes...`);\r\n\r\n      // Create slash commands for each SPARC mode with batchtools optimization\r\n      const commandPromises = modesToCreate.map(async (mode) => {\r\n        const commandPath = join(workingDir, '.claude', 'commands', 'sparc', `${mode.slug}.md`);\r\n        const commandContent = createOptimizedSparcSlashCommand(mode);\r\n\r\n        await fs.mkdir(join(workingDir, '.claude', 'commands', 'sparc'), { recursive: true });\r\n        await fs.writeFile(commandPath, commandContent, 'utf8');\r\n        console.log(`  ‚úì Created optimized slash command: /sparc-${mode.slug} (Batchtools enhanced)`);\r\n      });\r\n\r\n      // Execute all command creations in parallel\r\n      await Promise.all(commandPromises);\r\n\r\n      // Create main SPARC command with batchtools optimization\r\n      const mainSparcCommand = createOptimizedMainSparcCommand(roomodes.customModes);\r\n      await fs.writeFile(join(workingDir, '.claude', 'commands', 'sparc.md', 'utf8'), mainSparcCommand);\r\n      console.log('  ‚úÖ Created optimized main slash command: /sparc (Batchtools enhanced)');\r\n\r\n      console.log(`  üéØ Total optimized commands created: ${modesToCreate.length + 5}`);\r\n    } catch (err) {\r\n      // Fallback to template copier if .roomodes doesn't exist\r\n      console.log('  üîÑ Using template copier for optimized SPARC commands...');\r\n      const copyResults = await copyTemplates(workingDir, optimizedOptions);\r\n      \r\n      if (!copyResults.success) {\r\n        console.log(`  ‚ö†Ô∏è  Template copier failed: ${copyResults.errors.join(', ')}`);\r\n      }\r\n    }\r\n\r\n    // Create claude-flow specific commands with batchtools optimization\r\n    await createOptimizedClaudeFlowCommands(workingDir);\r\n\r\n    // Create batchtools-specific commands\r\n    await createBatchtoolsCommands(workingDir);\r\n\r\n    console.log('  üí° All commands include parallel processing and performance optimizations');\r\n  } catch (err) {\r\n    console.log(`  ‚ö†Ô∏è  Could not create optimized Claude Code slash commands: ${err.message}`);\r\n  }\r\n}\r\n\r\n// Create batchtools-specific commands\r\nasync function createBatchtoolsCommands(workingDir) {\r\n  // Batchtools help command\r\n  const batchtoolsCommand = `---\r\nname: batchtools\r\ndescription: Execute operations with parallel processing and batch optimization\r\n---\r\n\r\n# üöÄ Batchtools - Parallel Processing & Batch Operations\r\n\r\nBatchtools enable parallel execution of multiple operations for improved performance and efficiency.\r\n\r\n## Core Concepts\r\n\r\n### Parallel Operations\r\nExecute multiple independent tasks simultaneously:\r\n- **File Operations**: Read, write, and modify multiple files concurrently\r\n- **Code Analysis**: Analyze multiple components in parallel\r\n- **Test Generation**: Create test suites with concurrent processing\r\n- **Documentation**: Generate multiple docs simultaneously\r\n\r\n### Batch Processing\r\nGroup related operations for optimal performance:\r\n- **Smart Batching**: Automatically group similar operations\r\n- **Pipeline Processing**: Chain operations with parallel stages\r\n- **Resource Management**: Efficient utilization of system resources\r\n- **Error Resilience**: Robust error handling with parallel recovery\r\n\r\n## Usage Patterns\r\n\r\n### Parallel File Operations\r\n\\`\\`\\`javascript\r\n// Read multiple files simultaneously\r\nconst files = await batchtools.parallel([\r\n  read('/src/controller.ts'),\r\n  read('/src/service.ts'),\r\n  read('/src/model.ts'),\r\n  read('/tests/unit.test.ts')\r\n]);\r\n\\`\\`\\`\r\n\r\n### Batch Code Generation\r\n\\`\\`\\`javascript\r\n// Create multiple files in parallel\r\nawait batchtools.createFiles([\r\n  { path: '/src/auth.controller.ts', content: generateController() },\r\n  { path: '/src/auth.service.ts', content: generateService() },\r\n  { path: '/src/auth.middleware.ts', content: generateMiddleware() },\r\n  { path: '/tests/auth.test.ts', content: generateTests() }\r\n]);\r\n\\`\\`\\`\r\n\r\n### Concurrent Analysis\r\n\\`\\`\\`javascript\r\n// Analyze multiple aspects simultaneously\r\nconst analysis = await batchtools.concurrent([\r\n  analyzeArchitecture(),\r\n  validateSecurity(),\r\n  checkPerformance(),\r\n  reviewCodeQuality()\r\n]);\r\n\\`\\`\\`\r\n\r\n## Performance Benefits\r\n\r\n### Speed Improvements\r\n- **File Operations**: 300% faster with parallel processing\r\n- **Code Analysis**: 250% improvement with concurrent pattern recognition\r\n- **Test Generation**: 400% faster with parallel test creation\r\n- **Documentation**: 200% improvement with concurrent content generation\r\n\r\n### Resource Efficiency\r\n- **Memory Usage**: Optimized memory allocation for parallel operations\r\n- **CPU Utilization**: Better use of multi-core processors\r\n- **I/O Throughput**: Improved disk and network operation efficiency\r\n- **Cache Optimization**: Smart caching for repeated operations\r\n\r\n## Best Practices\r\n\r\n### When to Use Parallel Operations\r\n‚úÖ **Use parallel when:**\r\n- Operations are independent of each other\r\n- Working with multiple files or components\r\n- Analyzing different aspects of the same codebase\r\n- Creating multiple related artifacts\r\n\r\n‚ùå **Avoid parallel when:**\r\n- Operations have dependencies\r\n- Modifying shared state\r\n- Order of execution matters\r\n- Resource constraints exist\r\n\r\n### Optimization Guidelines\r\n- **Batch Size**: Keep batches between 5-20 operations for optimal performance\r\n- **Resource Monitoring**: Monitor system resources during concurrent operations\r\n- **Error Handling**: Implement proper error recovery for parallel operations\r\n- **Testing**: Always test batch operations in development before production use\r\n\r\n## Integration with SPARC\r\n\r\n### Architect Mode\r\n- Parallel component analysis\r\n- Concurrent diagram generation\r\n- Batch interface validation\r\n\r\n### Code Mode\r\n- Concurrent implementation\r\n- Parallel code optimization\r\n- Batch quality checks\r\n\r\n### TDD Mode\r\n- Parallel test generation\r\n- Concurrent test execution\r\n- Batch coverage analysis\r\n\r\n### Documentation Mode\r\n- Concurrent content generation\r\n- Parallel format creation\r\n- Batch validation and formatting\r\n\r\n## Advanced Features\r\n\r\n### Pipeline Processing\r\nChain operations with parallel execution at each stage:\r\n1. **Analysis Stage**: Concurrent requirement analysis\r\n2. **Design Stage**: Parallel component design\r\n3. **Implementation Stage**: Concurrent code generation\r\n4. **Testing Stage**: Parallel test creation and execution\r\n5. **Documentation Stage**: Concurrent documentation generation\r\n\r\n### Smart Load Balancing\r\n- Automatic distribution of computational tasks\r\n- Dynamic resource allocation\r\n- Intelligent queue management\r\n- Real-time performance monitoring\r\n\r\n### Fault Tolerance\r\n- Automatic retry with exponential backoff\r\n- Graceful degradation under resource constraints\r\n- Parallel error recovery mechanisms\r\n- Health monitoring and circuit breakers\r\n\r\n## Examples\r\n\r\n### Full SPARC Pipeline with Batchtools\r\n\\`\\`\\`bash\r\n# Execute complete SPARC workflow with parallel processing\r\n./claude-flow sparc pipeline \"authentication system\" --batch-optimize\r\n\r\n# Run multiple SPARC modes concurrently\r\n./claude-flow sparc batch architect,code,tdd \"user management\" --parallel\r\n\r\n# Concurrent project analysis\r\n./claude-flow sparc concurrent-analyze project-requirements.json --parallel\r\n\\`\\`\\`\r\n\r\n### Performance Monitoring\r\n\\`\\`\\`bash\r\n# Monitor batch operation performance\r\n./claude-flow batchtools monitor --real-time\r\n\r\n# Analyze parallel processing metrics\r\n./claude-flow batchtools analyze --performance --detailed\r\n\r\n# Check system resource utilization\r\n./claude-flow batchtools resources --concurrent --verbose\r\n\\`\\`\\`\r\n\r\nFor detailed documentation, see: https://github.com/ruvnet/claude-code-flow/docs/batchtools.md\r\n`;\r\n\r\n  await fs.writeFile(`${workingDir}/.claude/commands/batchtools.md`, batchtoolsCommand, 'utf8');\r\n  console.log('  ‚úì Created slash command: /batchtools');\r\n\r\n  // Performance monitoring command\r\n  const performanceCommand = `---\r\nname: performance\r\ndescription: Monitor and optimize system performance with batchtools\r\n---\r\n\r\n# üìä Performance Monitoring & Optimization\r\n\r\nReal-time performance monitoring and optimization tools for Claude-Flow operations.\r\n\r\n## Performance Metrics\r\n\r\n### System Metrics\r\n- **CPU Usage**: Multi-core utilization during parallel operations\r\n- **Memory Usage**: RAM consumption and optimization\r\n- **I/O Throughput**: Disk and network operation efficiency\r\n- **Task Queue**: Operation queue depth and processing speed\r\n\r\n### Batchtools Metrics\r\n- **Parallel Efficiency**: Speedup ratio from concurrent processing\r\n- **Batch Optimization**: Grouping effectiveness and resource utilization\r\n- **Error Rates**: Success/failure rates for parallel operations\r\n- **Resource Contention**: Conflicts and bottlenecks in concurrent operations\r\n\r\n## Monitoring Commands\r\n\r\n### Real-time Monitoring\r\n\\`\\`\\`bash\r\n# Monitor all system performance\r\n./claude-flow performance monitor --real-time --all\r\n\r\n# Focus on parallel operations\r\n./claude-flow performance monitor --parallel --batchtools\r\n\r\n# Monitor specific components\r\n./claude-flow performance monitor --focus sparc --concurrent\r\n\\`\\`\\`\r\n\r\n### Performance Analysis\r\n\\`\\`\\`bash\r\n# Generate performance report\r\n./claude-flow performance report --detailed --timeframe 24h\r\n\r\n# Analyze batch operation efficiency\r\n./claude-flow performance analyze --batchtools --optimization\r\n\r\n# Compare performance across different modes\r\n./claude-flow performance compare --modes architect,code,tdd\r\n\\`\\`\\`\r\n\r\n## Optimization Recommendations\r\n\r\n### Automatic Optimization\r\n- **Smart Batching**: Automatically group related operations\r\n- **Dynamic Scaling**: Adjust concurrency based on system resources\r\n- **Resource Allocation**: Optimize memory and CPU usage\r\n- **Cache Management**: Intelligent caching for repeated operations\r\n\r\n### Manual Tuning\r\n- **Batch Size**: Adjust batch sizes based on operation type\r\n- **Concurrency Limits**: Set optimal parallel operation limits\r\n- **Resource Limits**: Configure memory and CPU constraints\r\n- **Timeout Settings**: Optimize timeouts for parallel operations\r\n\r\n## Performance Tuning\r\n\r\n### Configuration Optimization\r\n\\`\\`\\`json\r\n{\r\n  \"performance\": {\r\n    \"batchtools\": {\r\n      \"maxConcurrent\": 10,\r\n      \"batchSize\": 20,\r\n      \"enableOptimization\": true,\r\n      \"smartBatching\": true\r\n    },\r\n    \"monitoring\": {\r\n      \"realTimeMetrics\": true,\r\n      \"performanceLogging\": true,\r\n      \"resourceAlerts\": true\r\n    }\r\n  }\r\n}\r\n\\`\\`\\`\r\n\r\n### Best Practices\r\n- Monitor performance during development and production\r\n- Use real-time metrics to identify bottlenecks\r\n- Adjust concurrency based on system capabilities\r\n- Implement performance alerts for critical thresholds\r\n- Regular performance analysis and optimization\r\n\r\nFor comprehensive performance guides, see: https://github.com/ruvnet/claude-code-flow/docs/performance.md\r\n`;\r\n\r\n  await fs.writeFile(`${workingDir}/.claude/commands/performance.md`, performanceCommand, 'utf8');\r\n  console.log('  ‚úì Created slash command: /performance');\r\n}\r\n"],"names":["createOptimizedSparcSlashCommand","createOptimizedMainSparcCommand","createOptimizedClaudeFlowCommands","copyTemplates","promises","fs","join","createOptimizedClaudeSlashCommands","workingDir","selectedModes","console","log","optimizedOptions","sparc","optimized","force","dryRun","roomodesPath","roomodesContent","readFile","roomodes","JSON","parse","modesToCreate","customModes","filter","mode","includes","slug","length","commandPromises","map","commandPath","commandContent","mkdir","recursive","writeFile","Promise","all","mainSparcCommand","err","copyResults","success","errors","createBatchtoolsCommands","message","batchtoolsCommand","performanceCommand"],"mappings":"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"}