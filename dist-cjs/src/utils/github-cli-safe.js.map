{"version":3,"sources":["../../../src/utils/github-cli-safe.js"],"sourcesContent":["/**\r\n * DEPRECATED: Use github-cli-safety-wrapper.js instead\r\n * This file is maintained for backward compatibility only\r\n * \r\n * Safe GitHub CLI command execution utilities\r\n * Prevents shell injection and timeout issues with special characters\r\n */\r\n\r\nimport { \r\n  GitHubCliSafe, \r\n  githubCli, \r\n  safeGhCommand as newSafeGhCommand \r\n} from './github-cli-safety-wrapper.js';\r\n\r\n/**\r\n * @deprecated Use GitHubCliSafe class from github-cli-safety-wrapper.js\r\n * Execute GitHub CLI command with safe body content handling\r\n * @param {string} command - The gh command (e.g., 'issue comment')\r\n * @param {string} target - Target (issue/PR number or repo)\r\n * @param {string} body - Body content that may contain special characters\r\n * @param {Object} options - Additional options\r\n * @returns {Promise<string>} - Command output\r\n */\r\nexport async function safeGhCommand(command, target, body, options = {}) {\r\n  console.warn('safeGhCommand is deprecated. Use GitHubCliSafe from github-cli-safety-wrapper.js');\r\n  \r\n  try {\r\n    const result = await newSafeGhCommand(command, target, body, options);\r\n    return result.stdout;\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\n/**\r\n * @deprecated This function is deprecated and will be removed\r\n * Execute command with timeout and proper cleanup\r\n * @param {string} command - Command to execute\r\n * @param {string[]} args - Command arguments\r\n * @param {number} timeout - Timeout in milliseconds\r\n * @returns {Promise<string>} - Command output\r\n */\r\nfunction executeWithTimeout(command, args, timeout) {\r\n  console.warn('executeWithTimeout is deprecated. Use GitHubCliSafe.executeWithTimeout instead');\r\n  \r\n  // Forward to new implementation via GitHubCliSafe\r\n  const ghSafe = new GitHubCliSafe({ timeout });\r\n  return ghSafe.executeWithTimeout(command.replace('gh ', ''), args.slice(1), { timeout });\r\n}\r\n\r\n/**\r\n * @deprecated Use gh object from github-cli-safety-wrapper.js\r\n * Safe methods for common GitHub CLI operations\r\n */\r\nexport const gh = {\r\n  /**\r\n   * @deprecated Use githubCli.addIssueComment instead\r\n   * Create issue comment safely\r\n   * @param {number|string} issue - Issue number\r\n   * @param {string} body - Comment body\r\n   * @param {Object} options - Additional options\r\n   */\r\n  async issueComment(issue, body, options = {}) {\r\n    console.warn('gh.issueComment is deprecated. Use githubCli.addIssueComment instead');\r\n    const result = await githubCli.addIssueComment(issue, body, options);\r\n    return result.stdout;\r\n  },\r\n  \r\n  /**\r\n   * @deprecated Use githubCli.addPRComment instead\r\n   * Create PR comment safely\r\n   * @param {number|string} pr - PR number\r\n   * @param {string} body - Comment body\r\n   * @param {Object} options - Additional options\r\n   */\r\n  async prComment(pr, body, options = {}) {\r\n    console.warn('gh.prComment is deprecated. Use githubCli.addPRComment instead');\r\n    const result = await githubCli.addPRComment(pr, body, options);\r\n    return result.stdout;\r\n  },\r\n  \r\n  /**\r\n   * @deprecated Use githubCli.createIssue instead\r\n   * Create issue safely\r\n   * @param {Object} params - Issue parameters\r\n   */\r\n  async createIssue({ title, body, labels = [], assignees = [] }) {\r\n    console.warn('gh.createIssue is deprecated. Use githubCli.createIssue instead');\r\n    const result = await githubCli.createIssue({ title, body, labels, assignees });\r\n    return result.stdout;\r\n  },\r\n  \r\n  /**\r\n   * @deprecated Use githubCli.createPR instead\r\n   * Create PR safely\r\n   * @param {Object} params - PR parameters\r\n   */\r\n  async createPR({ title, body, base = 'main', head, draft = false }) {\r\n    console.warn('gh.createPR is deprecated. Use githubCli.createPR instead');\r\n    const result = await githubCli.createPR({ title, body, base, head, draft });\r\n    return result.stdout;\r\n  }\r\n};\r\n\r\n/**\r\n * Example usage:\r\n * \r\n * import { gh } from './github-cli-safe.js';\r\n * \r\n * // Safe issue comment with special characters\r\n * await gh.issueComment(123, 'Code: `npm install` and $(echo test)');\r\n * \r\n * // Safe PR creation with complex body\r\n * await gh.createPR({\r\n *   title: 'Fix: Handle special characters',\r\n *   body: 'This fixes issues with `backticks` and .claude/agents/ paths',\r\n *   base: 'main'\r\n * });\r\n */"],"names":["GitHubCliSafe","githubCli","safeGhCommand","newSafeGhCommand","command","target","body","options","console","warn","result","stdout","error","executeWithTimeout","args","timeout","ghSafe","replace","slice","gh","issueComment","issue","addIssueComment","prComment","pr","addPRComment","createIssue","title","labels","assignees","createPR","base","head","draft"],"mappings":"AAQA,SACEA,aAAa,EACbC,SAAS,EACTC,iBAAiBC,gBAAgB,QAC5B,iCAAiC;AAWxC,OAAO,eAAeD,cAAcE,OAAO,EAAEC,MAAM,EAAEC,IAAI,EAAEC,UAAU,CAAC,CAAC;IACrEC,QAAQC,IAAI,CAAC;IAEb,IAAI;QACF,MAAMC,SAAS,MAAMP,iBAAiBC,SAASC,QAAQC,MAAMC;QAC7D,OAAOG,OAAOC,MAAM;IACtB,EAAE,OAAOC,OAAO;QACd,MAAMA;IACR;AACF;AAUA,SAASC,mBAAmBT,OAAO,EAAEU,IAAI,EAAEC,OAAO;IAChDP,QAAQC,IAAI,CAAC;IAGb,MAAMO,SAAS,IAAIhB,cAAc;QAAEe;IAAQ;IAC3C,OAAOC,OAAOH,kBAAkB,CAACT,QAAQa,OAAO,CAAC,OAAO,KAAKH,KAAKI,KAAK,CAAC,IAAI;QAAEH;IAAQ;AACxF;AAMA,OAAO,MAAMI,KAAK;IAQhB,MAAMC,cAAaC,KAAK,EAAEf,IAAI,EAAEC,UAAU,CAAC,CAAC;QAC1CC,QAAQC,IAAI,CAAC;QACb,MAAMC,SAAS,MAAMT,UAAUqB,eAAe,CAACD,OAAOf,MAAMC;QAC5D,OAAOG,OAAOC,MAAM;IACtB;IASA,MAAMY,WAAUC,EAAE,EAAElB,IAAI,EAAEC,UAAU,CAAC,CAAC;QACpCC,QAAQC,IAAI,CAAC;QACb,MAAMC,SAAS,MAAMT,UAAUwB,YAAY,CAACD,IAAIlB,MAAMC;QACtD,OAAOG,OAAOC,MAAM;IACtB;IAOA,MAAMe,aAAY,EAAEC,KAAK,EAAErB,IAAI,EAAEsB,SAAS,EAAE,EAAEC,YAAY,EAAE,EAAE;QAC5DrB,QAAQC,IAAI,CAAC;QACb,MAAMC,SAAS,MAAMT,UAAUyB,WAAW,CAAC;YAAEC;YAAOrB;YAAMsB;YAAQC;QAAU;QAC5E,OAAOnB,OAAOC,MAAM;IACtB;IAOA,MAAMmB,UAAS,EAAEH,KAAK,EAAErB,IAAI,EAAEyB,OAAO,MAAM,EAAEC,IAAI,EAAEC,QAAQ,KAAK,EAAE;QAChEzB,QAAQC,IAAI,CAAC;QACb,MAAMC,SAAS,MAAMT,UAAU6B,QAAQ,CAAC;YAAEH;YAAOrB;YAAMyB;YAAMC;YAAMC;QAAM;QACzE,OAAOvB,OAAOC,MAAM;IACtB;AACF,EAAE"}