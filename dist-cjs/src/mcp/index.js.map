{"version":3,"sources":["../../../src/mcp/index.ts"],"sourcesContent":["/**\r\n * MCP (Model Context Protocol) Module\r\n * Export all MCP components for easy integration\r\n */\r\n\r\n// Phase 6: In-Process MCP Server (10-100x performance improvement)\r\nexport { InProcessMCPServer, createInProcessServer } from './in-process-server.js';\r\nexport type { InProcessServerConfig, ToolCallMetrics } from './in-process-server.js';\r\n\r\nexport {\r\n  ClaudeFlowToolRegistry,\r\n  createToolRegistry,\r\n  createClaudeFlowSdkServer,\r\n} from './tool-registry.js';\r\nexport type { ToolRegistryConfig } from './tool-registry.js';\r\n\r\nexport {\r\n  SDKIntegration,\r\n  initializeSDKIntegration,\r\n  getSDKIntegration,\r\n  createInProcessQuery,\r\n  getInProcessServerConfig,\r\n  measurePerformance,\r\n} from './sdk-integration.js';\r\nexport type { SDKIntegrationConfig } from './sdk-integration.js';\r\n\r\n// Core MCP Server\r\nexport { MCPServer, type IMCPServer } from './server.js';\r\n\r\n// MCP 2025-11 Server and Components\r\nexport { MCP2025Server, type MCP2025ServerConfig } from './server-mcp-2025.js';\r\nexport {\r\n  MCPServerFactory,\r\n  createMCPServer,\r\n  isMCP2025Available,\r\n  getServerCapabilities,\r\n  type MCPFeatureFlags,\r\n  type ExtendedMCPConfig,\r\n} from './server-factory.js';\r\n\r\n// MCP 2025-11 Protocol Components\r\nexport {\r\n  VersionNegotiator,\r\n  BackwardCompatibilityAdapter,\r\n  type MCPHandshake,\r\n  type MCPVersion,\r\n  type MCPCapability,\r\n  type NegotiationResult as MCP2025NegotiationResult,\r\n} from './protocol/version-negotiation.js';\r\n\r\n// MCP 2025-11 Async Job Management\r\nexport {\r\n  MCPAsyncJobManager,\r\n  type MCPToolRequest,\r\n  type MCPJobHandle,\r\n  type MCPJobResult,\r\n  type AsyncJob,\r\n  type JobStatus,\r\n} from './async/job-manager-mcp25.js';\r\n\r\n// MCP 2025-11 Registry Integration\r\nexport {\r\n  MCPRegistryClient,\r\n  type RegistryConfig,\r\n  type ServerRegistryEntry,\r\n} from './registry/mcp-registry-client-2025.js';\r\n\r\n// MCP 2025-11 Schema Validation\r\nexport {\r\n  SchemaValidator,\r\n  upgradeToolSchema,\r\n  type ValidationResult,\r\n} from './validation/schema-validator-2025.js';\r\n\r\n// Progressive Tool Registry (Phase 1 & 2)\r\nexport {\r\n  ProgressiveToolRegistry,\r\n  createProgressiveToolRegistry,\r\n  createProgressiveClaudeFlowSdkServer,\r\n  type ProgressiveToolRegistryConfig,\r\n} from './tool-registry-progressive.js';\r\n\r\n// Dynamic Tool Loader (Phase 1)\r\nexport {\r\n  DynamicToolLoader,\r\n  type ToolMetadata,\r\n  type ToolSearchQuery,\r\n} from './tools/loader.js';\r\n\r\n// Lifecycle Management\r\nexport {\r\n  MCPLifecycleManager,\r\n  LifecycleState,\r\n  type LifecycleEvent,\r\n  type HealthCheckResult,\r\n  type LifecycleManagerConfig,\r\n} from './lifecycle-manager.js';\r\n\r\n// Tool Registry and Management\r\nexport {\r\n  ToolRegistry,\r\n  type ToolCapability,\r\n  type ToolMetrics,\r\n  type ToolDiscoveryQuery,\r\n} from './tools.js';\r\n\r\n// Protocol Management\r\nexport {\r\n  MCPProtocolManager,\r\n  type ProtocolVersionInfo,\r\n  type CompatibilityResult,\r\n  type NegotiationResult,\r\n} from './protocol-manager.js';\r\n\r\n// Authentication and Authorization\r\nexport {\r\n  AuthManager,\r\n  type IAuthManager,\r\n  type AuthContext,\r\n  type AuthResult,\r\n  type TokenInfo,\r\n  type TokenGenerationOptions,\r\n  type AuthSession,\r\n  Permissions,\r\n} from './auth.js';\r\n\r\n// Performance Monitoring\r\nexport {\r\n  MCPPerformanceMonitor,\r\n  type PerformanceMetrics,\r\n  type RequestMetrics,\r\n  type AlertRule,\r\n  type Alert,\r\n  type OptimizationSuggestion,\r\n} from './performance-monitor.js';\r\n\r\n// Orchestration Integration\r\nexport {\r\n  MCPOrchestrationIntegration,\r\n  type OrchestrationComponents,\r\n  type MCPOrchestrationConfig,\r\n  type IntegrationStatus,\r\n} from './orchestration-integration.js';\r\n\r\n// Transport Implementations\r\nexport { type ITransport } from './transports/base.js';\r\nexport { StdioTransport } from './transports/stdio.js';\r\nexport { HttpTransport } from './transports/http.js';\r\n\r\n// Request Routing\r\nexport { RequestRouter } from './router.js';\r\n\r\n// Session Management\r\nexport { SessionManager, type ISessionManager } from './session-manager.js';\r\n\r\n// Load Balancing\r\nexport { LoadBalancer, type ILoadBalancer, RequestQueue } from './load-balancer.js';\r\n\r\n// Tool Implementations\r\nexport { createClaudeFlowTools, type ClaudeFlowToolContext } from './claude-flow-tools.js';\r\nexport { createSwarmTools, type SwarmToolContext } from './swarm-tools.js';\r\n\r\n/**\r\n * MCP Integration Factory\r\n * Provides a simple way to create a complete MCP integration\r\n */\r\nexport class MCPIntegrationFactory {\r\n  /**\r\n   * Create a complete MCP integration with all components\r\n   */\r\n  static async createIntegration(config: {\r\n    mcpConfig: import('../utils/types.js').MCPConfig;\r\n    orchestrationConfig?: Partial<MCPOrchestrationConfig>;\r\n    components?: Partial<OrchestrationComponents>;\r\n    logger: import('../core/logger.js').ILogger;\r\n  }): Promise<MCPOrchestrationIntegration> {\r\n    const { mcpConfig, orchestrationConfig = {}, components = {}, logger } = config;\r\n\r\n    const integration = new MCPOrchestrationIntegration(\r\n      mcpConfig,\r\n      {\r\n        enabledIntegrations: {\r\n          orchestrator: true,\r\n          swarm: true,\r\n          agents: true,\r\n          resources: true,\r\n          memory: true,\r\n          monitoring: true,\r\n          terminals: true,\r\n        },\r\n        autoStart: true,\r\n        healthCheckInterval: 30000,\r\n        reconnectAttempts: 3,\r\n        reconnectDelay: 5000,\r\n        enableMetrics: true,\r\n        enableAlerts: true,\r\n        ...orchestrationConfig,\r\n      },\r\n      components,\r\n      logger,\r\n    );\r\n\r\n    return integration;\r\n  }\r\n\r\n  /**\r\n   * Create a standalone MCP server (without orchestration integration)\r\n   */\r\n  static async createStandaloneServer(config: {\r\n    mcpConfig: import('../utils/types.js').MCPConfig;\r\n    logger: import('../core/logger.js').ILogger;\r\n    enableLifecycleManagement?: boolean;\r\n    enablePerformanceMonitoring?: boolean;\r\n  }): Promise<{\r\n    server: MCPServer;\r\n    lifecycleManager?: MCPLifecycleManager;\r\n    performanceMonitor?: MCPPerformanceMonitor;\r\n  }> {\r\n    const {\r\n      mcpConfig,\r\n      logger,\r\n      enableLifecycleManagement = true,\r\n      enablePerformanceMonitoring = true,\r\n    } = config;\r\n\r\n    const eventBus = new (await import('node:events')).EventEmitter();\r\n    const server = new MCPServer(mcpConfig, eventBus, logger);\r\n\r\n    let lifecycleManager: MCPLifecycleManager | undefined;\r\n    let performanceMonitor: MCPPerformanceMonitor | undefined;\r\n\r\n    if (enableLifecycleManagement) {\r\n      lifecycleManager = new MCPLifecycleManager(mcpConfig, logger, () => server);\r\n    }\r\n\r\n    if (enablePerformanceMonitoring) {\r\n      performanceMonitor = new MCPPerformanceMonitor(logger);\r\n    }\r\n\r\n    return {\r\n      server,\r\n      lifecycleManager,\r\n      performanceMonitor,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Create a development/testing MCP setup\r\n   */\r\n  static async createDevelopmentSetup(logger: import('../core/logger.js').ILogger): Promise<{\r\n    server: MCPServer;\r\n    lifecycleManager: MCPLifecycleManager;\r\n    performanceMonitor: MCPPerformanceMonitor;\r\n    protocolManager: MCPProtocolManager;\r\n  }> {\r\n    const mcpConfig: import('../utils/types.js').MCPConfig = {\r\n      transport: 'stdio',\r\n      enableMetrics: true,\r\n      auth: {\r\n        enabled: false,\r\n        method: 'token',\r\n      },\r\n    };\r\n\r\n    const { server, lifecycleManager, performanceMonitor } = await this.createStandaloneServer({\r\n      mcpConfig,\r\n      logger,\r\n      enableLifecycleManagement: true,\r\n      enablePerformanceMonitoring: true,\r\n    });\r\n\r\n    const protocolManager = new MCPProtocolManager(logger);\r\n\r\n    return {\r\n      server,\r\n      lifecycleManager: lifecycleManager!,\r\n      performanceMonitor: performanceMonitor!,\r\n      protocolManager,\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Default MCP configuration for common use cases\r\n */\r\nexport const DefaultMCPConfigs = {\r\n  /**\r\n   * Development configuration with stdio transport\r\n   */\r\n  development: {\r\n    transport: 'stdio' as const,\r\n    enableMetrics: true,\r\n    auth: {\r\n      enabled: false,\r\n      method: 'token' as const,\r\n    },\r\n  },\r\n\r\n  /**\r\n   * Production configuration with HTTP transport and authentication\r\n   */\r\n  production: {\r\n    transport: 'http' as const,\r\n    host: '0.0.0.0',\r\n    port: 3000,\r\n    tlsEnabled: true,\r\n    enableMetrics: true,\r\n    auth: {\r\n      enabled: true,\r\n      method: 'token' as const,\r\n    },\r\n    loadBalancer: {\r\n      enabled: true,\r\n      maxRequestsPerSecond: 100,\r\n      maxConcurrentRequests: 50,\r\n    },\r\n    sessionTimeout: 3600000, // 1 hour\r\n    maxSessions: 1000,\r\n  },\r\n\r\n  /**\r\n   * Testing configuration with minimal features\r\n   */\r\n  testing: {\r\n    transport: 'stdio' as const,\r\n    enableMetrics: false,\r\n    auth: {\r\n      enabled: false,\r\n      method: 'token' as const,\r\n    },\r\n  },\r\n} as const;\r\n\r\n/**\r\n * MCP Utility Functions\r\n */\r\nexport const MCPUtils = {\r\n  /**\r\n   * Validate MCP protocol version\r\n   */\r\n  isValidProtocolVersion(version: import('../utils/types.js').MCPProtocolVersion): boolean {\r\n    return (\r\n      typeof version.major === 'number' &&\r\n      typeof version.minor === 'number' &&\r\n      typeof version.patch === 'number' &&\r\n      version.major > 0\r\n    );\r\n  },\r\n\r\n  /**\r\n   * Compare two protocol versions\r\n   */\r\n  compareVersions(\r\n    a: import('../utils/types.js').MCPProtocolVersion,\r\n    b: import('../utils/types.js').MCPProtocolVersion,\r\n  ): number {\r\n    if (a.major !== b.major) return a.major - b.major;\r\n    if (a.minor !== b.minor) return a.minor - b.minor;\r\n    return a.patch - b.patch;\r\n  },\r\n\r\n  /**\r\n   * Format protocol version as string\r\n   */\r\n  formatVersion(version: import('../utils/types.js').MCPProtocolVersion): string {\r\n    return `${version.major}.${version.minor}.${version.patch}`;\r\n  },\r\n\r\n  /**\r\n   * Parse protocol version from string\r\n   */\r\n  parseVersion(versionString: string): import('../utils/types.js').MCPProtocolVersion {\r\n    const parts = versionString.split('.').map((p) => parseInt(p, 10));\r\n    if (parts.length !== 3 || parts.some((p) => isNaN(p))) {\r\n      throw new Error(`Invalid version string: ${versionString}`);\r\n    }\r\n    return {\r\n      major: parts[0],\r\n      minor: parts[1],\r\n      patch: parts[2],\r\n    };\r\n  },\r\n\r\n  /**\r\n   * Generate a random session ID\r\n   */\r\n  generateSessionId(): string {\r\n    return `mcp_session_${Date.now()}_${Math.random().toString(36).substring(2, 15)}`;\r\n  },\r\n\r\n  /**\r\n   * Generate a random request ID\r\n   */\r\n  generateRequestId(): string {\r\n    return `mcp_req_${Date.now()}_${Math.random().toString(36).substring(2, 15)}`;\r\n  },\r\n};\r\n\r\n/**\r\n * Phase 6: Initialize MCP with in-process server for maximum performance\r\n *\r\n * Provides 10-100x performance improvement by eliminating IPC overhead.\r\n * All Claude-Flow MCP tools execute in-process with microsecond latency.\r\n */\r\nexport async function initializeInProcessMCP(orchestratorContext?: any) {\r\n  const { initializeSDKIntegration } = await import('./sdk-integration.js');\r\n\r\n  return initializeSDKIntegration({\r\n    enableInProcess: true,\r\n    enableMetrics: true,\r\n    enableCaching: true,\r\n    orchestratorContext,\r\n    fallbackToStdio: true,\r\n  });\r\n}\r\n\r\n/**\r\n * Phase 6: Get in-process server status and performance metrics\r\n */\r\nexport async function getInProcessMCPStatus() {\r\n  const { getSDKIntegration } = await import('./sdk-integration.js');\r\n  const integration = getSDKIntegration();\r\n\r\n  if (!integration) {\r\n    return {\r\n      initialized: false,\r\n      inProcess: false,\r\n      message: 'In-process MCP not initialized',\r\n    };\r\n  }\r\n\r\n  return {\r\n    initialized: true,\r\n    inProcess: integration.isInProcessAvailable(),\r\n    metrics: integration.getMetrics(),\r\n    performanceComparison: integration.getPerformanceComparison(),\r\n  };\r\n}\r\n"],"names":["InProcessMCPServer","createInProcessServer","ClaudeFlowToolRegistry","createToolRegistry","createClaudeFlowSdkServer","SDKIntegration","initializeSDKIntegration","getSDKIntegration","createInProcessQuery","getInProcessServerConfig","measurePerformance","MCPServer","MCP2025Server","MCPServerFactory","createMCPServer","isMCP2025Available","getServerCapabilities","VersionNegotiator","BackwardCompatibilityAdapter","MCPAsyncJobManager","MCPRegistryClient","SchemaValidator","upgradeToolSchema","ProgressiveToolRegistry","createProgressiveToolRegistry","createProgressiveClaudeFlowSdkServer","DynamicToolLoader","MCPLifecycleManager","LifecycleState","ToolRegistry","MCPProtocolManager","AuthManager","Permissions","MCPPerformanceMonitor","MCPOrchestrationIntegration","StdioTransport","HttpTransport","RequestRouter","SessionManager","LoadBalancer","RequestQueue","createClaudeFlowTools","createSwarmTools","MCPIntegrationFactory","createIntegration","config","mcpConfig","orchestrationConfig","components","logger","integration","enabledIntegrations","orchestrator","swarm","agents","resources","memory","monitoring","terminals","autoStart","healthCheckInterval","reconnectAttempts","reconnectDelay","enableMetrics","enableAlerts","createStandaloneServer","enableLifecycleManagement","enablePerformanceMonitoring","eventBus","EventEmitter","server","lifecycleManager","performanceMonitor","createDevelopmentSetup","transport","auth","enabled","method","protocolManager","DefaultMCPConfigs","development","production","host","port","tlsEnabled","loadBalancer","maxRequestsPerSecond","maxConcurrentRequests","sessionTimeout","maxSessions","testing","MCPUtils","isValidProtocolVersion","version","major","minor","patch","compareVersions","a","b","formatVersion","parseVersion","versionString","parts","split","map","p","parseInt","length","some","isNaN","Error","generateSessionId","Date","now","Math","random","toString","substring","generateRequestId","initializeInProcessMCP","orchestratorContext","enableInProcess","enableCaching","fallbackToStdio","getInProcessMCPStatus","initialized","inProcess","message","isInProcessAvailable","metrics","getMetrics","performanceComparison","getPerformanceComparison"],"mappings":"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"}