{"version":3,"sources":["../../../../src/cli/commands/swarm-spawn.ts"],"sourcesContent":["/**\r\n * Swarm spawning utilities\r\n */\r\n\r\ninterface Agent {\r\n  id: string;\r\n  type: string;\r\n  status: string;\r\n  name: string;\r\n  task: string;\r\n  parentId?: string;\r\n  terminalId?: string;\r\n}\r\n\r\ninterface SwarmState {\r\n  swarmId: string;\r\n  objective: string;\r\n  agents: Map<string, Agent>;\r\n  startTime: number;\r\n}\r\n\r\nconst swarmStates = new Map<string, SwarmState>();\r\n\r\nexport function initializeSwarm(swarmId: string, objective: string): void {\r\n  swarmStates.set(swarmId, {\r\n    swarmId: swarmId,\r\n    objective,\r\n    agents: new Map<string, Agent>(),\r\n    startTime: Date.now(),\r\n  });\r\n}\r\n\r\nexport async function spawnSwarmAgent(\r\n  swarmId: string,\r\n  agentType: string,\r\n  task: string,\r\n): Promise<string> {\r\n  const swarm = swarmStates.get(swarmId);\r\n  if (!swarm) {\r\n    throw new Error(`Swarm ${swarmId} not found`);\r\n  }\r\n\r\n  const agentId = `${swarmId}-agent-${Date.now()}`;\r\n  const agent: Agent = {\r\n    id: agentId,\r\n    type: agentType,\r\n    status: 'active',\r\n    name: `${agentType}-${agentId}`,\r\n    task: task,\r\n  };\r\n  swarm.agents.set(agentId, agent);\r\n\r\n  // In a real implementation, this would spawn actual Claude instances\r\n  console.log(`[SWARM] Spawned ${agentType} agent: ${agentId}`);\r\n  console.log(`[SWARM] Task: ${task}`);\r\n\r\n  return agentId;\r\n}\r\n\r\nexport async function monitorSwarm(swarmId: string): Promise<void> {\r\n  const swarm = swarmStates.get(swarmId);\r\n  if (!swarm) {\r\n    throw new Error(`Swarm ${swarmId} not found`);\r\n  }\r\n\r\n  // Simple monitoring loop\r\n  let running = true;\r\n  const interval = setInterval(() => {\r\n    if (!running) {\r\n      clearInterval(interval);\r\n      return;\r\n    }\r\n\r\n    console.log(`[MONITOR] Swarm ${swarmId} - Agents: ${swarm.agents.size}`);\r\n    const activeAgents = Array.from(swarm.agents.values()).filter(\r\n      (a) => a.status === 'active',\r\n    ).length;\r\n    console.log(`[MONITOR] Active: ${activeAgents}`);\r\n  }, 5000);\r\n\r\n  // Stop monitoring after timeout\r\n  setTimeout(\r\n    () => {\r\n      running = false;\r\n    },\r\n    60 * 60 * 1000,\r\n  ); // 1 hour\r\n}\r\n\r\nexport function getSwarmState(swarmId: string): SwarmState | undefined {\r\n  return swarmStates.get(swarmId);\r\n}\r\n"],"names":["swarmStates","Map","initializeSwarm","swarmId","objective","set","agents","startTime","Date","now","spawnSwarmAgent","agentType","task","swarm","get","Error","agentId","agent","id","type","status","name","console","log","monitorSwarm","running","interval","setInterval","clearInterval","size","activeAgents","Array","from","values","filter","a","length","setTimeout","getSwarmState"],"mappings":"AAqBA,MAAMA,cAAc,IAAIC;AAExB,OAAO,SAASC,gBAAgBC,OAAe,EAAEC,SAAiB;IAChEJ,YAAYK,GAAG,CAACF,SAAS;QACvBA,SAASA;QACTC;QACAE,QAAQ,IAAIL;QACZM,WAAWC,KAAKC,GAAG;IACrB;AACF;AAEA,OAAO,eAAeC,gBACpBP,OAAe,EACfQ,SAAiB,EACjBC,IAAY;IAEZ,MAAMC,QAAQb,YAAYc,GAAG,CAACX;IAC9B,IAAI,CAACU,OAAO;QACV,MAAM,IAAIE,MAAM,CAAC,MAAM,EAAEZ,QAAQ,UAAU,CAAC;IAC9C;IAEA,MAAMa,UAAU,GAAGb,QAAQ,OAAO,EAAEK,KAAKC,GAAG,IAAI;IAChD,MAAMQ,QAAe;QACnBC,IAAIF;QACJG,MAAMR;QACNS,QAAQ;QACRC,MAAM,GAAGV,UAAU,CAAC,EAAEK,SAAS;QAC/BJ,MAAMA;IACR;IACAC,MAAMP,MAAM,CAACD,GAAG,CAACW,SAASC;IAG1BK,QAAQC,GAAG,CAAC,CAAC,gBAAgB,EAAEZ,UAAU,QAAQ,EAAEK,SAAS;IAC5DM,QAAQC,GAAG,CAAC,CAAC,cAAc,EAAEX,MAAM;IAEnC,OAAOI;AACT;AAEA,OAAO,eAAeQ,aAAarB,OAAe;IAChD,MAAMU,QAAQb,YAAYc,GAAG,CAACX;IAC9B,IAAI,CAACU,OAAO;QACV,MAAM,IAAIE,MAAM,CAAC,MAAM,EAAEZ,QAAQ,UAAU,CAAC;IAC9C;IAGA,IAAIsB,UAAU;IACd,MAAMC,WAAWC,YAAY;QAC3B,IAAI,CAACF,SAAS;YACZG,cAAcF;YACd;QACF;QAEAJ,QAAQC,GAAG,CAAC,CAAC,gBAAgB,EAAEpB,QAAQ,WAAW,EAAEU,MAAMP,MAAM,CAACuB,IAAI,EAAE;QACvE,MAAMC,eAAeC,MAAMC,IAAI,CAACnB,MAAMP,MAAM,CAAC2B,MAAM,IAAIC,MAAM,CAC3D,CAACC,IAAMA,EAAEf,MAAM,KAAK,UACpBgB,MAAM;QACRd,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEO,cAAc;IACjD,GAAG;IAGHO,WACE;QACEZ,UAAU;IACZ,GACA,KAAK,KAAK;AAEd;AAEA,OAAO,SAASa,cAAcnC,OAAe;IAC3C,OAAOH,YAAYc,GAAG,CAACX;AACzB"}