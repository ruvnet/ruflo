{"version":3,"sources":["../../../../../src/cli/simple-commands/init/agent-copier.js"],"sourcesContent":["// agent-copier.js - Copy all agent files during initialization\r\nimport { promises as fs } from 'fs';\r\nimport { join, dirname } from 'path';\r\nimport { fileURLToPath } from 'url';\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = dirname(__filename);\r\n\r\n/**\r\n * Copy all agent files from the installed package to project directory\r\n */\r\nexport async function copyAgentFiles(targetDir, options = {}) {\r\n  const { force = false, dryRun = false } = options;\r\n  \r\n  // Path to agent files - try multiple locations\r\n  const packageAgentsDir = join(__dirname, '../../../../.claude/agents'); // From npm package\r\n  const localAgentsDir = '/workspaces/claude-code-flow/.claude/agents';   // Local development\r\n  const cwdAgentsDir = join(process.cwd(), '.claude/agents');              // Current working directory\r\n  \r\n  let sourceAgentsDir;\r\n  \r\n  // Try local development first, then package, then cwd\r\n  try {\r\n    await fs.access(localAgentsDir);\r\n    sourceAgentsDir = localAgentsDir;\r\n    console.log('  üìÅ Using local development agent files');\r\n  } catch {\r\n    try {\r\n      await fs.access(packageAgentsDir);\r\n      sourceAgentsDir = packageAgentsDir;\r\n      console.log('  üìÅ Using packaged agent files');\r\n    } catch {\r\n      try {\r\n        await fs.access(cwdAgentsDir);\r\n        sourceAgentsDir = cwdAgentsDir;\r\n        console.log('  üìÅ Using current directory agent files');\r\n      } catch {\r\n        console.log('  ‚ö†Ô∏è  No agent files found in any location');\r\n        return { success: false, error: 'Agent files not found' };\r\n      }\r\n    }\r\n  }\r\n  const targetAgentsDir = join(targetDir, '.claude/agents');\r\n  \r\n  console.log('üìÅ Copying agent system files...');\r\n  console.log(`  üìÇ Source: ${sourceAgentsDir}`);\r\n  console.log(`  üìÇ Target: ${targetAgentsDir}`);\r\n  \r\n  try {\r\n    \r\n    // Create target directory\r\n    if (!dryRun) {\r\n      await fs.mkdir(targetAgentsDir, { recursive: true });\r\n    }\r\n    \r\n    const copiedFiles = [];\r\n    const errors = [];\r\n    \r\n    // Recursively copy all agent files\r\n    async function copyRecursive(srcDir, destDir) {\r\n      const items = await fs.readdir(srcDir, { withFileTypes: true });\r\n      \r\n      for (const item of items) {\r\n        const srcPath = join(srcDir, item.name);\r\n        const destPath = join(destDir, item.name);\r\n        \r\n        if (item.isDirectory()) {\r\n          if (!dryRun) {\r\n            await fs.mkdir(destPath, { recursive: true });\r\n          }\r\n          await copyRecursive(srcPath, destPath);\r\n        } else if (item.isFile() && item.name.endsWith('.md')) {\r\n          try {\r\n            // Check if file already exists\r\n            let shouldCopy = force;\r\n            if (!force) {\r\n              try {\r\n                await fs.access(destPath);\r\n                // File exists, skip unless force is true\r\n                continue;\r\n              } catch {\r\n                // File doesn't exist, safe to copy\r\n                shouldCopy = true;\r\n              }\r\n            }\r\n            \r\n            if (shouldCopy && !dryRun) {\r\n              const content = await fs.readFile(srcPath, 'utf8');\r\n              await fs.writeFile(destPath, content, 'utf8');\r\n              copiedFiles.push(destPath.replace(targetDir + '/', ''));\r\n            } else if (dryRun) {\r\n              copiedFiles.push(destPath.replace(targetDir + '/', ''));\r\n            }\r\n          } catch (err) {\r\n            errors.push(`Failed to copy ${item.name}: ${err.message}`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    await copyRecursive(sourceAgentsDir, targetAgentsDir);\r\n    \r\n    if (!dryRun && copiedFiles.length > 0) {\r\n      console.log(`  ‚úÖ Copied ${copiedFiles.length} agent files`);\r\n      console.log('  üìã Agent system initialized with 64 specialized agents');\r\n      console.log('  üéØ Available categories: Core, Swarm, Consensus, Performance, GitHub, SPARC, Testing');\r\n    } else if (dryRun) {\r\n      console.log(`  [DRY RUN] Would copy ${copiedFiles.length} agent files`);\r\n    }\r\n    \r\n    if (errors.length > 0) {\r\n      console.log('  ‚ö†Ô∏è  Some agent files could not be copied:');\r\n      errors.forEach(error => console.log(`    - ${error}`));\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      copiedFiles,\r\n      errors,\r\n      totalAgents: copiedFiles.length\r\n    };\r\n    \r\n  } catch (err) {\r\n    console.log(`  ‚ùå Failed to copy agent files: ${err.message}`);\r\n    return {\r\n      success: false,\r\n      error: err.message,\r\n      copiedFiles: [],\r\n      errors: [err.message]\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Create agent directories structure\r\n */\r\nexport async function createAgentDirectories(targetDir, dryRun = false) {\r\n  const agentDirs = [\r\n    '.claude',\r\n    '.claude/agents',\r\n    '.claude/agents/core',\r\n    '.claude/agents/swarm', \r\n    '.claude/agents/hive-mind',\r\n    '.claude/agents/consensus',\r\n    '.claude/agents/optimization',\r\n    '.claude/agents/github',\r\n    '.claude/agents/sparc',\r\n    '.claude/agents/testing',\r\n    '.claude/agents/testing/unit',\r\n    '.claude/agents/testing/validation',\r\n    '.claude/agents/templates',\r\n    '.claude/agents/analysis',\r\n    '.claude/agents/analysis/code-review',\r\n    '.claude/agents/architecture',\r\n    '.claude/agents/architecture/system-design',\r\n    '.claude/agents/data',\r\n    '.claude/agents/data/ml',\r\n    '.claude/agents/development',\r\n    '.claude/agents/development/backend',\r\n    '.claude/agents/devops',\r\n    '.claude/agents/devops/ci-cd',\r\n    '.claude/agents/documentation',\r\n    '.claude/agents/documentation/api-docs',\r\n    '.claude/agents/specialized',\r\n    '.claude/agents/specialized/mobile',\r\n    '.claude/agents/flow-nexus',\r\n    '.claude/commands',\r\n    '.claude/commands/flow-nexus'\r\n  ];\r\n  \r\n  if (dryRun) {\r\n    console.log(`  [DRY RUN] Would create ${agentDirs.length} agent directories`);\r\n    return;\r\n  }\r\n  \r\n  for (const dir of agentDirs) {\r\n    await fs.mkdir(join(targetDir, dir), { recursive: true });\r\n  }\r\n  \r\n  console.log(`  ‚úÖ Created ${agentDirs.length} agent directories`);\r\n}\r\n\r\n/**\r\n * Validate agent system after copying\r\n */\r\n/**\r\n * Copy all command files from the installed package to project directory\r\n */\r\nexport async function copyCommandFiles(targetDir, options = {}) {\r\n  const { force = false, dryRun = false } = options;\r\n  \r\n  // Path to command files - try multiple locations\r\n  const packageCommandsDir = join(__dirname, '../../../../.claude/commands'); // From npm package\r\n  const localCommandsDir = '/workspaces/claude-code-flow/.claude/commands';   // Local development\r\n  const cwdCommandsDir = join(process.cwd(), '.claude/commands');              // Current working directory\r\n  \r\n  let sourceCommandsDir;\r\n  \r\n  // Try local development first, then package, then cwd\r\n  try {\r\n    await fs.access(localCommandsDir);\r\n    sourceCommandsDir = localCommandsDir;\r\n    console.log('  üìÅ Using local development command files');\r\n  } catch {\r\n    try {\r\n      await fs.access(packageCommandsDir);\r\n      sourceCommandsDir = packageCommandsDir;\r\n      console.log('  üìÅ Using packaged command files');\r\n    } catch {\r\n      try {\r\n        await fs.access(cwdCommandsDir);\r\n        sourceCommandsDir = cwdCommandsDir;\r\n        console.log('  üìÅ Using current directory command files');\r\n      } catch {\r\n        console.log('  ‚ö†Ô∏è  No command files found in any location');\r\n        return { success: false, error: 'Command files not found' };\r\n      }\r\n    }\r\n  }\r\n  \r\n  const targetCommandsDir = join(targetDir, '.claude/commands');\r\n  \r\n  console.log('üìÅ Copying command system files...');\r\n  console.log(`  üìÇ Source: ${sourceCommandsDir}`);\r\n  console.log(`  üìÇ Target: ${targetCommandsDir}`);\r\n  \r\n  try {\r\n    // Create target directory\r\n    if (!dryRun) {\r\n      await fs.mkdir(targetCommandsDir, { recursive: true });\r\n    }\r\n    \r\n    const copiedFiles = [];\r\n    const errors = [];\r\n    \r\n    // Recursively copy all command files\r\n    async function copyRecursive(srcDir, destDir) {\r\n      const items = await fs.readdir(srcDir, { withFileTypes: true });\r\n      \r\n      for (const item of items) {\r\n        const srcPath = join(srcDir, item.name);\r\n        const destPath = join(destDir, item.name);\r\n        \r\n        if (item.isDirectory()) {\r\n          if (!dryRun) {\r\n            await fs.mkdir(destPath, { recursive: true });\r\n          }\r\n          await copyRecursive(srcPath, destPath);\r\n        } else if (item.isFile() && item.name.endsWith('.md')) {\r\n          try {\r\n            // Check if file already exists\r\n            let shouldCopy = force;\r\n            if (!force) {\r\n              try {\r\n                await fs.access(destPath);\r\n                // File exists, skip unless force is true\r\n                continue;\r\n              } catch {\r\n                // File doesn't exist, safe to copy\r\n                shouldCopy = true;\r\n              }\r\n            }\r\n            \r\n            if (shouldCopy && !dryRun) {\r\n              const content = await fs.readFile(srcPath, 'utf8');\r\n              await fs.writeFile(destPath, content, 'utf8');\r\n              copiedFiles.push(destPath.replace(targetDir + '/', ''));\r\n            } else if (dryRun) {\r\n              copiedFiles.push(destPath.replace(targetDir + '/', ''));\r\n            }\r\n          } catch (err) {\r\n            errors.push(`Failed to copy ${item.name}: ${err.message}`);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    await copyRecursive(sourceCommandsDir, targetCommandsDir);\r\n    \r\n    if (!dryRun && copiedFiles.length > 0) {\r\n      console.log(`  ‚úÖ Copied ${copiedFiles.length} command files`);\r\n      console.log('  üìã Command system initialized with comprehensive documentation');\r\n      console.log('  üéØ Available categories: Analysis, Automation, GitHub, Hooks, Memory, Flow Nexus');\r\n    } else if (dryRun) {\r\n      console.log(`  [DRY RUN] Would copy ${copiedFiles.length} command files`);\r\n    }\r\n    \r\n    if (errors.length > 0) {\r\n      console.log('  ‚ö†Ô∏è  Some command files could not be copied:');\r\n      errors.forEach(error => console.log(`    - ${error}`));\r\n    }\r\n    \r\n    return {\r\n      success: true,\r\n      copiedFiles,\r\n      errors,\r\n      totalCommands: copiedFiles.length\r\n    };\r\n    \r\n  } catch (err) {\r\n    console.log(`  ‚ùå Failed to copy command files: ${err.message}`);\r\n    return {\r\n      success: false,\r\n      error: err.message,\r\n      copiedFiles: [],\r\n      errors: [err.message]\r\n    };\r\n  }\r\n}\r\n\r\nexport async function validateAgentSystem(targetDir) {\r\n  const agentsDir = join(targetDir, '.claude/agents');\r\n  \r\n  try {\r\n    const categories = await fs.readdir(agentsDir, { withFileTypes: true });\r\n    const agentCategories = categories.filter(item => item.isDirectory()).map(item => item.name);\r\n    \r\n    let totalAgents = 0;\r\n    for (const category of agentCategories) {\r\n      const categoryPath = join(agentsDir, category);\r\n      const items = await fs.readdir(categoryPath, { withFileTypes: true });\r\n      const agentFiles = items.filter(item => item.isFile() && item.name.endsWith('.md'));\r\n      totalAgents += agentFiles.length;\r\n    }\r\n    \r\n    console.log('  üîç Agent system validation:');\r\n    console.log(`    ‚Ä¢ Categories: ${agentCategories.length}`);\r\n    console.log(`    ‚Ä¢ Total agents: ${totalAgents}`);\r\n    console.log(`    ‚Ä¢ Categories: ${agentCategories.join(', ')}`);\r\n    \r\n    return {\r\n      valid: totalAgents > 50, // Should have at least 50+ agents\r\n      categories: agentCategories.length,\r\n      totalAgents,\r\n      categoryNames: agentCategories\r\n    };\r\n    \r\n  } catch (err) {\r\n    console.log(`  ‚ö†Ô∏è  Agent system validation failed: ${err.message}`);\r\n    return {\r\n      valid: false,\r\n      error: err.message\r\n    };\r\n  }\r\n}"],"names":["promises","fs","join","dirname","fileURLToPath","__filename","url","__dirname","copyAgentFiles","targetDir","options","force","dryRun","packageAgentsDir","localAgentsDir","cwdAgentsDir","process","cwd","sourceAgentsDir","access","console","log","success","error","targetAgentsDir","mkdir","recursive","copiedFiles","errors","copyRecursive","srcDir","destDir","items","readdir","withFileTypes","item","srcPath","name","destPath","isDirectory","isFile","endsWith","shouldCopy","content","readFile","writeFile","push","replace","err","message","length","forEach","totalAgents","createAgentDirectories","agentDirs","dir","copyCommandFiles","packageCommandsDir","localCommandsDir","cwdCommandsDir","sourceCommandsDir","targetCommandsDir","totalCommands","validateAgentSystem","agentsDir","categories","agentCategories","filter","map","category","categoryPath","agentFiles","valid","categoryNames"],"mappings":"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"}