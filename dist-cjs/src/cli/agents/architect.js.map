{"version":3,"sources":["../../../../src/cli/agents/architect.ts"],"sourcesContent":["/**\r\n * Architect Agent - Specialized in system design and architecture\r\n */\r\n\r\nimport { BaseAgent } from './base-agent.js';\r\nimport type {\r\n  AgentCapabilities,\r\n  AgentConfig,\r\n  AgentEnvironment,\r\n  TaskDefinition,\r\n} from '../../swarm/types.js';\r\nimport type { ILogger } from '../../core/logger.js';\r\nimport type { IEventBus } from '../../core/event-bus.js';\r\nimport type { DistributedMemorySystem } from '../../memory/distributed-memory.js';\r\n\r\n// Type definitions for architect analysis\r\ninterface ArchitectureIssue {\r\n  category: string;\r\n  severity: string;\r\n  description: string;\r\n  component: string;\r\n  recommendation: string;\r\n}\r\n\r\ninterface ArchitectureRecommendation {\r\n  category: string;\r\n  priority: string;\r\n  description: string;\r\n  benefits: string[];\r\n  implementation: string;\r\n}\r\n\r\ninterface ApiEndpoint {\r\n  method: string;\r\n  path: string;\r\n  description: string;\r\n  auth: boolean;\r\n  rateLimit: string;\r\n}\r\n\r\ninterface MicroserviceComponent {\r\n  service: string;\r\n  purpose: string;\r\n}\r\n\r\ninterface ServiceComponent {\r\n  name: string;\r\n  responsibility: string;\r\n  database: string;\r\n  api: string;\r\n  dependencies: string[];\r\n}\r\n\r\ninterface DatabaseComponent {\r\n  name: string;\r\n  type: string;\r\n  purpose: string;\r\n  size: string;\r\n}\r\n\r\ninterface InfrastructureComponent {\r\n  name: string;\r\n  type: string;\r\n  purpose: string;\r\n  specifications: any;\r\n}\r\n\r\nexport class ArchitectAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: AgentEnvironment,\r\n    logger: ILogger,\r\n    eventBus: IEventBus,\r\n    memory: DistributedMemorySystem,\r\n  ) {\r\n    super(id, 'architect', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      codeGeneration: false,\r\n      codeReview: true,\r\n      testing: false,\r\n      documentation: true,\r\n      research: true,\r\n      analysis: true,\r\n      webSearch: true,\r\n      apiIntegration: true,\r\n      fileSystem: true,\r\n      terminalAccess: false,\r\n      languages: ['typescript', 'javascript', 'python', 'java', 'csharp', 'go', 'rust'],\r\n      frameworks: [\r\n        'microservices',\r\n        'kubernetes',\r\n        'docker',\r\n        'aws',\r\n        'azure',\r\n        'gcp',\r\n        'terraform',\r\n        'helm',\r\n      ],\r\n      domains: [\r\n        'system-architecture',\r\n        'software-architecture',\r\n        'cloud-architecture',\r\n        'microservices-design',\r\n        'api-design',\r\n        'database-architecture',\r\n        'security-architecture',\r\n        'scalability-design',\r\n        'infrastructure-design',\r\n        'enterprise-architecture',\r\n      ],\r\n      tools: [\r\n        'architecture-diagrams',\r\n        'system-modeler',\r\n        'design-patterns',\r\n        'cloud-designer',\r\n        'api-designer',\r\n        'security-analyzer',\r\n        'performance-modeler',\r\n        'cost-calculator',\r\n      ],\r\n      maxConcurrentTasks: 2,\r\n      maxMemoryUsage: 1024 * 1024 * 1024, // 1GB\r\n      maxExecutionTime: 2400000, // 40 minutes\r\n      reliability: 0.95,\r\n      speed: 0.7,\r\n      quality: 0.98,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.6,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 8,\r\n      maxConcurrentTasks: 2,\r\n      timeoutThreshold: 2400000,\r\n      reportingInterval: 90000,\r\n      heartbeatInterval: 20000,\r\n      permissions: ['file-read', 'file-write', 'web-access', 'api-access', 'cloud-access'],\r\n      trustedAgents: [],\r\n      expertise: {\r\n        'system-design': 0.98,\r\n        'architecture-patterns': 0.95,\r\n        scalability: 0.92,\r\n        security: 0.88,\r\n        performance: 0.9,\r\n        'cloud-design': 0.87,\r\n      },\r\n      preferences: {\r\n        architectureStyle: 'microservices',\r\n        cloudProvider: 'multi',\r\n        securityFirst: true,\r\n        scalabilityFocus: true,\r\n        documentationDetail: 'comprehensive',\r\n      },\r\n    };\r\n  }\r\n\r\n  override async executeTask(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Architect executing task', {\r\n      agentId: this.id,\r\n      taskType: task.type,\r\n      taskId: task.id,\r\n    });\r\n\r\n    try {\r\n      switch (task.type) {\r\n        case 'system-design':\r\n          return await this.designSystem(task);\r\n        case 'architecture-review':\r\n          return await this.reviewArchitecture(task);\r\n        case 'api-design':\r\n          return await this.designAPI(task);\r\n        case 'cloud-architecture':\r\n          return await this.designCloudArchitecture(task);\r\n        case 'microservices-design':\r\n          return await this.designMicroservices(task);\r\n        case 'security-architecture':\r\n          return await this.designSecurity(task);\r\n        case 'scalability-design':\r\n          return await this.designScalability(task);\r\n        case 'database-architecture':\r\n          return await this.designDatabase(task);\r\n        default:\r\n          return await this.performGeneralDesign(task);\r\n      }\r\n    } catch (error) {\r\n      this.logger.error('Architecture task failed', {\r\n        agentId: this.id,\r\n        taskId: task.id,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async designSystem(task: TaskDefinition): Promise<any> {\r\n    const requirements = task.input?.requirements;\r\n    const scale = task.input?.scale || 'medium';\r\n    const constraints = task.input?.constraints || [];\r\n    const style = task.input?.style || 'microservices';\r\n\r\n    this.logger.info('Designing system', {\r\n      requirements: requirements?.length || 0,\r\n      scale,\r\n      style,\r\n    });\r\n\r\n    const design = {\r\n      requirements,\r\n      scale,\r\n      style,\r\n      architecture: {\r\n        components: [] as any[],\r\n        services: [] as any[],\r\n        databases: [] as any[],\r\n        queues: [] as any[],\r\n        caches: [] as any[],\r\n      },\r\n      patterns: [] as string[],\r\n      technologies: {\r\n        backend: [] as string[],\r\n        frontend: [] as string[],\r\n        database: [] as string[],\r\n        infrastructure: [] as string[],\r\n        monitoring: [] as string[],\r\n      },\r\n      diagrams: [],\r\n      documentation: {\r\n        overview: '',\r\n        components: [],\r\n        apis: [],\r\n        deployment: '',\r\n        monitoring: '',\r\n      },\r\n      constraints: constraints,\r\n      tradeoffs: [],\r\n      risks: [],\r\n      recommendations: [],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Store design progress\r\n    await this.memory.store(\r\n      `design:${task.id}:progress`,\r\n      {\r\n        status: 'designing',\r\n        startTime: new Date(),\r\n        requirements,\r\n      },\r\n      {\r\n        type: 'design-progress',\r\n        tags: ['architecture', this.id, style],\r\n        partition: 'tasks',\r\n      },\r\n    );\r\n\r\n    // Simulate system design\r\n    await this.delay(5000);\r\n\r\n    design.architecture.components = [\r\n      {\r\n        name: 'API Gateway',\r\n        type: 'gateway',\r\n        purpose: 'Request routing and load balancing',\r\n        technology: 'Kong/NGINX',\r\n      },\r\n      {\r\n        name: 'User Service',\r\n        type: 'microservice',\r\n        purpose: 'User management and authentication',\r\n        technology: 'Node.js/Express',\r\n      },\r\n      {\r\n        name: 'Data Service',\r\n        type: 'microservice',\r\n        purpose: 'Data processing and analytics',\r\n        technology: 'Python/FastAPI',\r\n      },\r\n    ] as any[];\r\n\r\n    design.patterns = [\r\n      'Microservices Architecture',\r\n      'API Gateway Pattern',\r\n      'Database per Service',\r\n      'Event Sourcing',\r\n      'CQRS',\r\n      'Circuit Breaker',\r\n    ] as string[];\r\n\r\n    design.technologies = {\r\n      backend: ['Node.js', 'Python', 'TypeScript'] as string[],\r\n      frontend: ['React', 'TypeScript'] as string[],\r\n      database: ['PostgreSQL', 'Redis', 'MongoDB'] as string[],\r\n      infrastructure: ['Kubernetes', 'Docker', 'AWS'] as string[],\r\n      monitoring: ['Prometheus', 'Grafana', 'Jaeger'] as string[],\r\n    };\r\n\r\n    // Store final design\r\n    await this.memory.store(`design:${task.id}:results`, design, {\r\n      type: 'design-results',\r\n      tags: ['architecture', 'completed', this.id, style],\r\n      partition: 'tasks',\r\n    });\r\n\r\n    return design;\r\n  }\r\n\r\n  private async reviewArchitecture(task: TaskDefinition): Promise<any> {\r\n    const architecture = task.parameters?.architecture;\r\n    const focus = task.parameters?.focus || ['scalability', 'security', 'maintainability'];\r\n    const standards = task.parameters?.standards || 'enterprise';\r\n\r\n    this.logger.info('Reviewing architecture', {\r\n      focus,\r\n      standards,\r\n    });\r\n\r\n    const review = {\r\n      architecture,\r\n      focus,\r\n      standards,\r\n      scores: {},\r\n      issues: [] as ArchitectureIssue[],\r\n      recommendations: [] as ArchitectureRecommendation[],\r\n      compliance: {\r\n        passed: [] as any[],\r\n        failed: [] as any[],\r\n        warnings: [] as any[],\r\n      },\r\n      patterns: {\r\n        identified: [] as any[],\r\n        missing: [] as any[],\r\n        antipatterns: [] as any[],\r\n      },\r\n      improvements: [] as any[],\r\n      riskAssessment: {\r\n        technical: [] as any[],\r\n        security: [] as any[],\r\n        operational: [] as any[],\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate architecture review\r\n    await this.delay(4000);\r\n\r\n    review.scores = {\r\n      scalability: 0.85,\r\n      security: 0.78,\r\n      maintainability: 0.92,\r\n      performance: 0.88,\r\n      reliability: 0.9,\r\n    };\r\n\r\n    review.issues = [\r\n      {\r\n        category: 'security',\r\n        severity: 'high',\r\n        description: 'Missing API rate limiting',\r\n        component: 'API Gateway',\r\n        recommendation: 'Implement rate limiting and throttling',\r\n      },\r\n      {\r\n        category: 'scalability',\r\n        severity: 'medium',\r\n        description: 'Single point of failure in auth service',\r\n        component: 'Authentication Service',\r\n        recommendation: 'Add redundancy and load balancing',\r\n      },\r\n    ];\r\n\r\n    return review;\r\n  }\r\n\r\n  private async designAPI(task: TaskDefinition): Promise<any> {\r\n    const domain = task.parameters?.domain;\r\n    const style = task.parameters?.style || 'REST';\r\n    const version = task.parameters?.version || 'v1';\r\n    const auth = task.parameters?.auth || 'JWT';\r\n\r\n    this.logger.info('Designing API', {\r\n      domain,\r\n      style,\r\n      version,\r\n      auth,\r\n    });\r\n\r\n    const apiDesign = {\r\n      domain,\r\n      style,\r\n      version,\r\n      auth,\r\n      endpoints: [] as ApiEndpoint[],\r\n      schemas: [] as any[],\r\n      security: {\r\n        authentication: auth,\r\n        authorization: 'RBAC',\r\n        rateLimiting: true,\r\n        cors: true,\r\n        validation: true,\r\n      },\r\n      documentation: {\r\n        openapi: '3.0.0',\r\n        interactive: true,\r\n        examples: true,\r\n      },\r\n      standards: {\r\n        naming: 'kebab-case',\r\n        versioning: 'url-path',\r\n        errorHandling: 'RFC7807',\r\n        pagination: 'cursor-based',\r\n      },\r\n      performance: {\r\n        caching: 'Redis',\r\n        compression: 'gzip',\r\n        cdn: true,\r\n      },\r\n      monitoring: {\r\n        logging: true,\r\n        metrics: true,\r\n        tracing: true,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate API design\r\n    await this.delay(3000);\r\n\r\n    apiDesign.endpoints = [\r\n      {\r\n        method: 'GET',\r\n        path: '/api/v1/users',\r\n        description: 'List users with pagination',\r\n        auth: true,\r\n        rateLimit: '1000/hour',\r\n      },\r\n      {\r\n        method: 'POST',\r\n        path: '/api/v1/users',\r\n        description: 'Create new user',\r\n        auth: true,\r\n        rateLimit: '100/hour',\r\n      },\r\n    ];\r\n\r\n    return apiDesign;\r\n  }\r\n\r\n  private async designCloudArchitecture(task: TaskDefinition): Promise<any> {\r\n    const provider = task.parameters?.provider || 'AWS';\r\n    const regions = task.parameters?.regions || ['us-east-1'];\r\n    const budget = task.parameters?.budget;\r\n    const compliance = task.parameters?.compliance || [];\r\n\r\n    this.logger.info('Designing cloud architecture', {\r\n      provider,\r\n      regions,\r\n      compliance,\r\n    });\r\n\r\n    const cloudDesign = {\r\n      provider,\r\n      regions,\r\n      budget,\r\n      compliance,\r\n      infrastructure: {\r\n        compute: [] as any[],\r\n        storage: [] as any[],\r\n        network: [] as any[],\r\n        database: [] as any[],\r\n        security: [] as any[],\r\n      },\r\n      services: [] as any[],\r\n      deployment: {\r\n        strategy: 'blue-green',\r\n        automation: 'terraform',\r\n        ci_cd: 'github-actions',\r\n      },\r\n      monitoring: {\r\n        logging: 'cloudwatch',\r\n        metrics: 'cloudwatch',\r\n        alerting: 'sns',\r\n        tracing: 'x-ray',\r\n      },\r\n      security: {\r\n        iam: 'principle-of-least-privilege',\r\n        network: 'vpc-with-private-subnets',\r\n        encryption: 'at-rest-and-in-transit',\r\n        secrets: 'parameter-store',\r\n      },\r\n      cost: {\r\n        estimated: 0,\r\n        optimization: [],\r\n        monitoring: true,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate cloud architecture design\r\n    await this.delay(4500);\r\n\r\n    cloudDesign.infrastructure.compute = [\r\n      { service: 'EKS', purpose: 'Container orchestration' },\r\n      { service: 'Lambda', purpose: 'Serverless functions' },\r\n      { service: 'EC2', purpose: 'Virtual machines' },\r\n    ];\r\n\r\n    cloudDesign.cost.estimated = 2500; // monthly USD\r\n\r\n    return cloudDesign;\r\n  }\r\n\r\n  private async designMicroservices(task: TaskDefinition): Promise<any> {\r\n    const domain = task.parameters?.domain;\r\n    const services = task.parameters?.services || [];\r\n    const communication = task.parameters?.communication || 'async';\r\n    const dataConsistency = task.parameters?.dataConsistency || 'eventual';\r\n\r\n    this.logger.info('Designing microservices', {\r\n      domain,\r\n      servicesCount: services.length,\r\n      communication,\r\n      dataConsistency,\r\n    });\r\n\r\n    const microservicesDesign = {\r\n      domain,\r\n      communication,\r\n      dataConsistency,\r\n      services: [] as ServiceComponent[],\r\n      patterns: {\r\n        communication: ['API Gateway', 'Service Mesh', 'Event Bus'],\r\n        data: ['Database per Service', 'Saga Pattern', 'CQRS'],\r\n        resilience: ['Circuit Breaker', 'Retry', 'Timeout'],\r\n        observability: ['Distributed Tracing', 'Centralized Logging'],\r\n      },\r\n      infrastructure: {\r\n        serviceDiscovery: 'consul',\r\n        loadBalancing: 'nginx',\r\n        messaging: 'kafka',\r\n        monitoring: 'prometheus',\r\n      },\r\n      deployment: {\r\n        containerization: 'docker',\r\n        orchestration: 'kubernetes',\r\n        ci_cd: 'jenkins',\r\n        configuration: 'helm',\r\n      },\r\n      challenges: [] as any[],\r\n      solutions: [] as any[],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate microservices design\r\n    await this.delay(4000);\r\n\r\n    microservicesDesign.services = [\r\n      {\r\n        name: 'User Service',\r\n        responsibility: 'User management',\r\n        database: 'PostgreSQL',\r\n        api: 'REST',\r\n        dependencies: [] as string[],\r\n      },\r\n      {\r\n        name: 'Order Service',\r\n        responsibility: 'Order processing',\r\n        database: 'MongoDB',\r\n        api: 'REST + Events',\r\n        dependencies: ['User Service', 'Payment Service'] as string[],\r\n      },\r\n    ];\r\n\r\n    return microservicesDesign;\r\n  }\r\n\r\n  private async designSecurity(task: TaskDefinition): Promise<any> {\r\n    const system = task.parameters?.system;\r\n    const threats = task.parameters?.threats || [];\r\n    const compliance = task.parameters?.compliance || [];\r\n    const sensitivity = task.parameters?.sensitivity || 'medium';\r\n\r\n    this.logger.info('Designing security architecture', {\r\n      threats: threats.length,\r\n      compliance,\r\n      sensitivity,\r\n    });\r\n\r\n    const securityDesign = {\r\n      system,\r\n      sensitivity,\r\n      compliance,\r\n      threatModel: {\r\n        assets: [] as any[],\r\n        threats: [] as any[],\r\n        vulnerabilities: [] as any[],\r\n        risks: [] as any[],\r\n      },\r\n      controls: {\r\n        preventive: [] as any[],\r\n        detective: [] as any[],\r\n        corrective: [] as any[],\r\n      },\r\n      architecture: {\r\n        authentication: 'OAuth2 + JWT',\r\n        authorization: 'RBAC + ABAC',\r\n        encryption: 'AES-256',\r\n        network: 'Zero Trust',\r\n      },\r\n      monitoring: {\r\n        siem: true,\r\n        ids: true,\r\n        logging: 'centralized',\r\n        alerting: 'real-time',\r\n      },\r\n      incidents: {\r\n        response: 'automated',\r\n        recovery: 'backup-restore',\r\n        communication: 'stakeholder-notification',\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate security design\r\n    await this.delay(3500);\r\n\r\n    securityDesign.controls.preventive = [\r\n      'Multi-factor Authentication',\r\n      'API Rate Limiting',\r\n      'Input Validation',\r\n      'Access Controls',\r\n      'Encryption at Rest',\r\n    ];\r\n\r\n    return securityDesign;\r\n  }\r\n\r\n  private async designScalability(task: TaskDefinition): Promise<any> {\r\n    const currentLoad = task.parameters?.currentLoad;\r\n    const targetLoad = task.parameters?.targetLoad;\r\n    const constraints = task.parameters?.constraints || [];\r\n    const budget = task.parameters?.budget;\r\n\r\n    this.logger.info('Designing scalability', {\r\n      currentLoad,\r\n      targetLoad,\r\n      constraints,\r\n    });\r\n\r\n    const scalabilityDesign = {\r\n      currentLoad,\r\n      targetLoad,\r\n      constraints,\r\n      budget,\r\n      strategies: {\r\n        horizontal: [] as any[],\r\n        vertical: [] as any[],\r\n        caching: [] as any[],\r\n        database: [] as any[],\r\n      },\r\n      implementation: {\r\n        autoScaling: true,\r\n        loadBalancing: 'application',\r\n        caching: 'multi-tier',\r\n        cdn: 'global',\r\n      },\r\n      metrics: {\r\n        latency: 'p99 < 100ms',\r\n        throughput: '10000 rps',\r\n        availability: '99.99%',\r\n        errorRate: '< 0.1%',\r\n      },\r\n      testing: {\r\n        loadTesting: true,\r\n        stressTesting: true,\r\n        chaosEngineering: true,\r\n      },\r\n      monitoring: {\r\n        realTime: true,\r\n        predictive: true,\r\n        alerting: 'proactive',\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate scalability design\r\n    await this.delay(3000);\r\n\r\n    scalabilityDesign.strategies.horizontal = [\r\n      'Kubernetes HPA',\r\n      'Database Sharding',\r\n      'Microservices Decomposition',\r\n    ];\r\n\r\n    return scalabilityDesign;\r\n  }\r\n\r\n  private async designDatabase(task: TaskDefinition): Promise<any> {\r\n    const requirements = task.parameters?.requirements;\r\n    const dataTypes = task.parameters?.dataTypes || ['relational'];\r\n    const scale = task.parameters?.scale || 'medium';\r\n    const consistency = task.parameters?.consistency || 'strong';\r\n\r\n    this.logger.info('Designing database architecture', {\r\n      dataTypes,\r\n      scale,\r\n      consistency,\r\n    });\r\n\r\n    const databaseDesign = {\r\n      requirements,\r\n      dataTypes,\r\n      scale,\r\n      consistency,\r\n      databases: [] as DatabaseComponent[],\r\n      patterns: {\r\n        data: ['Database per Service', 'Shared Database', 'Data Lake'],\r\n        consistency: ['ACID', 'BASE', 'Eventual Consistency'],\r\n        scaling: ['Read Replicas', 'Sharding', 'Partitioning'],\r\n      },\r\n      technologies: {\r\n        relational: ['PostgreSQL', 'MySQL'],\r\n        document: ['MongoDB', 'DynamoDB'],\r\n        cache: ['Redis', 'Memcached'],\r\n        search: ['Elasticsearch', 'Solr'],\r\n      },\r\n      performance: {\r\n        indexing: 'optimized',\r\n        caching: 'multi-layer',\r\n        partitioning: 'horizontal',\r\n        replication: 'master-slave',\r\n      },\r\n      backup: {\r\n        strategy: 'incremental',\r\n        frequency: 'hourly',\r\n        retention: '30-days',\r\n        testing: 'monthly',\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate database design\r\n    await this.delay(2500);\r\n\r\n    databaseDesign.databases = [\r\n      {\r\n        name: 'Primary DB',\r\n        type: 'PostgreSQL',\r\n        purpose: 'Transactional data',\r\n        size: '500GB',\r\n      },\r\n      {\r\n        name: 'Cache',\r\n        type: 'Redis',\r\n        purpose: 'Session and application cache',\r\n        size: '50GB',\r\n      },\r\n    ];\r\n\r\n    return databaseDesign;\r\n  }\r\n\r\n  private async performGeneralDesign(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Performing general design', {\r\n      description: task.description,\r\n    });\r\n\r\n    // Default to system design\r\n    return await this.designSystem(task);\r\n  }\r\n\r\n  private async delay(ms: number): Promise<void> {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  override getAgentStatus(): any {\r\n    return {\r\n      ...super.getAgentStatus(),\r\n      specialization: 'System Architecture & Design',\r\n      architectureStyles: ['Microservices', 'Monolithic', 'Serverless', 'Event-Driven'],\r\n      cloudProviders: ['AWS', 'Azure', 'GCP', 'Multi-Cloud'],\r\n      designPatterns: ['Gang of Four', 'Enterprise', 'Cloud Native', 'Microservices'],\r\n      currentDesigns: this.getCurrentTasks().length,\r\n      averageDesignTime: '30-60 minutes',\r\n      lastDesignCompleted: this.getLastTaskCompletedTime(),\r\n      specializations: ['Cloud Architecture', 'Security Design', 'Scalability Planning'],\r\n    };\r\n  }\r\n}\r\n\r\nexport const createArchitectAgent = (\r\n  id: string,\r\n  config: Partial<AgentConfig>,\r\n  environment: Partial<AgentEnvironment>,\r\n  logger: ILogger,\r\n  eventBus: IEventBus,\r\n  memory: DistributedMemorySystem,\r\n): ArchitectAgent => {\r\n  const defaultConfig = {\r\n    autonomyLevel: 0.8,\r\n    learningEnabled: true,\r\n    adaptationEnabled: true,\r\n    maxTasksPerHour: 12,\r\n    maxConcurrentTasks: 3,\r\n    timeoutThreshold: 300000,\r\n    reportingInterval: 60000,\r\n    heartbeatInterval: 30000,\r\n    permissions: [\r\n      'file-read',\r\n      'file-write',\r\n      'system-analysis',\r\n      'architecture-design',\r\n      'api-access',\r\n    ],\r\n    trustedAgents: [],\r\n    expertise: {\r\n      'system-architecture': 0.95,\r\n      'cloud-architecture': 0.9,\r\n      'microservices-design': 0.92,\r\n      'api-design': 0.88,\r\n      'database-architecture': 0.85,\r\n      'security-architecture': 0.87,\r\n    },\r\n    preferences: {\r\n      designMethodology: 'domain-driven',\r\n      architecturalStyle: 'microservices',\r\n      documentationLevel: 'comprehensive',\r\n      reviewThoroughness: 'detailed',\r\n    },\r\n  };\r\n  const defaultEnv = {\r\n    runtime: 'deno' as const,\r\n    version: '1.40.0',\r\n    workingDirectory: './agents/architect',\r\n    tempDirectory: './tmp/architect',\r\n    logDirectory: './logs/architect',\r\n    apiEndpoints: {},\r\n    credentials: {},\r\n    availableTools: [\r\n      'architecture-diagrams',\r\n      'system-modeler',\r\n      'design-patterns',\r\n      'cloud-designer',\r\n    ],\r\n    toolConfigs: {\r\n      diagramTool: { format: 'svg', style: 'professional' },\r\n      cloudDesigner: { provider: 'multi', compliance: true },\r\n    },\r\n  };\r\n\r\n  return new ArchitectAgent(\r\n    id,\r\n    { ...defaultConfig, ...config } as AgentConfig,\r\n    { ...defaultEnv, ...environment } as AgentEnvironment,\r\n    logger,\r\n    eventBus,\r\n    memory,\r\n  );\r\n};\r\n"],"names":["BaseAgent","ArchitectAgent","id","config","environment","logger","eventBus","memory","getDefaultCapabilities","codeGeneration","codeReview","testing","documentation","research","analysis","webSearch","apiIntegration","fileSystem","terminalAccess","languages","frameworks","domains","tools","maxConcurrentTasks","maxMemoryUsage","maxExecutionTime","reliability","speed","quality","getDefaultConfig","autonomyLevel","learningEnabled","adaptationEnabled","maxTasksPerHour","timeoutThreshold","reportingInterval","heartbeatInterval","permissions","trustedAgents","expertise","scalability","security","performance","preferences","architectureStyle","cloudProvider","securityFirst","scalabilityFocus","documentationDetail","executeTask","task","info","agentId","taskType","type","taskId","designSystem","reviewArchitecture","designAPI","designCloudArchitecture","designMicroservices","designSecurity","designScalability","designDatabase","performGeneralDesign","error","Error","message","String","requirements","input","scale","constraints","style","length","design","architecture","components","services","databases","queues","caches","patterns","technologies","backend","frontend","database","infrastructure","monitoring","diagrams","overview","apis","deployment","tradeoffs","risks","recommendations","timestamp","Date","store","status","startTime","tags","partition","delay","name","purpose","technology","parameters","focus","standards","review","scores","issues","compliance","passed","failed","warnings","identified","missing","antipatterns","improvements","riskAssessment","technical","operational","maintainability","category","severity","description","component","recommendation","domain","version","auth","apiDesign","endpoints","schemas","authentication","authorization","rateLimiting","cors","validation","openapi","interactive","examples","naming","versioning","errorHandling","pagination","caching","compression","cdn","logging","metrics","tracing","method","path","rateLimit","provider","regions","budget","cloudDesign","compute","storage","network","strategy","automation","ci_cd","alerting","iam","encryption","secrets","cost","estimated","optimization","service","communication","dataConsistency","servicesCount","microservicesDesign","data","resilience","observability","serviceDiscovery","loadBalancing","messaging","containerization","orchestration","configuration","challenges","solutions","responsibility","api","dependencies","system","threats","sensitivity","securityDesign","threatModel","assets","vulnerabilities","controls","preventive","detective","corrective","siem","ids","incidents","response","recovery","currentLoad","targetLoad","scalabilityDesign","strategies","horizontal","vertical","implementation","autoScaling","latency","throughput","availability","errorRate","loadTesting","stressTesting","chaosEngineering","realTime","predictive","dataTypes","consistency","databaseDesign","scaling","relational","document","cache","search","indexing","partitioning","replication","backup","frequency","retention","size","ms","Promise","resolve","setTimeout","getAgentStatus","specialization","architectureStyles","cloudProviders","designPatterns","currentDesigns","getCurrentTasks","averageDesignTime","lastDesignCompleted","getLastTaskCompletedTime","specializations","createArchitectAgent","defaultConfig","designMethodology","architecturalStyle","documentationLevel","reviewThoroughness","defaultEnv","runtime","workingDirectory","tempDirectory","logDirectory","apiEndpoints","credentials","availableTools","toolConfigs","diagramTool","format","cloudDesigner"],"mappings":"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"}