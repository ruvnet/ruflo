{"version":3,"sources":["../../../../src/cli/simple-commands/analysis.js"],"sourcesContent":["import {\r\n  printSuccess,\r\n  printError,\r\n  printWarning,\r\n  callRuvSwarmMCP,\r\n  checkRuvSwarmAvailable,\r\n} from '../utils.js';\r\nimport { promises as fs } from 'fs';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\nimport { dirname } from 'path';\r\nimport {\r\n  initializeMetrics,\r\n  getPerformanceReport,\r\n  getBottleneckAnalysis,\r\n  exportMetrics\r\n} from './performance-metrics.js';\r\nimport {\r\n  getRealTokenUsage,\r\n  calculateCost,\r\n  generateOptimizationSuggestions,\r\n  generateTokenUsageReport,\r\n  getAgentIcon,\r\n  trackTokens\r\n} from './token-tracker.js';\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = dirname(__filename);\r\n\r\nasync function setupTelemetry() {\r\n  console.log(`\\nüîß TELEMETRY SETUP FOR TOKEN TRACKING\\n`);\r\n  console.log(`${'‚ïê'.repeat(60)}\\n`);\r\n  \r\n  // Check current status\r\n  const currentValue = process.env.CLAUDE_CODE_ENABLE_TELEMETRY;\r\n  const isEnabled = currentValue === '1';\r\n  \r\n  console.log(`üìä Current Status: ${isEnabled ? '‚úÖ ENABLED' : '‚ùå DISABLED'}`);\r\n  console.log(`   Environment Variable: CLAUDE_CODE_ENABLE_TELEMETRY=${currentValue || 'not set'}\\n`);\r\n  \r\n  if (!isEnabled) {\r\n    // Set the environment variable for current session\r\n    process.env.CLAUDE_CODE_ENABLE_TELEMETRY = '1';\r\n    \r\n    console.log(`‚úÖ Telemetry ENABLED for this session!\\n`);\r\n    \r\n    // Create or update .env file\r\n    const envPath = path.join(process.cwd(), '.env');\r\n    let envContent = '';\r\n    \r\n    try {\r\n      envContent = await fs.readFile(envPath, 'utf-8');\r\n    } catch (err) {\r\n      // .env doesn't exist yet\r\n    }\r\n    \r\n    // Check if telemetry is already in .env\r\n    if (!envContent.includes('CLAUDE_CODE_ENABLE_TELEMETRY')) {\r\n      envContent += `\\n# Enable token tracking for Claude API calls\\nCLAUDE_CODE_ENABLE_TELEMETRY=1\\n`;\r\n      \r\n      try {\r\n        await fs.writeFile(envPath, envContent);\r\n        console.log(`üìù Updated .env file with telemetry setting`);\r\n      } catch (err) {\r\n        console.log(`‚ö†Ô∏è  Could not update .env file: ${err.message}`);\r\n      }\r\n    }\r\n    \r\n    // Also add to shell profile for persistence\r\n    console.log(`\\nüìå To make this permanent, add to your shell profile:`);\r\n    console.log(`   ${'-'.repeat(50)}`);\r\n    console.log(`   echo 'export CLAUDE_CODE_ENABLE_TELEMETRY=1' >> ~/.bashrc`);\r\n    console.log(`   ${'-'.repeat(50)}\\n`);\r\n  }\r\n  \r\n  // Initialize token tracking directory\r\n  const metricsDir = path.join(process.cwd(), '.claude-flow', 'metrics');\r\n  try {\r\n    await fs.mkdir(metricsDir, { recursive: true });\r\n    console.log(`üìÅ Token tracking directory: ${metricsDir}`);\r\n  } catch (err) {\r\n    // Directory already exists\r\n  }\r\n  \r\n  // Check for existing token data\r\n  const tokenFile = path.join(metricsDir, 'token-usage.json');\r\n  try {\r\n    const data = await fs.readFile(tokenFile, 'utf-8');\r\n    const tokenData = JSON.parse(data);\r\n    console.log(`\\nüìä Existing token data found:`);\r\n    console.log(`   ‚Ä¢ Total tokens tracked: ${tokenData.totals?.total || 0}`);\r\n    console.log(`   ‚Ä¢ Sessions recorded: ${Object.keys(tokenData.sessions || {}).length}`);\r\n  } catch (err) {\r\n    console.log(`\\nüìä No existing token data (will be created on first use)`);\r\n  }\r\n  \r\n  console.log(`\\nüöÄ NEXT STEPS:`);\r\n  console.log(`   1. Run Claude commands with --claude flag`);\r\n  console.log(`   2. Example: ./claude-flow swarm \"analyze code\" --claude`);\r\n  console.log(`   3. Check usage: ./claude-flow analysis token-usage --breakdown`);\r\n  \r\n  console.log(`\\n${'‚ïê'.repeat(60)}`);\r\n  printSuccess(`Telemetry setup complete!`);\r\n}\r\n\r\nexport async function analysisAction(subArgs, flags) {\r\n  const subcommand = subArgs[0];\r\n  const options = flags;\r\n\r\n  if (options.help || options.h || !subcommand) {\r\n    showAnalysisHelp();\r\n    return;\r\n  }\r\n\r\n  // Handle telemetry setup\r\n  if (subcommand === 'setup-telemetry' || options['enable-telemetry']) {\r\n    await setupTelemetry();\r\n    if (subcommand === 'setup-telemetry') return;\r\n  }\r\n\r\n  try {\r\n    switch (subcommand) {\r\n      case 'bottleneck-detect':\r\n        await bottleneckDetectCommand(subArgs, flags);\r\n        break;\r\n      case 'performance-report':\r\n        await performanceReportCommand(subArgs, flags);\r\n        break;\r\n      case 'token-usage':\r\n        await tokenUsageCommand(subArgs, flags);\r\n        break;\r\n      case 'claude-monitor':\r\n        await claudeMonitorCommand(subArgs, flags);\r\n        break;\r\n      case 'claude-cost':\r\n        await claudeCostCommand(subArgs, flags);\r\n        break;\r\n      default:\r\n        printError(`Unknown analysis command: ${subcommand}`);\r\n        showAnalysisHelp();\r\n    }\r\n  } catch (err) {\r\n    printError(`Analysis command failed: ${err.message}`);\r\n  }\r\n}\r\n\r\nasync function bottleneckDetectCommand(subArgs, flags) {\r\n  const options = flags;\r\n  const scope = options.scope || 'system';\r\n  const target = options.target || 'all';\r\n\r\n  console.log(`üîç Detecting performance bottlenecks...`);\r\n  console.log(`üìä Scope: ${scope}`);\r\n  console.log(`üéØ Target: ${target}`);\r\n\r\n  try {\r\n    // Initialize metrics system without starting monitoring\r\n    await initializeMetrics(false);\r\n    \r\n    // Get real bottleneck analysis\r\n    const analysis = await getBottleneckAnalysis(scope, target);\r\n    \r\n    printSuccess(`‚úÖ Bottleneck analysis completed`);\r\n\r\n    console.log(`\\nüìä BOTTLENECK ANALYSIS RESULTS:`);\r\n    \r\n    analysis.bottlenecks.forEach((bottleneck) => {\r\n      const icon =\r\n        bottleneck.severity === 'critical'\r\n          ? 'üî¥'\r\n          : bottleneck.severity === 'warning'\r\n            ? 'üü°'\r\n            : 'üü¢';\r\n      console.log(\r\n        `  ${icon} ${bottleneck.severity.toUpperCase()}: ${bottleneck.component} (${bottleneck.metric})`,\r\n      );\r\n      \r\n      // Show details if available\r\n      if (bottleneck.details) {\r\n        bottleneck.details.forEach(detail => {\r\n          console.log(`      - ${detail.type || detail.id}: ${detail.duration}s`);\r\n        });\r\n      }\r\n    });\r\n\r\n    if (analysis.recommendations.length > 0) {\r\n      console.log(`\\nüí° RECOMMENDATIONS:`);\r\n      analysis.recommendations.forEach((rec) => {\r\n        console.log(`  ‚Ä¢ ${rec}`);\r\n      });\r\n    }\r\n\r\n    console.log(`\\nüìä PERFORMANCE METRICS:`);\r\n    console.log(`  ‚Ä¢ Analysis duration: ${analysis.analysisDuration.toFixed(2)}ms`);\r\n    console.log(`  ‚Ä¢ Confidence score: ${(analysis.confidenceScore * 100).toFixed(0)}%`);\r\n    console.log(`  ‚Ä¢ Issues detected: ${analysis.issuesDetected}`);\r\n\r\n    // Save detailed report\r\n    const reportPath = path.join(process.cwd(), 'analysis-reports', `bottleneck-${Date.now()}.json`);\r\n    await fs.mkdir(path.dirname(reportPath), { recursive: true });\r\n    await fs.writeFile(reportPath, JSON.stringify(analysis, null, 2));\r\n    \r\n    console.log(`\\nüìÑ Detailed report saved to: ${reportPath}`);\r\n    \r\n  } catch (err) {\r\n    printError(`Bottleneck analysis failed: ${err.message}`);\r\n    console.log('\\nFalling back to simulated analysis...');\r\n    \r\n    // Fallback to simulated data\r\n    console.log(`\\nüìä BOTTLENECK ANALYSIS RESULTS (SIMULATED):`);\r\n    console.log(`  üî¥ CRITICAL: Memory usage in agent spawn process (85% utilization)`);\r\n    console.log(`  üü° WARNING: Task queue processing (12s avg)`);\r\n    console.log(`  üü¢ GOOD: Neural training pipeline (optimal)`);\r\n    console.log(`  üü¢ GOOD: Swarm coordination latency (within limits)`);\r\n  }\r\n}\r\n\r\nasync function performanceReportCommand(subArgs, flags) {\r\n  const options = flags;\r\n  const timeframe = options.timeframe || '24h';\r\n  const format = options.format || 'summary';\r\n\r\n  console.log(`üìà Generating performance report...`);\r\n  console.log(`‚è∞ Timeframe: ${timeframe}`);\r\n  console.log(`üìã Format: ${format}`);\r\n\r\n  try {\r\n    // Initialize metrics system without starting monitoring\r\n    await initializeMetrics(false);\r\n    \r\n    // Get real performance data\r\n    const report = await getPerformanceReport(timeframe);\r\n    \r\n    printSuccess(`‚úÖ Performance report generated`);\r\n\r\n    console.log(`\\nüìä PERFORMANCE SUMMARY (${timeframe}):`);\r\n    console.log(`  üöÄ Total tasks executed: ${report.summary.totalTasks}`);\r\n    console.log(`  ‚úÖ Success rate: ${report.summary.successRate.toFixed(1)}%`);\r\n    console.log(`  ‚è±Ô∏è  Average execution time: ${report.summary.avgDuration.toFixed(1)}s`);\r\n    console.log(`  ü§ñ Agents spawned: ${report.summary.agentsSpawned}`);\r\n    console.log(`  üíæ Memory efficiency: ${report.summary.memoryEfficiency.toFixed(0)}%`);\r\n    console.log(`  üß† Neural learning events: ${report.summary.neuralEvents}`);\r\n\r\n    // Show trends if available\r\n    if (report.trends) {\r\n      console.log(`\\nüìà TRENDS:`);\r\n      if (report.trends.successRateChange !== 0) {\r\n        const trend = report.trends.successRateChange > 0 ? 'improved' : 'decreased';\r\n        console.log(`  ‚Ä¢ Task success rate ${trend} ${Math.abs(report.trends.successRateChange).toFixed(1)}% vs previous period`);\r\n      }\r\n      if (report.trends.durationChange !== 0) {\r\n        const trend = report.trends.durationChange < 0 ? 'reduced' : 'increased';\r\n        console.log(`  ‚Ä¢ Average execution time ${trend} by ${Math.abs(report.trends.durationChange / 1000).toFixed(1)}s`);\r\n      }\r\n      if (report.trends.taskVolumeChange !== 0) {\r\n        const trend = report.trends.taskVolumeChange > 0 ? 'increased' : 'decreased';\r\n        const percent = Math.abs((report.trends.taskVolumeChange / report.summary.totalTasks) * 100).toFixed(0);\r\n        console.log(`  ‚Ä¢ Task volume ${trend} ${percent}%`);\r\n      }\r\n    }\r\n\r\n    if (format === 'detailed' && report.agentMetrics) {\r\n      console.log(`\\nüìä DETAILED METRICS:`);\r\n      console.log(`  Agent Performance:`);\r\n      Object.entries(report.agentMetrics).forEach(([type, metrics]) => {\r\n        console.log(`    - ${type} agents: ${metrics.successRate.toFixed(0)}% success, ${(metrics.avgDuration / 1000).toFixed(1)}s avg`);\r\n      });\r\n    }\r\n\r\n    // Export full report\r\n    const reportPath = await exportMetrics(format === 'json' ? 'json' : 'html');\r\n    console.log(`\\nüìÑ Full report: ${reportPath}`);\r\n    \r\n  } catch (err) {\r\n    printError(`Failed to generate performance report: ${err.message}`);\r\n    printWarning('Showing simulated data as fallback...');\r\n    \r\n    // Fallback to simulated data\r\n    console.log(`\\nüìä PERFORMANCE SUMMARY (${timeframe}) - SIMULATED:`);\r\n    console.log(`  üöÄ Total tasks executed: 127`);\r\n    console.log(`  ‚úÖ Success rate: 94.5%`);\r\n    console.log(`  ‚è±Ô∏è  Average execution time: 8.3s`);\r\n    console.log(`  ü§ñ Agents spawned: 23`);\r\n    console.log(`  üíæ Memory efficiency: 78%`);\r\n    console.log(`  üß† Neural learning events: 45`);\r\n  }\r\n}\r\n\r\nasync function tokenUsageCommand(subArgs, flags) {\r\n  const options = flags;\r\n  const agent = options.agent || 'all';\r\n  const breakdown = options.breakdown || false;\r\n  const costAnalysis = options['cost-analysis'] || false;\r\n\r\n  console.log(`üî¢ Analyzing token usage...`);\r\n  console.log(`ü§ñ Agent filter: ${agent}`);\r\n  console.log(`üìä Include breakdown: ${breakdown ? 'Yes' : 'No'}`);\r\n  console.log(`üí∞ Include cost analysis: ${costAnalysis ? 'Yes' : 'No'}`);\r\n\r\n  try {\r\n    // Get real token usage from Claude Code metrics\r\n    const tokenData = await getRealTokenUsage(agent);\r\n    \r\n    printSuccess(`‚úÖ Token usage analysis completed`);\r\n\r\n    // Check if we have any data\r\n    if (tokenData.total === 0) {\r\n      // Show instructions when no data available\r\n      await showSimulatedTokenUsage(breakdown, costAnalysis);\r\n      \r\n      // Still generate empty report for consistency\r\n      const reportPath = await generateTokenUsageReport(tokenData, agent);\r\n      console.log(`\\nüìÑ Detailed usage log: ${reportPath}`);\r\n    } else {\r\n      // Display real token usage\r\n      console.log(`\\nüî¢ TOKEN USAGE SUMMARY:`);\r\n      console.log(`  üìù Total tokens consumed: ${tokenData.total.toLocaleString()}`);\r\n      console.log(`  üì• Input tokens: ${tokenData.input.toLocaleString()} (${((tokenData.input / tokenData.total) * 100).toFixed(1)}%)`);\r\n      console.log(`  üì§ Output tokens: ${tokenData.output.toLocaleString()} (${((tokenData.output / tokenData.total) * 100).toFixed(1)}%)`);\r\n      \r\n      if (costAnalysis) {\r\n        const cost = calculateCost(tokenData);\r\n        console.log(`  üí∞ Estimated cost: $${cost.total.toFixed(2)}`);\r\n        console.log(`     Input cost: $${cost.input.toFixed(2)}`);\r\n        console.log(`     Output cost: $${cost.output.toFixed(2)}`);\r\n      }\r\n\r\n      if (breakdown && tokenData.byAgent) {\r\n        console.log(`\\nüìä BREAKDOWN BY AGENT TYPE:`);\r\n        Object.entries(tokenData.byAgent).forEach(([agentType, usage]) => {\r\n          const percentage = ((usage / tokenData.total) * 100).toFixed(1);\r\n          const icon = getAgentIcon(agentType);\r\n          console.log(`  ${icon} ${agentType}: ${usage.toLocaleString()} tokens (${percentage}%)`);\r\n        });\r\n\r\n        console.log(`\\nüí° OPTIMIZATION OPPORTUNITIES:`);\r\n        const opportunities = generateOptimizationSuggestions(tokenData);\r\n        opportunities.forEach(suggestion => {\r\n          console.log(`  ‚Ä¢ ${suggestion}`);\r\n        });\r\n      }\r\n\r\n      // Generate real CSV report\r\n      const reportPath = await generateTokenUsageReport(tokenData, agent);\r\n      console.log(`\\nüìÑ Detailed usage log: ${reportPath}`);\r\n    }\r\n    \r\n  } catch (err) {\r\n    printError(`Failed to get real token usage: ${err.message}`);\r\n    printWarning('Falling back to help instructions...');\r\n    \r\n    // Fallback to instructions\r\n    await showSimulatedTokenUsage(breakdown, costAnalysis);\r\n  }\r\n}\r\n\r\nfunction showAnalysisHelp() {\r\n  console.log(`\r\nüìä Analysis Commands - Performance & Usage Analytics\r\n\r\nUSAGE:\r\n  claude-flow analysis <command> [options]\r\n\r\nCOMMANDS:\r\n  setup-telemetry      Configure token tracking for Claude API calls\r\n  bottleneck-detect    Detect performance bottlenecks in the system\r\n  performance-report   Generate comprehensive performance reports\r\n  token-usage          Analyze token consumption and costs\r\n  claude-monitor       Monitor Claude session for real-time token usage\r\n  claude-cost          Get current Claude session cost and usage\r\n\r\nGLOBAL OPTIONS:\r\n  --enable-telemetry   Enable token tracking for this session\r\n  --help, -h           Show this help message\r\n\r\nTELEMETRY SETUP:\r\n  claude-flow analysis setup-telemetry\r\n  \r\n  This command will:\r\n  ‚Ä¢ Set CLAUDE_CODE_ENABLE_TELEMETRY=1 in your environment\r\n  ‚Ä¢ Create .env file with telemetry settings\r\n  ‚Ä¢ Initialize token tracking directory\r\n  ‚Ä¢ Show current telemetry status\r\n\r\nBOTTLENECK DETECT OPTIONS:\r\n  --scope <scope>      Analysis scope (default: system)\r\n                       Options: system, swarm, agent, task, memory\r\n  --target <target>    Specific target to analyze (default: all)\r\n                       Examples: agent-id, swarm-id, task-type\r\n\r\nPERFORMANCE REPORT OPTIONS:\r\n  --timeframe <time>   Report timeframe (default: 24h)\r\n                       Options: 1h, 6h, 24h, 7d, 30d\r\n  --format <format>    Report format (default: summary)\r\n                       Options: summary, detailed, json, csv\r\n\r\nTOKEN USAGE OPTIONS:\r\n  --agent <agent>      Filter by agent type or ID (default: all)\r\n  --breakdown          Include detailed breakdown by agent type\r\n  --cost-analysis      Include cost projections and optimization\r\n  --enable-telemetry   Enable token tracking for this session\r\n\r\nCLAUDE MONITOR OPTIONS:\r\n  --interval <ms>      Update interval in milliseconds (default: 5000)\r\n  \r\n  Usage: claude-flow analysis claude-monitor [session-id] [--interval 3000]\r\n  \r\n  Monitors a Claude session for real-time token usage updates.\r\n  Session ID defaults to 'current' if not specified.\r\n\r\nCLAUDE COST OPTIONS:\r\n  Usage: claude-flow analysis claude-cost\r\n  \r\n  Retrieves the current Claude session's token usage and cost estimate.\r\n  Works best when run during or immediately after a Claude session.\r\n\r\nEXAMPLES:\r\n  # First-time setup for token tracking\r\n  claude-flow analysis setup-telemetry\r\n\r\n  # Token usage with telemetry enabled\r\n  claude-flow analysis token-usage --enable-telemetry --breakdown\r\n\r\n  # Detect system-wide bottlenecks\r\n  claude-flow analysis bottleneck-detect --scope system\r\n\r\n  # Weekly performance report\r\n  claude-flow analysis performance-report --timeframe 7d --format detailed\r\n\r\n  # Token usage with full analysis\r\n  claude-flow analysis token-usage --breakdown --cost-analysis\r\n\r\n  # Monitor Claude session in real-time\r\n  claude-flow analysis claude-monitor\r\n\r\n  # Get current Claude session cost\r\n  claude-flow analysis claude-cost\r\n\r\n  # Run Claude with automatic token tracking\r\n  CLAUDE_CODE_ENABLE_TELEMETRY=1 claude-flow swarm \"task\" --claude\r\n\r\nüéØ Analysis helps with:\r\n  ‚Ä¢ Token usage tracking & cost management\r\n  ‚Ä¢ Performance optimization\r\n  ‚Ä¢ Resource allocation\r\n  ‚Ä¢ Bottleneck identification\r\n  ‚Ä¢ Trend analysis\r\n\r\nüí° TIP: Run 'analysis setup-telemetry' first to enable token tracking!\r\n`);\r\n}\r\n\r\n// Helper functions for real token tracking are now imported from token-tracker.js\r\n\r\nasync function claudeMonitorCommand(subArgs, flags) {\r\n  const sessionId = subArgs[1] || 'current';\r\n  const interval = flags.interval || 5000;\r\n  \r\n  console.log(`üìä Starting Claude session monitor...`);\r\n  console.log(`   Session ID: ${sessionId}`);\r\n  console.log(`   Update interval: ${interval / 1000}s`);\r\n  console.log(`   Press Ctrl+C to stop monitoring\\n`);\r\n  \r\n  try {\r\n    // Import the telemetry module\r\n    const { monitorClaudeSession } = await import('./claude-telemetry.js');\r\n    \r\n    // Start monitoring\r\n    const stopMonitor = await monitorClaudeSession(sessionId, interval);\r\n    \r\n    // Handle graceful shutdown\r\n    process.on('SIGINT', () => {\r\n      stopMonitor();\r\n      process.exit(0);\r\n    });\r\n    \r\n    // Keep process running\r\n    await new Promise(() => {});\r\n  } catch (error) {\r\n    printError(`Failed to start Claude monitor: ${error.message}`);\r\n    console.log('\\nüí° TIP: Make sure Claude is installed and accessible');\r\n  }\r\n}\r\n\r\nasync function claudeCostCommand(subArgs, flags) {\r\n  console.log(`üí∞ Retrieving Claude session cost information...`);\r\n  \r\n  try {\r\n    // Import the telemetry module\r\n    const { extractCostCommand } = await import('./claude-telemetry.js');\r\n    \r\n    // Get cost data\r\n    const costData = await extractCostCommand();\r\n    \r\n    console.log('\\nüìä Current Session Usage:');\r\n    console.log(`   Input Tokens:  ${costData.tokens.input || 0}`);\r\n    console.log(`   Output Tokens: ${costData.tokens.output || 0}`);\r\n    console.log(`   Total Tokens:  ${costData.tokens.total || 0}`);\r\n    \r\n    if (costData.costs.length > 0) {\r\n      console.log(`   Estimated Cost: $${costData.costs[0]}`);\r\n    }\r\n    \r\n    // Also show pricing info\r\n    console.log('\\nüí∞ Claude 3 Pricing:');\r\n    console.log('   ‚Ä¢ Opus:   $15/1M input, $75/1M output');\r\n    console.log('   ‚Ä¢ Sonnet: $3/1M input, $15/1M output');\r\n    console.log('   ‚Ä¢ Haiku:  $0.25/1M input, $1.25/1M output');\r\n    \r\n  } catch (error) {\r\n    printError(`Failed to retrieve cost data: ${error.message}`);\r\n    console.log('\\nüí° TIP: Run this while Claude is active or immediately after');\r\n  }\r\n}\r\n\r\nasync function showSimulatedTokenUsage(breakdown, costAnalysis) {\r\n  // Show honest message about no data instead of fake numbers\r\n  console.log(`\\nüî¢ TOKEN USAGE ANALYSIS:`);\r\n  console.log(`  ‚ÑπÔ∏è No token usage data available yet.`);\r\n  \r\n  console.log(`\\nüìã QUICK SETUP - Choose one option:`);\r\n  console.log(`\\n  Option 1: Enable Telemetry (Recommended)`);\r\n  console.log(`  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê`);\r\n  console.log(`  ‚îÇ ./claude-flow analysis setup-telemetry                ‚îÇ`);\r\n  console.log(`  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò`);\r\n  \r\n  console.log(`\\n  Option 2: Manual Environment Variable`);\r\n  console.log(`  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê`);\r\n  console.log(`  ‚îÇ export CLAUDE_CODE_ENABLE_TELEMETRY=1                 ‚îÇ`);\r\n  console.log(`  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò`);\r\n  \r\n  console.log(`\\n  Option 3: Use --enable-telemetry Flag`);\r\n  console.log(`  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê`);\r\n  console.log(`  ‚îÇ ./claude-flow analysis token-usage --enable-telemetry ‚îÇ`);\r\n  console.log(`  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò`);\r\n  \r\n  console.log(`\\n‚úÖ AFTER SETUP:`);\r\n  console.log(`  1. Run Claude commands: ./claude-flow swarm \"task\" --claude`);\r\n  console.log(`  2. Token usage will be automatically tracked`);\r\n  console.log(`  3. Return here to see real metrics`);\r\n  \r\n  if (costAnalysis) {\r\n    console.log(`\\nüí∞ COST TRACKING:`);\r\n    console.log(`  ‚Ä¢ Claude 3 Opus: $15/1M input, $75/1M output tokens`);\r\n    console.log(`  ‚Ä¢ Claude 3 Sonnet: $3/1M input, $15/1M output tokens`);\r\n    console.log(`  ‚Ä¢ Claude 3 Haiku: $0.25/1M input, $1.25/1M output tokens`);\r\n  }\r\n\r\n  if (breakdown) {\r\n    console.log(`\\nüìä AGENT BREAKDOWN:`);\r\n    console.log(`  ‚Ä¢ Each agent type's usage tracked separately`);\r\n    console.log(`  ‚Ä¢ Identifies high-consumption agents`);\r\n    console.log(`  ‚Ä¢ Provides optimization recommendations`);\r\n  }\r\n\r\n  console.log(`\\n‚ùì TROUBLESHOOTING:`);\r\n  console.log(`  ‚Ä¢ Check telemetry status: echo $CLAUDE_CODE_ENABLE_TELEMETRY`);\r\n  console.log(`  ‚Ä¢ View raw data: cat .claude-flow/metrics/token-usage.json`);\r\n  console.log(`  ‚Ä¢ Reset tracking: rm -rf .claude-flow/metrics/token-usage.json`);\r\n}\r\n"],"names":["printSuccess","printError","printWarning","promises","fs","path","fileURLToPath","dirname","initializeMetrics","getPerformanceReport","getBottleneckAnalysis","exportMetrics","getRealTokenUsage","calculateCost","generateOptimizationSuggestions","generateTokenUsageReport","getAgentIcon","__filename","url","__dirname","setupTelemetry","console","log","repeat","currentValue","process","env","CLAUDE_CODE_ENABLE_TELEMETRY","isEnabled","envPath","join","cwd","envContent","readFile","err","includes","writeFile","message","metricsDir","mkdir","recursive","tokenFile","data","tokenData","JSON","parse","totals","total","Object","keys","sessions","length","analysisAction","subArgs","flags","subcommand","options","help","h","showAnalysisHelp","bottleneckDetectCommand","performanceReportCommand","tokenUsageCommand","claudeMonitorCommand","claudeCostCommand","scope","target","analysis","bottlenecks","forEach","bottleneck","icon","severity","toUpperCase","component","metric","details","detail","type","id","duration","recommendations","rec","analysisDuration","toFixed","confidenceScore","issuesDetected","reportPath","Date","now","stringify","timeframe","format","report","summary","totalTasks","successRate","avgDuration","agentsSpawned","memoryEfficiency","neuralEvents","trends","successRateChange","trend","Math","abs","durationChange","taskVolumeChange","percent","agentMetrics","entries","metrics","agent","breakdown","costAnalysis","showSimulatedTokenUsage","toLocaleString","input","output","cost","byAgent","agentType","usage","percentage","opportunities","suggestion","sessionId","interval","monitorClaudeSession","stopMonitor","on","exit","Promise","error","extractCostCommand","costData","tokens","costs"],"mappings":"AAAA,SACEA,YAAY,EACZC,UAAU,EACVC,YAAY,QAGP,cAAc;AACrB,SAASC,YAAYC,EAAE,QAAQ,KAAK;AACpC,OAAOC,UAAU,OAAO;AACxB,SAASC,aAAa,QAAQ,MAAM;AACpC,SAASC,OAAO,QAAQ,OAAO;AAC/B,SACEC,iBAAiB,EACjBC,oBAAoB,EACpBC,qBAAqB,EACrBC,aAAa,QACR,2BAA2B;AAClC,SACEC,iBAAiB,EACjBC,aAAa,EACbC,+BAA+B,EAC/BC,wBAAwB,EACxBC,YAAY,QAEP,qBAAqB;AAE5B,MAAMC,aAAaX,cAAc,YAAYY,GAAG;AAChD,MAAMC,YAAYZ,QAAQU;AAE1B,eAAeG;IACbC,QAAQC,GAAG,CAAC,CAAC,yCAAyC,CAAC;IACvDD,QAAQC,GAAG,CAAC,GAAG,IAAIC,MAAM,CAAC,IAAI,EAAE,CAAC;IAGjC,MAAMC,eAAeC,QAAQC,GAAG,CAACC,4BAA4B;IAC7D,MAAMC,YAAYJ,iBAAiB;IAEnCH,QAAQC,GAAG,CAAC,CAAC,mBAAmB,EAAEM,YAAY,cAAc,cAAc;IAC1EP,QAAQC,GAAG,CAAC,CAAC,sDAAsD,EAAEE,gBAAgB,UAAU,EAAE,CAAC;IAElG,IAAI,CAACI,WAAW;QAEdH,QAAQC,GAAG,CAACC,4BAA4B,GAAG;QAE3CN,QAAQC,GAAG,CAAC,CAAC,uCAAuC,CAAC;QAGrD,MAAMO,UAAUxB,KAAKyB,IAAI,CAACL,QAAQM,GAAG,IAAI;QACzC,IAAIC,aAAa;QAEjB,IAAI;YACFA,aAAa,MAAM5B,GAAG6B,QAAQ,CAACJ,SAAS;QAC1C,EAAE,OAAOK,KAAK,CAEd;QAGA,IAAI,CAACF,WAAWG,QAAQ,CAAC,iCAAiC;YACxDH,cAAc,CAAC,gFAAgF,CAAC;YAEhG,IAAI;gBACF,MAAM5B,GAAGgC,SAAS,CAACP,SAASG;gBAC5BX,QAAQC,GAAG,CAAC,CAAC,2CAA2C,CAAC;YAC3D,EAAE,OAAOY,KAAK;gBACZb,QAAQC,GAAG,CAAC,CAAC,gCAAgC,EAAEY,IAAIG,OAAO,EAAE;YAC9D;QACF;QAGAhB,QAAQC,GAAG,CAAC,CAAC,uDAAuD,CAAC;QACrED,QAAQC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAIC,MAAM,CAAC,KAAK;QAClCF,QAAQC,GAAG,CAAC,CAAC,4DAA4D,CAAC;QAC1ED,QAAQC,GAAG,CAAC,CAAC,GAAG,EAAE,IAAIC,MAAM,CAAC,IAAI,EAAE,CAAC;IACtC;IAGA,MAAMe,aAAajC,KAAKyB,IAAI,CAACL,QAAQM,GAAG,IAAI,gBAAgB;IAC5D,IAAI;QACF,MAAM3B,GAAGmC,KAAK,CAACD,YAAY;YAAEE,WAAW;QAAK;QAC7CnB,QAAQC,GAAG,CAAC,CAAC,6BAA6B,EAAEgB,YAAY;IAC1D,EAAE,OAAOJ,KAAK,CAEd;IAGA,MAAMO,YAAYpC,KAAKyB,IAAI,CAACQ,YAAY;IACxC,IAAI;QACF,MAAMI,OAAO,MAAMtC,GAAG6B,QAAQ,CAACQ,WAAW;QAC1C,MAAME,YAAYC,KAAKC,KAAK,CAACH;QAC7BrB,QAAQC,GAAG,CAAC,CAAC,+BAA+B,CAAC;QAC7CD,QAAQC,GAAG,CAAC,CAAC,2BAA2B,EAAEqB,UAAUG,MAAM,EAAEC,SAAS,GAAG;QACxE1B,QAAQC,GAAG,CAAC,CAAC,wBAAwB,EAAE0B,OAAOC,IAAI,CAACN,UAAUO,QAAQ,IAAI,CAAC,GAAGC,MAAM,EAAE;IACvF,EAAE,OAAOjB,KAAK;QACZb,QAAQC,GAAG,CAAC,CAAC,0DAA0D,CAAC;IAC1E;IAEAD,QAAQC,GAAG,CAAC,CAAC,gBAAgB,CAAC;IAC9BD,QAAQC,GAAG,CAAC,CAAC,4CAA4C,CAAC;IAC1DD,QAAQC,GAAG,CAAC,CAAC,0DAA0D,CAAC;IACxED,QAAQC,GAAG,CAAC,CAAC,iEAAiE,CAAC;IAE/ED,QAAQC,GAAG,CAAC,CAAC,EAAE,EAAE,IAAIC,MAAM,CAAC,KAAK;IACjCvB,aAAa,CAAC,yBAAyB,CAAC;AAC1C;AAEA,OAAO,eAAeoD,eAAeC,OAAO,EAAEC,KAAK;IACjD,MAAMC,aAAaF,OAAO,CAAC,EAAE;IAC7B,MAAMG,UAAUF;IAEhB,IAAIE,QAAQC,IAAI,IAAID,QAAQE,CAAC,IAAI,CAACH,YAAY;QAC5CI;QACA;IACF;IAGA,IAAIJ,eAAe,qBAAqBC,OAAO,CAAC,mBAAmB,EAAE;QACnE,MAAMpC;QACN,IAAImC,eAAe,mBAAmB;IACxC;IAEA,IAAI;QACF,OAAQA;YACN,KAAK;gBACH,MAAMK,wBAAwBP,SAASC;gBACvC;YACF,KAAK;gBACH,MAAMO,yBAAyBR,SAASC;gBACxC;YACF,KAAK;gBACH,MAAMQ,kBAAkBT,SAASC;gBACjC;YACF,KAAK;gBACH,MAAMS,qBAAqBV,SAASC;gBACpC;YACF,KAAK;gBACH,MAAMU,kBAAkBX,SAASC;gBACjC;YACF;gBACErD,WAAW,CAAC,0BAA0B,EAAEsD,YAAY;gBACpDI;QACJ;IACF,EAAE,OAAOzB,KAAK;QACZjC,WAAW,CAAC,yBAAyB,EAAEiC,IAAIG,OAAO,EAAE;IACtD;AACF;AAEA,eAAeuB,wBAAwBP,OAAO,EAAEC,KAAK;IACnD,MAAME,UAAUF;IAChB,MAAMW,QAAQT,QAAQS,KAAK,IAAI;IAC/B,MAAMC,SAASV,QAAQU,MAAM,IAAI;IAEjC7C,QAAQC,GAAG,CAAC,CAAC,uCAAuC,CAAC;IACrDD,QAAQC,GAAG,CAAC,CAAC,UAAU,EAAE2C,OAAO;IAChC5C,QAAQC,GAAG,CAAC,CAAC,WAAW,EAAE4C,QAAQ;IAElC,IAAI;QAEF,MAAM1D,kBAAkB;QAGxB,MAAM2D,WAAW,MAAMzD,sBAAsBuD,OAAOC;QAEpDlE,aAAa,CAAC,+BAA+B,CAAC;QAE9CqB,QAAQC,GAAG,CAAC,CAAC,iCAAiC,CAAC;QAE/C6C,SAASC,WAAW,CAACC,OAAO,CAAC,CAACC;YAC5B,MAAMC,OACJD,WAAWE,QAAQ,KAAK,aACpB,OACAF,WAAWE,QAAQ,KAAK,YACtB,OACA;YACRnD,QAAQC,GAAG,CACT,CAAC,EAAE,EAAEiD,KAAK,CAAC,EAAED,WAAWE,QAAQ,CAACC,WAAW,GAAG,EAAE,EAAEH,WAAWI,SAAS,CAAC,EAAE,EAAEJ,WAAWK,MAAM,CAAC,CAAC,CAAC;YAIlG,IAAIL,WAAWM,OAAO,EAAE;gBACtBN,WAAWM,OAAO,CAACP,OAAO,CAACQ,CAAAA;oBACzBxD,QAAQC,GAAG,CAAC,CAAC,QAAQ,EAAEuD,OAAOC,IAAI,IAAID,OAAOE,EAAE,CAAC,EAAE,EAAEF,OAAOG,QAAQ,CAAC,CAAC,CAAC;gBACxE;YACF;QACF;QAEA,IAAIb,SAASc,eAAe,CAAC9B,MAAM,GAAG,GAAG;YACvC9B,QAAQC,GAAG,CAAC,CAAC,qBAAqB,CAAC;YACnC6C,SAASc,eAAe,CAACZ,OAAO,CAAC,CAACa;gBAChC7D,QAAQC,GAAG,CAAC,CAAC,IAAI,EAAE4D,KAAK;YAC1B;QACF;QAEA7D,QAAQC,GAAG,CAAC,CAAC,yBAAyB,CAAC;QACvCD,QAAQC,GAAG,CAAC,CAAC,uBAAuB,EAAE6C,SAASgB,gBAAgB,CAACC,OAAO,CAAC,GAAG,EAAE,CAAC;QAC9E/D,QAAQC,GAAG,CAAC,CAAC,sBAAsB,EAAE,AAAC6C,CAAAA,SAASkB,eAAe,GAAG,GAAE,EAAGD,OAAO,CAAC,GAAG,CAAC,CAAC;QACnF/D,QAAQC,GAAG,CAAC,CAAC,qBAAqB,EAAE6C,SAASmB,cAAc,EAAE;QAG7D,MAAMC,aAAalF,KAAKyB,IAAI,CAACL,QAAQM,GAAG,IAAI,oBAAoB,CAAC,WAAW,EAAEyD,KAAKC,GAAG,GAAG,KAAK,CAAC;QAC/F,MAAMrF,GAAGmC,KAAK,CAAClC,KAAKE,OAAO,CAACgF,aAAa;YAAE/C,WAAW;QAAK;QAC3D,MAAMpC,GAAGgC,SAAS,CAACmD,YAAY3C,KAAK8C,SAAS,CAACvB,UAAU,MAAM;QAE9D9C,QAAQC,GAAG,CAAC,CAAC,+BAA+B,EAAEiE,YAAY;IAE5D,EAAE,OAAOrD,KAAK;QACZjC,WAAW,CAAC,4BAA4B,EAAEiC,IAAIG,OAAO,EAAE;QACvDhB,QAAQC,GAAG,CAAC;QAGZD,QAAQC,GAAG,CAAC,CAAC,6CAA6C,CAAC;QAC3DD,QAAQC,GAAG,CAAC,CAAC,oEAAoE,CAAC;QAClFD,QAAQC,GAAG,CAAC,CAAC,6CAA6C,CAAC;QAC3DD,QAAQC,GAAG,CAAC,CAAC,6CAA6C,CAAC;QAC3DD,QAAQC,GAAG,CAAC,CAAC,qDAAqD,CAAC;IACrE;AACF;AAEA,eAAeuC,yBAAyBR,OAAO,EAAEC,KAAK;IACpD,MAAME,UAAUF;IAChB,MAAMqC,YAAYnC,QAAQmC,SAAS,IAAI;IACvC,MAAMC,SAASpC,QAAQoC,MAAM,IAAI;IAEjCvE,QAAQC,GAAG,CAAC,CAAC,mCAAmC,CAAC;IACjDD,QAAQC,GAAG,CAAC,CAAC,aAAa,EAAEqE,WAAW;IACvCtE,QAAQC,GAAG,CAAC,CAAC,WAAW,EAAEsE,QAAQ;IAElC,IAAI;QAEF,MAAMpF,kBAAkB;QAGxB,MAAMqF,SAAS,MAAMpF,qBAAqBkF;QAE1C3F,aAAa,CAAC,8BAA8B,CAAC;QAE7CqB,QAAQC,GAAG,CAAC,CAAC,0BAA0B,EAAEqE,UAAU,EAAE,CAAC;QACtDtE,QAAQC,GAAG,CAAC,CAAC,2BAA2B,EAAEuE,OAAOC,OAAO,CAACC,UAAU,EAAE;QACrE1E,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEuE,OAAOC,OAAO,CAACE,WAAW,CAACZ,OAAO,CAAC,GAAG,CAAC,CAAC;QACzE/D,QAAQC,GAAG,CAAC,CAAC,8BAA8B,EAAEuE,OAAOC,OAAO,CAACG,WAAW,CAACb,OAAO,CAAC,GAAG,CAAC,CAAC;QACrF/D,QAAQC,GAAG,CAAC,CAAC,qBAAqB,EAAEuE,OAAOC,OAAO,CAACI,aAAa,EAAE;QAClE7E,QAAQC,GAAG,CAAC,CAAC,wBAAwB,EAAEuE,OAAOC,OAAO,CAACK,gBAAgB,CAACf,OAAO,CAAC,GAAG,CAAC,CAAC;QACpF/D,QAAQC,GAAG,CAAC,CAAC,6BAA6B,EAAEuE,OAAOC,OAAO,CAACM,YAAY,EAAE;QAGzE,IAAIP,OAAOQ,MAAM,EAAE;YACjBhF,QAAQC,GAAG,CAAC,CAAC,YAAY,CAAC;YAC1B,IAAIuE,OAAOQ,MAAM,CAACC,iBAAiB,KAAK,GAAG;gBACzC,MAAMC,QAAQV,OAAOQ,MAAM,CAACC,iBAAiB,GAAG,IAAI,aAAa;gBACjEjF,QAAQC,GAAG,CAAC,CAAC,sBAAsB,EAAEiF,MAAM,CAAC,EAAEC,KAAKC,GAAG,CAACZ,OAAOQ,MAAM,CAACC,iBAAiB,EAAElB,OAAO,CAAC,GAAG,oBAAoB,CAAC;YAC1H;YACA,IAAIS,OAAOQ,MAAM,CAACK,cAAc,KAAK,GAAG;gBACtC,MAAMH,QAAQV,OAAOQ,MAAM,CAACK,cAAc,GAAG,IAAI,YAAY;gBAC7DrF,QAAQC,GAAG,CAAC,CAAC,2BAA2B,EAAEiF,MAAM,IAAI,EAAEC,KAAKC,GAAG,CAACZ,OAAOQ,MAAM,CAACK,cAAc,GAAG,MAAMtB,OAAO,CAAC,GAAG,CAAC,CAAC;YACnH;YACA,IAAIS,OAAOQ,MAAM,CAACM,gBAAgB,KAAK,GAAG;gBACxC,MAAMJ,QAAQV,OAAOQ,MAAM,CAACM,gBAAgB,GAAG,IAAI,cAAc;gBACjE,MAAMC,UAAUJ,KAAKC,GAAG,CAAC,AAACZ,OAAOQ,MAAM,CAACM,gBAAgB,GAAGd,OAAOC,OAAO,CAACC,UAAU,GAAI,KAAKX,OAAO,CAAC;gBACrG/D,QAAQC,GAAG,CAAC,CAAC,gBAAgB,EAAEiF,MAAM,CAAC,EAAEK,QAAQ,CAAC,CAAC;YACpD;QACF;QAEA,IAAIhB,WAAW,cAAcC,OAAOgB,YAAY,EAAE;YAChDxF,QAAQC,GAAG,CAAC,CAAC,sBAAsB,CAAC;YACpCD,QAAQC,GAAG,CAAC,CAAC,oBAAoB,CAAC;YAClC0B,OAAO8D,OAAO,CAACjB,OAAOgB,YAAY,EAAExC,OAAO,CAAC,CAAC,CAACS,MAAMiC,QAAQ;gBAC1D1F,QAAQC,GAAG,CAAC,CAAC,MAAM,EAAEwD,KAAK,SAAS,EAAEiC,QAAQf,WAAW,CAACZ,OAAO,CAAC,GAAG,WAAW,EAAE,AAAC2B,CAAAA,QAAQd,WAAW,GAAG,IAAG,EAAGb,OAAO,CAAC,GAAG,KAAK,CAAC;YACjI;QACF;QAGA,MAAMG,aAAa,MAAM5E,cAAciF,WAAW,SAAS,SAAS;QACpEvE,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEiE,YAAY;IAE/C,EAAE,OAAOrD,KAAK;QACZjC,WAAW,CAAC,uCAAuC,EAAEiC,IAAIG,OAAO,EAAE;QAClEnC,aAAa;QAGbmB,QAAQC,GAAG,CAAC,CAAC,0BAA0B,EAAEqE,UAAU,cAAc,CAAC;QAClEtE,QAAQC,GAAG,CAAC,CAAC,8BAA8B,CAAC;QAC5CD,QAAQC,GAAG,CAAC,CAAC,uBAAuB,CAAC;QACrCD,QAAQC,GAAG,CAAC,CAAC,kCAAkC,CAAC;QAChDD,QAAQC,GAAG,CAAC,CAAC,uBAAuB,CAAC;QACrCD,QAAQC,GAAG,CAAC,CAAC,2BAA2B,CAAC;QACzCD,QAAQC,GAAG,CAAC,CAAC,+BAA+B,CAAC;IAC/C;AACF;AAEA,eAAewC,kBAAkBT,OAAO,EAAEC,KAAK;IAC7C,MAAME,UAAUF;IAChB,MAAM0D,QAAQxD,QAAQwD,KAAK,IAAI;IAC/B,MAAMC,YAAYzD,QAAQyD,SAAS,IAAI;IACvC,MAAMC,eAAe1D,OAAO,CAAC,gBAAgB,IAAI;IAEjDnC,QAAQC,GAAG,CAAC,CAAC,2BAA2B,CAAC;IACzCD,QAAQC,GAAG,CAAC,CAAC,iBAAiB,EAAE0F,OAAO;IACvC3F,QAAQC,GAAG,CAAC,CAAC,sBAAsB,EAAE2F,YAAY,QAAQ,MAAM;IAC/D5F,QAAQC,GAAG,CAAC,CAAC,0BAA0B,EAAE4F,eAAe,QAAQ,MAAM;IAEtE,IAAI;QAEF,MAAMvE,YAAY,MAAM/B,kBAAkBoG;QAE1ChH,aAAa,CAAC,gCAAgC,CAAC;QAG/C,IAAI2C,UAAUI,KAAK,KAAK,GAAG;YAEzB,MAAMoE,wBAAwBF,WAAWC;YAGzC,MAAM3B,aAAa,MAAMxE,yBAAyB4B,WAAWqE;YAC7D3F,QAAQC,GAAG,CAAC,CAAC,yBAAyB,EAAEiE,YAAY;QACtD,OAAO;YAELlE,QAAQC,GAAG,CAAC,CAAC,yBAAyB,CAAC;YACvCD,QAAQC,GAAG,CAAC,CAAC,4BAA4B,EAAEqB,UAAUI,KAAK,CAACqE,cAAc,IAAI;YAC7E/F,QAAQC,GAAG,CAAC,CAAC,mBAAmB,EAAEqB,UAAU0E,KAAK,CAACD,cAAc,GAAG,EAAE,EAAE,AAAC,CAAA,AAACzE,UAAU0E,KAAK,GAAG1E,UAAUI,KAAK,GAAI,GAAE,EAAGqC,OAAO,CAAC,GAAG,EAAE,CAAC;YACjI/D,QAAQC,GAAG,CAAC,CAAC,oBAAoB,EAAEqB,UAAU2E,MAAM,CAACF,cAAc,GAAG,EAAE,EAAE,AAAC,CAAA,AAACzE,UAAU2E,MAAM,GAAG3E,UAAUI,KAAK,GAAI,GAAE,EAAGqC,OAAO,CAAC,GAAG,EAAE,CAAC;YAEpI,IAAI8B,cAAc;gBAChB,MAAMK,OAAO1G,cAAc8B;gBAC3BtB,QAAQC,GAAG,CAAC,CAAC,sBAAsB,EAAEiG,KAAKxE,KAAK,CAACqC,OAAO,CAAC,IAAI;gBAC5D/D,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEiG,KAAKF,KAAK,CAACjC,OAAO,CAAC,IAAI;gBACxD/D,QAAQC,GAAG,CAAC,CAAC,mBAAmB,EAAEiG,KAAKD,MAAM,CAAClC,OAAO,CAAC,IAAI;YAC5D;YAEA,IAAI6B,aAAatE,UAAU6E,OAAO,EAAE;gBAClCnG,QAAQC,GAAG,CAAC,CAAC,6BAA6B,CAAC;gBAC3C0B,OAAO8D,OAAO,CAACnE,UAAU6E,OAAO,EAAEnD,OAAO,CAAC,CAAC,CAACoD,WAAWC,MAAM;oBAC3D,MAAMC,aAAa,AAAC,CAAA,AAACD,QAAQ/E,UAAUI,KAAK,GAAI,GAAE,EAAGqC,OAAO,CAAC;oBAC7D,MAAMb,OAAOvD,aAAayG;oBAC1BpG,QAAQC,GAAG,CAAC,CAAC,EAAE,EAAEiD,KAAK,CAAC,EAAEkD,UAAU,EAAE,EAAEC,MAAMN,cAAc,GAAG,SAAS,EAAEO,WAAW,EAAE,CAAC;gBACzF;gBAEAtG,QAAQC,GAAG,CAAC,CAAC,gCAAgC,CAAC;gBAC9C,MAAMsG,gBAAgB9G,gCAAgC6B;gBACtDiF,cAAcvD,OAAO,CAACwD,CAAAA;oBACpBxG,QAAQC,GAAG,CAAC,CAAC,IAAI,EAAEuG,YAAY;gBACjC;YACF;YAGA,MAAMtC,aAAa,MAAMxE,yBAAyB4B,WAAWqE;YAC7D3F,QAAQC,GAAG,CAAC,CAAC,yBAAyB,EAAEiE,YAAY;QACtD;IAEF,EAAE,OAAOrD,KAAK;QACZjC,WAAW,CAAC,gCAAgC,EAAEiC,IAAIG,OAAO,EAAE;QAC3DnC,aAAa;QAGb,MAAMiH,wBAAwBF,WAAWC;IAC3C;AACF;AAEA,SAASvD;IACPtC,QAAQC,GAAG,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4Ff,CAAC;AACD;AAIA,eAAeyC,qBAAqBV,OAAO,EAAEC,KAAK;IAChD,MAAMwE,YAAYzE,OAAO,CAAC,EAAE,IAAI;IAChC,MAAM0E,WAAWzE,MAAMyE,QAAQ,IAAI;IAEnC1G,QAAQC,GAAG,CAAC,CAAC,qCAAqC,CAAC;IACnDD,QAAQC,GAAG,CAAC,CAAC,eAAe,EAAEwG,WAAW;IACzCzG,QAAQC,GAAG,CAAC,CAAC,oBAAoB,EAAEyG,WAAW,KAAK,CAAC,CAAC;IACrD1G,QAAQC,GAAG,CAAC,CAAC,oCAAoC,CAAC;IAElD,IAAI;QAEF,MAAM,EAAE0G,oBAAoB,EAAE,GAAG,MAAM,MAAM,CAAC;QAG9C,MAAMC,cAAc,MAAMD,qBAAqBF,WAAWC;QAG1DtG,QAAQyG,EAAE,CAAC,UAAU;YACnBD;YACAxG,QAAQ0G,IAAI,CAAC;QACf;QAGA,MAAM,IAAIC,QAAQ,KAAO;IAC3B,EAAE,OAAOC,OAAO;QACdpI,WAAW,CAAC,gCAAgC,EAAEoI,MAAMhG,OAAO,EAAE;QAC7DhB,QAAQC,GAAG,CAAC;IACd;AACF;AAEA,eAAe0C,kBAAkBX,OAAO,EAAEC,KAAK;IAC7CjC,QAAQC,GAAG,CAAC,CAAC,gDAAgD,CAAC;IAE9D,IAAI;QAEF,MAAM,EAAEgH,kBAAkB,EAAE,GAAG,MAAM,MAAM,CAAC;QAG5C,MAAMC,WAAW,MAAMD;QAEvBjH,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEiH,SAASC,MAAM,CAACnB,KAAK,IAAI,GAAG;QAC7DhG,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEiH,SAASC,MAAM,CAAClB,MAAM,IAAI,GAAG;QAC9DjG,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEiH,SAASC,MAAM,CAACzF,KAAK,IAAI,GAAG;QAE7D,IAAIwF,SAASE,KAAK,CAACtF,MAAM,GAAG,GAAG;YAC7B9B,QAAQC,GAAG,CAAC,CAAC,oBAAoB,EAAEiH,SAASE,KAAK,CAAC,EAAE,EAAE;QACxD;QAGApH,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;IAEd,EAAE,OAAO+G,OAAO;QACdpI,WAAW,CAAC,8BAA8B,EAAEoI,MAAMhG,OAAO,EAAE;QAC3DhB,QAAQC,GAAG,CAAC;IACd;AACF;AAEA,eAAe6F,wBAAwBF,SAAS,EAAEC,YAAY;IAE5D7F,QAAQC,GAAG,CAAC,CAAC,0BAA0B,CAAC;IACxCD,QAAQC,GAAG,CAAC,CAAC,uCAAuC,CAAC;IAErDD,QAAQC,GAAG,CAAC,CAAC,qCAAqC,CAAC;IACnDD,QAAQC,GAAG,CAAC,CAAC,4CAA4C,CAAC;IAC1DD,QAAQC,GAAG,CAAC,CAAC,4DAA4D,CAAC;IAC1ED,QAAQC,GAAG,CAAC,CAAC,2DAA2D,CAAC;IACzED,QAAQC,GAAG,CAAC,CAAC,4DAA4D,CAAC;IAE1ED,QAAQC,GAAG,CAAC,CAAC,yCAAyC,CAAC;IACvDD,QAAQC,GAAG,CAAC,CAAC,4DAA4D,CAAC;IAC1ED,QAAQC,GAAG,CAAC,CAAC,2DAA2D,CAAC;IACzED,QAAQC,GAAG,CAAC,CAAC,4DAA4D,CAAC;IAE1ED,QAAQC,GAAG,CAAC,CAAC,yCAAyC,CAAC;IACvDD,QAAQC,GAAG,CAAC,CAAC,4DAA4D,CAAC;IAC1ED,QAAQC,GAAG,CAAC,CAAC,2DAA2D,CAAC;IACzED,QAAQC,GAAG,CAAC,CAAC,4DAA4D,CAAC;IAE1ED,QAAQC,GAAG,CAAC,CAAC,gBAAgB,CAAC;IAC9BD,QAAQC,GAAG,CAAC,CAAC,6DAA6D,CAAC;IAC3ED,QAAQC,GAAG,CAAC,CAAC,8CAA8C,CAAC;IAC5DD,QAAQC,GAAG,CAAC,CAAC,oCAAoC,CAAC;IAElD,IAAI4F,cAAc;QAChB7F,QAAQC,GAAG,CAAC,CAAC,mBAAmB,CAAC;QACjCD,QAAQC,GAAG,CAAC,CAAC,qDAAqD,CAAC;QACnED,QAAQC,GAAG,CAAC,CAAC,sDAAsD,CAAC;QACpED,QAAQC,GAAG,CAAC,CAAC,0DAA0D,CAAC;IAC1E;IAEA,IAAI2F,WAAW;QACb5F,QAAQC,GAAG,CAAC,CAAC,qBAAqB,CAAC;QACnCD,QAAQC,GAAG,CAAC,CAAC,8CAA8C,CAAC;QAC5DD,QAAQC,GAAG,CAAC,CAAC,sCAAsC,CAAC;QACpDD,QAAQC,GAAG,CAAC,CAAC,yCAAyC,CAAC;IACzD;IAEAD,QAAQC,GAAG,CAAC,CAAC,oBAAoB,CAAC;IAClCD,QAAQC,GAAG,CAAC,CAAC,8DAA8D,CAAC;IAC5ED,QAAQC,GAAG,CAAC,CAAC,4DAA4D,CAAC;IAC1ED,QAAQC,GAAG,CAAC,CAAC,gEAAgE,CAAC;AAChF"}