{"version":3,"sources":["../../../../src/templates/claude-optimized/install-template.js"],"sourcesContent":["#!/usr/bin/env node\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\n/**\r\n * Install Claude optimized template files\r\n * This script copies all template files from the source .claude directory\r\n * to the template directory for packaging and distribution\r\n */\r\n\r\nconst SOURCE_DIR = path.join(__dirname, '../../../.claude');\r\nconst DEST_DIR = path.join(__dirname, '.claude');\r\nconst MANIFEST_PATH = path.join(__dirname, 'manifest.json');\r\n\r\n// Read manifest\r\nconst manifest = JSON.parse(fs.readFileSync(MANIFEST_PATH, 'utf8'));\r\n\r\n// Create destination directory\r\nif (!fs.existsSync(DEST_DIR)) {\r\n  fs.mkdirSync(DEST_DIR, { recursive: true });\r\n}\r\n\r\n// Create directories first\r\nconsole.log('Creating directory structure...');\r\nfor (const [dirName, dirInfo] of Object.entries(manifest.directories)) {\r\n  const destPath = path.join(DEST_DIR, dirInfo.path);\r\n  if (!fs.existsSync(destPath)) {\r\n    fs.mkdirSync(destPath, { recursive: true });\r\n    console.log(`  ✓ Created ${dirInfo.path}`);\r\n  }\r\n\r\n  // Create README for empty directories\r\n  if (dirInfo.createEmpty) {\r\n    const readmePath = path.join(destPath, 'README.md');\r\n    if (!fs.existsSync(readmePath)) {\r\n      fs.writeFileSync(\r\n        readmePath,\r\n        `# ${dirName}\\n\\nThis directory is intentionally empty and will be populated during usage.\\n`,\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n// Copy files\r\nconsole.log('\\nCopying template files...');\r\nlet successCount = 0;\r\nlet errorCount = 0;\r\n\r\nfor (const file of manifest.files) {\r\n  const sourcePath = path.join(SOURCE_DIR, file.source);\r\n  const destPath = path.join(DEST_DIR, file.destination);\r\n\r\n  try {\r\n    if (fs.existsSync(sourcePath)) {\r\n      // Ensure destination directory exists\r\n      const destDir = path.dirname(destPath);\r\n      if (!fs.existsSync(destDir)) {\r\n        fs.mkdirSync(destDir, { recursive: true });\r\n      }\r\n\r\n      // Copy file\r\n      fs.copyFileSync(sourcePath, destPath);\r\n      console.log(`  ✓ ${file.destination} (${file.category})`);\r\n      successCount++;\r\n    } else {\r\n      console.error(`  ✗ ${file.source} - File not found`);\r\n      errorCount++;\r\n    }\r\n  } catch (error) {\r\n    console.error(`  ✗ ${file.destination} - Error: ${error.message}`);\r\n    errorCount++;\r\n  }\r\n}\r\n\r\n// Summary\r\nconsole.log('\\n' + '='.repeat(50));\r\nconsole.log('Installation Summary:');\r\nconsole.log(`  Files copied: ${successCount}`);\r\nconsole.log(`  Errors: ${errorCount}`);\r\nconsole.log(`  Total files in manifest: ${manifest.files.length}`);\r\n\r\n// Category summary\r\nconsole.log('\\nFiles by category:');\r\nfor (const [category, info] of Object.entries(manifest.categories)) {\r\n  const copied = manifest.files.filter(\r\n    (f) => f.category === category && fs.existsSync(path.join(DEST_DIR, f.destination)),\r\n  ).length;\r\n  console.log(`  ${category}: ${copied}/${info.count} files`);\r\n}\r\n\r\n// Verify installation\r\nif (errorCount === 0) {\r\n  console.log('\\n✅ Template installation completed successfully!');\r\n\r\n  // Create a timestamp file\r\n  const timestamp = new Date().toISOString();\r\n  fs.writeFileSync(\r\n    path.join(__dirname, '.installed'),\r\n    `Installed: ${timestamp}\\nVersion: ${manifest.version}\\n`,\r\n  );\r\n} else {\r\n  console.log('\\n⚠️  Template installation completed with errors.');\r\n  console.log('Please check the error messages above and ensure source files exist.');\r\n}\r\n\r\n// Display next steps\r\nconsole.log('\\nNext steps:');\r\nconsole.log('1. Review the installed files in the .claude directory');\r\nconsole.log('2. Run tests to verify functionality: npm test');\r\nconsole.log('3. Package for distribution if needed');\r\nconsole.log('\\nFor more information, see README.md');\r\n"],"names":["fs","require","path","SOURCE_DIR","join","__dirname","DEST_DIR","MANIFEST_PATH","manifest","JSON","parse","readFileSync","existsSync","mkdirSync","recursive","console","log","dirName","dirInfo","Object","entries","directories","destPath","createEmpty","readmePath","writeFileSync","successCount","errorCount","file","files","sourcePath","source","destination","destDir","dirname","copyFileSync","category","error","message","repeat","length","info","categories","copied","filter","f","count","timestamp","Date","toISOString","version"],"mappings":";AAEA,MAAMA,KAAKC,QAAQ;AACnB,MAAMC,OAAOD,QAAQ;AAQrB,MAAME,aAAaD,KAAKE,IAAI,CAACC,WAAW;AACxC,MAAMC,WAAWJ,KAAKE,IAAI,CAACC,WAAW;AACtC,MAAME,gBAAgBL,KAAKE,IAAI,CAACC,WAAW;AAG3C,MAAMG,WAAWC,KAAKC,KAAK,CAACV,GAAGW,YAAY,CAACJ,eAAe;AAG3D,IAAI,CAACP,GAAGY,UAAU,CAACN,WAAW;IAC5BN,GAAGa,SAAS,CAACP,UAAU;QAAEQ,WAAW;IAAK;AAC3C;AAGAC,QAAQC,GAAG,CAAC;AACZ,KAAK,MAAM,CAACC,SAASC,QAAQ,IAAIC,OAAOC,OAAO,CAACZ,SAASa,WAAW,EAAG;IACrE,MAAMC,WAAWpB,KAAKE,IAAI,CAACE,UAAUY,QAAQhB,IAAI;IACjD,IAAI,CAACF,GAAGY,UAAU,CAACU,WAAW;QAC5BtB,GAAGa,SAAS,CAACS,UAAU;YAAER,WAAW;QAAK;QACzCC,QAAQC,GAAG,CAAC,CAAC,YAAY,EAAEE,QAAQhB,IAAI,EAAE;IAC3C;IAGA,IAAIgB,QAAQK,WAAW,EAAE;QACvB,MAAMC,aAAatB,KAAKE,IAAI,CAACkB,UAAU;QACvC,IAAI,CAACtB,GAAGY,UAAU,CAACY,aAAa;YAC9BxB,GAAGyB,aAAa,CACdD,YACA,CAAC,EAAE,EAAEP,QAAQ,+EAA+E,CAAC;QAEjG;IACF;AACF;AAGAF,QAAQC,GAAG,CAAC;AACZ,IAAIU,eAAe;AACnB,IAAIC,aAAa;AAEjB,KAAK,MAAMC,QAAQpB,SAASqB,KAAK,CAAE;IACjC,MAAMC,aAAa5B,KAAKE,IAAI,CAACD,YAAYyB,KAAKG,MAAM;IACpD,MAAMT,WAAWpB,KAAKE,IAAI,CAACE,UAAUsB,KAAKI,WAAW;IAErD,IAAI;QACF,IAAIhC,GAAGY,UAAU,CAACkB,aAAa;YAE7B,MAAMG,UAAU/B,KAAKgC,OAAO,CAACZ;YAC7B,IAAI,CAACtB,GAAGY,UAAU,CAACqB,UAAU;gBAC3BjC,GAAGa,SAAS,CAACoB,SAAS;oBAAEnB,WAAW;gBAAK;YAC1C;YAGAd,GAAGmC,YAAY,CAACL,YAAYR;YAC5BP,QAAQC,GAAG,CAAC,CAAC,IAAI,EAAEY,KAAKI,WAAW,CAAC,EAAE,EAAEJ,KAAKQ,QAAQ,CAAC,CAAC,CAAC;YACxDV;QACF,OAAO;YACLX,QAAQsB,KAAK,CAAC,CAAC,IAAI,EAAET,KAAKG,MAAM,CAAC,iBAAiB,CAAC;YACnDJ;QACF;IACF,EAAE,OAAOU,OAAO;QACdtB,QAAQsB,KAAK,CAAC,CAAC,IAAI,EAAET,KAAKI,WAAW,CAAC,UAAU,EAAEK,MAAMC,OAAO,EAAE;QACjEX;IACF;AACF;AAGAZ,QAAQC,GAAG,CAAC,OAAO,IAAIuB,MAAM,CAAC;AAC9BxB,QAAQC,GAAG,CAAC;AACZD,QAAQC,GAAG,CAAC,CAAC,gBAAgB,EAAEU,cAAc;AAC7CX,QAAQC,GAAG,CAAC,CAAC,UAAU,EAAEW,YAAY;AACrCZ,QAAQC,GAAG,CAAC,CAAC,2BAA2B,EAAER,SAASqB,KAAK,CAACW,MAAM,EAAE;AAGjEzB,QAAQC,GAAG,CAAC;AACZ,KAAK,MAAM,CAACoB,UAAUK,KAAK,IAAItB,OAAOC,OAAO,CAACZ,SAASkC,UAAU,EAAG;IAClE,MAAMC,SAASnC,SAASqB,KAAK,CAACe,MAAM,CAClC,CAACC,IAAMA,EAAET,QAAQ,KAAKA,YAAYpC,GAAGY,UAAU,CAACV,KAAKE,IAAI,CAACE,UAAUuC,EAAEb,WAAW,IACjFQ,MAAM;IACRzB,QAAQC,GAAG,CAAC,CAAC,EAAE,EAAEoB,SAAS,EAAE,EAAEO,OAAO,CAAC,EAAEF,KAAKK,KAAK,CAAC,MAAM,CAAC;AAC5D;AAGA,IAAInB,eAAe,GAAG;IACpBZ,QAAQC,GAAG,CAAC;IAGZ,MAAM+B,YAAY,IAAIC,OAAOC,WAAW;IACxCjD,GAAGyB,aAAa,CACdvB,KAAKE,IAAI,CAACC,WAAW,eACrB,CAAC,WAAW,EAAE0C,UAAU,WAAW,EAAEvC,SAAS0C,OAAO,CAAC,EAAE,CAAC;AAE7D,OAAO;IACLnC,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;AACd;AAGAD,QAAQC,GAAG,CAAC;AACZD,QAAQC,GAAG,CAAC;AACZD,QAAQC,GAAG,CAAC;AACZD,QAAQC,GAAG,CAAC;AACZD,QAAQC,GAAG,CAAC"}