{
  "version": 3,
  "sources": ["../../../../src/cli/commands/hive-mind/status.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n/**\n * Hive Mind Status Command\n *\n * Displays comprehensive status of the Hive Mind swarm\n * including agents, tasks, memory, and performance metrics.\n */\n\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport Table from 'cli-table3';\nimport { HiveMind } from '../../../hive-mind/core/HiveMind.js';\nimport { formatSuccess, formatError, formatInfo, formatWarning } from '../../formatter.js';\nimport { DatabaseManager } from '../../../hive-mind/core/DatabaseManager.js';\n\nexport const statusCommand = new Command('status')\n  .description('Display Hive Mind swarm status and metrics')\n  .option('-s, --swarm-id <id>', 'Specific swarm ID to check')\n  .option('-d, --detailed', 'Show detailed agent information', false)\n  .option('-m, --memory', 'Show memory usage statistics', false)\n  .option('-t, --tasks', 'Show task queue details', false)\n  .option('-p, --performance', 'Show performance metrics', false)\n  .option('-w, --watch', 'Watch status in real-time', false)\n  .option('-j, --json', 'Output as JSON', false)\n  .action(async (options) => {\n    try {\n      // Get swarm ID\n      const swarmId = options.swarmId || (await getActiveSwarmId());\n      if (!swarmId) {\n        throw new Error('No active swarm found. Initialize a Hive Mind first.');\n      }\n\n      // Load Hive Mind\n      const hiveMind = await HiveMind.load(swarmId);\n      const status = await hiveMind.getFullStatus();\n\n      if (options.json) {\n        console.log(JSON.stringify(status, null, 2));\n        return;\n      }\n\n      // Display swarm header\n      console.log('\\n' + chalk.bold.yellow('\uD83D\uDC1D Hive Mind Status'));\n      console.log(chalk.gray('\u2501'.repeat(60)));\n\n      // Basic info\n      console.log(formatInfo(`Swarm ID: ${status.swarmId}`));\n      console.log(formatInfo(`Name: ${status.name}`));\n      console.log(formatInfo(`Topology: ${status.topology}`));\n      console.log(formatInfo(`Queen Mode: ${status.queenMode}`));\n      console.log(formatInfo(`Status: ${getStatusEmoji(status.health)} ${status.health}`));\n      console.log(formatInfo(`Uptime: ${formatUptime(status.uptime)}`));\n\n      // Agent summary\n      console.log('\\n' + chalk.bold('\uD83D\uDC65 Agent Summary'));\n      const agentTable = new Table({\n        head: ['Type', 'Total', 'Active', 'Idle', 'Busy'],\n        style: { head: ['cyan'] },\n      });\n\n      Object.entries(status.agentsByType).forEach(([type, count]) => {\n        const active = status.agents.filter((a) => a.type === type && a.status === 'active').length;\n        const idle = status.agents.filter((a) => a.type === type && a.status === 'idle').length;\n        const busy = status.agents.filter((a) => a.type === type && a.status === 'busy').length;\n\n        agentTable.push([type, count, active, idle, busy]);\n      });\n\n      console.log(agentTable.toString());\n\n      // Detailed agent info\n      if (options.detailed) {\n        console.log('\\n' + chalk.bold('\uD83E\uDD16 Agent Details'));\n        const detailTable = new Table({\n          head: ['Name', 'Type', 'Status', 'Task', 'Messages', 'Uptime'],\n          style: { head: ['cyan'] },\n        });\n\n        status.agents.forEach((agent) => {\n          detailTable.push([\n            agent.name,\n            agent.type,\n            getAgentStatusBadge(agent.status),\n            agent.currentTask || '-',\n            agent.messageCount,\n            formatUptime(Date.now() - agent.createdAt),\n          ]);\n        });\n\n        console.log(detailTable.toString());\n      }\n\n      // Task queue\n      if (options.tasks || status.tasks.length > 0) {\n        console.log('\\n' + chalk.bold('\uD83D\uDCCB Task Queue'));\n        const taskTable = new Table({\n          head: ['ID', 'Description', 'Status', 'Assigned To', 'Progress'],\n          style: { head: ['cyan'] },\n        });\n\n        status.tasks.forEach((task) => {\n          taskTable.push([\n            task.id.substring(0, 8),\n            task.description.substring(0, 40) + (task.description.length > 40 ? '...' : ''),\n            getTaskStatusBadge(task.status),\n            task.assignedAgent || '-',\n            `${task.progress}%`,\n          ]);\n        });\n\n        console.log(taskTable.toString());\n        console.log(formatInfo(`Total Tasks: ${status.taskStats.total}`));\n        console.log(\n          formatInfo(\n            `Completed: ${status.taskStats.completed} | In Progress: ${status.taskStats.inProgress} | Pending: ${status.taskStats.pending}`,\n          ),\n        );\n      }\n\n      // Memory statistics\n      if (options.memory) {\n        console.log('\\n' + chalk.bold('\uD83D\uDCBE Memory Statistics'));\n        const memTable = new Table({\n          head: ['Namespace', 'Entries', 'Size', 'Avg TTL'],\n          style: { head: ['cyan'] },\n        });\n\n        Object.entries(status.memoryStats.byNamespace).forEach(([ns, stats]) => {\n          memTable.push([ns, stats.entries, formatBytes(stats.size), `${stats.avgTTL}s`]);\n        });\n\n        console.log(memTable.toString());\n        console.log(formatInfo(`Total Memory Usage: ${formatBytes(status.memoryStats.totalSize)}`));\n        console.log(formatInfo(`Total Entries: ${status.memoryStats.totalEntries}`));\n      }\n\n      // Performance metrics\n      if (options.performance) {\n        console.log('\\n' + chalk.bold('\uD83D\uDCCA Performance Metrics'));\n        console.log(formatInfo(`Avg Task Completion: ${status.performance.avgTaskCompletion}ms`));\n        console.log(formatInfo(`Message Throughput: ${status.performance.messageThroughput}/min`));\n        console.log(\n          formatInfo(`Consensus Success Rate: ${status.performance.consensusSuccessRate}%`),\n        );\n        console.log(formatInfo(`Memory Hit Rate: ${status.performance.memoryHitRate}%`));\n        console.log(formatInfo(`Agent Utilization: ${status.performance.agentUtilization}%`));\n      }\n\n      // Communications\n      console.log('\\n' + chalk.bold('\uD83D\uDCE1 Recent Communications'));\n      console.log(formatInfo(`Total Messages: ${status.communicationStats.totalMessages}`));\n      console.log(formatInfo(`Avg Latency: ${status.communicationStats.avgLatency}ms`));\n      console.log(formatInfo(`Active Channels: ${status.communicationStats.activeChannels}`));\n\n      // Health warnings\n      if (status.warnings.length > 0) {\n        console.log('\\n' + chalk.bold.yellow('\u26A0\uFE0F  Warnings'));\n        status.warnings.forEach((warning) => {\n          console.log(formatWarning(warning));\n        });\n      }\n\n      // Watch mode\n      if (options.watch) {\n        console.log('\\n' + chalk.gray('Refreshing every 2 seconds... (Ctrl+C to exit)'));\n        setInterval(async () => {\n          console.clear();\n          await statusCommand.parseAsync([...process.argv.slice(0, 2), ...process.argv.slice(3)]);\n        }, 2000);\n      }\n    } catch (error) {\n      console.error(formatError('Failed to get swarm status'));\n      console.error(formatError((error as Error).message));\n      process.exit(1);\n    }\n  });\n\nasync function getActiveSwarmId(): Promise<string | null> {\n  const db = await DatabaseManager.getInstance();\n  return db.getActiveSwarmId();\n}\n\nfunction getStatusEmoji(health: string): string {\n  const emojis: Record<string, string> = {\n    healthy: '\uD83D\uDFE2',\n    degraded: '\uD83D\uDFE1',\n    critical: '\uD83D\uDD34',\n    unknown: '\u26AA',\n  };\n  return emojis[health] || '\u26AA';\n}\n\nfunction getAgentStatusBadge(status: string): string {\n  const badges: Record<string, string> = {\n    active: chalk.green('\u25CF Active'),\n    idle: chalk.yellow('\u25CF Idle'),\n    busy: chalk.blue('\u25CF Busy'),\n    error: chalk.red('\u25CF Error'),\n  };\n  return badges[status] || chalk.gray('\u25CF Unknown');\n}\n\nfunction getTaskStatusBadge(status: string): string {\n  const badges: Record<string, string> = {\n    pending: chalk.gray('\u23F3 Pending'),\n    assigned: chalk.yellow('\uD83D\uDD04 Assigned'),\n    in_progress: chalk.blue('\u25B6\uFE0F  In Progress'),\n    completed: chalk.green('\u2705 Completed'),\n    failed: chalk.red('\u274C Failed'),\n  };\n  return badges[status] || chalk.gray('\u2753 Unknown');\n}\n\nfunction formatUptime(ms: number): string {\n  const seconds = Math.floor(ms / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n  const days = Math.floor(hours / 24);\n\n  if (days > 0) return `${days}d ${hours % 24}h`;\n  if (hours > 0) return `${hours}h ${minutes % 60}m`;\n  if (minutes > 0) return `${minutes}m ${seconds % 60}s`;\n  return `${seconds}s`;\n}\n\nfunction formatBytes(bytes: number): string {\n  const units = ['B', 'KB', 'MB', 'GB'];\n  let size = bytes;\n  let unitIndex = 0;\n\n  while (size > 1024 && unitIndex < units.length - 1) {\n    size /= 1024;\n    unitIndex++;\n  }\n\n  return `${size.toFixed(2)} ${units[unitIndex]}`;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,uBAAwB;AACxB,mBAAkB;AAClB,wBAAkB;AAClB,sBAAyB;AACzB,uBAAsE;AACtE,6BAAgC;AAEzB,MAAM,gBAAgB,IAAI,yBAAQ,QAAQ,EAC9C,YAAY,4CAA4C,EACxD,OAAO,uBAAuB,4BAA4B,EAC1D,OAAO,kBAAkB,mCAAmC,KAAK,EACjE,OAAO,gBAAgB,gCAAgC,KAAK,EAC5D,OAAO,eAAe,2BAA2B,KAAK,EACtD,OAAO,qBAAqB,4BAA4B,KAAK,EAC7D,OAAO,eAAe,6BAA6B,KAAK,EACxD,OAAO,cAAc,kBAAkB,KAAK,EAC5C,OAAO,OAAO,YAAY;AACzB,MAAI;AAEF,UAAM,UAAU,QAAQ,WAAY,MAAM,iBAAiB;AAC3D,QAAI,CAAC,SAAS;AACZ,YAAM,IAAI,MAAM,sDAAsD;AAAA,IACxE;AAGA,UAAM,WAAW,MAAM,yBAAS,KAAK,OAAO;AAC5C,UAAM,SAAS,MAAM,SAAS,cAAc;AAE5C,QAAI,QAAQ,MAAM;AAChB,cAAQ,IAAI,KAAK,UAAU,QAAQ,MAAM,CAAC,CAAC;AAC3C;AAAA,IACF;AAGA,YAAQ,IAAI,OAAO,aAAAA,QAAM,KAAK,OAAO,4BAAqB,CAAC;AAC3D,YAAQ,IAAI,aAAAA,QAAM,KAAK,SAAI,OAAO,EAAE,CAAC,CAAC;AAGtC,YAAQ,QAAI,6BAAW,aAAa,OAAO,OAAO,EAAE,CAAC;AACrD,YAAQ,QAAI,6BAAW,SAAS,OAAO,IAAI,EAAE,CAAC;AAC9C,YAAQ,QAAI,6BAAW,aAAa,OAAO,QAAQ,EAAE,CAAC;AACtD,YAAQ,QAAI,6BAAW,eAAe,OAAO,SAAS,EAAE,CAAC;AACzD,YAAQ,QAAI,6BAAW,WAAW,eAAe,OAAO,MAAM,CAAC,IAAI,OAAO,MAAM,EAAE,CAAC;AACnF,YAAQ,QAAI,6BAAW,WAAW,aAAa,OAAO,MAAM,CAAC,EAAE,CAAC;AAGhE,YAAQ,IAAI,OAAO,aAAAA,QAAM,KAAK,yBAAkB,CAAC;AACjD,UAAM,aAAa,IAAI,kBAAAC,QAAM;AAAA,MAC3B,MAAM,CAAC,QAAQ,SAAS,UAAU,QAAQ,MAAM;AAAA,MAChD,OAAO,EAAE,MAAM,CAAC,MAAM,EAAE;AAAA,IAC1B,CAAC;AAED,WAAO,QAAQ,OAAO,YAAY,EAAE,QAAQ,CAAC,CAAC,MAAM,KAAK,MAAM;AAC7D,YAAM,SAAS,OAAO,OAAO,OAAO,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,WAAW,QAAQ,EAAE;AACrF,YAAM,OAAO,OAAO,OAAO,OAAO,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,WAAW,MAAM,EAAE;AACjF,YAAM,OAAO,OAAO,OAAO,OAAO,CAAC,MAAM,EAAE,SAAS,QAAQ,EAAE,WAAW,MAAM,EAAE;AAEjF,iBAAW,KAAK,CAAC,MAAM,OAAO,QAAQ,MAAM,IAAI,CAAC;AAAA,IACnD,CAAC;AAED,YAAQ,IAAI,WAAW,SAAS,CAAC;AAGjC,QAAI,QAAQ,UAAU;AACpB,cAAQ,IAAI,OAAO,aAAAD,QAAM,KAAK,yBAAkB,CAAC;AACjD,YAAM,cAAc,IAAI,kBAAAC,QAAM;AAAA,QAC5B,MAAM,CAAC,QAAQ,QAAQ,UAAU,QAAQ,YAAY,QAAQ;AAAA,QAC7D,OAAO,EAAE,MAAM,CAAC,MAAM,EAAE;AAAA,MAC1B,CAAC;AAED,aAAO,OAAO,QAAQ,CAAC,UAAU;AAC/B,oBAAY,KAAK;AAAA,UACf,MAAM;AAAA,UACN,MAAM;AAAA,UACN,oBAAoB,MAAM,MAAM;AAAA,UAChC,MAAM,eAAe;AAAA,UACrB,MAAM;AAAA,UACN,aAAa,KAAK,IAAI,IAAI,MAAM,SAAS;AAAA,QAC3C,CAAC;AAAA,MACH,CAAC;AAED,cAAQ,IAAI,YAAY,SAAS,CAAC;AAAA,IACpC;AAGA,QAAI,QAAQ,SAAS,OAAO,MAAM,SAAS,GAAG;AAC5C,cAAQ,IAAI,OAAO,aAAAD,QAAM,KAAK,sBAAe,CAAC;AAC9C,YAAM,YAAY,IAAI,kBAAAC,QAAM;AAAA,QAC1B,MAAM,CAAC,MAAM,eAAe,UAAU,eAAe,UAAU;AAAA,QAC/D,OAAO,EAAE,MAAM,CAAC,MAAM,EAAE;AAAA,MAC1B,CAAC;AAED,aAAO,MAAM,QAAQ,CAAC,SAAS;AAC7B,kBAAU,KAAK;AAAA,UACb,KAAK,GAAG,UAAU,GAAG,CAAC;AAAA,UACtB,KAAK,YAAY,UAAU,GAAG,EAAE,KAAK,KAAK,YAAY,SAAS,KAAK,QAAQ;AAAA,UAC5E,mBAAmB,KAAK,MAAM;AAAA,UAC9B,KAAK,iBAAiB;AAAA,UACtB,GAAG,KAAK,QAAQ;AAAA,QAClB,CAAC;AAAA,MACH,CAAC;AAED,cAAQ,IAAI,UAAU,SAAS,CAAC;AAChC,cAAQ,QAAI,6BAAW,gBAAgB,OAAO,UAAU,KAAK,EAAE,CAAC;AAChE,cAAQ;AAAA,YACN;AAAA,UACE,cAAc,OAAO,UAAU,SAAS,mBAAmB,OAAO,UAAU,UAAU,eAAe,OAAO,UAAU,OAAO;AAAA,QAC/H;AAAA,MACF;AAAA,IACF;AAGA,QAAI,QAAQ,QAAQ;AAClB,cAAQ,IAAI,OAAO,aAAAD,QAAM,KAAK,6BAAsB,CAAC;AACrD,YAAM,WAAW,IAAI,kBAAAC,QAAM;AAAA,QACzB,MAAM,CAAC,aAAa,WAAW,QAAQ,SAAS;AAAA,QAChD,OAAO,EAAE,MAAM,CAAC,MAAM,EAAE;AAAA,MAC1B,CAAC;AAED,aAAO,QAAQ,OAAO,YAAY,WAAW,EAAE,QAAQ,CAAC,CAAC,IAAI,KAAK,MAAM;AACtE,iBAAS,KAAK,CAAC,IAAI,MAAM,SAAS,YAAY,MAAM,IAAI,GAAG,GAAG,MAAM,MAAM,GAAG,CAAC;AAAA,MAChF,CAAC;AAED,cAAQ,IAAI,SAAS,SAAS,CAAC;AAC/B,cAAQ,QAAI,6BAAW,uBAAuB,YAAY,OAAO,YAAY,SAAS,CAAC,EAAE,CAAC;AAC1F,cAAQ,QAAI,6BAAW,kBAAkB,OAAO,YAAY,YAAY,EAAE,CAAC;AAAA,IAC7E;AAGA,QAAI,QAAQ,aAAa;AACvB,cAAQ,IAAI,OAAO,aAAAD,QAAM,KAAK,+BAAwB,CAAC;AACvD,cAAQ,QAAI,6BAAW,wBAAwB,OAAO,YAAY,iBAAiB,IAAI,CAAC;AACxF,cAAQ,QAAI,6BAAW,uBAAuB,OAAO,YAAY,iBAAiB,MAAM,CAAC;AACzF,cAAQ;AAAA,YACN,6BAAW,2BAA2B,OAAO,YAAY,oBAAoB,GAAG;AAAA,MAClF;AACA,cAAQ,QAAI,6BAAW,oBAAoB,OAAO,YAAY,aAAa,GAAG,CAAC;AAC/E,cAAQ,QAAI,6BAAW,sBAAsB,OAAO,YAAY,gBAAgB,GAAG,CAAC;AAAA,IACtF;AAGA,YAAQ,IAAI,OAAO,aAAAA,QAAM,KAAK,iCAA0B,CAAC;AACzD,YAAQ,QAAI,6BAAW,mBAAmB,OAAO,mBAAmB,aAAa,EAAE,CAAC;AACpF,YAAQ,QAAI,6BAAW,gBAAgB,OAAO,mBAAmB,UAAU,IAAI,CAAC;AAChF,YAAQ,QAAI,6BAAW,oBAAoB,OAAO,mBAAmB,cAAc,EAAE,CAAC;AAGtF,QAAI,OAAO,SAAS,SAAS,GAAG;AAC9B,cAAQ,IAAI,OAAO,aAAAA,QAAM,KAAK,OAAO,wBAAc,CAAC;AACpD,aAAO,SAAS,QAAQ,CAAC,YAAY;AACnC,gBAAQ,QAAI,gCAAc,OAAO,CAAC;AAAA,MACpC,CAAC;AAAA,IACH;AAGA,QAAI,QAAQ,OAAO;AACjB,cAAQ,IAAI,OAAO,aAAAA,QAAM,KAAK,gDAAgD,CAAC;AAC/E,kBAAY,YAAY;AACtB,gBAAQ,MAAM;AACd,cAAM,cAAc,WAAW,CAAC,GAAG,QAAQ,KAAK,MAAM,GAAG,CAAC,GAAG,GAAG,QAAQ,KAAK,MAAM,CAAC,CAAC,CAAC;AAAA,MACxF,GAAG,GAAI;AAAA,IACT;AAAA,EACF,SAAS,OAAO;AACd,YAAQ,UAAM,8BAAY,4BAA4B,CAAC;AACvD,YAAQ,UAAM,8BAAa,MAAgB,OAAO,CAAC;AACnD,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF,CAAC;AAEH,eAAe,mBAA2C;AACxD,QAAM,KAAK,MAAM,uCAAgB,YAAY;AAC7C,SAAO,GAAG,iBAAiB;AAC7B;AAHe;AAKf,SAAS,eAAe,QAAwB;AAC9C,QAAM,SAAiC;AAAA,IACrC,SAAS;AAAA,IACT,UAAU;AAAA,IACV,UAAU;AAAA,IACV,SAAS;AAAA,EACX;AACA,SAAO,OAAO,MAAM,KAAK;AAC3B;AARS;AAUT,SAAS,oBAAoB,QAAwB;AACnD,QAAM,SAAiC;AAAA,IACrC,QAAQ,aAAAA,QAAM,MAAM,eAAU;AAAA,IAC9B,MAAM,aAAAA,QAAM,OAAO,aAAQ;AAAA,IAC3B,MAAM,aAAAA,QAAM,KAAK,aAAQ;AAAA,IACzB,OAAO,aAAAA,QAAM,IAAI,cAAS;AAAA,EAC5B;AACA,SAAO,OAAO,MAAM,KAAK,aAAAA,QAAM,KAAK,gBAAW;AACjD;AARS;AAUT,SAAS,mBAAmB,QAAwB;AAClD,QAAM,SAAiC;AAAA,IACrC,SAAS,aAAAA,QAAM,KAAK,gBAAW;AAAA,IAC/B,UAAU,aAAAA,QAAM,OAAO,oBAAa;AAAA,IACpC,aAAa,aAAAA,QAAM,KAAK,2BAAiB;AAAA,IACzC,WAAW,aAAAA,QAAM,MAAM,kBAAa;AAAA,IACpC,QAAQ,aAAAA,QAAM,IAAI,eAAU;AAAA,EAC9B;AACA,SAAO,OAAO,MAAM,KAAK,aAAAA,QAAM,KAAK,gBAAW;AACjD;AATS;AAWT,SAAS,aAAa,IAAoB;AACxC,QAAM,UAAU,KAAK,MAAM,KAAK,GAAI;AACpC,QAAM,UAAU,KAAK,MAAM,UAAU,EAAE;AACvC,QAAM,QAAQ,KAAK,MAAM,UAAU,EAAE;AACrC,QAAM,OAAO,KAAK,MAAM,QAAQ,EAAE;AAElC,MAAI,OAAO;AAAG,WAAO,GAAG,IAAI,KAAK,QAAQ,EAAE;AAC3C,MAAI,QAAQ;AAAG,WAAO,GAAG,KAAK,KAAK,UAAU,EAAE;AAC/C,MAAI,UAAU;AAAG,WAAO,GAAG,OAAO,KAAK,UAAU,EAAE;AACnD,SAAO,GAAG,OAAO;AACnB;AAVS;AAYT,SAAS,YAAY,OAAuB;AAC1C,QAAM,QAAQ,CAAC,KAAK,MAAM,MAAM,IAAI;AACpC,MAAI,OAAO;AACX,MAAI,YAAY;AAEhB,SAAO,OAAO,QAAQ,YAAY,MAAM,SAAS,GAAG;AAClD,YAAQ;AACR;AAAA,EACF;AAEA,SAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,IAAI,MAAM,SAAS,CAAC;AAC/C;AAXS;",
  "names": ["chalk", "Table"]
}
