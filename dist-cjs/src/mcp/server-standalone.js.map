{"version":3,"sources":["../../../src/mcp/server-standalone.js"],"sourcesContent":["#!/usr/bin/env node\r\n\r\n/**\r\n * Standalone MCP server entry point\r\n * Uses the new TypeScript-based MCPServer with Phase 4 SDK integration\r\n *\r\n * Note: This file uses dynamic imports to work properly when spawned as a subprocess\r\n */\r\n\r\nconst VERSION = '2.5.0-alpha.130';\r\n\r\nasync function main() {\r\n  // Determine the correct base path for imports\r\n  const { fileURLToPath } = await import('url');\r\n  const { pathToFileURL } = await import('url');\r\n  const path = await import('path');\r\n  const __filename = fileURLToPath(import.meta.url);\r\n  const __dirname = path.dirname(__filename);\r\n\r\n  // Dynamic imports to resolve correctly from compiled location\r\n  // Must use file:// URLs for dynamic import\r\n  const { MCPServer } = await import(pathToFileURL(path.join(__dirname, 'server.js')).href);\r\n  const { ConsoleLogger } = await import(pathToFileURL(path.join(__dirname, '../core/logger.js')).href);\r\n  const { createOrchestrator } = await import(pathToFileURL(path.join(__dirname, '../core/orchestrator.js')).href);\r\n\r\n  const logger = new ConsoleLogger();\r\n\r\n  logger.info('[claude-flow-mcp] Claude-Flow MCP server starting', {\r\n    version: VERSION,\r\n    phase: 'Phase 4 - SDK Integration',\r\n    features: ['Parallel Agent Spawning', 'Real-Time Query Control', 'Query Monitoring']\r\n  });\r\n\r\n  try {\r\n    // Create orchestrator for MCP tools\r\n    const orchestrator = await createOrchestrator({\r\n      logger,\r\n      enableNeural: process.env.CLAUDE_FLOW_NEURAL_ENABLED === 'true',\r\n      enableWasm: process.env.CLAUDE_FLOW_WASM_ENABLED === 'true',\r\n    });\r\n\r\n    // Create and start MCP server\r\n    const server = new MCPServer({\r\n      transport: 'stdio',\r\n      logger,\r\n      orchestrator,\r\n      enableSwarmTools: true,\r\n      enableRuvSwarmTools: true,\r\n    });\r\n\r\n    await server.start();\r\n\r\n    logger.success('[claude-flow-mcp] Server started successfully', {\r\n      transport: 'stdio',\r\n      tools: 'claude-flow + swarm + ruv-swarm',\r\n      phase4Tools: ['agents_spawn_parallel', 'query_control', 'query_list']\r\n    });\r\n\r\n    // Handle graceful shutdown\r\n    process.on('SIGINT', async () => {\r\n      logger.info('[claude-flow-mcp] Shutting down gracefully...');\r\n      await server.stop();\r\n      process.exit(0);\r\n    });\r\n\r\n    process.on('SIGTERM', async () => {\r\n      logger.info('[claude-flow-mcp] Shutting down gracefully...');\r\n      await server.stop();\r\n      process.exit(0);\r\n    });\r\n\r\n  } catch (error) {\r\n    logger.error('[claude-flow-mcp] Failed to start server', { error });\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\nmain().catch((error) => {\r\n  console.error('Fatal error:', error);\r\n  process.exit(1);\r\n});"],"names":["VERSION","main","fileURLToPath","pathToFileURL","path","__filename","url","__dirname","dirname","MCPServer","join","href","ConsoleLogger","createOrchestrator","logger","info","version","phase","features","orchestrator","enableNeural","process","env","CLAUDE_FLOW_NEURAL_ENABLED","enableWasm","CLAUDE_FLOW_WASM_ENABLED","server","transport","enableSwarmTools","enableRuvSwarmTools","start","success","tools","phase4Tools","on","stop","exit","error","catch","console"],"mappings":";AASA,MAAMA,UAAU;AAEhB,eAAeC;IAEb,MAAM,EAAEC,aAAa,EAAE,GAAG,MAAM,MAAM,CAAC;IACvC,MAAM,EAAEC,aAAa,EAAE,GAAG,MAAM,MAAM,CAAC;IACvC,MAAMC,OAAO,MAAM,MAAM,CAAC;IAC1B,MAAMC,aAAaH,cAAc,YAAYI,GAAG;IAChD,MAAMC,YAAYH,KAAKI,OAAO,CAACH;IAI/B,MAAM,EAAEI,SAAS,EAAE,GAAG,MAAM,MAAM,CAACN,cAAcC,KAAKM,IAAI,CAACH,WAAW,cAAcI,IAAI;IACxF,MAAM,EAAEC,aAAa,EAAE,GAAG,MAAM,MAAM,CAACT,cAAcC,KAAKM,IAAI,CAACH,WAAW,sBAAsBI,IAAI;IACpG,MAAM,EAAEE,kBAAkB,EAAE,GAAG,MAAM,MAAM,CAACV,cAAcC,KAAKM,IAAI,CAACH,WAAW,4BAA4BI,IAAI;IAE/G,MAAMG,SAAS,IAAIF;IAEnBE,OAAOC,IAAI,CAAC,qDAAqD;QAC/DC,SAAShB;QACTiB,OAAO;QACPC,UAAU;YAAC;YAA2B;YAA2B;SAAmB;IACtF;IAEA,IAAI;QAEF,MAAMC,eAAe,MAAMN,mBAAmB;YAC5CC;YACAM,cAAcC,QAAQC,GAAG,CAACC,0BAA0B,KAAK;YACzDC,YAAYH,QAAQC,GAAG,CAACG,wBAAwB,KAAK;QACvD;QAGA,MAAMC,SAAS,IAAIjB,UAAU;YAC3BkB,WAAW;YACXb;YACAK;YACAS,kBAAkB;YAClBC,qBAAqB;QACvB;QAEA,MAAMH,OAAOI,KAAK;QAElBhB,OAAOiB,OAAO,CAAC,iDAAiD;YAC9DJ,WAAW;YACXK,OAAO;YACPC,aAAa;gBAAC;gBAAyB;gBAAiB;aAAa;QACvE;QAGAZ,QAAQa,EAAE,CAAC,UAAU;YACnBpB,OAAOC,IAAI,CAAC;YACZ,MAAMW,OAAOS,IAAI;YACjBd,QAAQe,IAAI,CAAC;QACf;QAEAf,QAAQa,EAAE,CAAC,WAAW;YACpBpB,OAAOC,IAAI,CAAC;YACZ,MAAMW,OAAOS,IAAI;YACjBd,QAAQe,IAAI,CAAC;QACf;IAEF,EAAE,OAAOC,OAAO;QACdvB,OAAOuB,KAAK,CAAC,4CAA4C;YAAEA;QAAM;QACjEhB,QAAQe,IAAI,CAAC;IACf;AACF;AAEAnC,OAAOqC,KAAK,CAAC,CAACD;IACZE,QAAQF,KAAK,CAAC,gBAAgBA;IAC9BhB,QAAQe,IAAI,CAAC;AACf"}