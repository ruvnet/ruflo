{
  "version": 3,
  "sources": ["../../src/cli/index.ts"],
  "sourcesContent": ["#!/usr/bin/env -S deno run --allow-all\n/**\n * Claude-Flow CLI entry point\n * This redirects to simple-cli.ts for remote execution compatibility\n */\n\n// Import and run the simple CLI which doesn't have external dependencies\nimport './simple-cli.ts';\n// Spinner import removed - not available in current cliffy version\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport { logger } from '../core/logger.js';\nimport { configManager } from '../core/config.js';\nimport { startCommand } from './commands/start.js';\nimport { agentCommand } from './commands/agent.js';\nimport { taskCommand } from './commands/task.js';\nimport { memoryCommand } from './commands/memory.js';\nimport { configCommand } from './commands/config.js';\nimport { statusCommand } from './commands/status.js';\nimport { monitorCommand } from './commands/monitor.js';\nimport { sessionCommand } from './commands/session.js';\nimport { workflowCommand } from './commands/workflow.js';\nimport { helpCommand } from './commands/help.js';\nimport { mcpCommand } from './commands/mcp.js';\nimport { formatError, displayBanner, displayVersion } from './formatter.js';\nimport { startREPL } from './repl.js';\nimport { CompletionGenerator } from './completion.js';\nimport { VERSION, BUILD_DATE } from '../core/version.js';\n\n// Main CLI command\nconst cli = new Command()\n  .name('claude-flow')\n  .version(VERSION)\n  .description('Claude-Flow: Advanced AI agent orchestration system for multi-agent coordination')\n  // .meta() commented out - not available\n  // .meta() commented out - not available\n  .option('-c, --config <path>', 'Path to configuration file', './claude-flow.config.json')\n  .option('-v, --verbose', 'Enable verbose logging')\n  .option('-q, --quiet', 'Suppress non-essential output')\n  .option('--log-level <level>', 'Set log level (debug, info, warn, error)', 'info')\n  .option('--no-color', 'Disable colored output')\n  .option('--json', 'Output in JSON format where applicable')\n  .option('--profile <profile>', 'Use named configuration profile')\n  .action(async (options: any) => {\n    // If no subcommand, show banner and start REPL\n    await setupLogging(options);\n\n    if (!options.quiet) {\n      displayBanner(VERSION);\n      console.log(chalk.gray('Type \"help\" for available commands or \"exit\" to quit.\\n'));\n    }\n\n    await startREPL(options);\n  });\n\n// Add subcommands\n// NOTE: Temporarily disabled due to Cliffy/Commander compatibility issues\n// These commands are created with Cliffy but being added to Commander\n// cli\n//   .addCommand(startCommand)\n//   .addCommand(agentCommand)\n//   .addCommand(taskCommand)\n//   .addCommand(memoryCommand)\n//   .addCommand(configCommand)\n//   .addCommand(statusCommand)\n//   .addCommand(monitorCommand)\n//   .addCommand(sessionCommand)\n//   .addCommand(workflowCommand)\n//   .addCommand(mcpCommand)\n//   .addCommand(helpCommand);\n\n// Add repl command\nconst replCommand = new Command('repl')\n  .description('Start interactive REPL mode with command completion')\n  .option('--no-banner', 'Skip welcome banner')\n  .option('--history-file <path>', 'Custom history file path')\n  .action(async (options: any) => {\n    await setupLogging(options);\n    if (options.banner !== false) {\n      displayBanner(VERSION);\n    }\n    await startREPL(options);\n  });\ncli.addCommand(replCommand);\n\n// Add version command\nconst versionCommand = new Command('version')\n  .description('Show detailed version information')\n  .option('--short', 'Show version number only')\n  .action(async (options: any) => {\n    if (options.short) {\n      console.log(VERSION);\n    } else {\n      displayVersion(VERSION, BUILD_DATE);\n    }\n  });\ncli.addCommand(versionCommand);\n\n// Add completion command\nconst completionCommand = new Command('completion')\n  .description('Generate shell completion scripts')\n  .argument('[shell]', 'Shell type')\n  .option('--install', 'Install completion script automatically')\n  .action(async (shell: any, options: any) => {\n    const generator = new CompletionGenerator();\n    await generator.generate(shell || 'detect', options.install === true);\n  });\ncli.addCommand(completionCommand);\n\n// Global error handler\nasync function handleError(error: unknown, options?: any): Promise<void> {\n  const formatted = formatError(error);\n\n  if (options?.json) {\n    console.error(\n      JSON.stringify({\n        error: true,\n        message: formatted,\n        timestamp: new Date().toISOString(),\n      }),\n    );\n  } else {\n    console.error(chalk.red(chalk.bold('\u2717 Error:')), formatted);\n  }\n\n  // Show stack trace in debug mode or verbose\n  if (process.env['CLAUDE_FLOW_DEBUG'] === 'true' || options?.verbose) {\n    console.error(chalk.gray('\\nStack trace:'));\n    console.error(error);\n  }\n\n  // Suggest helpful actions\n  if (!options?.quiet) {\n    console.error(chalk.gray('\\nTry running with --verbose for more details'));\n    console.error(chalk.gray('Or use \"claude-flow help\" to see available commands'));\n  }\n\n  process.exit(1);\n}\n\n// Setup logging and configuration based on CLI options\nasync function setupLogging(options: any): Promise<void> {\n  // Determine log level\n  let logLevel = options.logLevel;\n  if (options.verbose) logLevel = 'debug';\n  if (options.quiet) logLevel = 'warn';\n\n  // Configure logger\n  await logger.configure({\n    level: logLevel as any,\n    format: options.json ? 'json' : 'text',\n    destination: 'console',\n  });\n\n  // Load configuration\n  try {\n    if (options.config) {\n      await configManager.load(options.config);\n    } else {\n      // Try to load default config file if it exists\n      try {\n        await configManager.load('./claude-flow.config.json');\n      } catch {\n        // Use default config if no file found\n        configManager.loadDefault();\n      }\n    }\n\n    // Apply profile if specified\n    if (options.profile) {\n      await configManager.applyProfile(options.profile);\n    }\n  } catch (error) {\n    logger.warn('Failed to load configuration:', (error as Error).message);\n    configManager.loadDefault();\n  }\n}\n\n// Signal handlers for graceful shutdown\nfunction setupSignalHandlers(): void {\n  const gracefulShutdown = () => {\n    console.log('\\n' + chalk.gray('Gracefully shutting down...'));\n    process.exit(0);\n  };\n\n  Deno.addSignalListener('SIGINT', gracefulShutdown);\n  Deno.addSignalListener('SIGTERM', gracefulShutdown);\n}\n\n// Main entry point\nif (false) {\n  // import.meta.main not available\n  let globalOptions: any = {};\n\n  try {\n    // Setup signal handlers\n    setupSignalHandlers();\n\n    // Pre-parse global options for error handling\n    const args = Deno.args;\n    globalOptions = {\n      verbose: args.includes('-v') || args.includes('--verbose'),\n      quiet: args.includes('-q') || args.includes('--quiet'),\n      json: args.includes('--json'),\n      noColor: args.includes('--no-color'),\n    };\n\n    // Configure colors based on options\n    if (globalOptions.noColor) {\n      // colors.setColorEnabled(false);\n    }\n\n    await cli.parse(args);\n  } catch (error) {\n    await handleError(error, globalOptions);\n  }\n}\n"],
  "mappings": "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",
  "names": ["chalk"]
}
