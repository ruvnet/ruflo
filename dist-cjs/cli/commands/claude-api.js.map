{
  "version": 3,
  "sources": ["../../../src/cli/commands/claude-api.ts"],
  "sourcesContent": ["/**\n * Claude API management commands\n */\n\nimport chalk from 'chalk';\nimport inquirer from 'inquirer';\nimport { Command } from 'commander';\nimport { ConfigManager } from '../../config/config-manager.js';\nimport { ClaudeAPIClient, ClaudeModel } from '../../api/claude-client.js';\nimport { Logger } from '../../core/logger.js';\nimport { getErrorMessage } from '../../utils/error-handler.js';\n\nexport const claudeApiCommand = new Command()\n  .name('claude-api')\n  .description('Manage Claude API configuration and test connectivity')\n  .action(() => {\n    claudeApiCommand.help();\n  });\n\n// Configure command\nclaudeApiCommand\n  .command('configure')\n  .description('Configure Claude API settings')\n  .option('--api-key <key>', 'Claude API key')\n  .option('--model <model>', 'Claude model to use')\n  .option('--temperature <temp>', 'Temperature (0.0-1.0)', parseFloat)\n  .option('--max-tokens <tokens>', 'Maximum tokens', parseInt)\n  .option('--interactive', 'Interactive configuration')\n  .action(async (options: any) => {\n    try {\n      const configManager = ConfigManager.getInstance();\n      let config = configManager.getClaudeConfig();\n\n      if (options.interactive) {\n        console.log(chalk.blue('\uD83E\uDD16 Claude API Configuration'));\n        console.log('Configure your Claude API settings.\\n');\n\n        const answers = await inquirer.prompt([\n          {\n            type: 'input',\n            name: 'apiKey',\n            message: 'Enter your Claude API key:',\n            default: config.apiKey || process.env.ANTHROPIC_API_KEY,\n            validate: (input) => (input ? true : 'API key is required'),\n          },\n          {\n            type: 'list',\n            name: 'model',\n            message: 'Select Claude model:',\n            choices: [\n              { name: 'Claude 3 Opus (Most capable)', value: 'claude-3-opus-20240229' },\n              { name: 'Claude 3 Sonnet (Balanced)', value: 'claude-3-sonnet-20240229' },\n              { name: 'Claude 3 Haiku (Fastest)', value: 'claude-3-haiku-20240307' },\n              { name: 'Claude 2.1', value: 'claude-2.1' },\n              { name: 'Claude 2.0', value: 'claude-2.0' },\n              { name: 'Claude Instant 1.2', value: 'claude-instant-1.2' },\n            ],\n            default: config.model || 'claude-3-sonnet-20240229',\n          },\n          {\n            type: 'input',\n            name: 'temperature',\n            message: 'Temperature (0.0-1.0):',\n            default: config.temperature?.toString() || '0.7',\n            validate: (input) => {\n              const num = parseFloat(input);\n              return num >= 0 && num <= 1 ? true : 'Temperature must be between 0.0 and 1.0';\n            },\n            filter: (input) => parseFloat(input),\n          },\n          {\n            type: 'input',\n            name: 'maxTokens',\n            message: 'Maximum tokens:',\n            default: config.maxTokens?.toString() || '4096',\n            validate: (input) => {\n              const num = parseInt(input);\n              return num > 0 && num <= 100000 ? true : 'Max tokens must be between 1 and 100000';\n            },\n            filter: (input) => parseInt(input),\n          },\n        ]);\n\n        config = { ...config, ...answers };\n      } else {\n        // Non-interactive mode\n        if (options.apiKey) config.apiKey = options.apiKey;\n        if (options.model) config.model = options.model;\n        if (options.temperature !== undefined) config.temperature = options.temperature;\n        if (options.maxTokens !== undefined) config.maxTokens = options.maxTokens;\n      }\n\n      // Update configuration\n      configManager.setClaudeConfig(config);\n      await configManager.save();\n\n      console.log(chalk.green('\u2705 Claude API configuration saved'));\n      console.log(chalk.gray(`Model: ${config.model}`));\n      console.log(chalk.gray(`Temperature: ${config.temperature}`));\n      console.log(chalk.gray(`Max tokens: ${config.maxTokens}`));\n    } catch (error) {\n      console.error(chalk.red('\u274C Failed to configure Claude API:'), getErrorMessage(error));\n      process.exit(1);\n    }\n  });\n\n// Test command\nclaudeApiCommand\n  .command('test')\n  .description('Test Claude API connectivity')\n  .option('--model <model>', 'Model to test')\n  .option('--temperature <temp>', 'Temperature for test', parseFloat)\n  .option(\n    '--prompt <prompt>',\n    'Test prompt',\n    'Hello, Claude! Please respond with a brief greeting.',\n  )\n  .action(async (options: any) => {\n    try {\n      const configManager = ConfigManager.getInstance();\n\n      if (!configManager.isClaudeAPIConfigured()) {\n        console.error(chalk.red('\u274C Claude API not configured. Run \"claude-api configure\" first.'));\n        process.exit(1);\n      }\n\n      console.log(chalk.blue('\uD83E\uDDEA Testing Claude API connectivity...'));\n\n      const logger = new Logger({ level: 'info', format: 'text', destination: 'console' });\n      const client = new ClaudeAPIClient(logger, configManager);\n\n      const testOptions: any = {};\n      if (options.model) testOptions.model = options.model;\n      if (options.temperature !== undefined) testOptions.temperature = options.temperature;\n\n      const start = Date.now();\n      const response = await client.complete(options.prompt, testOptions);\n      const duration = Date.now() - start;\n\n      console.log(chalk.green('\u2705 Claude API test successful!'));\n      console.log(chalk.gray(`Duration: ${duration}ms`));\n      console.log(chalk.cyan('\\nResponse:'));\n      console.log(response);\n    } catch (error) {\n      console.error(chalk.red('\u274C Claude API test failed:'), getErrorMessage(error));\n      process.exit(1);\n    }\n  });\n\n// Status command\nclaudeApiCommand\n  .command('status')\n  .description('Show Claude API configuration status')\n  .action(async () => {\n    try {\n      const configManager = ConfigManager.getInstance();\n      const config = configManager.getClaudeConfig();\n      const isConfigured = configManager.isClaudeAPIConfigured();\n\n      console.log(chalk.blue('\uD83E\uDD16 Claude API Status\\n'));\n\n      if (isConfigured) {\n        console.log(chalk.green('\u2705 Configured'));\n        console.log(chalk.gray(`Model: ${config.model || 'claude-3-sonnet-20240229'}`));\n        console.log(chalk.gray(`Temperature: ${config.temperature ?? 0.7}`));\n        console.log(chalk.gray(`Max tokens: ${config.maxTokens || 4096}`));\n        console.log(chalk.gray(`API key: ${config.apiKey ? '***masked***' : 'Not set'}`));\n\n        if (process.env.ANTHROPIC_API_KEY && !config.apiKey) {\n          console.log(\n            chalk.yellow('\u26A0\uFE0F  Using API key from ANTHROPIC_API_KEY environment variable'),\n          );\n        }\n      } else {\n        console.log(chalk.red('\u274C Not configured'));\n        console.log(chalk.gray('Run \"claude-api configure\" to set up Claude API.'));\n      }\n    } catch (error) {\n      console.error(chalk.red('\u274C Failed to get status:'), getErrorMessage(error));\n      process.exit(1);\n    }\n  });\n\n// Models command\nclaudeApiCommand\n  .command('models')\n  .description('List available Claude models')\n  .action(() => {\n    console.log(chalk.blue('\uD83D\uDCCB Available Claude Models\\n'));\n\n    const models = [\n      {\n        id: 'claude-3-opus-20240229',\n        name: 'Claude 3 Opus',\n        description: 'Most capable model, best for complex tasks',\n        contextWindow: '200K tokens',\n      },\n      {\n        id: 'claude-3-sonnet-20240229',\n        name: 'Claude 3 Sonnet',\n        description: 'Balanced performance and speed',\n        contextWindow: '200K tokens',\n      },\n      {\n        id: 'claude-3-haiku-20240307',\n        name: 'Claude 3 Haiku',\n        description: 'Fastest model, best for simple tasks',\n        contextWindow: '200K tokens',\n      },\n      {\n        id: 'claude-2.1',\n        name: 'Claude 2.1',\n        description: 'Previous generation, enhanced capabilities',\n        contextWindow: '200K tokens',\n      },\n      {\n        id: 'claude-2.0',\n        name: 'Claude 2.0',\n        description: 'Previous generation model',\n        contextWindow: '100K tokens',\n      },\n      {\n        id: 'claude-instant-1.2',\n        name: 'Claude Instant 1.2',\n        description: 'Fast, cost-effective model',\n        contextWindow: '100K tokens',\n      },\n    ];\n\n    models.forEach((model) => {\n      console.log(chalk.cyan(`${model.name} (${model.id})`));\n      console.log(chalk.gray(`  ${model.description}`));\n      console.log(chalk.gray(`  Context: ${model.contextWindow}\\n`));\n    });\n  });\n\n// Update command\nclaudeApiCommand\n  .command('update')\n  .description('Update specific Claude API settings')\n  .option('--model <model>', 'Update model')\n  .option('--temperature <temp>', 'Update temperature', parseFloat)\n  .option('--max-tokens <tokens>', 'Update max tokens', parseInt)\n  .action(async (options: any) => {\n    try {\n      const configManager = ConfigManager.getInstance();\n\n      if (!configManager.isClaudeAPIConfigured()) {\n        console.error(chalk.red('\u274C Claude API not configured. Run \"claude-api configure\" first.'));\n        process.exit(1);\n      }\n\n      const updates: any = {};\n      if (options.model) updates.model = options.model;\n      if (options.temperature !== undefined) updates.temperature = options.temperature;\n      if (options.maxTokens !== undefined) updates.maxTokens = options.maxTokens;\n\n      if (Object.keys(updates).length === 0) {\n        console.log(\n          chalk.yellow('\u26A0\uFE0F  No updates specified. Use --model, --temperature, or --max-tokens.'),\n        );\n        return;\n      }\n\n      configManager.setClaudeConfig(updates);\n      await configManager.save();\n\n      console.log(chalk.green('\u2705 Claude API configuration updated'));\n      Object.entries(updates).forEach(([key, value]) => {\n        console.log(chalk.gray(`${key}: ${value}`));\n      });\n    } catch (error) {\n      console.error(chalk.red('\u274C Failed to update configuration:'), getErrorMessage(error));\n      process.exit(1);\n    }\n  });\n"],
  "mappings": "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",
  "names": ["chalk", "inquirer"]
}
