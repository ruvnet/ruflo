{"version":3,"sources":["../../../src/verification/types.ts"],"sourcesContent":["/**\r\n * Verification Engine Types and Interfaces\r\n * Comprehensive type definitions for the verification system\r\n */\r\n\r\nimport type { AgentId, TaskId, SwarmId, TaskResult, AgentState } from '../swarm/types.js';\r\n\r\n// ===== CORE VERIFICATION TYPES =====\r\n\r\nexport type VerificationLevel = 'basic' | 'standard' | 'strict' | 'critical';\r\nexport type VerificationStatus = 'pending' | 'running' | 'passed' | 'failed' | 'error' | 'cancelled';\r\nexport type CheckpointType = 'pre_execution' | 'mid_execution' | 'post_execution' | 'rollback_point';\r\nexport type ClaimType = 'task_completion' | 'quality_metric' | 'performance_benchmark' | 'system_state' | 'agent_capability';\r\n\r\n// ===== TRUTH SCORING =====\r\n\r\nexport interface TruthScoreConfig {\r\n  /** Minimum threshold for truth score (0-1, default: 0.95) */\r\n  threshold: number;\r\n  /** Weighted factors for scoring */\r\n  weights: TruthScoringWeights;\r\n  /** Enable/disable specific validation checks */\r\n  checks: TruthValidationChecks;\r\n  /** Confidence intervals for statistical validation */\r\n  confidence: ConfidenceConfig;\r\n}\r\n\r\nexport interface TruthScoringWeights {\r\n  /** Weight for agent reliability history (0-1) */\r\n  agentReliability: number;\r\n  /** Weight for cross-validation results (0-1) */\r\n  crossValidation: number;\r\n  /** Weight for external verification (0-1) */\r\n  externalVerification: number;\r\n  /** Weight for consistency with known facts (0-1) */\r\n  factualConsistency: number;\r\n  /** Weight for logical coherence (0-1) */\r\n  logicalCoherence: number;\r\n}\r\n\r\nexport interface TruthValidationChecks {\r\n  /** Validate against agent performance history */\r\n  historicalValidation: boolean;\r\n  /** Cross-check with multiple agents */\r\n  crossAgentValidation: boolean;\r\n  /** Verify against external sources */\r\n  externalValidation: boolean;\r\n  /** Check for logical consistency */\r\n  logicalValidation: boolean;\r\n  /** Validate statistical claims */\r\n  statisticalValidation: boolean;\r\n}\r\n\r\nexport interface ConfidenceConfig {\r\n  /** Confidence level for statistical tests (e.g., 0.95 for 95%) */\r\n  level: number;\r\n  /** Sample size requirements */\r\n  minSampleSize: number;\r\n  /** Maximum acceptable error margin */\r\n  maxErrorMargin: number;\r\n}\r\n\r\nexport interface TruthScore {\r\n  /** Overall truth score (0-1) */\r\n  score: number;\r\n  /** Individual component scores */\r\n  components: TruthScoreComponents;\r\n  /** Confidence intervals */\r\n  confidence: ConfidenceInterval;\r\n  /** Evidence supporting the score */\r\n  evidence: TruthEvidence[];\r\n  /** Computed timestamp */\r\n  timestamp: Date;\r\n  /** Validation metadata */\r\n  metadata: Record<string, unknown>;\r\n}\r\n\r\nexport interface TruthScoreComponents {\r\n  agentReliability: number;\r\n  crossValidation: number;\r\n  externalVerification: number;\r\n  factualConsistency: number;\r\n  logicalCoherence: number;\r\n  overall: number;\r\n}\r\n\r\nexport interface ConfidenceInterval {\r\n  lower: number;\r\n  upper: number;\r\n  level: number;\r\n}\r\n\r\nexport interface TruthEvidence {\r\n  type: 'agent_history' | 'cross_validation' | 'external_source' | 'logical_proof' | 'statistical_test';\r\n  source: string;\r\n  weight: number;\r\n  score: number;\r\n  details: Record<string, unknown>;\r\n  timestamp: Date;\r\n}\r\n\r\n// ===== VERIFICATION PIPELINE =====\r\n\r\nexport interface VerificationPipelineConfig {\r\n  /** Pipeline identification */\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  \r\n  /** Pipeline configuration */\r\n  level: VerificationLevel;\r\n  checkpoints: VerificationCheckpoint[];\r\n  truthScoreConfig: TruthScoreConfig;\r\n  \r\n  /** Execution settings */\r\n  parallel: boolean;\r\n  timeout: number;\r\n  retryAttempts: number;\r\n  \r\n  /** Rollback settings */\r\n  enableRollback: boolean;\r\n  snapshotInterval: number;\r\n  maxSnapshots: number;\r\n  \r\n  /** Reporting settings */\r\n  reportLevel: 'minimal' | 'standard' | 'detailed' | 'comprehensive';\r\n  notifications: NotificationConfig[];\r\n}\r\n\r\nexport interface VerificationCheckpoint {\r\n  /** Checkpoint identification */\r\n  id: string;\r\n  name: string;\r\n  type: CheckpointType;\r\n  \r\n  /** Execution configuration */\r\n  mandatory: boolean;\r\n  order: number;\r\n  dependencies: string[];\r\n  \r\n  /** Validation rules */\r\n  validators: CheckpointValidator[];\r\n  conditions: CheckpointCondition[];\r\n  \r\n  /** Execution settings */\r\n  timeout: number;\r\n  retryAttempts: number;\r\n  \r\n  /** Rollback configuration */\r\n  createSnapshot: boolean;\r\n  rollbackOnFailure: boolean;\r\n}\r\n\r\nexport interface CheckpointValidator {\r\n  id: string;\r\n  type: 'truth_score' | 'agent_claim' | 'integration_test' | 'state_validation' | 'custom';\r\n  config: Record<string, unknown>;\r\n  weight: number;\r\n  required: boolean;\r\n}\r\n\r\nexport interface CheckpointCondition {\r\n  field: string;\r\n  operator: 'eq' | 'ne' | 'gt' | 'gte' | 'lt' | 'lte' | 'in' | 'nin' | 'regex' | 'custom';\r\n  value: unknown;\r\n  description: string;\r\n}\r\n\r\nexport interface NotificationConfig {\r\n  type: 'email' | 'webhook' | 'slack' | 'teams' | 'custom';\r\n  endpoint: string;\r\n  conditions: string[];\r\n  template: string;\r\n}\r\n\r\nexport interface VerificationResult {\r\n  /** Result identification */\r\n  id: string;\r\n  pipelineId: string;\r\n  timestamp: Date;\r\n  \r\n  /** Overall result */\r\n  status: VerificationStatus;\r\n  score: number;\r\n  passed: boolean;\r\n  \r\n  /** Detailed results */\r\n  checkpointResults: CheckpointResult[];\r\n  truthScore: TruthScore;\r\n  \r\n  /** Performance metrics */\r\n  duration: number;\r\n  resourceUsage: ResourceUsage;\r\n  \r\n  /** Evidence and artifacts */\r\n  evidence: VerificationEvidence[];\r\n  artifacts: Record<string, unknown>;\r\n  \r\n  /** Error information */\r\n  errors: VerificationError[];\r\n  warnings: VerificationWarning[];\r\n  \r\n  /** Recommendations */\r\n  recommendations: string[];\r\n  nextSteps: string[];\r\n}\r\n\r\nexport interface CheckpointResult {\r\n  checkpointId: string;\r\n  status: VerificationStatus;\r\n  score: number;\r\n  passed: boolean;\r\n  duration: number;\r\n  validatorResults: ValidatorResult[];\r\n  evidence: VerificationEvidence[];\r\n  errors: VerificationError[];\r\n  warnings: VerificationWarning[];\r\n}\r\n\r\nexport interface ValidatorResult {\r\n  validatorId: string;\r\n  status: VerificationStatus;\r\n  score: number;\r\n  passed: boolean;\r\n  details: Record<string, unknown>;\r\n  evidence: VerificationEvidence[];\r\n}\r\n\r\nexport interface ResourceUsage {\r\n  cpu: number;\r\n  memory: number;\r\n  disk: number;\r\n  network: number;\r\n  tokens?: number;\r\n  apiCalls?: number;\r\n}\r\n\r\nexport interface VerificationEvidence {\r\n  type: string;\r\n  source: string;\r\n  timestamp: Date;\r\n  data: Record<string, unknown>;\r\n  reliability: number;\r\n  weight: number;\r\n}\r\n\r\nexport interface VerificationError {\r\n  code: string;\r\n  message: string;\r\n  severity: 'low' | 'medium' | 'high' | 'critical';\r\n  context: Record<string, unknown>;\r\n  recoverable: boolean;\r\n  timestamp: Date;\r\n}\r\n\r\nexport interface VerificationWarning {\r\n  code: string;\r\n  message: string;\r\n  severity: 'low' | 'medium' | 'high';\r\n  context: Record<string, unknown>;\r\n  recommendation: string;\r\n  timestamp: Date;\r\n}\r\n\r\n// ===== AGENT CLAIM VALIDATION =====\r\n\r\nexport interface AgentClaim {\r\n  /** Claim identification */\r\n  id: string;\r\n  agentId: AgentId;\r\n  taskId?: TaskId;\r\n  swarmId?: SwarmId;\r\n  \r\n  /** Claim details */\r\n  type: ClaimType;\r\n  title: string;\r\n  description: string;\r\n  \r\n  /** Claim data */\r\n  data: Record<string, unknown>;\r\n  metrics: ClaimMetrics;\r\n  \r\n  /** Supporting evidence */\r\n  evidence: ClaimEvidence[];\r\n  references: string[];\r\n  \r\n  /** Validation status */\r\n  status: VerificationStatus;\r\n  confidence: number;\r\n  \r\n  /** Timestamps */\r\n  submittedAt: Date;\r\n  validatedAt?: Date;\r\n  \r\n  /** Validation metadata */\r\n  metadata: Record<string, unknown>;\r\n}\r\n\r\nexport interface ClaimMetrics {\r\n  /** Performance metrics */\r\n  executionTime?: number;\r\n  resourceUsage?: ResourceUsage;\r\n  throughput?: number;\r\n  errorRate?: number;\r\n  \r\n  /** Quality metrics */\r\n  accuracy?: number;\r\n  precision?: number;\r\n  recall?: number;\r\n  f1Score?: number;\r\n  \r\n  /** Custom metrics */\r\n  custom: Record<string, number>;\r\n}\r\n\r\nexport interface ClaimEvidence {\r\n  type: 'log_entry' | 'test_result' | 'measurement' | 'artifact' | 'witness_testimony' | 'external_verification';\r\n  source: string;\r\n  timestamp: Date;\r\n  data: Record<string, unknown>;\r\n  reliability: number;\r\n  verifiable: boolean;\r\n}\r\n\r\nexport interface ClaimValidationConfig {\r\n  /** Validation rules */\r\n  requiredEvidence: string[];\r\n  minimumConfidence: number;\r\n  crossValidationRequired: boolean;\r\n  \r\n  /** Verification methods */\r\n  methods: ClaimValidationMethod[];\r\n  \r\n  /** Timeout and retry settings */\r\n  timeout: number;\r\n  retryAttempts: number;\r\n  \r\n  /** Quality thresholds */\r\n  qualityThresholds: Record<string, number>;\r\n}\r\n\r\nexport interface ClaimValidationMethod {\r\n  name: string;\r\n  type: 'historical_comparison' | 'cross_agent_verification' | 'external_validation' | 'statistical_test' | 'custom';\r\n  config: Record<string, unknown>;\r\n  weight: number;\r\n  required: boolean;\r\n}\r\n\r\nexport interface ClaimValidationResult {\r\n  claimId: string;\r\n  status: VerificationStatus;\r\n  confidence: number;\r\n  score: number;\r\n  passed: boolean;\r\n  \r\n  methodResults: MethodValidationResult[];\r\n  evidence: VerificationEvidence[];\r\n  \r\n  duration: number;\r\n  timestamp: Date;\r\n  \r\n  errors: VerificationError[];\r\n  warnings: VerificationWarning[];\r\n  recommendations: string[];\r\n}\r\n\r\nexport interface MethodValidationResult {\r\n  methodName: string;\r\n  status: VerificationStatus;\r\n  score: number;\r\n  confidence: number;\r\n  details: Record<string, unknown>;\r\n  evidence: VerificationEvidence[];\r\n}\r\n\r\n// ===== INTEGRATION TESTING =====\r\n\r\nexport interface IntegrationTestConfig {\r\n  /** Test identification */\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  \r\n  /** Test scope */\r\n  agents: AgentId[];\r\n  tasks: TaskId[];\r\n  swarms: SwarmId[];\r\n  \r\n  /** Test scenarios */\r\n  scenarios: TestScenario[];\r\n  \r\n  /** Execution settings */\r\n  parallel: boolean;\r\n  timeout: number;\r\n  retryAttempts: number;\r\n  \r\n  /** Environment settings */\r\n  environment: TestEnvironment;\r\n  \r\n  /** Validation criteria */\r\n  validationCriteria: ValidationCriteria;\r\n}\r\n\r\nexport interface TestScenario {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  \r\n  /** Test steps */\r\n  steps: TestStep[];\r\n  \r\n  /** Setup and teardown */\r\n  setup?: TestStep[];\r\n  teardown?: TestStep[];\r\n  \r\n  /** Dependencies */\r\n  dependencies: string[];\r\n  \r\n  /** Expected outcomes */\r\n  expectedResults: ExpectedResult[];\r\n  \r\n  /** Resource requirements */\r\n  resources: ResourceRequirements;\r\n}\r\n\r\nexport interface TestStep {\r\n  id: string;\r\n  name: string;\r\n  type: 'agent_action' | 'system_action' | 'validation' | 'wait' | 'custom';\r\n  \r\n  /** Step configuration */\r\n  config: Record<string, unknown>;\r\n  params: Record<string, unknown>;\r\n  \r\n  /** Execution settings */\r\n  timeout: number;\r\n  retryAttempts: number;\r\n  continueOnError: boolean;\r\n  \r\n  /** Validation */\r\n  validators: TestValidator[];\r\n  assertions: TestAssertion[];\r\n}\r\n\r\nexport interface TestValidator {\r\n  type: string;\r\n  config: Record<string, unknown>;\r\n  weight: number;\r\n  required: boolean;\r\n}\r\n\r\nexport interface TestAssertion {\r\n  field: string;\r\n  operator: string;\r\n  expected: unknown;\r\n  actual?: unknown;\r\n  passed?: boolean;\r\n  message?: string;\r\n}\r\n\r\nexport interface ExpectedResult {\r\n  type: 'agent_state' | 'task_result' | 'system_metric' | 'custom';\r\n  criteria: Record<string, unknown>;\r\n  tolerance: number;\r\n  required: boolean;\r\n}\r\n\r\nexport interface ResourceRequirements {\r\n  cpu: number;\r\n  memory: number;\r\n  disk: number;\r\n  network: number;\r\n  agents: number;\r\n  duration: number;\r\n}\r\n\r\nexport interface TestEnvironment {\r\n  name: string;\r\n  variables: Record<string, string>;\r\n  services: ServiceConfig[];\r\n  constraints: EnvironmentConstraint[];\r\n}\r\n\r\nexport interface ServiceConfig {\r\n  name: string;\r\n  type: string;\r\n  config: Record<string, unknown>;\r\n  healthCheck: HealthCheck;\r\n}\r\n\r\nexport interface HealthCheck {\r\n  type: 'http' | 'tcp' | 'exec' | 'custom';\r\n  config: Record<string, unknown>;\r\n  interval: number;\r\n  timeout: number;\r\n  retries: number;\r\n}\r\n\r\nexport interface EnvironmentConstraint {\r\n  type: string;\r\n  value: unknown;\r\n  description: string;\r\n}\r\n\r\nexport interface ValidationCriteria {\r\n  /** Performance criteria */\r\n  maxExecutionTime: number;\r\n  minThroughput: number;\r\n  maxErrorRate: number;\r\n  \r\n  /** Quality criteria */\r\n  minAccuracy: number;\r\n  minReliability: number;\r\n  minConsistency: number;\r\n  \r\n  /** Resource criteria */\r\n  maxResourceUsage: ResourceUsage;\r\n  \r\n  /** Custom criteria */\r\n  custom: Record<string, unknown>;\r\n}\r\n\r\nexport interface IntegrationTestResult {\r\n  /** Test identification */\r\n  testId: string;\r\n  timestamp: Date;\r\n  \r\n  /** Overall result */\r\n  status: VerificationStatus;\r\n  passed: boolean;\r\n  score: number;\r\n  \r\n  /** Scenario results */\r\n  scenarioResults: ScenarioResult[];\r\n  \r\n  /** Performance metrics */\r\n  duration: number;\r\n  resourceUsage: ResourceUsage;\r\n  \r\n  /** Quality metrics */\r\n  coverage: TestCoverage;\r\n  reliability: number;\r\n  \r\n  /** Evidence and artifacts */\r\n  evidence: VerificationEvidence[];\r\n  artifacts: Record<string, unknown>;\r\n  logs: TestLog[];\r\n  \r\n  /** Error information */\r\n  errors: VerificationError[];\r\n  warnings: VerificationWarning[];\r\n  \r\n  /** Analysis and recommendations */\r\n  analysis: TestAnalysis;\r\n  recommendations: string[];\r\n}\r\n\r\nexport interface ScenarioResult {\r\n  scenarioId: string;\r\n  status: VerificationStatus;\r\n  passed: boolean;\r\n  score: number;\r\n  duration: number;\r\n  \r\n  stepResults: StepResult[];\r\n  validationResults: ValidationResult[];\r\n  \r\n  evidence: VerificationEvidence[];\r\n  artifacts: Record<string, unknown>;\r\n  \r\n  errors: VerificationError[];\r\n  warnings: VerificationWarning[];\r\n}\r\n\r\nexport interface StepResult {\r\n  stepId: string;\r\n  status: VerificationStatus;\r\n  passed: boolean;\r\n  duration: number;\r\n  \r\n  validatorResults: ValidatorResult[];\r\n  assertionResults: AssertionResult[];\r\n  \r\n  output: Record<string, unknown>;\r\n  evidence: VerificationEvidence[];\r\n}\r\n\r\nexport interface AssertionResult {\r\n  field: string;\r\n  operator: string;\r\n  expected: unknown;\r\n  actual: unknown;\r\n  passed: boolean;\r\n  message: string;\r\n  timestamp: Date;\r\n}\r\n\r\nexport interface ValidationResult {\r\n  type: string;\r\n  passed: boolean;\r\n  score: number;\r\n  details: Record<string, unknown>;\r\n  evidence: VerificationEvidence[];\r\n}\r\n\r\nexport interface TestCoverage {\r\n  agents: number;\r\n  tasks: number;\r\n  scenarios: number;\r\n  steps: number;\r\n  assertions: number;\r\n  percentage: number;\r\n}\r\n\r\nexport interface TestLog {\r\n  level: 'debug' | 'info' | 'warn' | 'error';\r\n  message: string;\r\n  timestamp: Date;\r\n  source: string;\r\n  context: Record<string, unknown>;\r\n}\r\n\r\nexport interface TestAnalysis {\r\n  bottlenecks: PerformanceBottleneck[];\r\n  patterns: TestPattern[];\r\n  insights: TestInsight[];\r\n  trends: TestTrend[];\r\n}\r\n\r\nexport interface PerformanceBottleneck {\r\n  type: string;\r\n  location: string;\r\n  impact: number;\r\n  description: string;\r\n  recommendations: string[];\r\n}\r\n\r\nexport interface TestPattern {\r\n  type: string;\r\n  pattern: string;\r\n  frequency: number;\r\n  significance: number;\r\n  examples: string[];\r\n}\r\n\r\nexport interface TestInsight {\r\n  category: string;\r\n  insight: string;\r\n  confidence: number;\r\n  evidence: string[];\r\n  implications: string[];\r\n}\r\n\r\nexport interface TestTrend {\r\n  metric: string;\r\n  direction: 'increasing' | 'decreasing' | 'stable' | 'volatile';\r\n  magnitude: number;\r\n  significance: number;\r\n  period: string;\r\n}\r\n\r\n// ===== STATE SNAPSHOT SYSTEM =====\r\n\r\nexport interface StateSnapshotConfig {\r\n  /** Snapshot identification */\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  \r\n  /** Snapshot scope */\r\n  scope: SnapshotScope;\r\n  \r\n  /** Storage settings */\r\n  storage: SnapshotStorageConfig;\r\n  \r\n  /** Retention settings */\r\n  retention: SnapshotRetentionConfig;\r\n  \r\n  /** Compression settings */\r\n  compression: SnapshotCompressionConfig;\r\n  \r\n  /** Encryption settings */\r\n  encryption?: SnapshotEncryptionConfig;\r\n}\r\n\r\nexport interface SnapshotScope {\r\n  /** Include agent states */\r\n  includeAgents: boolean;\r\n  agentFilter?: AgentFilter;\r\n  \r\n  /** Include task states */\r\n  includeTasks: boolean;\r\n  taskFilter?: TaskFilter;\r\n  \r\n  /** Include swarm states */\r\n  includeSwarms: boolean;\r\n  swarmFilter?: SwarmFilter;\r\n  \r\n  /** Include system state */\r\n  includeSystem: boolean;\r\n  systemComponents: string[];\r\n  \r\n  /** Include memory state */\r\n  includeMemory: boolean;\r\n  memoryPartitions: string[];\r\n  \r\n  /** Custom inclusions */\r\n  custom: Record<string, boolean>;\r\n}\r\n\r\nexport interface AgentFilter {\r\n  types: string[];\r\n  statuses: string[];\r\n  tags: string[];\r\n  exclude: AgentId[];\r\n}\r\n\r\nexport interface TaskFilter {\r\n  types: string[];\r\n  statuses: string[];\r\n  priorities: string[];\r\n  exclude: TaskId[];\r\n}\r\n\r\nexport interface SwarmFilter {\r\n  modes: string[];\r\n  strategies: string[];\r\n  statuses: string[];\r\n  exclude: SwarmId[];\r\n}\r\n\r\nexport interface SnapshotStorageConfig {\r\n  type: 'local' | 'remote' | 'distributed' | 'cloud';\r\n  location: string;\r\n  redundancy: number;\r\n  checksum: boolean;\r\n  versioning: boolean;\r\n}\r\n\r\nexport interface SnapshotRetentionConfig {\r\n  maxSnapshots: number;\r\n  maxAge: number;\r\n  strategy: 'fifo' | 'lru' | 'importance' | 'custom';\r\n  archiveOld: boolean;\r\n  archiveLocation?: string;\r\n}\r\n\r\nexport interface SnapshotCompressionConfig {\r\n  enabled: boolean;\r\n  algorithm: 'gzip' | 'brotli' | 'lz4' | 'zstd';\r\n  level: number;\r\n  threshold: number;\r\n}\r\n\r\nexport interface SnapshotEncryptionConfig {\r\n  enabled: boolean;\r\n  algorithm: 'aes-256-gcm' | 'chacha20-poly1305' | 'custom';\r\n  keyDerivation: 'pbkdf2' | 'scrypt' | 'argon2';\r\n  saltLength: number;\r\n}\r\n\r\nexport interface StateSnapshot {\r\n  /** Snapshot identification */\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  \r\n  /** Snapshot metadata */\r\n  timestamp: Date;\r\n  version: string;\r\n  checksum: string;\r\n  \r\n  /** Snapshot scope */\r\n  scope: SnapshotScope;\r\n  \r\n  /** Snapshot data */\r\n  agentStates: Record<string, AgentState>;\r\n  taskStates: Record<string, TaskResult>;\r\n  swarmStates: Record<string, SwarmState>;\r\n  systemState: SystemState;\r\n  memoryState: MemoryState;\r\n  customState: Record<string, unknown>;\r\n  \r\n  /** Snapshot statistics */\r\n  statistics: SnapshotStatistics;\r\n  \r\n  /** Storage information */\r\n  storage: SnapshotStorageInfo;\r\n  \r\n  /** Validation information */\r\n  validation: SnapshotValidation;\r\n}\r\n\r\nexport interface SwarmState {\r\n  id: SwarmId;\r\n  status: string;\r\n  progress: Record<string, unknown>;\r\n  metrics: Record<string, unknown>;\r\n  configuration: Record<string, unknown>;\r\n  timestamp: Date;\r\n}\r\n\r\nexport interface SystemState {\r\n  timestamp: Date;\r\n  version: string;\r\n  uptime: number;\r\n  resources: ResourceUsage;\r\n  services: ServiceState[];\r\n  configuration: Record<string, unknown>;\r\n  health: HealthState;\r\n}\r\n\r\nexport interface ServiceState {\r\n  name: string;\r\n  status: string;\r\n  health: string;\r\n  metrics: Record<string, unknown>;\r\n  configuration: Record<string, unknown>;\r\n  timestamp: Date;\r\n}\r\n\r\nexport interface HealthState {\r\n  overall: string;\r\n  components: Record<string, string>;\r\n  checks: HealthCheckResult[];\r\n  timestamp: Date;\r\n}\r\n\r\nexport interface HealthCheckResult {\r\n  name: string;\r\n  status: string;\r\n  message: string;\r\n  duration: number;\r\n  timestamp: Date;\r\n}\r\n\r\nexport interface MemoryState {\r\n  timestamp: Date;\r\n  partitions: Record<string, MemoryPartitionState>;\r\n  statistics: MemoryStatistics;\r\n  integrity: MemoryIntegrity;\r\n}\r\n\r\nexport interface MemoryPartitionState {\r\n  id: string;\r\n  type: string;\r\n  entries: number;\r\n  size: number;\r\n  lastModified: Date;\r\n  checksum: string;\r\n}\r\n\r\nexport interface MemoryStatistics {\r\n  totalEntries: number;\r\n  totalSize: number;\r\n  utilizationRate: number;\r\n  accessPatterns: Record<string, number>;\r\n  performance: Record<string, number>;\r\n}\r\n\r\nexport interface MemoryIntegrity {\r\n  checksumValid: boolean;\r\n  corruptedEntries: string[];\r\n  missingReferences: string[];\r\n  inconsistencies: string[];\r\n}\r\n\r\nexport interface SnapshotStatistics {\r\n  totalSize: number;\r\n  compressedSize: number;\r\n  compressionRatio: number;\r\n  entryCount: Record<string, number>;\r\n  captureTime: number;\r\n  validationTime: number;\r\n}\r\n\r\nexport interface SnapshotStorageInfo {\r\n  type: string;\r\n  location: string;\r\n  size: number;\r\n  checksum: string;\r\n  encrypted: boolean;\r\n  redundancy: number;\r\n  accessibility: string;\r\n}\r\n\r\nexport interface SnapshotValidation {\r\n  checksumValid: boolean;\r\n  structureValid: boolean;\r\n  dataIntegrity: boolean;\r\n  versionCompatible: boolean;\r\n  errors: string[];\r\n  warnings: string[];\r\n  timestamp: Date;\r\n}\r\n\r\nexport interface RollbackConfig {\r\n  /** Rollback identification */\r\n  id: string;\r\n  snapshotId: string;\r\n  reason: string;\r\n  \r\n  /** Rollback scope */\r\n  scope: RollbackScope;\r\n  \r\n  /** Rollback strategy */\r\n  strategy: RollbackStrategy;\r\n  \r\n  /** Safety settings */\r\n  safety: RollbackSafetyConfig;\r\n  \r\n  /** Notification settings */\r\n  notifications: NotificationConfig[];\r\n}\r\n\r\nexport interface RollbackScope {\r\n  includeAgents: boolean;\r\n  includeTasks: boolean;\r\n  includeSwarms: boolean;\r\n  includeSystem: boolean;\r\n  includeMemory: boolean;\r\n  \r\n  /** Partial rollback filters */\r\n  agentFilter?: AgentFilter;\r\n  taskFilter?: TaskFilter;\r\n  swarmFilter?: SwarmFilter;\r\n  \r\n  /** Exclude from rollback */\r\n  preserveData: string[];\r\n}\r\n\r\nexport interface RollbackStrategy {\r\n  type: 'immediate' | 'gradual' | 'selective' | 'custom';\r\n  stopRunningTasks: boolean;\r\n  backupCurrent: boolean;\r\n  validateBefore: boolean;\r\n  validateAfter: boolean;\r\n  rollbackTimeout: number;\r\n}\r\n\r\nexport interface RollbackSafetyConfig {\r\n  requireConfirmation: boolean;\r\n  maxRollbackTime: number;\r\n  emergencyStop: boolean;\r\n  backupRequired: boolean;\r\n  validationRequired: boolean;\r\n  approvalRequired: boolean;\r\n}\r\n\r\nexport interface RollbackResult {\r\n  /** Rollback identification */\r\n  id: string;\r\n  snapshotId: string;\r\n  timestamp: Date;\r\n  \r\n  /** Result status */\r\n  status: 'completed' | 'partial' | 'failed' | 'cancelled';\r\n  success: boolean;\r\n  \r\n  /** Rollback details */\r\n  scope: RollbackScope;\r\n  duration: number;\r\n  \r\n  /** Component results */\r\n  componentResults: ComponentRollbackResult[];\r\n  \r\n  /** Validation results */\r\n  validation: RollbackValidation;\r\n  \r\n  /** Data preservation */\r\n  preservedData: string[];\r\n  lostData: string[];\r\n  \r\n  /** Backup information */\r\n  backupSnapshot?: string;\r\n  \r\n  /** Error information */\r\n  errors: VerificationError[];\r\n  warnings: VerificationWarning[];\r\n  \r\n  /** Recovery information */\r\n  recoveryActions: string[];\r\n  nextSteps: string[];\r\n}\r\n\r\nexport interface ComponentRollbackResult {\r\n  component: string;\r\n  status: 'completed' | 'failed' | 'skipped';\r\n  duration: number;\r\n  itemsRolledBack: number;\r\n  itemsFailed: number;\r\n  errors: string[];\r\n}\r\n\r\nexport interface RollbackValidation {\r\n  preValidation: ValidationResult;\r\n  postValidation: ValidationResult;\r\n  dataIntegrity: boolean;\r\n  systemHealth: boolean;\r\n  functionalityPreserved: boolean;\r\n}\r\n\r\n// ===== UTILITY TYPES =====\r\n\r\nexport type VerificationCallback = (result: VerificationResult) => void | Promise<void>;\r\nexport type CheckpointCallback = (result: CheckpointResult) => void | Promise<void>;\r\nexport type ClaimValidationCallback = (result: ClaimValidationResult) => void | Promise<void>;\r\nexport type TestCompletionCallback = (result: IntegrationTestResult) => void | Promise<void>;\r\nexport type SnapshotCallback = (snapshot: StateSnapshot) => void | Promise<void>;\r\nexport type RollbackCallback = (result: RollbackResult) => void | Promise<void>;\r\n\r\n// ===== TYPE GUARDS =====\r\n\r\nexport function isTruthScore(obj: unknown): obj is TruthScore {\r\n  return (\r\n    typeof obj === 'object' &&\r\n    obj !== null &&\r\n    typeof (obj as TruthScore).score === 'number' &&\r\n    typeof (obj as TruthScore).components === 'object' &&\r\n    (obj as TruthScore).timestamp instanceof Date\r\n  );\r\n}\r\n\r\nexport function isVerificationResult(obj: unknown): obj is VerificationResult {\r\n  return (\r\n    typeof obj === 'object' &&\r\n    obj !== null &&\r\n    typeof (obj as VerificationResult).id === 'string' &&\r\n    typeof (obj as VerificationResult).status === 'string' &&\r\n    typeof (obj as VerificationResult).passed === 'boolean'\r\n  );\r\n}\r\n\r\nexport function isAgentClaim(obj: unknown): obj is AgentClaim {\r\n  return (\r\n    typeof obj === 'object' &&\r\n    obj !== null &&\r\n    typeof (obj as AgentClaim).id === 'string' &&\r\n    typeof (obj as AgentClaim).type === 'string' &&\r\n    (obj as AgentClaim).submittedAt instanceof Date\r\n  );\r\n}\r\n\r\nexport function isStateSnapshot(obj: unknown): obj is StateSnapshot {\r\n  return (\r\n    typeof obj === 'object' &&\r\n    obj !== null &&\r\n    typeof (obj as StateSnapshot).id === 'string' &&\r\n    (obj as StateSnapshot).timestamp instanceof Date &&\r\n    typeof (obj as StateSnapshot).checksum === 'string'\r\n  );\r\n}\r\n\r\n// ===== CONSTANTS =====\r\n\r\nexport const VERIFICATION_CONSTANTS = {\r\n  // Default thresholds\r\n  DEFAULT_TRUTH_THRESHOLD: 0.95,\r\n  DEFAULT_CONFIDENCE_LEVEL: 0.95,\r\n  DEFAULT_MIN_SAMPLE_SIZE: 30,\r\n  DEFAULT_MAX_ERROR_MARGIN: 0.05,\r\n  \r\n  // Timeouts\r\n  DEFAULT_VERIFICATION_TIMEOUT: 5 * 60 * 1000, // 5 minutes\r\n  DEFAULT_CHECKPOINT_TIMEOUT: 2 * 60 * 1000, // 2 minutes\r\n  DEFAULT_CLAIM_VALIDATION_TIMEOUT: 1 * 60 * 1000, // 1 minute\r\n  DEFAULT_TEST_TIMEOUT: 10 * 60 * 1000, // 10 minutes\r\n  DEFAULT_ROLLBACK_TIMEOUT: 3 * 60 * 1000, // 3 minutes\r\n  \r\n  // Retry limits\r\n  DEFAULT_RETRY_ATTEMPTS: 3,\r\n  MAX_RETRY_ATTEMPTS: 10,\r\n  \r\n  // Snapshot limits\r\n  DEFAULT_MAX_SNAPSHOTS: 100,\r\n  DEFAULT_SNAPSHOT_RETENTION_DAYS: 30,\r\n  DEFAULT_COMPRESSION_THRESHOLD: 1024 * 1024, // 1MB\r\n  \r\n  // Quality thresholds\r\n  MIN_TRUTH_SCORE: 0.0,\r\n  MAX_TRUTH_SCORE: 1.0,\r\n  HIGH_CONFIDENCE_THRESHOLD: 0.9,\r\n  MEDIUM_CONFIDENCE_THRESHOLD: 0.7,\r\n  LOW_CONFIDENCE_THRESHOLD: 0.5,\r\n  \r\n  // Resource limits\r\n  MAX_VERIFICATION_MEMORY: 512 * 1024 * 1024, // 512MB\r\n  MAX_SNAPSHOT_SIZE: 1024 * 1024 * 1024, // 1GB\r\n  MAX_TEST_DURATION: 60 * 60 * 1000, // 1 hour\r\n} as const;\r\n\r\nexport default {\r\n  VERIFICATION_CONSTANTS,\r\n  isTruthScore,\r\n  isVerificationResult,\r\n  isAgentClaim,\r\n  isStateSnapshot,\r\n};"],"names":["isTruthScore","obj","score","components","timestamp","Date","isVerificationResult","id","status","passed","isAgentClaim","type","submittedAt","isStateSnapshot","checksum","VERIFICATION_CONSTANTS","DEFAULT_TRUTH_THRESHOLD","DEFAULT_CONFIDENCE_LEVEL","DEFAULT_MIN_SAMPLE_SIZE","DEFAULT_MAX_ERROR_MARGIN","DEFAULT_VERIFICATION_TIMEOUT","DEFAULT_CHECKPOINT_TIMEOUT","DEFAULT_CLAIM_VALIDATION_TIMEOUT","DEFAULT_TEST_TIMEOUT","DEFAULT_ROLLBACK_TIMEOUT","DEFAULT_RETRY_ATTEMPTS","MAX_RETRY_ATTEMPTS","DEFAULT_MAX_SNAPSHOTS","DEFAULT_SNAPSHOT_RETENTION_DAYS","DEFAULT_COMPRESSION_THRESHOLD","MIN_TRUTH_SCORE","MAX_TRUTH_SCORE","HIGH_CONFIDENCE_THRESHOLD","MEDIUM_CONFIDENCE_THRESHOLD","LOW_CONFIDENCE_THRESHOLD","MAX_VERIFICATION_MEMORY","MAX_SNAPSHOT_SIZE","MAX_TEST_DURATION"],"mappings":"AAs/BA,OAAO,SAASA,aAAaC,GAAY;IACvC,OACE,OAAOA,QAAQ,YACfA,QAAQ,QACR,OAAO,AAACA,IAAmBC,KAAK,KAAK,YACrC,OAAO,AAACD,IAAmBE,UAAU,KAAK,YAC1C,AAACF,IAAmBG,SAAS,YAAYC;AAE7C;AAEA,OAAO,SAASC,qBAAqBL,GAAY;IAC/C,OACE,OAAOA,QAAQ,YACfA,QAAQ,QACR,OAAO,AAACA,IAA2BM,EAAE,KAAK,YAC1C,OAAO,AAACN,IAA2BO,MAAM,KAAK,YAC9C,OAAO,AAACP,IAA2BQ,MAAM,KAAK;AAElD;AAEA,OAAO,SAASC,aAAaT,GAAY;IACvC,OACE,OAAOA,QAAQ,YACfA,QAAQ,QACR,OAAO,AAACA,IAAmBM,EAAE,KAAK,YAClC,OAAO,AAACN,IAAmBU,IAAI,KAAK,YACpC,AAACV,IAAmBW,WAAW,YAAYP;AAE/C;AAEA,OAAO,SAASQ,gBAAgBZ,GAAY;IAC1C,OACE,OAAOA,QAAQ,YACfA,QAAQ,QACR,OAAO,AAACA,IAAsBM,EAAE,KAAK,YACrC,AAACN,IAAsBG,SAAS,YAAYC,QAC5C,OAAO,AAACJ,IAAsBa,QAAQ,KAAK;AAE/C;AAIA,OAAO,MAAMC,yBAAyB;IAEpCC,yBAAyB;IACzBC,0BAA0B;IAC1BC,yBAAyB;IACzBC,0BAA0B;IAG1BC,8BAA8B,IAAI,KAAK;IACvCC,4BAA4B,IAAI,KAAK;IACrCC,kCAAkC,IAAI,KAAK;IAC3CC,sBAAsB,KAAK,KAAK;IAChCC,0BAA0B,IAAI,KAAK;IAGnCC,wBAAwB;IACxBC,oBAAoB;IAGpBC,uBAAuB;IACvBC,iCAAiC;IACjCC,+BAA+B,OAAO;IAGtCC,iBAAiB;IACjBC,iBAAiB;IACjBC,2BAA2B;IAC3BC,6BAA6B;IAC7BC,0BAA0B;IAG1BC,yBAAyB,MAAM,OAAO;IACtCC,mBAAmB,OAAO,OAAO;IACjCC,mBAAmB,KAAK,KAAK;AAC/B,EAAW;AAEX,eAAe;IACbtB;IACAf;IACAM;IACAI;IACAG;AACF,EAAE"}