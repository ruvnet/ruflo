{"version":3,"sources":["../../../src/cli/simple-mcp.ts"],"sourcesContent":["/**\r\n * Simple MCP command implementation for Node.js compatibility\r\n */\r\n\r\nimport { Command } from './commander-fix.js';\r\nimport http from 'http';\r\n\r\nfunction printSuccess(message: string) {\r\n  console.log(`‚úÖ ${message}`);\r\n}\r\n\r\nfunction printError(message: string) {\r\n  console.error(`‚ùå Error: ${message}`);\r\n}\r\n\r\n// Check if MCP server is running\r\nasync function checkMCPStatus(host: string, port: number): Promise<boolean> {\r\n  return new Promise((resolve) => {\r\n    const options = {\r\n      hostname: host,\r\n      port: port,\r\n      path: '/health',\r\n      method: 'GET',\r\n      timeout: 2000,\r\n    };\r\n\r\n    const req = http.request(options, (res) => {\r\n      resolve(res.statusCode === 200 || res.statusCode === 404);\r\n    });\r\n\r\n    req.on('error', () => {\r\n      resolve(false);\r\n    });\r\n\r\n    req.on('timeout', () => {\r\n      req.destroy();\r\n      resolve(false);\r\n    });\r\n\r\n    req.end();\r\n  });\r\n}\r\n\r\nexport function createMCPCommand() {\r\n  const mcpCmd = new Command('mcp').description('Manage MCP server and tools').action(() => {\r\n    printSuccess('MCP Server Management');\r\n    console.log('\\nüåê Available MCP commands:');\r\n    console.log('  ‚Ä¢ mcp start - Start the MCP server');\r\n    console.log('  ‚Ä¢ mcp status - Show MCP server status');\r\n    console.log('  ‚Ä¢ mcp tools - List available MCP tools');\r\n    console.log('  ‚Ä¢ mcp stop - Stop the MCP server');\r\n    console.log('\\nüí° Use \"mcp start --port 3001\" to use a different port');\r\n  });\r\n\r\n  mcpCmd\r\n    .command('start')\r\n    .description('Start the MCP server')\r\n    .option('--port <port>', 'Port for MCP server', '3000')\r\n    .option('--host <host>', 'Host for MCP server', 'localhost')\r\n    .option('--transport <transport>', 'Transport type (stdio, http)', 'http')\r\n    .action(async (options) => {\r\n      // This is handled by the actual MCP implementation\r\n      console.log('Starting MCP server...');\r\n      console.log('(This command is handled by the MCP module)');\r\n    });\r\n\r\n  mcpCmd\r\n    .command('status')\r\n    .description('Show MCP server status')\r\n    .option('--port <port>', 'Port to check', '3000')\r\n    .option('--host <host>', 'Host to check', 'localhost')\r\n    .action(async (options) => {\r\n      printSuccess('MCP Server Status:');\r\n\r\n      const host = options.host || 'localhost';\r\n      const port = parseInt(options.port) || 3000;\r\n\r\n      // Check if server is actually running\r\n      const isRunning = await checkMCPStatus(host, port);\r\n\r\n      if (isRunning) {\r\n        console.log('üü¢ Status: Running');\r\n        console.log(`üìç Address: ${host}:${port}`);\r\n        console.log('üîê Authentication: Disabled');\r\n        console.log('üîß Tools: System, Health, Tools');\r\n        console.log('üì° Transport: http');\r\n        console.log('\\nüí° Use \"mcp tools\" to see available tools');\r\n      } else {\r\n        console.log('üü° Status: Not running (use \"mcp start\" to start)');\r\n        console.log(`üìç Checked address: ${host}:${port}`);\r\n        console.log('üîê Authentication: Disabled');\r\n        console.log('üîß Tools: System, Health, Tools (when running)');\r\n      }\r\n    });\r\n\r\n  mcpCmd\r\n    .command('tools')\r\n    .description('List available MCP tools')\r\n    .action(() => {\r\n      printSuccess('Available MCP Tools:');\r\n      console.log('\\nüìä System Tools:');\r\n      console.log('  ‚Ä¢ system/info - Get system information');\r\n      console.log('  ‚Ä¢ system/health - Get system health status');\r\n      console.log('\\nüîß Tool Management:');\r\n      console.log('  ‚Ä¢ tools/list - List all available tools');\r\n      console.log('  ‚Ä¢ tools/schema - Get schema for a specific tool');\r\n      console.log('\\nüí° Note: Additional tools available when orchestrator is running');\r\n    });\r\n\r\n  mcpCmd\r\n    .command('stop')\r\n    .description('Stop the MCP server')\r\n    .action(() => {\r\n      printSuccess('Stopping MCP server...');\r\n      console.log('üõë MCP server stop requested');\r\n      console.log('üí° Use Ctrl+C in the terminal running \"mcp start\" to stop');\r\n    });\r\n\r\n  return mcpCmd;\r\n}\r\n"],"names":["Command","http","printSuccess","message","console","log","printError","error","checkMCPStatus","host","port","Promise","resolve","options","hostname","path","method","timeout","req","request","res","statusCode","on","destroy","end","createMCPCommand","mcpCmd","description","action","command","option","parseInt","isRunning"],"mappings":"AAIA,SAASA,OAAO,QAAQ,qBAAqB;AAC7C,OAAOC,UAAU,OAAO;AAExB,SAASC,aAAaC,OAAe;IACnCC,QAAQC,GAAG,CAAC,CAAC,EAAE,EAAEF,SAAS;AAC5B;AAEA,SAASG,WAAWH,OAAe;IACjCC,QAAQG,KAAK,CAAC,CAAC,SAAS,EAAEJ,SAAS;AACrC;AAGA,eAAeK,eAAeC,IAAY,EAAEC,IAAY;IACtD,OAAO,IAAIC,QAAQ,CAACC;QAClB,MAAMC,UAAU;YACdC,UAAUL;YACVC,MAAMA;YACNK,MAAM;YACNC,QAAQ;YACRC,SAAS;QACX;QAEA,MAAMC,MAAMjB,KAAKkB,OAAO,CAACN,SAAS,CAACO;YACjCR,QAAQQ,IAAIC,UAAU,KAAK,OAAOD,IAAIC,UAAU,KAAK;QACvD;QAEAH,IAAII,EAAE,CAAC,SAAS;YACdV,QAAQ;QACV;QAEAM,IAAII,EAAE,CAAC,WAAW;YAChBJ,IAAIK,OAAO;YACXX,QAAQ;QACV;QAEAM,IAAIM,GAAG;IACT;AACF;AAEA,OAAO,SAASC;IACd,MAAMC,SAAS,IAAI1B,QAAQ,OAAO2B,WAAW,CAAC,+BAA+BC,MAAM,CAAC;QAClF1B,aAAa;QACbE,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;IACd;IAEAqB,OACGG,OAAO,CAAC,SACRF,WAAW,CAAC,wBACZG,MAAM,CAAC,iBAAiB,uBAAuB,QAC/CA,MAAM,CAAC,iBAAiB,uBAAuB,aAC/CA,MAAM,CAAC,2BAA2B,gCAAgC,QAClEF,MAAM,CAAC,OAAOf;QAEbT,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;IACd;IAEFqB,OACGG,OAAO,CAAC,UACRF,WAAW,CAAC,0BACZG,MAAM,CAAC,iBAAiB,iBAAiB,QACzCA,MAAM,CAAC,iBAAiB,iBAAiB,aACzCF,MAAM,CAAC,OAAOf;QACbX,aAAa;QAEb,MAAMO,OAAOI,QAAQJ,IAAI,IAAI;QAC7B,MAAMC,OAAOqB,SAASlB,QAAQH,IAAI,KAAK;QAGvC,MAAMsB,YAAY,MAAMxB,eAAeC,MAAMC;QAE7C,IAAIsB,WAAW;YACb5B,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC,CAAC,YAAY,EAAEI,KAAK,CAAC,EAAEC,MAAM;YACzCN,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC;QACd,OAAO;YACLD,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC,CAAC,oBAAoB,EAAEI,KAAK,CAAC,EAAEC,MAAM;YACjDN,QAAQC,GAAG,CAAC;YACZD,QAAQC,GAAG,CAAC;QACd;IACF;IAEFqB,OACGG,OAAO,CAAC,SACRF,WAAW,CAAC,4BACZC,MAAM,CAAC;QACN1B,aAAa;QACbE,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;IACd;IAEFqB,OACGG,OAAO,CAAC,QACRF,WAAW,CAAC,uBACZC,MAAM,CAAC;QACN1B,aAAa;QACbE,QAAQC,GAAG,CAAC;QACZD,QAAQC,GAAG,CAAC;IACd;IAEF,OAAOqB;AACT"}