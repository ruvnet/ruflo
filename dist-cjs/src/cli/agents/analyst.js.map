{"version":3,"sources":["../../../../src/cli/agents/analyst.ts"],"sourcesContent":["/**\r\n * Analyst Agent - Specialized in data analysis and performance optimization\r\n */\r\n\r\nimport { BaseAgent } from './base-agent.js';\r\nimport type {\r\n  AgentCapabilities,\r\n  AgentConfig,\r\n  AgentEnvironment,\r\n  TaskDefinition,\r\n} from '../../swarm/types.js';\r\nimport type { ILogger } from '../../core/logger.js';\r\nimport type { IEventBus } from '../../core/event-bus.js';\r\nimport type { DistributedMemorySystem } from '../../memory/distributed-memory.js';\r\n\r\n// Type definitions for analysis\r\ninterface AnalysisVisualization {\r\n  type: string;\r\n  title: string;\r\n  description: string;\r\n  dataPoints: number;\r\n  interactive: boolean;\r\n}\r\n\r\ninterface AnalysisBottleneck {\r\n  component: string;\r\n  impact: string;\r\n  description: string;\r\n  recommendation: string;\r\n}\r\n\r\ninterface AnalysisAnomaly {\r\n  id: string;\r\n  timestamp: Date;\r\n  severity: string;\r\n  score: number;\r\n  description: string;\r\n  features: string[];\r\n}\r\n\r\ninterface AnalysisTrend {\r\n  metric: string;\r\n  direction: string;\r\n  slope: number;\r\n  significance: number;\r\n  period: string;\r\n}\r\n\r\ninterface QualityIssue {\r\n  category: string;\r\n  severity: string;\r\n  description: string;\r\n  impact: string;\r\n}\r\n\r\ninterface DataAnalysis {\r\n  dataset: {\r\n    name: string;\r\n    size: number;\r\n    columns: string[];\r\n    types: Record<string, string>;\r\n  };\r\n  analysisType: string;\r\n  summary: {\r\n    rowCount: number;\r\n    columnCount: number;\r\n    missingValues: number;\r\n    duplicateRows: number;\r\n    outliers: number;\r\n  };\r\n  descriptiveStats: Record<string, any>;\r\n  correlations: Record<string, any>;\r\n  distributions: Record<string, any>;\r\n  insights: string[];\r\n  recommendations: string[];\r\n  visualizations: AnalysisVisualization[];\r\n  confidence: number;\r\n  methodology: string;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface PerformanceAnalysis {\r\n  system?: string;\r\n  timeframe?: string;\r\n  metrics: Record<string, any>;\r\n  benchmarks?: Record<string, any>;\r\n  bottlenecks: AnalysisBottleneck[];\r\n  anomalies: AnalysisAnomaly[];\r\n  trends: AnalysisTrend[];\r\n  insights: string[];\r\n  recommendations: string[];\r\n  visualizations: AnalysisVisualization[];\r\n  optimizationPotential: number;\r\n  projectedImprovement: number;\r\n  confidence: number;\r\n  timestamp: Date;\r\n  alertsTriggered?: any[];\r\n  slaCompliance?: {\r\n    availability: number;\r\n    responseTime: number;\r\n    throughput: number;\r\n  };\r\n  comparison?: {\r\n    baseline: string;\r\n    improvements: string[];\r\n    regressions: string[];\r\n  };\r\n}\r\n\r\ninterface QualityAnalysis {\r\n  codeQuality: {\r\n    complexity: number;\r\n    maintainability: number;\r\n    testCoverage: number;\r\n    technicalDebt: number;\r\n  };\r\n  issues: QualityIssue[];\r\n  patterns: string[];\r\n  recommendations: string[];\r\n  visualizations: AnalysisVisualization[];\r\n  overallScore: number;\r\n  confidence: number;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface StatisticalAnalysis {\r\n  tests: Record<string, any>;\r\n  hypothesis: string;\r\n  alpha: number;\r\n  results: Record<string, any>;\r\n  interpretation: Record<string, any>;\r\n  assumptions: {\r\n    normality: boolean;\r\n    independence: boolean;\r\n    homogeneity: boolean;\r\n  };\r\n  powerAnalysis: {\r\n    power: number;\r\n    sampleSize: number;\r\n    effectSize: number;\r\n  };\r\n  conclusions: string[];\r\n  limitations: string[];\r\n  timestamp: Date;\r\n}\r\n\r\ninterface VisualizationResult {\r\n  chartType: string;\r\n  style: string;\r\n  interactive: boolean;\r\n  charts: any[];\r\n  dashboard: any;\r\n  insights: string[];\r\n  recommendations: string[];\r\n  exportFormats: string[];\r\n  accessibility: {\r\n    colorBlind: boolean;\r\n    screenReader: boolean;\r\n    highContrast: boolean;\r\n  };\r\n  timestamp: Date;\r\n}\r\n\r\ninterface AnomalyDetectionResult {\r\n  method: string;\r\n  sensitivity: number;\r\n  threshold: string | number;\r\n  detected: AnalysisAnomaly[];\r\n  summary: {\r\n    total: number;\r\n    severity: {\r\n      low: number;\r\n      medium: number;\r\n      high: number;\r\n      critical: number;\r\n    };\r\n  };\r\n  patterns: string[];\r\n  recommendations: string[];\r\n  falsePositiveRate: number;\r\n  confidence: number;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface TrendAnalysisResult {\r\n  timeframe: string;\r\n  metrics: string[];\r\n  trends: AnalysisTrend[];\r\n  correlations: Record<string, number>;\r\n  patterns: {\r\n    seasonal: boolean;\r\n    cyclical: boolean;\r\n    trending: boolean;\r\n  };\r\n  forecasts: any[];\r\n  insights: string[];\r\n  recommendations: string[];\r\n  confidence: number;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface PredictiveModelResult {\r\n  algorithm: string;\r\n  features: string[];\r\n  target: string;\r\n  performance: {\r\n    accuracy: number;\r\n    precision: number;\r\n    recall: number;\r\n    f1Score: number;\r\n    rmse?: number;\r\n    mse?: number;\r\n    auc?: number;\r\n  };\r\n  validation: {\r\n    method: string;\r\n    splits: number;\r\n    crossValidation: any;\r\n  };\r\n  predictions: any[];\r\n  featureImportance: Record<string, number>;\r\n  insights: string[];\r\n  recommendations: string[];\r\n  modelMetadata: {\r\n    parameters: Record<string, any>;\r\n    training: {\r\n      epochs: number;\r\n      convergence: boolean;\r\n      finalLoss: number;\r\n    };\r\n  };\r\n  confidence: number;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface BusinessIntelligenceResult {\r\n  scope: string;\r\n  timeframe: string;\r\n  kpis: Record<string, any>;\r\n  trends: AnalysisTrend[];\r\n  insights: string[];\r\n  recommendations: string[];\r\n  actionItems: string[];\r\n  riskFactors: string[];\r\n  opportunities: string[];\r\n  marketAnalysis: {\r\n    competitors: any[];\r\n    positioning: string;\r\n    threats: string[];\r\n    opportunities: string[];\r\n  };\r\n  financialProjections: {\r\n    revenue: any[];\r\n    costs: any[];\r\n    profitability: any[];\r\n  };\r\n  confidence: number;\r\n  timestamp: Date;\r\n}\r\n\r\nexport class AnalystAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: AgentEnvironment,\r\n    logger: ILogger,\r\n    eventBus: IEventBus,\r\n    memory: DistributedMemorySystem,\r\n  ) {\r\n    super(id, 'analyst', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      codeGeneration: false,\r\n      codeReview: true,\r\n      testing: false,\r\n      documentation: true,\r\n      research: false,\r\n      analysis: true,\r\n      webSearch: false,\r\n      apiIntegration: true,\r\n      fileSystem: true,\r\n      terminalAccess: false,\r\n      languages: ['python', 'r', 'sql', 'typescript', 'javascript', 'julia', 'scala', 'matlab'],\r\n      frameworks: [\r\n        'pandas',\r\n        'numpy',\r\n        'matplotlib',\r\n        'seaborn',\r\n        'plotly',\r\n        'dask',\r\n        'spark',\r\n        'tensorflow',\r\n        'pytorch',\r\n        'scikit-learn',\r\n        'jupyter',\r\n        'tableau',\r\n      ],\r\n      domains: [\r\n        'data-analysis',\r\n        'statistical-analysis',\r\n        'performance-analysis',\r\n        'business-intelligence',\r\n        'data-visualization',\r\n        'predictive-modeling',\r\n        'machine-learning',\r\n        'data-mining',\r\n        'financial-analysis',\r\n        'market-research',\r\n        'operations-research',\r\n        'quality-assurance',\r\n      ],\r\n      tools: [\r\n        'data-processor',\r\n        'statistical-analyzer',\r\n        'chart-generator',\r\n        'report-builder',\r\n        'dashboard-creator',\r\n        'ml-pipeline',\r\n        'data-validator',\r\n        'performance-profiler',\r\n        'anomaly-detector',\r\n        'trend-analyzer',\r\n      ],\r\n      maxConcurrentTasks: 4,\r\n      maxMemoryUsage: 2048 * 1024 * 1024, // 2GB\r\n      maxExecutionTime: 1200000, // 20 minutes\r\n      reliability: 0.9,\r\n      speed: 0.8,\r\n      quality: 0.95,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.75,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 15,\r\n      maxConcurrentTasks: 4,\r\n      timeoutThreshold: 1200000,\r\n      reportingInterval: 45000,\r\n      heartbeatInterval: 12000,\r\n      permissions: ['file-read', 'file-write', 'data-access', 'database-read', 'api-access'],\r\n      trustedAgents: [],\r\n      expertise: {\r\n        'data-analysis': 0.95,\r\n        'statistical-analysis': 0.92,\r\n        visualization: 0.88,\r\n        'performance-analysis': 0.9,\r\n        'predictive-modeling': 0.85,\r\n        'business-intelligence': 0.83,\r\n      },\r\n      preferences: {\r\n        outputFormat: 'detailed',\r\n        includeCharts: true,\r\n        statisticalTests: 'comprehensive',\r\n        confidenceLevel: 0.95,\r\n        visualStyle: 'professional',\r\n      },\r\n    };\r\n  }\r\n\r\n  override async executeTask(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Analyst executing task', {\r\n      agentId: this.id,\r\n      taskType: task.type,\r\n      taskId: task.id,\r\n    });\r\n\r\n    try {\r\n      switch (task.type) {\r\n        case 'data-analysis':\r\n          return await this.analyzeData(task);\r\n        case 'performance-analysis':\r\n          return await this.analyzePerformance(task);\r\n        case 'statistical-analysis':\r\n          return await this.performStatisticalAnalysis(task);\r\n        case 'visualization':\r\n          return await this.createVisualization(task);\r\n        case 'predictive-modeling':\r\n          return await this.buildPredictiveModel(task);\r\n        case 'anomaly-detection':\r\n          return await this.detectAnomalies(task);\r\n        case 'trend-analysis':\r\n          return await this.analyzeTrends(task);\r\n        case 'business-intelligence':\r\n          return await this.generateBusinessIntelligence(task);\r\n        case 'quality-analysis':\r\n          return await this.analyzeQuality(task);\r\n        default:\r\n          return await this.performGeneralAnalysis(task);\r\n      }\r\n    } catch (error) {\r\n      this.logger.error('Analysis task failed', {\r\n        agentId: this.id,\r\n        taskId: task.id,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async analyzeData(task: TaskDefinition): Promise<any> {\r\n    const dataset = task.context?.dataset;\r\n    const analysisType = task.context?.type || 'exploratory';\r\n    const metrics = task.context?.metrics || ['central_tendency', 'distribution', 'correlation'];\r\n    const outputFormat = task.context?.format || 'report';\r\n\r\n    this.logger.info('Analyzing data', {\r\n      analysisType,\r\n      metrics,\r\n      outputFormat,\r\n    });\r\n\r\n    const analysis: DataAnalysis = {\r\n      dataset: {\r\n        name: dataset?.name || 'Unknown',\r\n        size: dataset?.size || 0,\r\n        columns: dataset?.columns || [],\r\n        types: dataset?.types || {},\r\n      },\r\n      analysisType,\r\n      summary: {\r\n        rowCount: 0,\r\n        columnCount: 0,\r\n        missingValues: 0,\r\n        duplicateRows: 0,\r\n        outliers: 0,\r\n      },\r\n      descriptiveStats: {},\r\n      correlations: {},\r\n      distributions: {},\r\n      insights: [] as string[],\r\n      recommendations: [] as string[],\r\n      visualizations: [] as AnalysisVisualization[],\r\n      confidence: 0,\r\n      methodology: 'statistical-analysis',\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Store analysis progress\r\n    await this.memory.store(\r\n      `analysis:${task.id}:progress`,\r\n      {\r\n        status: 'analyzing',\r\n        startTime: new Date(),\r\n        analysisType,\r\n      },\r\n      {\r\n        type: 'analysis-progress',\r\n        tags: ['analysis', this.id, analysisType],\r\n        partition: 'tasks',\r\n      },\r\n    );\r\n\r\n    // Simulate data analysis\r\n    await this.delay(3000);\r\n\r\n    analysis.summary = {\r\n      rowCount: 10000,\r\n      columnCount: 15,\r\n      missingValues: 125,\r\n      duplicateRows: 23,\r\n      outliers: 47,\r\n    };\r\n\r\n    analysis.insights = [\r\n      'Strong positive correlation between variables A and B (r=0.85)',\r\n      'Variable C shows seasonal patterns with 3-month cycles',\r\n      'Data quality is high with only 1.25% missing values',\r\n      'Outliers concentrated in Q4 periods, likely due to seasonal effects',\r\n    ];\r\n\r\n    analysis.recommendations = [\r\n      'Consider log transformation for skewed variables',\r\n      'Implement imputation strategy for missing values',\r\n      'Investigate Q4 outliers for business context',\r\n      'Add more recent data to improve model accuracy',\r\n    ];\r\n\r\n    analysis.confidence = 0.88;\r\n\r\n    // Store final results\r\n    await this.memory.store(`analysis:${task.id}:results`, analysis, {\r\n      type: 'analysis-results',\r\n      tags: ['analysis', 'completed', this.id, analysisType],\r\n      partition: 'tasks',\r\n    });\r\n\r\n    return analysis;\r\n  }\r\n\r\n  private async analyzePerformance(task: TaskDefinition): Promise<any> {\r\n    const system = task.context?.system;\r\n    const metrics = task.context?.metrics || ['response_time', 'throughput', 'error_rate'];\r\n    const timeframe = task.context?.timeframe || '24h';\r\n    const baseline = task.context?.baseline;\r\n\r\n    this.logger.info('Analyzing performance', {\r\n      system,\r\n      metrics,\r\n      timeframe,\r\n    });\r\n\r\n    const performance: PerformanceAnalysis = {\r\n      system,\r\n      timeframe,\r\n      metrics: {},\r\n      benchmarks: {},\r\n      bottlenecks: [] as AnalysisBottleneck[],\r\n      trends: [] as AnalysisTrend[],\r\n      recommendations: [] as string[],\r\n      alertsTriggered: [] as any[],\r\n      slaCompliance: {\r\n        availability: 0,\r\n        responseTime: 0,\r\n        throughput: 0,\r\n      },\r\n      comparison: {\r\n        baseline: baseline || 'previous_week',\r\n        improvements: [] as string[],\r\n        regressions: [] as string[],\r\n      },\r\n      timestamp: new Date(),\r\n      anomalies: [] as AnalysisAnomaly[],\r\n      insights: [] as string[],\r\n      visualizations: [] as AnalysisVisualization[],\r\n      optimizationPotential: 0,\r\n      projectedImprovement: 0,\r\n      confidence: 0,\r\n    };\r\n\r\n    // Simulate performance analysis\r\n    await this.delay(2500);\r\n\r\n    performance.metrics = {\r\n      averageResponseTime: 245, // ms\r\n      p95ResponseTime: 520,\r\n      p99ResponseTime: 1200,\r\n      throughput: 1250, // requests/min\r\n      errorRate: 0.03, // 3%\r\n      availability: 99.85, // %\r\n    };\r\n\r\n    performance.bottlenecks = [\r\n      {\r\n        component: 'Database queries',\r\n        impact: 'high',\r\n        description: 'N+1 query pattern causing 40% performance degradation',\r\n        recommendation: 'Implement query optimization and caching',\r\n      },\r\n      {\r\n        component: 'Memory allocation',\r\n        impact: 'medium',\r\n        description: 'Large object creation in hot path',\r\n        recommendation: 'Use object pooling or lazy initialization',\r\n      },\r\n    ];\r\n\r\n    performance.slaCompliance = {\r\n      availability: 99.85,\r\n      responseTime: 92.3,\r\n      throughput: 103.5,\r\n    };\r\n\r\n    return performance;\r\n  }\r\n\r\n  private async performStatisticalAnalysis(task: TaskDefinition): Promise<StatisticalAnalysis> {\r\n    const data = task.context?.data;\r\n    const tests = task.context?.tests || ['normality', 'correlation', 'significance'];\r\n    const alpha = task.context?.alpha || 0.05;\r\n    const hypothesis = task.context?.hypothesis;\r\n\r\n    this.logger.info('Performing statistical analysis', {\r\n      tests,\r\n      alpha,\r\n      hypothesis,\r\n    });\r\n\r\n    const statistics: StatisticalAnalysis = {\r\n      tests: {},\r\n      hypothesis: hypothesis || 'no_hypothesis',\r\n      alpha,\r\n      results: {},\r\n      interpretation: {},\r\n      assumptions: {\r\n        normality: false,\r\n        independence: false,\r\n        homogeneity: false,\r\n      },\r\n      powerAnalysis: {\r\n        power: 0,\r\n        sampleSize: 0,\r\n        effectSize: 0,\r\n      },\r\n      conclusions: [] as string[],\r\n      limitations: [] as string[],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate statistical analysis\r\n    await this.delay(2000);\r\n\r\n    statistics.results = {\r\n      normalityTest: {\r\n        statistic: 0.923,\r\n        pValue: 0.041,\r\n        significant: true,\r\n        interpretation: 'Data deviates significantly from normal distribution',\r\n      },\r\n      correlationTest: {\r\n        coefficient: 0.756,\r\n        pValue: 0.002,\r\n        significant: true,\r\n        interpretation: 'Strong positive correlation detected',\r\n      },\r\n    };\r\n\r\n    statistics.conclusions.push(\r\n      'Null hypothesis rejected at Î± = 0.05 level',\r\n      \"Effect size is large (Cohen's d = 0.8)\",\r\n      'Results are statistically and practically significant',\r\n    );\r\n\r\n    return statistics;\r\n  }\r\n\r\n  private async createVisualization(task: TaskDefinition): Promise<VisualizationResult> {\r\n    const data = task.context?.data;\r\n    const chartType = task.context?.type || 'auto';\r\n    const style = task.context?.style || 'professional';\r\n    const interactive = task.context?.interactive || false;\r\n\r\n    this.logger.info('Creating visualization', {\r\n      chartType,\r\n      style,\r\n      interactive,\r\n    });\r\n\r\n    const visualization: VisualizationResult = {\r\n      chartType,\r\n      style,\r\n      interactive,\r\n      charts: [] as any[],\r\n      dashboard: null,\r\n      insights: [] as string[],\r\n      recommendations: [] as string[],\r\n      exportFormats: ['png', 'svg', 'pdf', 'html'],\r\n      accessibility: {\r\n        colorBlind: true,\r\n        screenReader: true,\r\n        highContrast: false,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate visualization creation\r\n    await this.delay(1500);\r\n\r\n    visualization.charts.push(\r\n      {\r\n        type: 'line',\r\n        title: 'Trend Analysis Over Time',\r\n        description: 'Shows temporal patterns in the data',\r\n        dataPoints: 100,\r\n        interactive: true,\r\n      },\r\n      {\r\n        type: 'scatter',\r\n        title: 'Correlation Matrix',\r\n        description: 'Displays relationships between variables',\r\n        dataPoints: 500,\r\n        interactive: false,\r\n      },\r\n    );\r\n\r\n    visualization.insights.push(\r\n      'Clear upward trend visible in Q3-Q4',\r\n      'Seasonal patterns repeat every 3 months',\r\n      'Strong correlation between variables X and Y',\r\n    );\r\n\r\n    return visualization;\r\n  }\r\n\r\n  private async buildPredictiveModel(task: TaskDefinition): Promise<PredictiveModelResult> {\r\n    const data = task.context?.data;\r\n    const target = task.context?.target;\r\n    const algorithm = task.context?.algorithm || 'auto';\r\n    const validation = task.context?.validation || 'k-fold';\r\n\r\n    this.logger.info('Building predictive model', {\r\n      target,\r\n      algorithm,\r\n      validation,\r\n    });\r\n\r\n    const model: PredictiveModelResult = {\r\n      algorithm: algorithm === 'auto' ? 'random_forest' : algorithm,\r\n      features: [],\r\n      target: target || 'default_target',\r\n      performance: {\r\n        accuracy: 0,\r\n        precision: 0,\r\n        recall: 0,\r\n        f1Score: 0,\r\n        rmse: 0,\r\n        mse: 0,\r\n      },\r\n      validation: {\r\n        method: validation,\r\n        splits: 5,\r\n        crossValidation: {\r\n          folds: 5,\r\n          avgScore: 0,\r\n          stdDev: 0,\r\n        },\r\n      },\r\n      predictions: [],\r\n      featureImportance: {},\r\n      insights: [],\r\n      recommendations: [],\r\n      modelMetadata: {\r\n        parameters: {},\r\n        training: {\r\n          epochs: 100,\r\n          convergence: true,\r\n          finalLoss: 0.15,\r\n        },\r\n      },\r\n      confidence: 0,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate model building\r\n    await this.delay(4000);\r\n\r\n    model.performance = {\r\n      accuracy: 0.87,\r\n      precision: 0.85,\r\n      recall: 0.89,\r\n      f1Score: 0.87,\r\n      auc: 0.92,\r\n      rmse: 2.34,\r\n    };\r\n\r\n    model.featureImportance = {\r\n      feature_1: 0.35,\r\n      feature_2: 0.28,\r\n      feature_3: 0.22,\r\n      feature_4: 0.15,\r\n    };\r\n\r\n    return model;\r\n  }\r\n\r\n  private async detectAnomalies(task: TaskDefinition): Promise<AnomalyDetectionResult> {\r\n    const data = task.context?.data;\r\n    const method = task.context?.method || 'isolation_forest';\r\n    const sensitivity = task.context?.sensitivity || 0.1;\r\n    const threshold = task.context?.threshold;\r\n\r\n    this.logger.info('Detecting anomalies', {\r\n      method,\r\n      sensitivity,\r\n    });\r\n\r\n    const anomalies: AnomalyDetectionResult = {\r\n      method,\r\n      sensitivity,\r\n      threshold: threshold || 'auto',\r\n      detected: [] as any as any[],\r\n      summary: {\r\n        total: 0,\r\n        severity: {\r\n          low: 0,\r\n          medium: 0,\r\n          high: 0,\r\n          critical: 0,\r\n        },\r\n      },\r\n      patterns: [] as any as string[],\r\n      recommendations: [] as any as string[],\r\n      falsePositiveRate: 0,\r\n      confidence: 0,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate anomaly detection\r\n    await this.delay(2000);\r\n\r\n    (anomalies.detected as any).push(\r\n      {\r\n        id: 'anom_001',\r\n        timestamp: new Date('2024-01-15'),\r\n        severity: 'high',\r\n        score: 0.95,\r\n        description: 'Unusual spike in traffic during off-peak hours',\r\n        features: ['traffic_volume', 'time_of_day'],\r\n      },\r\n      {\r\n        id: 'anom_002',\r\n        timestamp: new Date('2024-01-16'),\r\n        severity: 'medium',\r\n        score: 0.72,\r\n        description: 'Abnormal response time pattern',\r\n        features: ['response_time', 'request_size'],\r\n      },\r\n    );\r\n\r\n    anomalies.summary = {\r\n      total: 15,\r\n      severity: {\r\n        low: 8,\r\n        medium: 4,\r\n        high: 2,\r\n        critical: 1,\r\n      },\r\n    };\r\n\r\n    anomalies.confidence = 0.83;\r\n\r\n    return anomalies;\r\n  }\r\n\r\n  private async analyzeTrends(task: TaskDefinition): Promise<TrendAnalysisResult> {\r\n    const data = task.context?.data;\r\n    const timeframe = task.context?.timeframe || '3-months';\r\n    const granularity = task.context?.granularity || 'daily';\r\n    const forecast = task.context?.forecast || false;\r\n\r\n    this.logger.info('Analyzing trends', {\r\n      timeframe,\r\n      granularity,\r\n      forecast,\r\n    });\r\n\r\n    const trends: TrendAnalysisResult = {\r\n      timeframe,\r\n      metrics: [] as any as string[],\r\n      trends: [] as any as any[],\r\n      correlations: {},\r\n      patterns: {\r\n        seasonal: false,\r\n        cyclical: false,\r\n        trending: false,\r\n      },\r\n      forecasts: forecast ? ([] as any) : [],\r\n      insights: [] as any as string[],\r\n      recommendations: [] as any as string[],\r\n      confidence: 0,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate trend analysis\r\n    await this.delay(2500);\r\n\r\n    (trends.trends as any).push(\r\n      {\r\n        metric: 'user_engagement',\r\n        direction: 'increasing',\r\n        slope: 0.15,\r\n        significance: 0.92,\r\n        period: 'Q4-2023',\r\n      },\r\n      {\r\n        metric: 'conversion_rate',\r\n        direction: 'stable',\r\n        slope: 0.02,\r\n        significance: 0.23,\r\n        period: 'Q4-2023',\r\n      },\r\n    );\r\n\r\n    trends.patterns = {\r\n      seasonal: true,\r\n      cyclical: false,\r\n      trending: true,\r\n    };\r\n\r\n    trends.confidence = 0.89;\r\n\r\n    return trends;\r\n  }\r\n\r\n  private async generateBusinessIntelligence(\r\n    task: TaskDefinition,\r\n  ): Promise<BusinessIntelligenceResult> {\r\n    const domain = task.context?.domain || 'general';\r\n    const metrics = task.context?.metrics || ['revenue', 'growth', 'efficiency'];\r\n    const timeframe = task.context?.timeframe || 'quarterly';\r\n    const audience = task.context?.audience || 'executive';\r\n\r\n    this.logger.info('Generating business intelligence', {\r\n      domain,\r\n      metrics,\r\n      timeframe,\r\n      audience,\r\n    });\r\n\r\n    const intelligence: BusinessIntelligenceResult = {\r\n      scope: domain,\r\n      timeframe,\r\n      kpis: {},\r\n      trends: [],\r\n      insights: [],\r\n      recommendations: [],\r\n      actionItems: [],\r\n      riskFactors: [],\r\n      opportunities: [],\r\n      marketAnalysis: {\r\n        competitors: [],\r\n        positioning: '',\r\n        threats: [],\r\n        opportunities: [],\r\n      },\r\n      financialProjections: {\r\n        revenue: [],\r\n        costs: [],\r\n        profitability: [],\r\n      },\r\n      confidence: 0,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate business intelligence generation\r\n    await this.delay(3500);\r\n\r\n    intelligence.kpis = {\r\n      revenue_growth: 12.5,\r\n      customer_acquisition_cost: 45.3,\r\n      lifetime_value: 1250.0,\r\n      churn_rate: 5.2,\r\n      market_share: 15.7,\r\n    };\r\n\r\n    intelligence.insights = [\r\n      'Customer acquisition costs decreased by 18% due to improved targeting',\r\n      'Premium tier adoption increased 35% following feature updates',\r\n      'Seasonal patterns show consistent Q4 revenue spikes',\r\n    ];\r\n\r\n    intelligence.recommendations = [\r\n      'Increase marketing budget allocation to high-performing channels',\r\n      'Develop retention strategies for at-risk customer segments',\r\n      'Accelerate premium feature development to capture market demand',\r\n    ];\r\n\r\n    intelligence.confidence = 0.91;\r\n\r\n    return intelligence;\r\n  }\r\n\r\n  private async analyzeQuality(task: TaskDefinition): Promise<QualityAnalysis> {\r\n    const subject = task.context?.subject;\r\n    const criteria = task.context?.criteria || ['accuracy', 'completeness', 'consistency'];\r\n    const standards = task.context?.standards || 'industry';\r\n    const benchmark = task.context?.benchmark;\r\n\r\n    this.logger.info('Analyzing quality', {\r\n      subject,\r\n      criteria,\r\n      standards,\r\n    });\r\n\r\n    const quality: QualityAnalysis = {\r\n      codeQuality: {\r\n        complexity: 0,\r\n        maintainability: 0,\r\n        testCoverage: 0,\r\n        technicalDebt: 0,\r\n      },\r\n      issues: [] as any as QualityIssue[],\r\n      patterns: [] as any as string[],\r\n      recommendations: [] as any as string[],\r\n      visualizations: [] as any as AnalysisVisualization[],\r\n      overallScore: 0,\r\n      confidence: 0,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate quality analysis\r\n    await this.delay(2000);\r\n\r\n    quality.codeQuality = {\r\n      complexity: 3.2,\r\n      maintainability: 0.87,\r\n      testCoverage: 0.91,\r\n      technicalDebt: 0.23,\r\n    };\r\n\r\n    quality.overallScore = 0.91;\r\n\r\n    (quality.issues as any).push({\r\n      category: 'completeness',\r\n      severity: 'medium',\r\n      description: 'Missing values in 13% of records',\r\n      impact: 'Affects downstream analysis accuracy',\r\n    });\r\n\r\n    (quality.patterns as any).push('High complexity in authentication module');\r\n    (quality.recommendations as any).push('Implement automated testing coverage');\r\n    quality.confidence = 0.89;\r\n\r\n    return quality;\r\n  }\r\n\r\n  private async performGeneralAnalysis(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Performing general analysis', {\r\n      description: task.description,\r\n    });\r\n\r\n    // Default to data analysis\r\n    return await this.analyzeData(task);\r\n  }\r\n\r\n  private async delay(ms: number): Promise<void> {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  override getAgentStatus(): any {\r\n    return {\r\n      ...super.getAgentStatus(),\r\n      specialization: 'Data Analysis & Performance Optimization',\r\n      analyticsCapabilities: [\r\n        'Statistical Analysis',\r\n        'Data Visualization',\r\n        'Performance Analysis',\r\n        'Predictive Modeling',\r\n        'Anomaly Detection',\r\n        'Business Intelligence',\r\n      ],\r\n      supportedFormats: ['CSV', 'JSON', 'Parquet', 'SQL', 'Excel'],\r\n      statisticalMethods: ['Descriptive', 'Inferential', 'Multivariate', 'Time Series'],\r\n      currentAnalyses: this.getCurrentTasks().length,\r\n      averageAnalysisTime: '10-20 minutes',\r\n      lastAnalysisCompleted: this.getLastTaskCompletedTime(),\r\n      preferredTools: ['Python', 'R', 'SQL', 'Jupyter'],\r\n    };\r\n  }\r\n}\r\n\r\nexport const createAnalystAgent = (\r\n  id: string,\r\n  config: Partial<AgentConfig>,\r\n  environment: Partial<AgentEnvironment>,\r\n  logger: ILogger,\r\n  eventBus: IEventBus,\r\n  memory: DistributedMemorySystem,\r\n): AnalystAgent => {\r\n  const tempAgent = new AnalystAgent(\r\n    id,\r\n    {} as AgentConfig,\r\n    {} as AgentEnvironment,\r\n    logger,\r\n    eventBus,\r\n    memory,\r\n  );\r\n  const defaultConfig = (tempAgent as any).getDefaultConfig();\r\n  const defaultEnv = {\r\n    runtime: 'deno' as const,\r\n    version: '1.40.0',\r\n    workingDirectory: './agents/analyst',\r\n    tempDirectory: './tmp/analyst',\r\n    logDirectory: './logs/analyst',\r\n    apiEndpoints: {},\r\n    credentials: {},\r\n    availableTools: ['data-processor', 'statistical-analyzer', 'chart-generator', 'report-builder'],\r\n    toolConfigs: {\r\n      dataProcessor: { chunkSize: 10000, parallel: true },\r\n      chartGenerator: { style: 'professional', dpi: 300 },\r\n      reportBuilder: { format: 'pdf', includeCharts: true },\r\n    },\r\n  };\r\n\r\n  return new AnalystAgent(\r\n    id,\r\n    { ...defaultConfig, ...config } as AgentConfig,\r\n    { ...defaultEnv, ...environment } as AgentEnvironment,\r\n    logger,\r\n    eventBus,\r\n    memory,\r\n  );\r\n};\r\n"],"names":["BaseAgent","AnalystAgent","id","config","environment","logger","eventBus","memory","getDefaultCapabilities","codeGeneration","codeReview","testing","documentation","research","analysis","webSearch","apiIntegration","fileSystem","terminalAccess","languages","frameworks","domains","tools","maxConcurrentTasks","maxMemoryUsage","maxExecutionTime","reliability","speed","quality","getDefaultConfig","autonomyLevel","learningEnabled","adaptationEnabled","maxTasksPerHour","timeoutThreshold","reportingInterval","heartbeatInterval","permissions","trustedAgents","expertise","visualization","preferences","outputFormat","includeCharts","statisticalTests","confidenceLevel","visualStyle","executeTask","task","info","agentId","taskType","type","taskId","analyzeData","analyzePerformance","performStatisticalAnalysis","createVisualization","buildPredictiveModel","detectAnomalies","analyzeTrends","generateBusinessIntelligence","analyzeQuality","performGeneralAnalysis","error","Error","message","String","dataset","context","analysisType","metrics","format","name","size","columns","types","summary","rowCount","columnCount","missingValues","duplicateRows","outliers","descriptiveStats","correlations","distributions","insights","recommendations","visualizations","confidence","methodology","timestamp","Date","store","status","startTime","tags","partition","delay","system","timeframe","baseline","performance","benchmarks","bottlenecks","trends","alertsTriggered","slaCompliance","availability","responseTime","throughput","comparison","improvements","regressions","anomalies","optimizationPotential","projectedImprovement","averageResponseTime","p95ResponseTime","p99ResponseTime","errorRate","component","impact","description","recommendation","data","tests","alpha","hypothesis","statistics","results","interpretation","assumptions","normality","independence","homogeneity","powerAnalysis","power","sampleSize","effectSize","conclusions","limitations","normalityTest","statistic","pValue","significant","correlationTest","coefficient","push","chartType","style","interactive","charts","dashboard","exportFormats","accessibility","colorBlind","screenReader","highContrast","title","dataPoints","target","algorithm","validation","model","features","accuracy","precision","recall","f1Score","rmse","mse","method","splits","crossValidation","folds","avgScore","stdDev","predictions","featureImportance","modelMetadata","parameters","training","epochs","convergence","finalLoss","auc","feature_1","feature_2","feature_3","feature_4","sensitivity","threshold","detected","total","severity","low","medium","high","critical","patterns","falsePositiveRate","score","granularity","forecast","seasonal","cyclical","trending","forecasts","metric","direction","slope","significance","period","domain","audience","intelligence","scope","kpis","actionItems","riskFactors","opportunities","marketAnalysis","competitors","positioning","threats","financialProjections","revenue","costs","profitability","revenue_growth","customer_acquisition_cost","lifetime_value","churn_rate","market_share","subject","criteria","standards","benchmark","codeQuality","complexity","maintainability","testCoverage","technicalDebt","issues","overallScore","category","ms","Promise","resolve","setTimeout","getAgentStatus","specialization","analyticsCapabilities","supportedFormats","statisticalMethods","currentAnalyses","getCurrentTasks","length","averageAnalysisTime","lastAnalysisCompleted","getLastTaskCompletedTime","preferredTools","createAnalystAgent","tempAgent","defaultConfig","defaultEnv","runtime","version","workingDirectory","tempDirectory","logDirectory","apiEndpoints","credentials","availableTools","toolConfigs","dataProcessor","chunkSize","parallel","chartGenerator","dpi","reportBuilder"],"mappings":"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"}