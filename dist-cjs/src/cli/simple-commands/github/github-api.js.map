{"version":3,"sources":["../../../../../src/cli/simple-commands/github/github-api.js"],"sourcesContent":["#!/usr/bin/env node\r\n/**\r\n * GitHub API Integration Module\r\n * Provides authentication, rate limiting, and API wrappers for GitHub workflow commands\r\n * \r\n * Enhanced with GitHub CLI Safety Wrapper for secure command execution\r\n */\r\n\r\nimport { printSuccess, printError, printWarning, printInfo } from '../utils.js';\r\nimport { githubCli, GitHubCliSafe } from '../../utils/github-cli-safety-wrapper.js';\r\n\r\n// GitHub API Configuration\r\nconst GITHUB_API_BASE = 'https://api.github.com';\r\nconst GITHUB_RATE_LIMIT = 5000; // API calls per hour\r\nconst GITHUB_WEBHOOK_SECRET = process.env.GITHUB_WEBHOOK_SECRET;\r\n\r\nclass GitHubAPIClient {\r\n  constructor(token = null) {\r\n    this.token = token || process.env.GITHUB_TOKEN;\r\n    this.rateLimitRemaining = GITHUB_RATE_LIMIT;\r\n    this.rateLimitResetTime = null;\r\n    this.lastRequestTime = 0;\r\n    this.requestQueue = [];\r\n    this.isProcessingQueue = false;\r\n    \r\n    // Initialize GitHub CLI safety wrapper\r\n    this.cliSafe = new GitHubCliSafe({\r\n      timeout: 60000,           // 1 minute timeout for CLI operations\r\n      maxRetries: 3,\r\n      enableRateLimit: true,\r\n      enableLogging: false      // Can be enabled for debugging\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Authentication Methods\r\n   */\r\n  async authenticate(token = null) {\r\n    if (token) {\r\n      this.token = token;\r\n    }\r\n\r\n    if (!this.token) {\r\n      printError('GitHub token not found. Set GITHUB_TOKEN environment variable or provide token.');\r\n      return false;\r\n    }\r\n\r\n    try {\r\n      const response = await this.request('/user');\r\n      if (response.success) {\r\n        printSuccess(`Authenticated as ${response.data.login}`);\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (error) {\r\n      printError(`Authentication failed: ${error.message}`);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Rate Limiting Management\r\n   */\r\n  async checkRateLimit() {\r\n    if (this.rateLimitRemaining <= 1) {\r\n      const resetTime = new Date(this.rateLimitResetTime);\r\n      const now = new Date();\r\n      const waitTime = resetTime.getTime() - now.getTime();\r\n\r\n      if (waitTime > 0) {\r\n        printWarning(`Rate limit exceeded. Waiting ${Math.ceil(waitTime / 1000)}s...`);\r\n        await this.sleep(waitTime);\r\n      }\r\n    }\r\n  }\r\n\r\n  updateRateLimitInfo(headers) {\r\n    this.rateLimitRemaining = parseInt(headers['x-ratelimit-remaining'] || '0');\r\n    this.rateLimitResetTime = new Date((parseInt(headers['x-ratelimit-reset']) || 0) * 1000);\r\n  }\r\n\r\n  /**\r\n   * Core API Request Method\r\n   */\r\n  async request(endpoint, options = {}) {\r\n    await this.checkRateLimit();\r\n\r\n    const url = endpoint.startsWith('http') ? endpoint : `${GITHUB_API_BASE}${endpoint}`;\r\n    const headers = {\r\n      Authorization: `token ${this.token}`,\r\n      Accept: 'application/vnd.github.v3+json',\r\n      'User-Agent': 'Claude-Flow-GitHub-Integration',\r\n      ...options.headers,\r\n    };\r\n\r\n    const requestOptions = {\r\n      method: options.method || 'GET',\r\n      headers,\r\n      ...options,\r\n    };\r\n\r\n    if (options.body) {\r\n      requestOptions.body = JSON.stringify(options.body);\r\n      headers['Content-Type'] = 'application/json';\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(url, requestOptions);\r\n      this.updateRateLimitInfo(response.headers);\r\n\r\n      const data = await response.json();\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`GitHub API error: ${data.message || response.statusText}`);\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        data,\r\n        headers: response.headers,\r\n        status: response.status,\r\n      };\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        error: error.message,\r\n        status: error.status || 500,\r\n      };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Repository Operations\r\n   */\r\n  async getRepository(owner, repo) {\r\n    return await this.request(`/repos/${owner}/${repo}`);\r\n  }\r\n\r\n  async listRepositories(options = {}) {\r\n    const params = new URLSearchParams({\r\n      sort: options.sort || 'updated',\r\n      direction: options.direction || 'desc',\r\n      per_page: options.perPage || 30,\r\n      page: options.page || 1,\r\n    });\r\n\r\n    return await this.request(`/user/repos?${params}`);\r\n  }\r\n\r\n  async createRepository(repoData) {\r\n    return await this.request('/user/repos', {\r\n      method: 'POST',\r\n      body: repoData,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Pull Request Operations\r\n   */\r\n  async listPullRequests(owner, repo, options = {}) {\r\n    const params = new URLSearchParams({\r\n      state: options.state || 'open',\r\n      sort: options.sort || 'created',\r\n      direction: options.direction || 'desc',\r\n      per_page: options.perPage || 30,\r\n      page: options.page || 1,\r\n    });\r\n\r\n    return await this.request(`/repos/${owner}/${repo}/pulls?${params}`);\r\n  }\r\n\r\n  async createPullRequest(owner, repo, prData) {\r\n    return await this.request(`/repos/${owner}/${repo}/pulls`, {\r\n      method: 'POST',\r\n      body: prData,\r\n    });\r\n  }\r\n\r\n  async updatePullRequest(owner, repo, prNumber, prData) {\r\n    return await this.request(`/repos/${owner}/${repo}/pulls/${prNumber}`, {\r\n      method: 'PATCH',\r\n      body: prData,\r\n    });\r\n  }\r\n\r\n  async mergePullRequest(owner, repo, prNumber, mergeData) {\r\n    return await this.request(`/repos/${owner}/${repo}/pulls/${prNumber}/merge`, {\r\n      method: 'PUT',\r\n      body: mergeData,\r\n    });\r\n  }\r\n\r\n  async requestPullRequestReview(owner, repo, prNumber, reviewData) {\r\n    return await this.request(`/repos/${owner}/${repo}/pulls/${prNumber}/requested_reviewers`, {\r\n      method: 'POST',\r\n      body: reviewData,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Issue Operations\r\n   */\r\n  async listIssues(owner, repo, options = {}) {\r\n    const params = new URLSearchParams({\r\n      state: options.state || 'open',\r\n      sort: options.sort || 'created',\r\n      direction: options.direction || 'desc',\r\n      per_page: options.perPage || 30,\r\n      page: options.page || 1,\r\n    });\r\n\r\n    if (options.labels) {\r\n      params.append('labels', options.labels);\r\n    }\r\n\r\n    return await this.request(`/repos/${owner}/${repo}/issues?${params}`);\r\n  }\r\n\r\n  async createIssue(owner, repo, issueData) {\r\n    return await this.request(`/repos/${owner}/${repo}/issues`, {\r\n      method: 'POST',\r\n      body: issueData,\r\n    });\r\n  }\r\n\r\n  async updateIssue(owner, repo, issueNumber, issueData) {\r\n    return await this.request(`/repos/${owner}/${repo}/issues/${issueNumber}`, {\r\n      method: 'PATCH',\r\n      body: issueData,\r\n    });\r\n  }\r\n\r\n  async addIssueLabels(owner, repo, issueNumber, labels) {\r\n    return await this.request(`/repos/${owner}/${repo}/issues/${issueNumber}/labels`, {\r\n      method: 'POST',\r\n      body: { labels },\r\n    });\r\n  }\r\n\r\n  async assignIssue(owner, repo, issueNumber, assignees) {\r\n    return await this.request(`/repos/${owner}/${repo}/issues/${issueNumber}/assignees`, {\r\n      method: 'POST',\r\n      body: { assignees },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Release Operations\r\n   */\r\n  async listReleases(owner, repo, options = {}) {\r\n    const params = new URLSearchParams({\r\n      per_page: options.perPage || 30,\r\n      page: options.page || 1,\r\n    });\r\n\r\n    return await this.request(`/repos/${owner}/${repo}/releases?${params}`);\r\n  }\r\n\r\n  async createRelease(owner, repo, releaseData) {\r\n    return await this.request(`/repos/${owner}/${repo}/releases`, {\r\n      method: 'POST',\r\n      body: releaseData,\r\n    });\r\n  }\r\n\r\n  async updateRelease(owner, repo, releaseId, releaseData) {\r\n    return await this.request(`/repos/${owner}/${repo}/releases/${releaseId}`, {\r\n      method: 'PATCH',\r\n      body: releaseData,\r\n    });\r\n  }\r\n\r\n  async deleteRelease(owner, repo, releaseId) {\r\n    return await this.request(`/repos/${owner}/${repo}/releases/${releaseId}`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Workflow Operations\r\n   */\r\n  async listWorkflows(owner, repo) {\r\n    return await this.request(`/repos/${owner}/${repo}/actions/workflows`);\r\n  }\r\n\r\n  async triggerWorkflow(owner, repo, workflowId, ref = 'main', inputs = {}) {\r\n    return await this.request(\r\n      `/repos/${owner}/${repo}/actions/workflows/${workflowId}/dispatches`,\r\n      {\r\n        method: 'POST',\r\n        body: { ref, inputs },\r\n      },\r\n    );\r\n  }\r\n\r\n  async listWorkflowRuns(owner, repo, options = {}) {\r\n    const params = new URLSearchParams({\r\n      per_page: options.perPage || 30,\r\n      page: options.page || 1,\r\n    });\r\n\r\n    if (options.status) {\r\n      params.append('status', options.status);\r\n    }\r\n\r\n    return await this.request(`/repos/${owner}/${repo}/actions/runs?${params}`);\r\n  }\r\n\r\n  /**\r\n   * Branch Operations\r\n   */\r\n  async listBranches(owner, repo) {\r\n    return await this.request(`/repos/${owner}/${repo}/branches`);\r\n  }\r\n\r\n  async createBranch(owner, repo, branchName, sha) {\r\n    return await this.request(`/repos/${owner}/${repo}/git/refs`, {\r\n      method: 'POST',\r\n      body: {\r\n        ref: `refs/heads/${branchName}`,\r\n        sha,\r\n      },\r\n    });\r\n  }\r\n\r\n  async getBranchProtection(owner, repo, branch) {\r\n    return await this.request(`/repos/${owner}/${repo}/branches/${branch}/protection`);\r\n  }\r\n\r\n  async updateBranchProtection(owner, repo, branch, protection) {\r\n    return await this.request(`/repos/${owner}/${repo}/branches/${branch}/protection`, {\r\n      method: 'PUT',\r\n      body: protection,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Webhook Operations\r\n   */\r\n  async listWebhooks(owner, repo) {\r\n    return await this.request(`/repos/${owner}/${repo}/hooks`);\r\n  }\r\n\r\n  async createWebhook(owner, repo, webhookData) {\r\n    return await this.request(`/repos/${owner}/${repo}/hooks`, {\r\n      method: 'POST',\r\n      body: webhookData,\r\n    });\r\n  }\r\n\r\n  async updateWebhook(owner, repo, hookId, webhookData) {\r\n    return await this.request(`/repos/${owner}/${repo}/hooks/${hookId}`, {\r\n      method: 'PATCH',\r\n      body: webhookData,\r\n    });\r\n  }\r\n\r\n  async deleteWebhook(owner, repo, hookId) {\r\n    return await this.request(`/repos/${owner}/${repo}/hooks/${hookId}`, {\r\n      method: 'DELETE',\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Event Processing\r\n   */\r\n  async processWebhookEvent(event, signature, payload) {\r\n    if (!this.verifyWebhookSignature(signature, payload)) {\r\n      throw new Error('Invalid webhook signature');\r\n    }\r\n\r\n    const eventData = JSON.parse(payload);\r\n\r\n    switch (event) {\r\n      case 'push':\r\n        return this.handlePushEvent(eventData);\r\n      case 'pull_request':\r\n        return this.handlePullRequestEvent(eventData);\r\n      case 'issues':\r\n        return this.handleIssuesEvent(eventData);\r\n      case 'release':\r\n        return this.handleReleaseEvent(eventData);\r\n      case 'workflow_run':\r\n        return this.handleWorkflowRunEvent(eventData);\r\n      default:\r\n        printInfo(`Unhandled event type: ${event}`);\r\n        return { handled: false, event };\r\n    }\r\n  }\r\n\r\n  verifyWebhookSignature(signature, payload) {\r\n    if (!GITHUB_WEBHOOK_SECRET) {\r\n      printWarning('GITHUB_WEBHOOK_SECRET not set. Skipping signature verification.');\r\n      return true;\r\n    }\r\n\r\n    const crypto = require('crypto');\r\n    const hmac = crypto.createHmac('sha256', GITHUB_WEBHOOK_SECRET);\r\n    hmac.update(payload);\r\n    const expectedSignature = `sha256=${hmac.digest('hex')}`;\r\n\r\n    return crypto.timingSafeEqual(Buffer.from(signature), Buffer.from(expectedSignature));\r\n  }\r\n\r\n  /**\r\n   * Event Handlers\r\n   */\r\n  async handlePushEvent(eventData) {\r\n    printInfo(`Push event: ${eventData.commits.length} commits to ${eventData.ref}`);\r\n    return { handled: true, event: 'push', data: eventData };\r\n  }\r\n\r\n  async handlePullRequestEvent(eventData) {\r\n    const action = eventData.action;\r\n    const pr = eventData.pull_request;\r\n    printInfo(`Pull request ${action}: #${pr.number} - ${pr.title}`);\r\n    return { handled: true, event: 'pull_request', action, data: eventData };\r\n  }\r\n\r\n  async handleIssuesEvent(eventData) {\r\n    const action = eventData.action;\r\n    const issue = eventData.issue;\r\n    printInfo(`Issue ${action}: #${issue.number} - ${issue.title}`);\r\n    return { handled: true, event: 'issues', action, data: eventData };\r\n  }\r\n\r\n  async handleReleaseEvent(eventData) {\r\n    const action = eventData.action;\r\n    const release = eventData.release;\r\n    printInfo(`Release ${action}: ${release.tag_name} - ${release.name}`);\r\n    return { handled: true, event: 'release', action, data: eventData };\r\n  }\r\n\r\n  async handleWorkflowRunEvent(eventData) {\r\n    const action = eventData.action;\r\n    const workflowRun = eventData.workflow_run;\r\n    printInfo(`Workflow run ${action}: ${workflowRun.name} - ${workflowRun.conclusion}`);\r\n    return { handled: true, event: 'workflow_run', action, data: eventData };\r\n  }\r\n\r\n  /**\r\n   * Utility Methods\r\n   */\r\n  async sleep(ms) {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  parseRepository(repoString) {\r\n    const match = repoString.match(/^([^/]+)\\/([^/]+)$/);\r\n    if (!match) {\r\n      throw new Error('Invalid repository format. Use: owner/repo');\r\n    }\r\n    return { owner: match[1], repo: match[2] };\r\n  }\r\n\r\n  formatDate(dateString) {\r\n    return new Date(dateString).toLocaleString();\r\n  }\r\n\r\n  formatFileSize(bytes) {\r\n    const units = ['B', 'KB', 'MB', 'GB'];\r\n    let size = bytes;\r\n    let unitIndex = 0;\r\n\r\n    while (size >= 1024 && unitIndex < units.length - 1) {\r\n      size /= 1024;\r\n      unitIndex++;\r\n    }\r\n\r\n    return `${size.toFixed(2)} ${units[unitIndex]}`;\r\n  }\r\n\r\n  /**\r\n   * Safe GitHub CLI Methods\r\n   * These methods use the GitHubCliSafe wrapper for secure command execution\r\n   */\r\n\r\n  /**\r\n   * Create issue using GitHub CLI (safe alternative to createIssue API method)\r\n   * @param {Object} issueData - Issue data\r\n   * @returns {Promise<Object>} - CLI execution result\r\n   */\r\n  async createIssueCLI(issueData) {\r\n    try {\r\n      const result = await this.cliSafe.createIssue({\r\n        title: issueData.title,\r\n        body: issueData.body,\r\n        labels: issueData.labels || [],\r\n        assignees: issueData.assignees || []\r\n      });\r\n      \r\n      printSuccess(`Issue created via CLI: ${issueData.title}`);\r\n      return { success: true, data: result };\r\n    } catch (error) {\r\n      printError(`Failed to create issue via CLI: ${error.message}`);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create PR using GitHub CLI (safe alternative to createPullRequest API method)\r\n   * @param {Object} prData - PR data\r\n   * @returns {Promise<Object>} - CLI execution result\r\n   */\r\n  async createPullRequestCLI(prData) {\r\n    try {\r\n      const result = await this.cliSafe.createPR({\r\n        title: prData.title,\r\n        body: prData.body,\r\n        base: prData.base || 'main',\r\n        head: prData.head,\r\n        draft: prData.draft || false\r\n      });\r\n      \r\n      printSuccess(`PR created via CLI: ${prData.title}`);\r\n      return { success: true, data: result };\r\n    } catch (error) {\r\n      printError(`Failed to create PR via CLI: ${error.message}`);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add issue comment using GitHub CLI\r\n   * @param {number} issueNumber - Issue number\r\n   * @param {string} body - Comment body\r\n   * @returns {Promise<Object>} - CLI execution result\r\n   */\r\n  async addIssueCommentCLI(issueNumber, body) {\r\n    try {\r\n      const result = await this.cliSafe.addIssueComment(issueNumber, body);\r\n      printSuccess(`Comment added to issue #${issueNumber}`);\r\n      return { success: true, data: result };\r\n    } catch (error) {\r\n      printError(`Failed to add comment to issue #${issueNumber}: ${error.message}`);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add PR comment using GitHub CLI\r\n   * @param {number} prNumber - PR number\r\n   * @param {string} body - Comment body\r\n   * @returns {Promise<Object>} - CLI execution result\r\n   */\r\n  async addPRCommentCLI(prNumber, body) {\r\n    try {\r\n      const result = await this.cliSafe.addPRComment(prNumber, body);\r\n      printSuccess(`Comment added to PR #${prNumber}`);\r\n      return { success: true, data: result };\r\n    } catch (error) {\r\n      printError(`Failed to add comment to PR #${prNumber}: ${error.message}`);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Create release using GitHub CLI\r\n   * @param {Object} releaseData - Release data\r\n   * @returns {Promise<Object>} - CLI execution result\r\n   */\r\n  async createReleaseCLI(releaseData) {\r\n    try {\r\n      const result = await this.cliSafe.createRelease({\r\n        tag: releaseData.tag_name,\r\n        title: releaseData.name,\r\n        body: releaseData.body,\r\n        prerelease: releaseData.prerelease || false,\r\n        draft: releaseData.draft || false\r\n      });\r\n      \r\n      printSuccess(`Release created via CLI: ${releaseData.tag_name}`);\r\n      return { success: true, data: result };\r\n    } catch (error) {\r\n      printError(`Failed to create release via CLI: ${error.message}`);\r\n      return { success: false, error: error.message };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check GitHub CLI authentication and availability\r\n   * @returns {Promise<boolean>} - True if CLI is ready to use\r\n   */\r\n  async checkCLIStatus() {\r\n    try {\r\n      const isAvailable = await this.cliSafe.checkGitHubCli();\r\n      if (!isAvailable) {\r\n        printWarning('GitHub CLI is not installed or not in PATH');\r\n        return false;\r\n      }\r\n\r\n      const isAuthenticated = await this.cliSafe.checkAuthentication();\r\n      if (!isAuthenticated) {\r\n        printWarning('GitHub CLI is not authenticated. Run: gh auth login');\r\n        return false;\r\n      }\r\n\r\n      printSuccess('GitHub CLI is ready for use');\r\n      return true;\r\n    } catch (error) {\r\n      printError(`GitHub CLI status check failed: ${error.message}`);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get GitHub CLI wrapper statistics\r\n   * @returns {Object} - Usage statistics\r\n   */\r\n  getCLIStats() {\r\n    return this.cliSafe.getStats();\r\n  }\r\n\r\n  /**\r\n   * Cleanup CLI resources (call before shutdown)\r\n   */\r\n  async cleanupCLI() {\r\n    await this.cliSafe.cleanup();\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const githubAPI = new GitHubAPIClient();\r\nexport default GitHubAPIClient;\r\n"],"names":["printSuccess","printError","printWarning","printInfo","GitHubCliSafe","GITHUB_API_BASE","GITHUB_RATE_LIMIT","GITHUB_WEBHOOK_SECRET","process","env","GitHubAPIClient","token","GITHUB_TOKEN","rateLimitRemaining","rateLimitResetTime","lastRequestTime","requestQueue","isProcessingQueue","cliSafe","timeout","maxRetries","enableRateLimit","enableLogging","authenticate","response","request","success","data","login","error","message","checkRateLimit","resetTime","Date","now","waitTime","getTime","Math","ceil","sleep","updateRateLimitInfo","headers","parseInt","endpoint","options","url","startsWith","Authorization","Accept","requestOptions","method","body","JSON","stringify","fetch","json","ok","Error","statusText","status","getRepository","owner","repo","listRepositories","params","URLSearchParams","sort","direction","per_page","perPage","page","createRepository","repoData","listPullRequests","state","createPullRequest","prData","updatePullRequest","prNumber","mergePullRequest","mergeData","requestPullRequestReview","reviewData","listIssues","labels","append","createIssue","issueData","updateIssue","issueNumber","addIssueLabels","assignIssue","assignees","listReleases","createRelease","releaseData","updateRelease","releaseId","deleteRelease","listWorkflows","triggerWorkflow","workflowId","ref","inputs","listWorkflowRuns","listBranches","createBranch","branchName","sha","getBranchProtection","branch","updateBranchProtection","protection","listWebhooks","createWebhook","webhookData","updateWebhook","hookId","deleteWebhook","processWebhookEvent","event","signature","payload","verifyWebhookSignature","eventData","parse","handlePushEvent","handlePullRequestEvent","handleIssuesEvent","handleReleaseEvent","handleWorkflowRunEvent","handled","crypto","require","hmac","createHmac","update","expectedSignature","digest","timingSafeEqual","Buffer","from","commits","length","action","pr","pull_request","number","title","issue","release","tag_name","name","workflowRun","workflow_run","conclusion","ms","Promise","resolve","setTimeout","parseRepository","repoString","match","formatDate","dateString","toLocaleString","formatFileSize","bytes","units","size","unitIndex","toFixed","createIssueCLI","result","createPullRequestCLI","createPR","base","head","draft","addIssueCommentCLI","addIssueComment","addPRCommentCLI","addPRComment","createReleaseCLI","tag","prerelease","checkCLIStatus","isAvailable","checkGitHubCli","isAuthenticated","checkAuthentication","getCLIStats","getStats","cleanupCLI","cleanup","githubAPI"],"mappings":"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"}