{"version":3,"sources":["../../../../src/cli/simple-commands/hive-mind-wizard.js"],"sourcesContent":["const chalk = require('chalk');\r\nconst path = require('path');\r\nconst fs = require('fs');\r\nconst Database = require('better-sqlite3');\r\n\r\n// Interactive Wizard Implementation\r\nasync function runInteractiveWizard() {\r\n  console.log(chalk.blue.bold('ðŸ Welcome to the Hive Mind Setup Wizard!'));\r\n  console.log(chalk.gray('This wizard will help you create your first intelligent AI swarm.\\n'));\r\n\r\n  try {\r\n    // Check if system is initialized\r\n    const configPath = path.join(process.cwd(), '.hive-mind', 'config.json');\r\n    let config = { initialized: false };\r\n\r\n    if (fs.existsSync(configPath)) {\r\n      config = JSON.parse(fs.readFileSync(configPath, 'utf8'));\r\n    }\r\n\r\n    if (!config.initialized) {\r\n      console.log(chalk.yellow('ðŸ“‹ Step 1: Initializing Hive Mind System...'));\r\n      await initializeHiveMind();\r\n      console.log(chalk.green('âœ… Hive Mind system initialized!\\n'));\r\n    } else {\r\n      console.log(chalk.green('âœ… Hive Mind system already initialized!\\n'));\r\n    }\r\n\r\n    // Guided objective input\r\n    console.log(chalk.blue('ðŸ“‹ Step 2: Define Your Objective'));\r\n    console.log(chalk.gray('What would you like your Hive Mind swarm to accomplish?'));\r\n    console.log(chalk.gray('Examples:'));\r\n    console.log(chalk.gray('  â€¢ \"Build a REST API for user management\"'));\r\n    console.log(chalk.gray('  â€¢ \"Research and analyze market trends\"'));\r\n    console.log(chalk.gray('  â€¢ \"Optimize database performance\"'));\r\n    console.log(chalk.gray('  â€¢ \"Create comprehensive test suite\"\\n'));\r\n\r\n    const objective = 'Build a modern web application'; // Placeholder for demo\r\n    console.log(chalk.cyan(`ðŸ’¡ Using example objective: \"${objective}\"`));\r\n    console.log(chalk.gray('(In full wizard, this would be interactive input)\\n'));\r\n\r\n    // Configuration selection\r\n    console.log(chalk.blue('ðŸ“‹ Step 3: Choose Configuration'));\r\n    console.log(chalk.gray('Based on your objective, here are recommended settings:\\n'));\r\n\r\n    const swarmConfig = {\r\n      topology: 'hierarchical',\r\n      coordination: 'queen',\r\n      agents: 5,\r\n      complexity: 'medium',\r\n    };\r\n\r\n    console.log(chalk.cyan('ðŸ“Š Recommended Configuration:'));\r\n    console.log(chalk.gray(`  â€¢ Topology: ${swarmConfig.topology} (best for structured tasks)`));\r\n    console.log(\r\n      chalk.gray(`  â€¢ Coordination: ${swarmConfig.coordination} (fastest decision making)`),\r\n    );\r\n    console.log(\r\n      chalk.gray(`  â€¢ Agent Count: ${swarmConfig.agents} (optimal for medium complexity)`),\r\n    );\r\n    console.log(chalk.gray(`  â€¢ Complexity: ${swarmConfig.complexity}\\n`));\r\n\r\n    // Create the swarm\r\n    console.log(chalk.blue('ðŸ“‹ Step 4: Creating Your Swarm...'));\r\n    console.log(chalk.gray('ðŸ”„ Spawning intelligent agents...'));\r\n\r\n    const result = await createSwarm(objective, swarmConfig);\r\n\r\n    if (result.success) {\r\n      console.log(chalk.green('ðŸŽ‰ Swarm created successfully!\\n'));\r\n\r\n      console.log(chalk.blue.bold('ðŸ Your Hive Mind is Ready!'));\r\n      console.log(chalk.gray('Your intelligent swarm has been created and is ready to work.\\n'));\r\n\r\n      console.log(chalk.cyan('ðŸ“± Next Steps:'));\r\n      console.log(chalk.gray('  â€¢ View status: claude-flow hive-mind status'));\r\n      console.log(chalk.gray('  â€¢ Monitor progress: claude-flow hive-mind metrics'));\r\n      console.log(chalk.gray('  â€¢ Create another swarm: claude-flow hive-mind wizard'));\r\n      console.log(chalk.gray('  â€¢ Learn more: claude-flow help hive-mind\\n'));\r\n\r\n      console.log(chalk.green.bold('ðŸš€ Happy swarming!'));\r\n    } else {\r\n      console.log(chalk.red('âŒ Failed to create swarm. Please try again.'));\r\n    }\r\n  } catch (error) {\r\n    console.log(chalk.red(`âŒ Wizard error: ${error.message}`));\r\n    console.log(chalk.gray('You can try manual setup with: claude-flow hive-mind init'));\r\n  }\r\n}\r\n\r\n// Initialize Hive Mind system\r\nasync function initializeHiveMind() {\r\n  const hiveMindDir = path.join(process.cwd(), '.hive-mind');\r\n\r\n  // Create directory if it doesn't exist\r\n  if (!fs.existsSync(hiveMindDir)) {\r\n    fs.mkdirSync(hiveMindDir, { recursive: true });\r\n  }\r\n\r\n  // Create configuration file\r\n  const config = {\r\n    version: '2.0.0',\r\n    initialized: new Date().toISOString(),\r\n    defaults: {\r\n      queenType: 'strategic',\r\n      maxWorkers: 8,\r\n      consensusAlgorithm: 'majority',\r\n      memorySize: 100,\r\n      autoScale: true,\r\n      encryption: false,\r\n    },\r\n    mcpTools: {\r\n      enabled: true,\r\n      parallel: true,\r\n      timeout: 60000,\r\n    },\r\n  };\r\n\r\n  const configPath = path.join(hiveMindDir, 'config.json');\r\n  fs.writeFileSync(configPath, JSON.stringify(config, null, 2));\r\n\r\n  // Initialize SQLite database\r\n  const dbPath = path.join(hiveMindDir, 'hive.db');\r\n  const db = new sqlite3.Database(dbPath);\r\n\r\n  await new Promise((resolve, reject) => {\r\n    db.serialize(() => {\r\n      // Create tables\r\n      db.run(`\r\n                CREATE TABLE IF NOT EXISTS swarms (\r\n                    id TEXT PRIMARY KEY,\r\n                    name TEXT NOT NULL,\r\n                    objective TEXT,\r\n                    status TEXT DEFAULT 'active',\r\n                    queen_type TEXT DEFAULT 'strategic',\r\n                    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\r\n                )\r\n            `);\r\n\r\n      db.run(`\r\n                CREATE TABLE IF NOT EXISTS agents (\r\n                    id TEXT PRIMARY KEY,\r\n                    swarm_id TEXT,\r\n                    name TEXT NOT NULL,\r\n                    type TEXT NOT NULL,\r\n                    role TEXT,\r\n                    status TEXT DEFAULT 'idle',\r\n                    capabilities TEXT,\r\n                    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                    FOREIGN KEY (swarm_id) REFERENCES swarms(id)\r\n                )\r\n            `);\r\n\r\n      db.run(`\r\n                CREATE TABLE IF NOT EXISTS tasks (\r\n                    id TEXT PRIMARY KEY,\r\n                    swarm_id TEXT,\r\n                    description TEXT,\r\n                    status TEXT DEFAULT 'pending',\r\n                    result TEXT,\r\n                    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                    FOREIGN KEY (swarm_id) REFERENCES swarms(id)\r\n                )\r\n            `);\r\n\r\n      db.run(`\r\n                CREATE TABLE IF NOT EXISTS collective_memory (\r\n                    id TEXT PRIMARY KEY,\r\n                    swarm_id TEXT,\r\n                    key TEXT NOT NULL,\r\n                    value TEXT,\r\n                    ttl INTEGER,\r\n                    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\r\n                    FOREIGN KEY (swarm_id) REFERENCES swarms(id)\r\n                )\r\n            `);\r\n\r\n      db.close((err) => {\r\n        if (err) reject(err);\r\n        else resolve();\r\n      });\r\n    });\r\n  });\r\n}\r\n\r\n// Enhanced swarm creation with better UX\r\nasync function createSwarm(objective, config) {\r\n  try {\r\n    // Simulate swarm creation with progress indication\r\n    const steps = [\r\n      'Initializing swarm topology...',\r\n      'Spawning Queen coordinator...',\r\n      'Creating worker agents...',\r\n      'Establishing communication protocols...',\r\n      'Setting up collective memory...',\r\n      'Activating swarm intelligence...',\r\n    ];\r\n\r\n    for (let i = 0; i < steps.length; i++) {\r\n      process.stdout.write(chalk.gray(`  ${steps[i]} `));\r\n      await new Promise((resolve) => setTimeout(resolve, 500)); // Simulate work\r\n      console.log(chalk.green('âœ“'));\r\n    }\r\n\r\n    const swarmId = `swarm-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n    const queenId = `queen-${Date.now()}`;\r\n\r\n    // Open database\r\n    const dbPath = path.join(process.cwd(), '.hive-mind', 'hive.db');\r\n    const db = new sqlite3.Database(dbPath);\r\n\r\n    await new Promise((resolve, reject) => {\r\n      db.serialize(() => {\r\n        // Create swarm record\r\n        const insertSwarm = db.prepare(`\r\n                    INSERT INTO swarms (id, name, objective, status, queen_type, created_at, updated_at)\r\n                    VALUES (?, ?, ?, ?, ?, ?, ?)\r\n                `);\r\n\r\n        insertSwarm.run(\r\n          swarmId,\r\n          `hive-${Date.now()}`,\r\n          objective,\r\n          'active',\r\n          config.coordination,\r\n          new Date().toISOString(),\r\n          new Date().toISOString(),\r\n        );\r\n\r\n        // Create agents\r\n        const insertAgent = db.prepare(`\r\n                    INSERT INTO agents (id, swarm_id, name, type, role, status, capabilities, created_at)\r\n                    VALUES (?, ?, ?, ?, ?, ?, ?, ?)\r\n                `);\r\n\r\n        // Create Queen\r\n        insertAgent.run(\r\n          queenId,\r\n          swarmId,\r\n          'Queen Coordinator',\r\n          'coordinator',\r\n          'queen',\r\n          'active',\r\n          JSON.stringify(['orchestration', 'strategy', 'coordination']),\r\n          new Date().toISOString(),\r\n        );\r\n\r\n        // Create worker agents\r\n        const workerTypes = ['researcher', 'coder', 'analyst', 'tester'];\r\n        for (let i = 0; i < config.agents - 1; i++) {\r\n          const agentType = workerTypes[i % workerTypes.length];\r\n          insertAgent.run(\r\n            `agent-${Date.now()}-${i}`,\r\n            swarmId,\r\n            `${agentType.charAt(0).toUpperCase() + agentType.slice(1)} Worker ${i + 1}`,\r\n            agentType,\r\n            'worker',\r\n            'idle',\r\n            JSON.stringify([agentType, 'collaboration']),\r\n            new Date().toISOString(),\r\n          );\r\n        }\r\n\r\n        insertSwarm.finalize();\r\n        insertAgent.finalize();\r\n\r\n        db.close((err) => {\r\n          if (err) reject(err);\r\n          else resolve();\r\n        });\r\n      });\r\n    });\r\n\r\n    return { success: true, swarmId, queenId };\r\n  } catch (error) {\r\n    console.error('Error creating swarm:', error);\r\n    return { success: false, error: error.message };\r\n  }\r\n}\r\n\r\nmodule.exports = { runInteractiveWizard };\r\n"],"names":["chalk","require","path","fs","Database","runInteractiveWizard","console","log","blue","bold","gray","configPath","join","process","cwd","config","initialized","existsSync","JSON","parse","readFileSync","yellow","initializeHiveMind","green","objective","cyan","swarmConfig","topology","coordination","agents","complexity","result","createSwarm","success","red","error","message","hiveMindDir","mkdirSync","recursive","version","Date","toISOString","defaults","queenType","maxWorkers","consensusAlgorithm","memorySize","autoScale","encryption","mcpTools","enabled","parallel","timeout","writeFileSync","stringify","dbPath","db","sqlite3","Promise","resolve","reject","serialize","run","close","err","steps","i","length","stdout","write","setTimeout","swarmId","now","Math","random","toString","substr","queenId","insertSwarm","prepare","insertAgent","workerTypes","agentType","charAt","toUpperCase","slice","finalize","module","exports"],"mappings":"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"}