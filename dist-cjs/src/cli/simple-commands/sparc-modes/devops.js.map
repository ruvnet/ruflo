{"version":3,"sources":["../../../../../src/cli/simple-commands/sparc-modes/devops.js"],"sourcesContent":["// devops.js - DevOps mode orchestration template\r\nexport function getDevOpsOrchestration(taskDescription, memoryNamespace) {\r\n  return `\r\n## Task Orchestration Steps\r\n\r\n1. **Environment Analysis** (10 mins)\r\n   - Run system analysis: \\`uname -a\\`\r\n   - Understand deployment requirements: \"${taskDescription}\"\r\n   - Query architecture and configuration:\r\n     \\`\\`\\`bash\r\n     npx claude-flow memory query ${memoryNamespace}_architecture\r\n     npx claude-flow memory query ${memoryNamespace}_deployment\r\n     npx claude-flow memory query ${memoryNamespace}_infrastructure\r\n     \\`\\`\\`\r\n   - Identify target environments:\r\n     - Development, staging, production\r\n     - Cloud providers (AWS, GCP, Azure)\r\n     - Edge platforms (Vercel, Cloudflare)\r\n     - Container orchestration (K8s, ECS)\r\n   - Review current infrastructure state\r\n   - Store analysis: \\`npx claude-flow memory store ${memoryNamespace}_devops_analysis \"Task: ${taskDescription}. Target: AWS ECS + CloudFront. Current: Local dev only. Requirements: Auto-scaling, blue-green deployment, monitoring.\"\\`\r\n\r\n2. **Infrastructure Provisioning** (20 mins)\r\n   - Set up infrastructure as code:\r\n     - Create Terraform/CloudFormation templates\r\n     - Define resource configurations\r\n     - Set up networking (VPC, subnets, security groups)\r\n   - Provision compute resources:\r\n     - Cloud functions (Lambda, Cloud Functions)\r\n     - Container services (ECS, GKE)\r\n     - Edge runtimes (Workers, Functions)\r\n   - Configure managed services:\r\n     - Databases (RDS, DynamoDB, Firestore)\r\n     - Caching (ElastiCache, Memorystore)\r\n     - Message queues (SQS, Pub/Sub)\r\n   - Set up secrets management:\r\n     - AWS Secrets Manager / GCP Secret Manager\r\n     - Vault integration\r\n     - Environment injection layers\r\n   - NEVER hardcode credentials or tokens\r\n   - Store provisioning: \\`npx claude-flow memory store ${memoryNamespace}_infrastructure \"Provisioned: ECS cluster (2 AZs), RDS PostgreSQL, ElastiCache Redis, ALB. Secrets: AWS Secrets Manager configured. Terraform state: S3 backend.\"\\`\r\n\r\n3. **CI/CD Pipeline Setup** (15 mins)\r\n   - Create pipeline configuration:\r\n     - GitHub Actions / GitLab CI / Jenkins\r\n     - Multi-stage pipeline (build, test, deploy)\r\n     - Environment-specific deployments\r\n   - Implement build stages:\r\n     \\`\\`\\`yaml\r\n     - Build: Compile, bundle, optimize\r\n     - Test: Unit, integration, e2e\r\n     - Security: SAST, dependency scanning\r\n     - Package: Docker images, artifacts\r\n     \\`\\`\\`\r\n   - Configure deployment strategies:\r\n     - Blue-green deployments\r\n     - Canary releases\r\n     - Rollback procedures\r\n   - Set up quality gates:\r\n     - Code coverage thresholds\r\n     - Performance benchmarks\r\n     - Security scan results\r\n   - Store pipeline config: \\`npx claude-flow memory store ${memoryNamespace}_cicd \"Pipeline: GitHub Actions. Stages: build->test->security->deploy. Environments: dev (auto), staging (manual), prod (approved). Rollback: Automated on failure.\"\\`\r\n\r\n4. **Monitoring & Observability** (15 mins)\r\n   - Set up application monitoring:\r\n     - APM tools (DataDog, New Relic, AppDynamics)\r\n     - Custom metrics and dashboards\r\n     - Real-time alerting\r\n   - Configure infrastructure monitoring:\r\n     - CloudWatch / Stackdriver metrics\r\n     - Resource utilization alerts\r\n     - Cost optimization tracking\r\n   - Implement logging strategy:\r\n     - Centralized logging (ELK, CloudWatch Logs)\r\n     - Structured logging format\r\n     - Log retention policies\r\n   - Set up distributed tracing:\r\n     - Request flow tracking\r\n     - Performance bottleneck identification\r\n     - Error correlation\r\n   - Configure alerting rules:\r\n     - SLA/SLO monitoring\r\n     - Anomaly detection\r\n     - Escalation procedures\r\n   - Store monitoring setup: \\`npx claude-flow memory store ${memoryNamespace}_monitoring \"APM: DataDog configured. Logs: CloudWatch Logs with 30-day retention. Alerts: CPU >80%, Memory >85%, Error rate >1%. Dashboards: App performance, infra health, cost tracking.\"\\`\r\n\r\n5. **Security & Compliance** (10 mins)\r\n   - Implement security best practices:\r\n     - TLS/SSL certificates (Let's Encrypt, ACM)\r\n     - WAF rules and DDoS protection\r\n     - Network segmentation\r\n     - IAM roles and policies\r\n   - Configure compliance controls:\r\n     - Audit logging\r\n     - Data encryption at rest/transit\r\n     - Backup and disaster recovery\r\n   - Set up security scanning:\r\n     - Container image scanning\r\n     - Infrastructure vulnerability scanning\r\n     - Compliance policy validation\r\n   - Document security procedures\r\n   - Store security config: \\`npx claude-flow memory store ${memoryNamespace}_devops_security \"TLS: ACM certificates on ALB. WAF: OWASP rules enabled. IAM: Least privilege roles. Backups: Daily snapshots, 30-day retention. Compliance: SOC2 controls implemented.\"\\`\r\n\r\n## Deliverables\r\n- infrastructure/\r\n  - terraform/ (IaC templates, < 500 lines per file)\r\n  - scripts/ (deployment scripts)\r\n  - configs/ (environment configurations)\r\n- .github/workflows/ or .gitlab-ci.yml\r\n  - ci.yml (build and test pipeline)\r\n  - deploy.yml (deployment pipeline)\r\n- monitoring/\r\n  - dashboards/ (monitoring dashboards)\r\n  - alerts/ (alerting rules)\r\n- docs/\r\n  - DEPLOYMENT.md (deployment procedures)\r\n  - RUNBOOK.md (operational runbook)\r\n  - DISASTER_RECOVERY.md (DR procedures)\r\n  - ROLLBACK.md (rollback instructions)\r\n\r\n## DevOps Best Practices\r\n- Immutable infrastructure deployments\r\n- Blue-green deployment strategy\r\n- Automated rollback on failures\r\n- Never hardcode credentials - use secrets managers\r\n- Infrastructure as Code for everything\r\n- Comprehensive monitoring and alerting\r\n- Regular disaster recovery testing\r\n- Cost optimization reviews\r\n\r\n## Next Steps\r\nAfter DevOps setup:\r\n- \\`npx claude-flow sparc run post-deployment-monitoring-mode \"Verify production deployment health\" --non-interactive\\`\r\n- \\`npx claude-flow sparc run security-review \"Audit infrastructure security\" --non-interactive\\`\r\n- \\`npx claude-flow sparc run refinement-optimization-mode \"Optimize deployment performance\" --non-interactive\\``;\r\n}\r\n"],"names":["getDevOpsOrchestration","taskDescription","memoryNamespace"],"mappings":"AACA,OAAO,SAASA,uBAAuBC,eAAe,EAAEC,eAAe;IACrE,OAAO,CAAC;;;;;0CAKgC,EAAED,gBAAgB;;;kCAG1B,EAAEC,gBAAgB;kCAClB,EAAEA,gBAAgB;kCAClB,EAAEA,gBAAgB;;;;;;;;oDAQA,EAAEA,gBAAgB,wBAAwB,EAAED,gBAAgB;;;;;;;;;;;;;;;;;;;;wDAoBxD,EAAEC,gBAAgB;;;;;;;;;;;;;;;;;;;;;;2DAsBf,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;4DAuBjB,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;2DAiBnB,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gHAiCmC,CAAC;AACjH"}