# agentic-qe Plugin Manifest
# Quality Engineering plugin for Claude Flow V3

name: agentic-qe
version: 3.2.3
description: |
  Comprehensive Quality Engineering plugin with 51 specialized agents
  across 12 DDD bounded contexts. Features AI-powered test generation,
  O(log n) coverage analysis, defect prediction, security compliance,
  contract testing, visual/accessibility testing, and chaos engineering.

author: rUv
license: MIT
homepage: https://github.com/ruvnet/agentic-qe
repository: https://github.com/ruvnet/agentic-qe

# Plugin metadata
metadata:
  category: quality-engineering
  tags:
    - testing
    - quality
    - coverage
    - security
    - tdd
    - bdd
    - chaos-engineering
    - accessibility
  stability: stable
  minClaudeFlowVersion: "3.0.0-alpha.50"

# Dependencies
dependencies:
  required:
    - "@claude-flow/plugins": ">=3.0.0"
    - "@claude-flow/memory": ">=3.0.0"
    - "@claude-flow/security": ">=3.0.0"
    - "@claude-flow/embeddings": ">=3.0.0"
  optional:
    - "@claude-flow/browser": ">=3.0.0"  # For E2E/visual testing
    - "@ruvector/attention": ">=1.0.0"   # Enhanced pattern matching
    - "@ruvector/gnn": ">=1.0.0"         # Code graph analysis
    - "@ruvector/sona": ">=1.0.0"        # Self-optimizing learning

# Bounded contexts and their agents
contexts:
  test-generation:
    description: AI-powered test creation across paradigms
    agents:
      - unit-test-generator
      - integration-test-generator
      - e2e-test-generator
      - property-test-generator
      - mutation-test-generator
      - fuzz-test-generator
      - api-test-generator
      - performance-test-generator
      - security-test-generator
      - accessibility-test-generator
      - contract-test-generator
      - bdd-test-generator
    memoryNamespace: aqe/v3/test-patterns
    securityLevel: medium

  test-execution:
    description: Parallel test execution with retry and reporting
    agents:
      - test-runner
      - parallel-executor
      - retry-manager
      - result-aggregator
      - flaky-test-detector
      - timeout-manager
      - resource-allocator
      - test-reporter
    memoryNamespace: aqe/v3/test-execution
    securityLevel: high  # Executes code

  coverage-analysis:
    description: O(log n) gap detection using Johnson-Lindenstrauss
    agents:
      - coverage-collector
      - gap-detector
      - priority-ranker
      - hotspot-analyzer
      - trend-tracker
      - impact-assessor
    memoryNamespace: aqe/v3/coverage-data
    securityLevel: low

  quality-assessment:
    description: Quality gates and release readiness decisions
    agents:
      - quality-gate-evaluator
      - readiness-assessor
      - risk-calculator
      - metric-aggregator
      - decision-maker
    memoryNamespace: aqe/v3/quality
    securityLevel: low

  defect-intelligence:
    description: ML-based defect prediction and root cause analysis
    agents:
      - defect-predictor
      - root-cause-analyzer
      - pattern-detector
      - regression-tracker
    memoryNamespace: aqe/v3/defect-patterns
    securityLevel: low

  requirements-validation:
    description: BDD validation and testability analysis
    agents:
      - bdd-validator
      - testability-analyzer
      - requirement-tracer
    memoryNamespace: aqe/v3/requirements
    securityLevel: low

  code-intelligence:
    description: Knowledge graph and semantic code search
    agents:
      - knowledge-graph-builder
      - semantic-searcher
      - dependency-analyzer
      - complexity-assessor
      - pattern-miner
    memoryNamespace: aqe/v3/code-knowledge
    securityLevel: medium

  security-compliance:
    description: SAST, DAST, and compliance auditing
    agents:
      - sast-scanner
      - dast-scanner
      - audit-trail-manager
      - compliance-checker
    memoryNamespace: aqe/v3/security-findings
    securityLevel: critical

  contract-testing:
    description: API contract validation (OpenAPI, GraphQL, gRPC)
    agents:
      - openapi-validator
      - graphql-validator
      - grpc-validator
    memoryNamespace: aqe/v3/contracts
    securityLevel: medium

  visual-accessibility:
    description: Visual regression and WCAG compliance testing
    agents:
      - visual-regression-detector
      - wcag-checker
      - screenshot-differ
    memoryNamespace: aqe/v3/visual-baselines
    securityLevel: medium

  chaos-resilience:
    description: Chaos engineering and resilience validation
    agents:
      - chaos-injector
      - load-generator
      - resilience-assessor
      - recovery-validator
    memoryNamespace: aqe/v3/chaos-experiments
    securityLevel: critical  # Can disrupt systems

  learning-optimization:
    description: Cross-domain transfer learning and optimization
    agents:
      - cross-domain-learner
      - pattern-optimizer
    memoryNamespace: aqe/v3/learning-trajectories
    securityLevel: low

# TDD subagents (London-style red-green-refactor)
tdd:
  style: london
  subagents:
    - requirement-analyzer
    - test-designer
    - red-phase-executor
    - green-phase-implementer
    - refactor-advisor
    - coverage-verifier
    - cycle-coordinator
  maxCycles: 10
  defaultFramework: vitest

# MCP tool registration
mcpTools:
  # Test Generation
  - name: generate-tests
    category: test-generation
    description: Generate tests for code using AI-powered test generation

  - name: tdd-cycle
    category: test-generation
    description: Execute TDD red-green-refactor cycle with 7 specialized subagents

  # Coverage Analysis
  - name: analyze-coverage
    category: coverage-analysis
    description: Analyze code coverage with O(log n) gap detection

  - name: prioritize-gaps
    category: coverage-analysis
    description: Prioritize coverage gaps by risk score

  # Quality Assessment
  - name: evaluate-quality-gate
    category: quality-assessment
    description: Evaluate quality gates for release readiness

  - name: assess-readiness
    category: quality-assessment
    description: Determine release readiness with confidence score

  # Defect Intelligence
  - name: predict-defects
    category: defect-intelligence
    description: Predict potential defects using ML-based analysis

  - name: analyze-root-cause
    category: defect-intelligence
    description: Analyze root cause of defect with pattern matching

  # Security Compliance
  - name: security-scan
    category: security-compliance
    description: Run SAST/DAST security scans with compliance checking

  - name: audit-compliance
    category: security-compliance
    description: Generate compliance audit report

  # Contract Testing
  - name: validate-contract
    category: contract-testing
    description: Validate API contracts (OpenAPI, GraphQL, gRPC)

  - name: compare-contracts
    category: contract-testing
    description: Compare contract versions for breaking changes

  # Visual/Accessibility
  - name: visual-regression
    category: visual-accessibility
    description: Detect visual regressions with screenshot comparison

  - name: check-accessibility
    category: visual-accessibility
    description: Check WCAG accessibility compliance

  # Chaos Engineering
  - name: chaos-inject
    category: chaos-resilience
    description: Inject chaos failures for resilience testing

  - name: assess-resilience
    category: chaos-resilience
    description: Assess system resilience from experiment results

# Hook definitions
hooks:
  # Pre-execution hooks
  pre-test-execution:
    description: Validate test environment before execution
    priority: high

  pre-security-scan:
    description: Validate scan targets and permissions
    priority: critical

  # Post-execution hooks
  post-test-execution:
    description: Store test results and learn patterns
    priority: normal

  post-coverage-analysis:
    description: Store coverage data and update trends
    priority: normal

  post-security-scan:
    description: Store findings and update compliance status
    priority: high

# Worker definitions
workers:
  test-executor:
    type: test-executor
    capabilities:
      - test-execution
      - parallel-processing
    maxConcurrent: 10

  coverage-analyzer:
    type: coverage-analyzer
    capabilities:
      - coverage-collection
      - gap-detection
    maxConcurrent: 5

  security-scanner:
    type: security-scanner
    capabilities:
      - sast
      - dast
    maxConcurrent: 3

# Memory namespaces
memory:
  namespaces:
    - name: aqe/v3/test-patterns
      vectorDimension: 384
      hnswConfig:
        m: 16
        efConstruction: 200
        efSearch: 100
      ttl: null  # Permanent

    - name: aqe/v3/coverage-data
      vectorDimension: 384
      hnswConfig:
        m: 12
        efConstruction: 150
        efSearch: 50
      ttl: 86400000  # 24h

    - name: aqe/v3/defect-patterns
      vectorDimension: 384
      hnswConfig:
        m: 16
        efConstruction: 200
        efSearch: 100
      ttl: null  # Permanent

    - name: aqe/v3/code-knowledge
      vectorDimension: 384
      hnswConfig:
        m: 24
        efConstruction: 300
        efSearch: 150
      ttl: null  # Permanent

    - name: aqe/v3/security-findings
      vectorDimension: 384
      hnswConfig:
        m: 16
        efConstruction: 200
        efSearch: 100
      ttl: null  # Permanent

    - name: aqe/v3/contracts
      vectorDimension: 384
      hnswConfig:
        m: 12
        efConstruction: 150
        efSearch: 50
      ttl: null  # Permanent

    - name: aqe/v3/visual-baselines
      vectorDimension: 768  # Higher for images
      hnswConfig:
        m: 32
        efConstruction: 400
        efSearch: 200
      ttl: null  # Permanent

    - name: aqe/v3/chaos-experiments
      vectorDimension: 384
      hnswConfig:
        m: 12
        efConstruction: 150
        efSearch: 50
      ttl: 604800000  # 7 days

    - name: aqe/v3/learning-trajectories
      vectorDimension: 384
      hnswConfig:
        m: 16
        efConstruction: 200
        efSearch: 100
      ttl: null  # Permanent

# Security sandbox configuration
sandbox:
  maxExecutionTime: 30000  # 30s
  memoryLimit: 536870912   # 512MB
  networkPolicy: restricted
  fileSystemPolicy: workspace-only
  allowedCommands:
    - node
    - npm
    - npx
    - vitest
    - jest
    - pytest
  blockedPaths:
    - /etc
    - /var
    - ~/.ssh
    - ~/.aws

# Model routing (TinyDancer alignment with ADR-026)
modelRouting:
  tiers:
    tier1:
      handler: agent-booster
      categories:
        - add-test-import
        - add-test-describe
        - add-assertion
        - remove-console
      latency: "<1ms"
      cost: 0

    tier2:
      handler: haiku
      categories:
        - generate-unit-test
        - generate-mock
        - analyze-coverage-line
        - validate-simple-contract
      latency: "~500ms"
      cost: 0.0002

    tier2-sonnet:
      handler: sonnet
      categories:
        - generate-integration-test
        - analyze-coverage-branch
        - predict-defect-simple
        - validate-contract
      latency: "~2s"
      cost: 0.003

    tier3:
      handler: opus
      categories:
        - generate-e2e-test
        - root-cause-analysis
        - chaos-experiment-design
        - security-audit-deep
        - architecture-analysis
      latency: "~5s"
      cost: 0.015

# Performance targets
performance:
  testGenerationLatency: "<2s"
  coverageAnalysis: "O(log n)"
  qualityGateEvaluation: "<500ms"
  securityScanPerKLOC: "<10s"
  mcpToolResponse: "<100ms"
  memoryPerContext: "<50MB"

# V3 domain integration mapping
integration:
  memory:
    type: shared-kernel
    components:
      - AgentDB
      - HNSW
      - Embeddings
      - ReasoningBank

  security:
    type: conformist
    components:
      - PathValidator
      - SafeExecutor
      - TokenGenerator
      - InputValidator

  core:
    type: customer-supplier
    components:
      - AgentService
      - TaskService
      - WorkflowService

  coordination:
    type: shared-kernel
    components:
      - HiveMind
      - Consensus
      - Broadcast
      - SharedMemory

  mcp:
    type: published-language
    components:
      - ToolRegistry
      - ToolHandler

# ═══════════════════════════════════════════════════════════════════════════════
# IMPLEMENTATION STATUS & PLAN
# ═══════════════════════════════════════════════════════════════════════════════

implementation:
  status: planning  # planning | in-progress | complete
  lastUpdated: "2026-01-23"

  # What exists vs what needs to be built
  files:
    existing:
      - path: plugin.yaml
        status: complete
        description: Plugin manifest with full configuration
      - path: README.md
        status: complete
        description: Usage documentation

    required:
      # Phase 1: Plugin Scaffold
      - path: package.json
        status: pending
        phase: 1
        priority: critical
        estimatedLines: 50

      - path: tsconfig.json
        status: pending
        phase: 1
        priority: critical
        estimatedLines: 30

      - path: src/index.ts
        status: pending
        phase: 1
        priority: critical
        estimatedLines: 80
        description: Plugin entry point and exports

      - path: src/plugin.ts
        status: pending
        phase: 1
        priority: critical
        estimatedLines: 200
        description: AQEPlugin class with lifecycle methods

      - path: src/types.ts
        status: pending
        phase: 1
        priority: critical
        estimatedLines: 300
        description: TypeScript type definitions

      - path: src/interfaces.ts
        status: pending
        phase: 1
        priority: critical
        estimatedLines: 200
        description: Public interfaces

      - path: src/schemas.ts
        status: pending
        phase: 1
        priority: critical
        estimatedLines: 250
        description: Zod validation schemas

      - path: src/constants.ts
        status: pending
        phase: 1
        priority: high
        estimatedLines: 100
        description: Plugin constants and defaults

      # Phase 2: Bridge Implementations
      - path: src/bridges/index.ts
        status: pending
        phase: 2
        priority: critical
        estimatedLines: 50

      - path: src/bridges/QEMemoryBridge.ts
        status: pending
        phase: 2
        priority: critical
        estimatedLines: 300
        description: Memory domain integration (AgentDB, HNSW)

      - path: src/bridges/QESecurityBridge.ts
        status: pending
        phase: 2
        priority: critical
        estimatedLines: 250
        description: Security domain integration (PathValidator, SafeExecutor)

      - path: src/bridges/QECoreBridge.ts
        status: pending
        phase: 2
        priority: critical
        estimatedLines: 250
        description: Core domain integration (AgentService, TaskService)

      - path: src/bridges/QEHiveBridge.ts
        status: pending
        phase: 2
        priority: critical
        estimatedLines: 300
        description: Hive Mind coordination (Queen, Consensus)

      - path: src/bridges/QEModelRoutingAdapter.ts
        status: pending
        phase: 2
        priority: high
        estimatedLines: 200
        description: TinyDancer ↔ ADR-026 adapter

      - path: src/contexts/ContextMapper.ts
        status: pending
        phase: 2
        priority: high
        estimatedLines: 150
        description: Maps 12 QE contexts to V3 domains

      # Phase 3: MCP Tools (16 tools)
      - path: src/tools/index.ts
        status: pending
        phase: 3
        priority: critical
        estimatedLines: 100
        description: Tool registry and registration

      - path: src/tools/test-generation/generate-tests.ts
        status: pending
        phase: 3
        priority: critical
        estimatedLines: 150

      - path: src/tools/test-generation/tdd-cycle.ts
        status: pending
        phase: 3
        priority: critical
        estimatedLines: 200

      - path: src/tools/coverage-analysis/analyze-coverage.ts
        status: pending
        phase: 3
        priority: critical
        estimatedLines: 150

      - path: src/tools/coverage-analysis/prioritize-gaps.ts
        status: pending
        phase: 3
        priority: critical
        estimatedLines: 120

      - path: src/tools/quality-assessment/evaluate-quality-gate.ts
        status: pending
        phase: 3
        priority: high
        estimatedLines: 150

      - path: src/tools/quality-assessment/assess-readiness.ts
        status: pending
        phase: 3
        priority: high
        estimatedLines: 120

      - path: src/tools/defect-intelligence/predict-defects.ts
        status: pending
        phase: 3
        priority: high
        estimatedLines: 150

      - path: src/tools/defect-intelligence/analyze-root-cause.ts
        status: pending
        phase: 3
        priority: high
        estimatedLines: 180

      - path: src/tools/security-compliance/security-scan.ts
        status: pending
        phase: 3
        priority: high
        estimatedLines: 200

      - path: src/tools/security-compliance/audit-compliance.ts
        status: pending
        phase: 3
        priority: high
        estimatedLines: 150

      - path: src/tools/contract-testing/validate-contract.ts
        status: pending
        phase: 3
        priority: medium
        estimatedLines: 150

      - path: src/tools/contract-testing/compare-contracts.ts
        status: pending
        phase: 3
        priority: medium
        estimatedLines: 130

      - path: src/tools/visual-accessibility/visual-regression.ts
        status: pending
        phase: 3
        priority: medium
        estimatedLines: 180

      - path: src/tools/visual-accessibility/check-accessibility.ts
        status: pending
        phase: 3
        priority: medium
        estimatedLines: 150

      - path: src/tools/chaos-resilience/chaos-inject.ts
        status: pending
        phase: 3
        priority: medium
        estimatedLines: 200

      - path: src/tools/chaos-resilience/assess-resilience.ts
        status: pending
        phase: 3
        priority: medium
        estimatedLines: 150

      # Phase 4: Hooks & Workers
      - path: src/hooks/index.ts
        status: pending
        phase: 4
        priority: high
        estimatedLines: 50

      - path: src/hooks/pre-test-execution.ts
        status: pending
        phase: 4
        priority: high
        estimatedLines: 100

      - path: src/hooks/pre-security-scan.ts
        status: pending
        phase: 4
        priority: high
        estimatedLines: 100

      - path: src/hooks/post-test-execution.ts
        status: pending
        phase: 4
        priority: high
        estimatedLines: 120

      - path: src/hooks/post-coverage-analysis.ts
        status: pending
        phase: 4
        priority: high
        estimatedLines: 100

      - path: src/hooks/post-security-scan.ts
        status: pending
        phase: 4
        priority: high
        estimatedLines: 120

      - path: src/workers/index.ts
        status: pending
        phase: 4
        priority: high
        estimatedLines: 50

      - path: src/workers/TestExecutorWorker.ts
        status: pending
        phase: 4
        priority: high
        estimatedLines: 200

      - path: src/workers/CoverageAnalyzerWorker.ts
        status: pending
        phase: 4
        priority: medium
        estimatedLines: 150

      - path: src/workers/SecurityScannerWorker.ts
        status: pending
        phase: 4
        priority: medium
        estimatedLines: 180

      - path: src/sandbox/index.ts
        status: pending
        phase: 4
        priority: critical
        estimatedLines: 50

      - path: src/sandbox/TestSandbox.ts
        status: pending
        phase: 4
        priority: critical
        estimatedLines: 250
        description: Isolated test code execution

      - path: src/sandbox/SandboxPolicy.ts
        status: pending
        phase: 4
        priority: critical
        estimatedLines: 100

      # Phase 5: Agent Definitions (58 total)
      - path: agents/**/*.yaml
        status: pending
        phase: 5
        priority: high
        count: 58
        estimatedLinesEach: 40
        description: "12 test-gen + 8 test-exec + 6 coverage + 5 quality + 4 defect + 3 requirements + 5 code-intel + 4 security + 3 contract + 3 visual + 4 chaos + 2 learning + 7 TDD"

      # Phase 6: Skills (12 total)
      - path: skills/qe-test-generation.md
        status: pending
        phase: 6
        priority: high
        estimatedLines: 100

      - path: skills/qe-tdd-cycle.md
        status: pending
        phase: 6
        priority: high
        estimatedLines: 120

      - path: skills/qe-coverage-analysis.md
        status: pending
        phase: 6
        priority: high
        estimatedLines: 100

      - path: skills/qe-quality-gate.md
        status: pending
        phase: 6
        priority: high
        estimatedLines: 100

      - path: skills/qe-defect-prediction.md
        status: pending
        phase: 6
        priority: medium
        estimatedLines: 100

      - path: skills/qe-security-scan.md
        status: pending
        phase: 6
        priority: high
        estimatedLines: 120

      - path: skills/qe-contract-testing.md
        status: pending
        phase: 6
        priority: medium
        estimatedLines: 100

      - path: skills/qe-visual-testing.md
        status: pending
        phase: 6
        priority: medium
        estimatedLines: 100

      - path: skills/qe-accessibility.md
        status: pending
        phase: 6
        priority: medium
        estimatedLines: 100

      - path: skills/qe-chaos-engineering.md
        status: pending
        phase: 6
        priority: medium
        estimatedLines: 120

      - path: skills/qe-queen-coordinator.md
        status: pending
        phase: 6
        priority: high
        estimatedLines: 150

      - path: skills/qe-full-pipeline.md
        status: pending
        phase: 6
        priority: high
        estimatedLines: 200

      # Phase 7: Tests
      - path: vitest.config.ts
        status: pending
        phase: 7
        priority: high
        estimatedLines: 40

      - path: __tests__/unit/**/*.test.ts
        status: pending
        phase: 7
        priority: high
        count: 15
        estimatedLinesEach: 100

      - path: __tests__/integration/**/*.test.ts
        status: pending
        phase: 7
        priority: high
        count: 5
        estimatedLinesEach: 150

      - path: __tests__/e2e/**/*.test.ts
        status: pending
        phase: 7
        priority: medium
        count: 3
        estimatedLinesEach: 200

  # Phase summary
  phases:
    - phase: 1
      name: Plugin Scaffold
      status: pending
      duration: "1 week"
      files: 8
      estimatedLines: 1210
      deliverables:
        - Plugin registers with @claude-flow/plugins SDK
        - Type-safe configuration validation
        - Basic lifecycle hooks (onLoad, onUnload)

    - phase: 2
      name: Bridge Implementations
      status: pending
      duration: "1 week"
      files: 7
      estimatedLines: 1500
      deliverables:
        - Anti-corruption layer isolates agentic-qe from V3 internals
        - Memory namespace coordination working
        - TinyDancer ↔ ADR-026 routing aligned

    - phase: 3
      name: MCP Tools
      status: pending
      duration: "1 week"
      files: 17
      estimatedLines: 2530
      deliverables:
        - All 16 MCP tools registered and functional
        - Tools accessible via mcp__agentic-qe__<tool-name>
        - Input validation via Zod schemas

    - phase: 4
      name: Hooks & Workers
      status: pending
      duration: "1 week"
      files: 12
      estimatedLines: 1470
      deliverables:
        - Hooks integrate with V3 hook system
        - Workers run in background with concurrency limits
        - Sandbox isolates test code execution

    - phase: 5
      name: Agent Definitions
      status: pending
      duration: "1 week"
      files: 58
      estimatedLines: 2320
      deliverables:
        - All 58 agents (51 + 7 TDD) defined as YAML
        - Agents spawn via Claude Code Task tool
        - Model routing hints in agent definitions

    - phase: 6
      name: Skills & Examples
      status: pending
      duration: "1 week"
      files: 18
      estimatedLines: 1610
      deliverables:
        - Skills available via /qe-* commands
        - Working examples for all major use cases

    - phase: 7
      name: Testing & Documentation
      status: pending
      duration: "1 week"
      files: 24
      estimatedLines: 2790
      deliverables:
        - 80%+ test coverage
        - All integration points validated
        - Performance benchmarks documented

  # Totals
  totals:
    totalPhases: 7
    totalDuration: "7 weeks"
    totalFiles: 144
    totalEstimatedLines: 13430

  # Critical path
  criticalPath:
    - phase: 1
      blockedBy: null
      blocks: [2, 3, 4, 5, 6, 7]

    - phase: 2
      blockedBy: [1]
      blocks: [3, 4]

    - phase: 3
      blockedBy: [2]
      blocks: [5, 6]

    - phase: 4
      blockedBy: [2]
      blocks: [6, 7]

    - phase: 5
      blockedBy: [3]
      blocks: [6, 7]

    - phase: 6
      blockedBy: [4, 5]
      blocks: [7]

    - phase: 7
      blockedBy: [6]
      blocks: null
