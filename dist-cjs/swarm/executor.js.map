{
  "version": 3,
  "sources": ["../../src/swarm/executor.ts"],
  "sourcesContent": ["/**\n * Advanced Task Executor with timeout handling and process management\n */\n\nimport { spawn, ChildProcess } from 'node:child_process';\nimport { EventEmitter } from 'node:events';\nimport * as fs from 'node:fs/promises';\nimport * as path from 'node:path';\nimport * as os from 'node:os';\nimport { Logger } from '../core/logger.js';\nimport { generateId } from '../utils/helpers.js';\nimport {\n  TaskDefinition,\n  AgentState,\n  TaskResult,\n  SwarmEvent,\n  EventType,\n  SWARM_CONSTANTS,\n} from './types.js';\n\nexport interface ExecutionContext {\n  task: TaskDefinition;\n  agent: AgentState;\n  workingDirectory: string;\n  tempDirectory: string;\n  logDirectory: string;\n  environment: Record<string, string>;\n  resources: ExecutionResources;\n}\n\nexport interface ExecutionResources {\n  maxMemory: number;\n  maxCpuTime: number;\n  maxDiskSpace: number;\n  maxNetworkConnections: number;\n  maxFileHandles: number;\n  priority: number;\n}\n\nexport interface ExecutionResult {\n  success: boolean;\n  output: string;\n  error?: string;\n  exitCode: number;\n  duration: number;\n  resourcesUsed: ResourceUsage;\n  artifacts: Record<string, any>;\n  metadata: Record<string, any>;\n}\n\nexport interface ResourceUsage {\n  cpuTime: number;\n  maxMemory: number;\n  diskIO: number;\n  networkIO: number;\n  fileHandles: number;\n}\n\nexport interface ExecutionConfig {\n  timeoutMs: number;\n  retryAttempts: number;\n  killTimeout: number;\n  resourceLimits: ExecutionResources;\n  sandboxed: boolean;\n  logLevel: string;\n  captureOutput: boolean;\n  streamOutput: boolean;\n  enableMetrics: boolean;\n}\n\nexport class TaskExecutor extends EventEmitter {\n  private logger: Logger;\n  private config: ExecutionConfig;\n  private activeExecutions: Map<string, ExecutionSession> = new Map();\n  private resourceMonitor: ResourceMonitor;\n  private processPool: ProcessPool;\n\n  constructor(config: Partial<ExecutionConfig> = {}) {\n    super();\n\n    this.config = this.mergeWithDefaults(config);\n    this.logger = new Logger(\n      { level: this.config.logLevel || 'info', format: 'text', destination: 'console' },\n      { component: 'TaskExecutor' },\n    );\n    this.resourceMonitor = new ResourceMonitor();\n    this.processPool = new ProcessPool(this.config);\n\n    this.setupEventHandlers();\n  }\n\n  async initialize(): Promise<void> {\n    this.logger.info('Initializing task executor...');\n\n    await this.resourceMonitor.initialize();\n    await this.processPool.initialize();\n\n    this.logger.info('Task executor initialized');\n  }\n\n  async shutdown(): Promise<void> {\n    this.logger.info('Shutting down task executor...');\n\n    // Stop all active executions\n    const stopPromises = Array.from(this.activeExecutions.values()).map((session) =>\n      this.stopExecution(session.id, 'Executor shutdown'),\n    );\n\n    await Promise.allSettled(stopPromises);\n\n    await this.processPool.shutdown();\n    await this.resourceMonitor.shutdown();\n\n    this.logger.info('Task executor shut down');\n  }\n\n  async executeTask(\n    task: TaskDefinition,\n    agent: AgentState,\n    options: Partial<ExecutionConfig> = {},\n  ): Promise<ExecutionResult> {\n    const sessionId = generateId('execution');\n    const context = await this.createExecutionContext(task, agent);\n    const config = { ...this.config, ...options };\n\n    this.logger.info('Starting task execution', {\n      sessionId,\n      taskId: task.id.id,\n      agentId: agent.id.id,\n      timeout: config.timeoutMs,\n    });\n\n    const session = new ExecutionSession(sessionId, task, agent, context, config, this.logger);\n\n    this.activeExecutions.set(sessionId, session);\n\n    try {\n      // Setup monitoring\n      this.resourceMonitor.startMonitoring(sessionId, context.resources);\n\n      // Execute with timeout protection\n      const result = await this.executeWithTimeout(session);\n\n      // Cleanup\n      await this.cleanupExecution(session);\n\n      this.logger.info('Task execution completed', {\n        sessionId,\n        success: result.success,\n        duration: result.duration,\n      });\n\n      return result;\n    } catch (error) {\n      this.logger.error('Task execution failed', {\n        sessionId,\n        error: error instanceof Error ? error.message : String(error),\n        stack: error.stack,\n      });\n\n      await this.cleanupExecution(session);\n      throw error;\n    } finally {\n      this.activeExecutions.delete(sessionId);\n      this.resourceMonitor.stopMonitoring(sessionId);\n    }\n  }\n\n  async stopExecution(sessionId: string, reason: string): Promise<void> {\n    const session = this.activeExecutions.get(sessionId);\n    if (!session) {\n      return;\n    }\n\n    this.logger.info('Stopping execution', { sessionId, reason });\n\n    try {\n      await session.stop(reason);\n    } catch (error) {\n      this.logger.error('Error stopping execution', { sessionId, error });\n    }\n  }\n\n  async executeClaudeTask(\n    task: TaskDefinition,\n    agent: AgentState,\n    claudeOptions: ClaudeExecutionOptions = {},\n  ): Promise<ExecutionResult> {\n    const sessionId = generateId('claude-execution');\n    const context = await this.createExecutionContext(task, agent);\n\n    this.logger.info('Starting Claude task execution', {\n      sessionId,\n      taskId: task.id.id,\n      agentId: agent.id.id,\n    });\n\n    try {\n      return await this.executeClaudeWithTimeout(sessionId, task, agent, context, claudeOptions);\n    } catch (error) {\n      this.logger.error('Claude task execution failed', {\n        sessionId,\n        error: error instanceof Error ? error.message : String(error),\n      });\n      throw error;\n    }\n  }\n\n  getActiveExecutions(): ExecutionSession[] {\n    return Array.from(this.activeExecutions.values());\n  }\n\n  getExecutionMetrics(): ExecutionMetrics {\n    return {\n      activeExecutions: this.activeExecutions.size,\n      totalExecutions: this.processPool.getTotalExecutions(),\n      averageDuration: this.processPool.getAverageDuration(),\n      successRate: this.processPool.getSuccessRate(),\n      resourceUtilization: this.resourceMonitor.getUtilization(),\n      errorRate: this.processPool.getErrorRate(),\n    };\n  }\n\n  private async executeWithTimeout(session: ExecutionSession): Promise<ExecutionResult> {\n    return new Promise((resolve, reject) => {\n      const timeout = setTimeout(() => {\n        this.logger.warn('Execution timeout', {\n          sessionId: session.id,\n          timeout: session.config.timeoutMs,\n        });\n\n        session.stop('Timeout').then(() => {\n          reject(new Error(`Execution timed out after ${session.config.timeoutMs}ms`));\n        });\n      }, session.config.timeoutMs);\n\n      session\n        .execute()\n        .then((result) => {\n          clearTimeout(timeout);\n          resolve(result);\n        })\n        .catch((error) => {\n          clearTimeout(timeout);\n          reject(error);\n        });\n    });\n  }\n\n  private async executeClaudeWithTimeout(\n    sessionId: string,\n    task: TaskDefinition,\n    agent: AgentState,\n    context: ExecutionContext,\n    options: ClaudeExecutionOptions,\n  ): Promise<ExecutionResult> {\n    const startTime = Date.now();\n    const timeout = options.timeout || this.config.timeoutMs;\n\n    // Build Claude command\n    const command = this.buildClaudeCommand(task, agent, options);\n\n    // Create execution environment\n    const env = {\n      ...process.env,\n      ...context.environment,\n      CLAUDE_TASK_ID: task.id.id,\n      CLAUDE_AGENT_ID: agent.id.id,\n      CLAUDE_SESSION_ID: sessionId,\n      CLAUDE_WORKING_DIR: context.workingDirectory,\n    };\n\n    this.logger.debug('Executing Claude command', {\n      sessionId,\n      command: command.command,\n      args: command.args,\n      workingDir: context.workingDirectory,\n    });\n\n    return new Promise((resolve, reject) => {\n      let outputBuffer = '';\n      let errorBuffer = '';\n      let isTimeout = false;\n      let process: ChildProcess | null = null;\n\n      // Setup timeout\n      const timeoutHandle = setTimeout(() => {\n        isTimeout = true;\n        if (process) {\n          this.logger.warn('Claude execution timeout, killing process', {\n            sessionId,\n            pid: process.pid,\n            timeout,\n          });\n\n          // Graceful shutdown first\n          process.kill('SIGTERM');\n\n          // Force kill after grace period\n          setTimeout(() => {\n            if (process && !process.killed) {\n              process.kill('SIGKILL');\n            }\n          }, this.config.killTimeout);\n        }\n      }, timeout);\n\n      try {\n        // Spawn Claude process\n        process = spawn(command.command, command.args, {\n          cwd: context.workingDirectory,\n          env,\n          stdio: ['pipe', 'pipe', 'pipe'],\n          detached: options.detached || false,\n        });\n\n        if (!process.pid) {\n          clearTimeout(timeoutHandle);\n          reject(new Error('Failed to spawn Claude process'));\n          return;\n        }\n\n        this.logger.info('Claude process started', {\n          sessionId,\n          pid: process.pid,\n          command: command.command,\n        });\n\n        // Handle process output\n        if (process.stdout) {\n          process.stdout.on('data', (data: Buffer) => {\n            const chunk = data.toString();\n            outputBuffer += chunk;\n\n            if (this.config.streamOutput) {\n              this.emit('output', {\n                sessionId,\n                type: 'stdout',\n                data: chunk,\n              });\n            }\n          });\n        }\n\n        if (process.stderr) {\n          process.stderr.on('data', (data: Buffer) => {\n            const chunk = data.toString();\n            errorBuffer += chunk;\n\n            if (this.config.streamOutput) {\n              this.emit('output', {\n                sessionId,\n                type: 'stderr',\n                data: chunk,\n              });\n            }\n          });\n        }\n\n        // Handle process completion\n        process.on('close', async (code: number | null, signal: string | null) => {\n          clearTimeout(timeoutHandle);\n\n          const duration = Date.now() - startTime;\n          const exitCode = code || 0;\n\n          this.logger.info('Claude process completed', {\n            sessionId,\n            exitCode,\n            signal,\n            duration,\n            isTimeout,\n          });\n\n          try {\n            // Collect resource usage\n            const resourceUsage = await this.collectResourceUsage(sessionId);\n\n            // Collect artifacts\n            const artifacts = await this.collectArtifacts(context);\n\n            const result: ExecutionResult = {\n              success: !isTimeout && exitCode === 0,\n              output: outputBuffer,\n              error: errorBuffer,\n              exitCode,\n              duration,\n              resourcesUsed: resourceUsage,\n              artifacts,\n              metadata: {\n                sessionId,\n                timeout: isTimeout,\n                signal,\n                command: command.command,\n                args: command.args,\n              },\n            };\n\n            if (isTimeout) {\n              reject(new Error(`Claude execution timed out after ${timeout}ms`));\n            } else if (exitCode !== 0) {\n              reject(\n                new Error(`Claude execution failed with exit code ${exitCode}: ${errorBuffer}`),\n              );\n            } else {\n              resolve(result);\n            }\n          } catch (error) {\n            reject(error);\n          }\n        });\n\n        // Handle process errors\n        process.on('error', (error: Error) => {\n          clearTimeout(timeoutHandle);\n          this.logger.error('Claude process error', {\n            sessionId,\n            error: error instanceof Error ? error.message : String(error),\n          });\n          reject(error);\n        });\n\n        // Send input if provided\n        if (command.input && process.stdin) {\n          process.stdin.write(command.input);\n          process.stdin.end();\n        }\n\n        // If detached, unreference to allow parent to exit\n        if (options.detached) {\n          process.unref();\n        }\n      } catch (error) {\n        clearTimeout(timeoutHandle);\n        reject(error);\n      }\n    });\n  }\n\n  private buildClaudeCommand(\n    task: TaskDefinition,\n    agent: AgentState,\n    options: ClaudeExecutionOptions,\n  ): ClaudeCommand {\n    const args: string[] = [];\n    let input = '';\n\n    // Build prompt\n    const prompt = this.buildClaudePrompt(task, agent);\n\n    if (options.useStdin) {\n      // Send prompt via stdin\n      input = prompt;\n    } else {\n      // Send prompt as argument\n      args.push('-p', prompt);\n    }\n\n    // Add tools\n    if (task.requirements.tools.length > 0) {\n      args.push('--allowedTools', task.requirements.tools.join(','));\n    }\n\n    // Add model if specified\n    if (options.model) {\n      args.push('--model', options.model);\n    }\n\n    // Add max tokens if specified\n    if (options.maxTokens) {\n      args.push('--max-tokens', options.maxTokens.toString());\n    }\n\n    // Add temperature if specified\n    if (options.temperature !== undefined) {\n      args.push('--temperature', options.temperature.toString());\n    }\n\n    // Skip permissions check for swarm execution\n    args.push('--dangerously-skip-permissions');\n\n    // Add output format\n    if (options.outputFormat) {\n      args.push('--output-format', options.outputFormat);\n    }\n\n    return {\n      command: options.claudePath || 'claude',\n      args,\n      input,\n    };\n  }\n\n  private buildClaudePrompt(task: TaskDefinition, agent: AgentState): string {\n    const sections: string[] = [];\n\n    // Agent identification\n    sections.push(`You are ${agent.name}, a ${agent.type} agent in a swarm system.`);\n    sections.push(`Agent ID: ${agent.id.id}`);\n    sections.push(`Swarm ID: ${agent.id.swarmId}`);\n    sections.push('');\n\n    // Task information\n    sections.push(`TASK: ${task.name}`);\n    sections.push(`Type: ${task.type}`);\n    sections.push(`Priority: ${task.priority}`);\n    sections.push('');\n\n    // Task description\n    sections.push('DESCRIPTION:');\n    sections.push(task.description);\n    sections.push('');\n\n    // Task instructions\n    sections.push('INSTRUCTIONS:');\n    sections.push(task.instructions);\n    sections.push('');\n\n    // Context if provided\n    if (Object.keys(task.context).length > 0) {\n      sections.push('CONTEXT:');\n      sections.push(JSON.stringify(task.context, null, 2));\n      sections.push('');\n    }\n\n    // Input data if provided\n    if (task.input && Object.keys(task.input).length > 0) {\n      sections.push('INPUT DATA:');\n      sections.push(JSON.stringify(task.input, null, 2));\n      sections.push('');\n    }\n\n    // Examples if provided\n    if (task.examples && task.examples.length > 0) {\n      sections.push('EXAMPLES:');\n      task.examples.forEach((example, index) => {\n        sections.push(`Example ${index + 1}:`);\n        sections.push(JSON.stringify(example, null, 2));\n        sections.push('');\n      });\n    }\n\n    // Expected output format\n    sections.push('EXPECTED OUTPUT:');\n    if (task.expectedOutput) {\n      sections.push(JSON.stringify(task.expectedOutput, null, 2));\n    } else {\n      sections.push('Provide a structured response with:');\n      sections.push('- Summary of what was accomplished');\n      sections.push('- Any artifacts created (files, data, etc.)');\n      sections.push('- Recommendations or next steps');\n      sections.push('- Any issues encountered');\n    }\n    sections.push('');\n\n    // Quality requirements\n    sections.push('QUALITY REQUIREMENTS:');\n    sections.push(`- Quality threshold: ${task.requirements.minReliability || 0.8}`);\n    if (task.requirements.reviewRequired) {\n      sections.push('- Review required before completion');\n    }\n    if (task.requirements.testingRequired) {\n      sections.push('- Testing required before completion');\n    }\n    if (task.requirements.documentationRequired) {\n      sections.push('- Documentation required');\n    }\n    sections.push('');\n\n    // Capabilities and constraints\n    sections.push('CAPABILITIES:');\n    const capabilities = Object.entries(agent.capabilities)\n      .filter(([key, value]) => typeof value === 'boolean' && value)\n      .map(([key]) => key);\n    sections.push(capabilities.join(', '));\n    sections.push('');\n\n    sections.push('CONSTRAINTS:');\n    sections.push(\n      `- Maximum execution time: ${task.constraints.timeoutAfter || SWARM_CONSTANTS.DEFAULT_TASK_TIMEOUT}ms`,\n    );\n    sections.push(\n      `- Maximum retries: ${task.constraints.maxRetries || SWARM_CONSTANTS.MAX_RETRIES}`,\n    );\n    if (task.constraints.deadline) {\n      sections.push(`- Deadline: ${task.constraints.deadline.toISOString()}`);\n    }\n    sections.push('');\n\n    // Final instructions\n    sections.push('EXECUTION GUIDELINES:');\n    sections.push('1. Read and understand the task completely before starting');\n    sections.push('2. Use your capabilities efficiently and effectively');\n    sections.push('3. Provide detailed output about your progress and results');\n    sections.push('4. Handle errors gracefully and report issues clearly');\n    sections.push('5. Ensure your work meets the quality requirements');\n    sections.push('6. When complete, provide a clear summary of what was accomplished');\n    sections.push('');\n\n    sections.push('Begin your task execution now.');\n\n    return sections.join('\\n');\n  }\n\n  private async createExecutionContext(\n    task: TaskDefinition,\n    agent: AgentState,\n  ): Promise<ExecutionContext> {\n    const baseDir = path.join(os.tmpdir(), 'swarm-execution', task.id.id);\n    const workingDir = path.join(baseDir, 'work');\n    const tempDir = path.join(baseDir, 'temp');\n    const logDir = path.join(baseDir, 'logs');\n\n    // Create directories\n    await fs.mkdir(workingDir, { recursive: true });\n    await fs.mkdir(tempDir, { recursive: true });\n    await fs.mkdir(logDir, { recursive: true });\n\n    return {\n      task,\n      agent,\n      workingDirectory: workingDir,\n      tempDirectory: tempDir,\n      logDirectory: logDir,\n      environment: {\n        NODE_ENV: 'production',\n        SWARM_MODE: 'execution',\n        AGENT_TYPE: agent.type,\n        TASK_TYPE: task.type,\n        ...agent.environment.credentials,\n      },\n      resources: {\n        maxMemory: task.requirements.memoryRequired || SWARM_CONSTANTS.DEFAULT_MEMORY_LIMIT,\n        maxCpuTime: task.requirements.maxDuration || SWARM_CONSTANTS.DEFAULT_TASK_TIMEOUT,\n        maxDiskSpace: 1024 * 1024 * 1024, // 1GB\n        maxNetworkConnections: 10,\n        maxFileHandles: 100,\n        priority: this.getPriorityNumber(task.priority),\n      },\n    };\n  }\n\n  private async cleanupExecution(session: ExecutionSession): Promise<void> {\n    try {\n      await session.cleanup();\n      this.logger.debug('Execution cleanup completed', { sessionId: session.id });\n    } catch (error) {\n      this.logger.warn('Error during execution cleanup', {\n        sessionId: session.id,\n        error: error instanceof Error ? error.message : String(error),\n      });\n    }\n  }\n\n  private async collectResourceUsage(sessionId: string): Promise<ResourceUsage> {\n    return this.resourceMonitor.getUsage(sessionId);\n  }\n\n  private async collectArtifacts(context: ExecutionContext): Promise<Record<string, any>> {\n    const artifacts: Record<string, any> = {};\n\n    try {\n      // Scan working directory for artifacts\n      const files = await this.scanDirectory(context.workingDirectory);\n      artifacts.files = files;\n\n      // Check for specific artifact types\n      artifacts.logs = await this.collectLogs(context.logDirectory);\n      artifacts.outputs = await this.collectOutputs(context.workingDirectory);\n    } catch (error) {\n      this.logger.warn('Error collecting artifacts', {\n        workingDir: context.workingDirectory,\n        error: error instanceof Error ? error.message : String(error),\n      });\n    }\n\n    return artifacts;\n  }\n\n  private async scanDirectory(dirPath: string): Promise<string[]> {\n    try {\n      const entries = await fs.readdir(dirPath, { withFileTypes: true });\n      const files: string[] = [];\n\n      for (const entry of entries) {\n        const fullPath = path.join(dirPath, entry.name);\n        if (entry.isFile()) {\n          files.push(fullPath);\n        } else if (entry.isDirectory()) {\n          const subFiles = await this.scanDirectory(fullPath);\n          files.push(...subFiles);\n        }\n      }\n\n      return files;\n    } catch (error) {\n      return [];\n    }\n  }\n\n  private async collectLogs(logDir: string): Promise<Record<string, string>> {\n    const logs: Record<string, string> = {};\n\n    try {\n      const files = await fs.readdir(logDir);\n      for (const file of files) {\n        if (file.endsWith('.log')) {\n          const filePath = path.join(logDir, file);\n          const content = await fs.readFile(filePath, 'utf-8');\n          logs[file] = content;\n        }\n      }\n    } catch (error) {\n      // Log directory might not exist\n    }\n\n    return logs;\n  }\n\n  private async collectOutputs(workingDir: string): Promise<Record<string, any>> {\n    const outputs: Record<string, any> = {};\n\n    try {\n      // Look for common output files\n      const outputFiles = ['output.json', 'result.json', 'response.json'];\n\n      for (const fileName of outputFiles) {\n        const filePath = path.join(workingDir, fileName);\n        try {\n          const content = await fs.readFile(filePath, 'utf-8');\n          outputs[fileName] = JSON.parse(content);\n        } catch (error) {\n          // File doesn't exist or isn't valid JSON\n        }\n      }\n    } catch (error) {\n      // Working directory might not exist\n    }\n\n    return outputs;\n  }\n\n  private getPriorityNumber(priority: string): number {\n    switch (priority) {\n      case 'critical':\n        return 0;\n      case 'high':\n        return 1;\n      case 'normal':\n        return 2;\n      case 'low':\n        return 3;\n      case 'background':\n        return 4;\n      default:\n        return 2;\n    }\n  }\n\n  private mergeWithDefaults(config: Partial<ExecutionConfig>): ExecutionConfig {\n    return {\n      timeoutMs: SWARM_CONSTANTS.DEFAULT_TASK_TIMEOUT,\n      retryAttempts: SWARM_CONSTANTS.MAX_RETRIES,\n      killTimeout: 5000, // 5 seconds\n      resourceLimits: {\n        maxMemory: SWARM_CONSTANTS.DEFAULT_MEMORY_LIMIT,\n        maxCpuTime: SWARM_CONSTANTS.DEFAULT_TASK_TIMEOUT,\n        maxDiskSpace: 1024 * 1024 * 1024, // 1GB\n        maxNetworkConnections: 10,\n        maxFileHandles: 100,\n        priority: 2,\n      },\n      sandboxed: true,\n      logLevel: 'info',\n      captureOutput: true,\n      streamOutput: false,\n      enableMetrics: true,\n      ...config,\n    };\n  }\n\n  private setupEventHandlers(): void {\n    // Handle resource limit violations\n    this.resourceMonitor.on('limit-violation', (data: any) => {\n      this.logger.warn('Resource limit violation', data);\n\n      const session = this.activeExecutions.get(data.sessionId);\n      if (session) {\n        session.stop('Resource limit violation').catch((error) => {\n          this.logger.error('Error stopping session due to resource violation', {\n            sessionId: data.sessionId,\n            error,\n          });\n        });\n      }\n    });\n\n    // Handle process pool events\n    this.processPool.on('process-failed', (data: any) => {\n      this.logger.error('Process failed in pool', data);\n    });\n  }\n}\n\n// ===== SUPPORTING CLASSES =====\n\nclass ExecutionSession {\n  public id: string;\n  public task: TaskDefinition;\n  public agent: AgentState;\n  public context: ExecutionContext;\n  public config: ExecutionConfig;\n  private logger: Logger;\n  private process?: ChildProcess;\n  private startTime?: Date;\n  private endTime?: Date;\n\n  constructor(\n    id: string,\n    task: TaskDefinition,\n    agent: AgentState,\n    context: ExecutionContext,\n    config: ExecutionConfig,\n    logger: Logger,\n  ) {\n    this.id = id;\n    this.task = task;\n    this.agent = agent;\n    this.context = context;\n    this.config = config;\n    this.logger = logger;\n  }\n\n  async execute(): Promise<ExecutionResult> {\n    this.startTime = new Date();\n\n    // Implementation would go here for actual task execution\n    // This is a placeholder that simulates execution\n\n    await new Promise((resolve) => setTimeout(resolve, 1000));\n\n    this.endTime = new Date();\n\n    return {\n      success: true,\n      output: 'Task completed successfully',\n      exitCode: 0,\n      duration: this.endTime.getTime() - this.startTime.getTime(),\n      resourcesUsed: {\n        cpuTime: 1000,\n        maxMemory: 50 * 1024 * 1024,\n        diskIO: 1024,\n        networkIO: 0,\n        fileHandles: 5,\n      },\n      artifacts: {},\n      metadata: {\n        sessionId: this.id,\n        agentId: this.agent.id.id,\n        taskId: this.task.id.id,\n      },\n    };\n  }\n\n  async stop(reason: string): Promise<void> {\n    this.logger.info('Stopping execution session', { sessionId: this.id, reason });\n\n    if (this.process) {\n      this.process.kill('SIGTERM');\n\n      // Force kill after timeout\n      setTimeout(() => {\n        if (this.process && !this.process.killed) {\n          this.process.kill('SIGKILL');\n        }\n      }, 5000);\n    }\n  }\n\n  async cleanup(): Promise<void> {\n    // Cleanup temporary files and resources\n    try {\n      await fs.rm(this.context.tempDirectory, { recursive: true, force: true });\n    } catch (error) {\n      // Ignore cleanup errors\n    }\n  }\n}\n\nclass ResourceMonitor extends EventEmitter {\n  private activeMonitors: Map<string, NodeJS.Timeout> = new Map();\n  private usage: Map<string, ResourceUsage> = new Map();\n\n  async initialize(): Promise<void> {\n    // Initialize resource monitoring\n  }\n\n  async shutdown(): Promise<void> {\n    // Stop all monitors\n    for (const [sessionId, timer] of this.activeMonitors) {\n      clearInterval(timer);\n    }\n    this.activeMonitors.clear();\n  }\n\n  startMonitoring(sessionId: string, limits: ExecutionResources): void {\n    const timer = setInterval(() => {\n      this.checkResources(sessionId, limits);\n    }, 1000);\n\n    this.activeMonitors.set(sessionId, timer);\n  }\n\n  stopMonitoring(sessionId: string): void {\n    const timer = this.activeMonitors.get(sessionId);\n    if (timer) {\n      clearInterval(timer);\n      this.activeMonitors.delete(sessionId);\n    }\n  }\n\n  getUsage(sessionId: string): ResourceUsage {\n    return (\n      this.usage.get(sessionId) || {\n        cpuTime: 0,\n        maxMemory: 0,\n        diskIO: 0,\n        networkIO: 0,\n        fileHandles: 0,\n      }\n    );\n  }\n\n  getUtilization(): Record<string, number> {\n    // Return overall system utilization\n    return {\n      cpu: 0.1,\n      memory: 0.2,\n      disk: 0.05,\n      network: 0.01,\n    };\n  }\n\n  private checkResources(sessionId: string, limits: ExecutionResources): void {\n    // Check if any limits are exceeded\n    const usage = this.collectCurrentUsage(sessionId);\n    this.usage.set(sessionId, usage);\n\n    if (usage.maxMemory > limits.maxMemory) {\n      this.emit('limit-violation', {\n        sessionId,\n        type: 'memory',\n        current: usage.maxMemory,\n        limit: limits.maxMemory,\n      });\n    }\n\n    if (usage.cpuTime > limits.maxCpuTime) {\n      this.emit('limit-violation', {\n        sessionId,\n        type: 'cpu',\n        current: usage.cpuTime,\n        limit: limits.maxCpuTime,\n      });\n    }\n  }\n\n  private collectCurrentUsage(sessionId: string): ResourceUsage {\n    // Collect actual resource usage - this would interface with system APIs\n    return {\n      cpuTime: Math.random() * 1000,\n      maxMemory: Math.random() * 100 * 1024 * 1024,\n      diskIO: Math.random() * 1024,\n      networkIO: Math.random() * 1024,\n      fileHandles: Math.floor(Math.random() * 10),\n    };\n  }\n}\n\nclass ProcessPool extends EventEmitter {\n  private config: ExecutionConfig;\n  private totalExecutions = 0;\n  private totalDuration = 0;\n  private successCount = 0;\n  private errorCount = 0;\n\n  constructor(config: ExecutionConfig) {\n    super();\n    this.config = config;\n  }\n\n  async initialize(): Promise<void> {\n    // Initialize process pool\n  }\n\n  async shutdown(): Promise<void> {\n    // Shutdown process pool\n  }\n\n  getTotalExecutions(): number {\n    return this.totalExecutions;\n  }\n\n  getAverageDuration(): number {\n    return this.totalExecutions > 0 ? this.totalDuration / this.totalExecutions : 0;\n  }\n\n  getSuccessRate(): number {\n    return this.totalExecutions > 0 ? this.successCount / this.totalExecutions : 0;\n  }\n\n  getErrorRate(): number {\n    return this.totalExecutions > 0 ? this.errorCount / this.totalExecutions : 0;\n  }\n}\n\n// ===== INTERFACES =====\n\nexport interface ClaudeExecutionOptions {\n  model?: string;\n  maxTokens?: number;\n  temperature?: number;\n  timeout?: number;\n  claudePath?: string;\n  useStdin?: boolean;\n  detached?: boolean;\n  outputFormat?: string;\n}\n\nexport interface ClaudeCommand {\n  command: string;\n  args: string[];\n  input?: string;\n}\n\nexport interface ExecutionMetrics {\n  activeExecutions: number;\n  totalExecutions: number;\n  averageDuration: number;\n  successRate: number;\n  resourceUtilization: Record<string, number>;\n  errorRate: number;\n}\n\nexport default TaskExecutor;\n"],
  "mappings": "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",
  "names": ["process"]
}
