{"version":3,"sources":["../../../../src/cli/simple-commands/automation.js"],"sourcesContent":["import { printSuccess, printError, printWarning } from '../utils.js';\r\nimport { WorkflowExecutor, loadWorkflowFromFile, getMLEStarWorkflowPath } from './automation-executor.js';\r\nimport { existsSync } from 'fs';\r\nimport { join } from 'path';\r\n\r\n// Simple ID generator\r\nfunction generateId(prefix = 'id') {\r\n  return `${prefix}-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n}\r\n\r\nexport async function automationAction(subArgs, flags) {\r\n  const subcommand = subArgs[0];\r\n  const options = flags;\r\n\r\n  if (options.help || options.h || !subcommand) {\r\n    showAutomationHelp();\r\n    return;\r\n  }\r\n\r\n  try {\r\n    switch (subcommand) {\r\n      case 'auto-agent':\r\n        await autoAgentCommand(subArgs, flags);\r\n        break;\r\n      case 'smart-spawn':\r\n        await smartSpawnCommand(subArgs, flags);\r\n        break;\r\n      case 'workflow-select':\r\n        await workflowSelectCommand(subArgs, flags);\r\n        break;\r\n      case 'run-workflow':\r\n        await runWorkflowCommand(subArgs, flags);\r\n        break;\r\n      case 'mle-star':\r\n        await mleStarCommand(subArgs, flags);\r\n        break;\r\n      default:\r\n        printError(`Unknown automation command: ${subcommand}`);\r\n        showAutomationHelp();\r\n    }\r\n  } catch (err) {\r\n    printError(`Automation command failed: ${err.message}`);\r\n  }\r\n}\r\n\r\nasync function autoAgentCommand(subArgs, flags) {\r\n  const options = flags;\r\n  const complexity = options['task-complexity'] || options.complexity || 'medium';\r\n  const swarmId = options['swarm-id'] || options.swarmId || generateId('swarm');\r\n\r\n  console.log(`ü§ñ Auto-spawning agents based on task complexity...`);\r\n  console.log(`üìä Task complexity: ${complexity}`);\r\n  console.log(`üêù Swarm ID: ${swarmId}`);\r\n\r\n  // Determine optimal agent configuration based on complexity\r\n  let agentConfig;\r\n  switch (complexity.toLowerCase()) {\r\n    case 'low':\r\n    case 'simple':\r\n      agentConfig = { coordinator: 1, developer: 1, total: 2 };\r\n      break;\r\n    case 'medium':\r\n    case 'moderate':\r\n      agentConfig = { coordinator: 1, developer: 2, researcher: 1, total: 4 };\r\n      break;\r\n    case 'high':\r\n    case 'complex':\r\n      agentConfig = { coordinator: 2, developer: 3, researcher: 2, analyzer: 1, total: 8 };\r\n      break;\r\n    case 'enterprise':\r\n    case 'massive':\r\n      agentConfig = {\r\n        coordinator: 3,\r\n        developer: 5,\r\n        researcher: 3,\r\n        analyzer: 2,\r\n        tester: 2,\r\n        total: 15,\r\n      };\r\n      break;\r\n    default:\r\n      agentConfig = { coordinator: 1, developer: 2, researcher: 1, total: 4 };\r\n  }\r\n\r\n  console.log(`\\nüéØ OPTIMAL AGENT CONFIGURATION:`);\r\n  Object.entries(agentConfig).forEach(([type, count]) => {\r\n    if (type !== 'total') {\r\n      console.log(`  ü§ñ ${type}: ${count} agents`);\r\n    }\r\n  });\r\n  console.log(`  üìä Total agents: ${agentConfig.total}`);\r\n\r\n  // Simulate auto-spawning\r\n  await new Promise((resolve) => setTimeout(resolve, 1500));\r\n\r\n  printSuccess(`‚úÖ Auto-agent spawning completed`);\r\n  console.log(\r\n    `üöÄ ${agentConfig.total} agents spawned and configured for ${complexity} complexity tasks`,\r\n  );\r\n  console.log(`üíæ Agent configuration saved to swarm memory: ${swarmId}`);\r\n  console.log(`üìã Agents ready for task assignment`);\r\n}\r\n\r\nasync function smartSpawnCommand(subArgs, flags) {\r\n  const options = flags;\r\n  const requirement = options.requirement || 'general-development';\r\n  const maxAgents = parseInt(options['max-agents'] || options.maxAgents || '10');\r\n\r\n  console.log(`üß† Smart spawning agents based on requirements...`);\r\n  console.log(`üìã Requirement: ${requirement}`);\r\n  console.log(`üî¢ Max agents: ${maxAgents}`);\r\n\r\n  // Analyze requirements and suggest optimal agent mix\r\n  let recommendedAgents = [];\r\n\r\n  if (requirement.includes('development') || requirement.includes('coding')) {\r\n    recommendedAgents.push(\r\n      { type: 'coordinator', count: 1, reason: 'Task orchestration' },\r\n      { type: 'coder', count: 3, reason: 'Core development work' },\r\n      { type: 'tester', count: 1, reason: 'Quality assurance' },\r\n    );\r\n  }\r\n\r\n  if (requirement.includes('research') || requirement.includes('analysis')) {\r\n    recommendedAgents.push(\r\n      { type: 'researcher', count: 2, reason: 'Information gathering' },\r\n      { type: 'analyst', count: 1, reason: 'Data analysis' },\r\n    );\r\n  }\r\n\r\n  if (requirement.includes('enterprise') || requirement.includes('production')) {\r\n    recommendedAgents.push(\r\n      { type: 'coordinator', count: 2, reason: 'Multi-tier coordination' },\r\n      { type: 'coder', count: 4, reason: 'Parallel development' },\r\n      { type: 'researcher', count: 2, reason: 'Requirements analysis' },\r\n      { type: 'analyst', count: 1, reason: 'Performance monitoring' },\r\n      { type: 'tester', count: 2, reason: 'Comprehensive testing' },\r\n    );\r\n  }\r\n\r\n  // Default fallback\r\n  if (recommendedAgents.length === 0) {\r\n    recommendedAgents = [\r\n      { type: 'coordinator', count: 1, reason: 'General coordination' },\r\n      { type: 'coder', count: 2, reason: 'General development' },\r\n      { type: 'researcher', count: 1, reason: 'Support research' },\r\n    ];\r\n  }\r\n\r\n  await new Promise((resolve) => setTimeout(resolve, 1000));\r\n\r\n  printSuccess(`‚úÖ Smart spawn analysis completed`);\r\n  console.log(`\\nüéØ RECOMMENDED AGENT CONFIGURATION:`);\r\n\r\n  let totalRecommended = 0;\r\n  recommendedAgents.forEach((agent) => {\r\n    console.log(`  ü§ñ ${agent.type}: ${agent.count} agents - ${agent.reason}`);\r\n    totalRecommended += agent.count;\r\n  });\r\n\r\n  console.log(`\\nüìä SUMMARY:`);\r\n  console.log(`  üìù Total recommended: ${totalRecommended} agents`);\r\n  console.log(`  üî¢ Max allowed: ${maxAgents} agents`);\r\n  console.log(\r\n    `  ‚úÖ Configuration: ${totalRecommended <= maxAgents ? 'Within limits' : 'Exceeds limits - scaling down required'}`,\r\n  );\r\n\r\n  if (totalRecommended > maxAgents) {\r\n    printWarning(\r\n      `‚ö†Ô∏è  Recommended configuration exceeds max agents. Consider increasing limit or simplifying requirements.`,\r\n    );\r\n  }\r\n}\r\n\r\nasync function workflowSelectCommand(subArgs, flags) {\r\n  const options = flags;\r\n  const projectType = options['project-type'] || options.project || 'general';\r\n  const priority = options.priority || 'balanced';\r\n\r\n  console.log(`üîÑ Selecting optimal workflow configuration...`);\r\n  console.log(`üìÅ Project type: ${projectType}`);\r\n  console.log(`‚ö° Priority: ${priority}`);\r\n\r\n  // Define workflow templates\r\n  const workflows = {\r\n    'web-app': {\r\n      phases: ['planning', 'design', 'frontend', 'backend', 'testing', 'deployment'],\r\n      agents: { coordinator: 1, developer: 3, tester: 1, researcher: 1 },\r\n      duration: '2-4 weeks',\r\n    },\r\n    api: {\r\n      phases: ['specification', 'design', 'implementation', 'testing', 'documentation'],\r\n      agents: { coordinator: 1, developer: 2, tester: 1, researcher: 1 },\r\n      duration: '1-2 weeks',\r\n    },\r\n    'data-analysis': {\r\n      phases: ['collection', 'cleaning', 'analysis', 'visualization', 'reporting'],\r\n      agents: { coordinator: 1, researcher: 2, analyzer: 2, developer: 1 },\r\n      duration: '1-3 weeks',\r\n    },\r\n    enterprise: {\r\n      phases: [\r\n        'requirements',\r\n        'architecture',\r\n        'development',\r\n        'integration',\r\n        'testing',\r\n        'deployment',\r\n        'monitoring',\r\n      ],\r\n      agents: { coordinator: 2, developer: 5, researcher: 2, analyzer: 1, tester: 2 },\r\n      duration: '2-6 months',\r\n    },\r\n    general: {\r\n      phases: ['planning', 'implementation', 'testing', 'delivery'],\r\n      agents: { coordinator: 1, developer: 2, researcher: 1 },\r\n      duration: '1-2 weeks',\r\n    },\r\n  };\r\n\r\n  const selectedWorkflow = workflows[projectType] || workflows['general'];\r\n\r\n  await new Promise((resolve) => setTimeout(resolve, 800));\r\n\r\n  printSuccess(`‚úÖ Workflow selection completed`);\r\n  console.log(`\\nüîÑ SELECTED WORKFLOW: ${projectType.toUpperCase()}`);\r\n  console.log(`‚è±Ô∏è  Estimated duration: ${selectedWorkflow.duration}`);\r\n\r\n  console.log(`\\nüìã WORKFLOW PHASES:`);\r\n  selectedWorkflow.phases.forEach((phase, index) => {\r\n    console.log(`  ${index + 1}. ${phase.charAt(0).toUpperCase() + phase.slice(1)}`);\r\n  });\r\n\r\n  console.log(`\\nü§ñ RECOMMENDED AGENTS:`);\r\n  Object.entries(selectedWorkflow.agents).forEach(([type, count]) => {\r\n    console.log(`  ‚Ä¢ ${type}: ${count} agent${count > 1 ? 's' : ''}`);\r\n  });\r\n\r\n  console.log(`\\n‚ö° PRIORITY OPTIMIZATIONS:`);\r\n  switch (priority) {\r\n    case 'speed':\r\n      console.log(`  üöÄ Speed-optimized: +50% agents, parallel execution`);\r\n      break;\r\n    case 'quality':\r\n      console.log(`  üéØ Quality-focused: +100% testing, code review stages`);\r\n      break;\r\n    case 'cost':\r\n      console.log(`  üí∞ Cost-efficient: Minimal agents, sequential execution`);\r\n      break;\r\n    default:\r\n      console.log(`  ‚öñÔ∏è  Balanced approach: Optimal speed/quality/cost ratio`);\r\n  }\r\n\r\n  console.log(`\\nüìÑ Workflow template saved for project: ${projectType}`);\r\n}\r\n\r\n/**\r\n * Execute a workflow from file - NEW IMPLEMENTATION\r\n */\r\nasync function runWorkflowCommand(subArgs, flags) {\r\n  const workflowFile = subArgs[1];\r\n  const options = flags;\r\n\r\n  if (!workflowFile) {\r\n    printError('Usage: automation run-workflow <workflow-file> [options]');\r\n    console.log('\\nExample:');\r\n    console.log('  claude-flow automation run-workflow workflow.json --claude --non-interactive');\r\n    return;\r\n  }\r\n\r\n  if (!existsSync(workflowFile)) {\r\n    printError(`Workflow file not found: ${workflowFile}`);\r\n    return;\r\n  }\r\n\r\n  try {\r\n    console.log(`üîÑ Loading workflow: ${workflowFile}`);\r\n    \r\n    // Load workflow definition\r\n    const workflowData = await loadWorkflowFromFile(workflowFile);\r\n    \r\n    // Create executor with options\r\n    const executor = new WorkflowExecutor({\r\n      enableClaude: options.claude || false,\r\n      nonInteractive: options['non-interactive'] || options.nonInteractive || false,\r\n      outputFormat: options['output-format'] || (options['non-interactive'] || options.nonInteractive ? 'stream-json' : 'text'),\r\n      maxConcurrency: parseInt(options['max-concurrency']) || 3,\r\n      timeout: parseInt(options.timeout) || 3600000,\r\n      logLevel: options.verbose ? 'debug' : 'info',\r\n      workflowName: workflowData.name,\r\n      workflowType: workflowData.type || (workflowData.name?.toLowerCase().includes('ml') ? 'ml' : 'general'),\r\n      enableChaining: options.chaining !== false // Default to true for stream-json chaining\r\n    });\r\n    \r\n    // Apply variable overrides if provided\r\n    const variables = {};\r\n    if (options.variables) {\r\n      try {\r\n        Object.assign(variables, JSON.parse(options.variables));\r\n      } catch (error) {\r\n        printWarning(`Invalid variables JSON: ${error.message}`);\r\n      }\r\n    }\r\n    \r\n    // Execute workflow\r\n    const result = await executor.executeWorkflow(workflowData, variables);\r\n    \r\n    if (options['output-format'] === 'json') {\r\n      console.log(JSON.stringify(result, null, 2));\r\n    }\r\n    \r\n    printSuccess(`Workflow execution ${result.success ? 'completed' : 'failed'}`);\r\n    \r\n    if (!result.success && result.errors.length > 0) {\r\n      console.log('\\n‚ùå Errors encountered:');\r\n      result.errors.forEach(error => {\r\n        console.log(`  ‚Ä¢ ${error.type}: ${error.error}`);\r\n      });\r\n    }\r\n    \r\n    // Ensure process exits properly in non-interactive mode\r\n    if (options['non-interactive'] || options.nonInteractive) {\r\n      process.exit(result.success ? 0 : 1);\r\n    }\r\n    \r\n  } catch (error) {\r\n    printError(`Failed to execute workflow: ${error.message}`);\r\n    if (options['non-interactive'] || options.nonInteractive) {\r\n      process.exit(1);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Run MLE-STAR workflow - NEW FLAGSHIP COMMAND\r\n */\r\nasync function mleStarCommand(subArgs, flags) {\r\n  const options = flags;\r\n  \r\n  console.log(`üß† MLE-STAR: Machine Learning Engineering via Search and Targeted Refinement`);\r\n  console.log(`üéØ This is the flagship automation workflow for ML engineering tasks`);\r\n  console.log();\r\n  \r\n  try {\r\n    // Get the built-in MLE-STAR workflow\r\n    const workflowPath = getMLEStarWorkflowPath();\r\n    \r\n    if (!existsSync(workflowPath)) {\r\n      printError('MLE-STAR workflow template not found');\r\n      console.log('Please ensure the template is installed at:');\r\n      console.log(workflowPath);\r\n      return;\r\n    }\r\n    \r\n    // Load MLE-STAR workflow\r\n    const workflowData = await loadWorkflowFromFile(workflowPath);\r\n    \r\n    console.log(`üìã Workflow: ${workflowData.name}`);\r\n    console.log(`üìÑ Description: ${workflowData.description}`);\r\n    console.log(`üéì Methodology: Search ‚Üí Foundation ‚Üí Refinement ‚Üí Ensemble ‚Üí Validation`);\r\n    console.log(`‚è±Ô∏è  Expected Runtime: ${workflowData.metadata.expected_runtime}`);\r\n    console.log();\r\n    \r\n    // Detect dataset if provided\r\n    const datasetPath = options.dataset || options.data || './data/dataset.csv';\r\n    const targetColumn = options.target || 'target';\r\n    \r\n    // Create executor with MLE-STAR optimized settings\r\n    // IMPORTANT: Default to non-interactive mode to prevent multiple Claude spawns\r\n    const isNonInteractive = options.interactive ? \r\n      false : // If --interactive is explicitly set, use interactive mode\r\n      (options['non-interactive'] !== undefined ? \r\n        (options['non-interactive'] || options.nonInteractive) : \r\n        true); // Default to true for MLE-STAR to avoid multiple interactive sessions\r\n    \r\n    const executor = new WorkflowExecutor({\r\n      enableClaude: options.claude !== false, // Default to true for MLE-STAR\r\n      nonInteractive: isNonInteractive,\r\n      outputFormat: options['output-format'] || (isNonInteractive ? 'stream-json' : 'text'),\r\n      maxConcurrency: parseInt(options['max-agents']) || 6,\r\n      timeout: parseInt(options.timeout) || 14400000, // 4 hours for ML workflows\r\n      logLevel: options.quiet ? 'quiet' : (options.verbose ? 'debug' : 'info'),\r\n      workflowName: 'MLE-STAR Machine Learning Engineering Workflow',\r\n      workflowType: 'ml',\r\n      enableChaining: options.chaining !== false // Default to true for stream-json chaining\r\n    });\r\n    \r\n    // Prepare MLE-STAR specific variables\r\n    const variables = {\r\n      dataset_path: datasetPath,\r\n      target_column: targetColumn,\r\n      experiment_name: options.name || `mle-star-${Date.now()}`,\r\n      model_output_dir: options.output || './models/',\r\n      search_iterations: parseInt(options['search-iterations']) || 3,\r\n      refinement_iterations: parseInt(options['refinement-iterations']) || 5,\r\n      ...((options.variables && JSON.parse(options.variables)) || {})\r\n    };\r\n    \r\n    if (options.quiet) {\r\n      console.log(`üìä Running MLE-STAR: ${variables.dataset_path} ‚Üí ${variables.target_column} (${executor.options.enableClaude ? 'Claude enabled' : 'Simulation'})`);\r\n      console.log();\r\n    } else {\r\n      console.log(`üìä Configuration:`);\r\n      console.log(`  Dataset: ${variables.dataset_path}`);\r\n      console.log(`  Target: ${variables.target_column}`);\r\n      console.log(`  Output: ${variables.model_output_dir}`);\r\n      console.log(`  Claude Integration: ${executor.options.enableClaude ? 'Enabled' : 'Disabled'}`);\r\n      console.log(`  Execution Mode: ${isNonInteractive ? 'Non-interactive (default)' : 'Interactive'}`);\r\n      console.log(`  Stream Chaining: ${executor.options.enableChaining && executor.options.outputFormat === 'stream-json' ? 'Enabled' : 'Disabled'}`);\r\n      console.log();\r\n      \r\n      if (isNonInteractive && options.claude !== false) {\r\n        console.log(`üí° Running in non-interactive mode: Each agent will execute independently`);\r\n        if (executor.options.enableChaining && executor.options.outputFormat === 'stream-json') {\r\n          console.log(`üîó Stream chaining enabled: Agent outputs will be piped to dependent agents`);\r\n        }\r\n        console.log(`   To use interactive mode instead, add --interactive flag`);\r\n        console.log();\r\n      }\r\n    }\r\n    \r\n    if (!options.claude && !options['no-claude-warning']) {\r\n      printWarning('MLE-STAR works best with Claude integration. Add --claude flag for full automation.');\r\n      console.log('Without Claude, this will simulate the workflow execution.');\r\n      console.log();\r\n    }\r\n    \r\n    // Execute MLE-STAR workflow\r\n    const result = await executor.executeWorkflow(workflowData, variables);\r\n    \r\n    if (result.success) {\r\n      console.log();\r\n      printSuccess('üéâ MLE-STAR workflow completed successfully!');\r\n      console.log(`üìä Results: ${result.completedTasks}/${result.totalTasks} tasks completed`);\r\n      console.log(`‚è±Ô∏è  Duration: ${executor.formatDuration(result.duration)}`);\r\n      console.log(`üÜî Execution ID: ${result.executionId}`);\r\n      \r\n      if (result.results && Object.keys(result.results).length > 0) {\r\n        console.log(`\\nüìà Key Results:`);\r\n        Object.entries(result.results).forEach(([taskId, taskResult]) => {\r\n          if (taskResult.output?.status === 'completed') {\r\n            console.log(`  ‚úÖ ${taskId}: Completed successfully`);\r\n          }\r\n        });\r\n      }\r\n      \r\n      console.log(`\\nüí° Next Steps:`);\r\n      console.log(`  ‚Ä¢ Check models in: ${variables.model_output_dir}`);\r\n      console.log(`  ‚Ä¢ Review experiment: ${variables.experiment_name}`);\r\n      console.log(`  ‚Ä¢ Validate results with your test data`);\r\n      \r\n    } else {\r\n      printError('‚ùå MLE-STAR workflow failed');\r\n      console.log(`üìä Progress: ${result.completedTasks}/${result.totalTasks} tasks completed`);\r\n      \r\n      if (result.errors.length > 0) {\r\n        console.log('\\nüîç Errors:');\r\n        result.errors.forEach(error => {\r\n          console.log(`  ‚Ä¢ ${error.type}: ${error.error}`);\r\n        });\r\n      }\r\n    }\r\n    \r\n    if (options['output-format'] === 'json') {\r\n      console.log('\\n' + JSON.stringify(result, null, 2));\r\n    }\r\n    \r\n    // Ensure process exits properly in non-interactive mode\r\n    if (options['non-interactive'] || options.nonInteractive) {\r\n      process.exit(result.success ? 0 : 1);\r\n    }\r\n    \r\n  } catch (error) {\r\n    printError(`MLE-STAR execution failed: ${error.message}`);\r\n    if (options['non-interactive'] || options.nonInteractive) {\r\n      process.exit(1);\r\n    }\r\n  }\r\n}\r\n\r\nfunction showAutomationHelp() {\r\n  console.log(`\r\nü§ñ Automation Commands - Intelligent Agent & Workflow Management\r\n\r\nUSAGE:\r\n  claude-flow automation <command> [options]\r\n\r\nCOMMANDS:\r\n  auto-agent        Automatically spawn optimal agents based on task complexity\r\n  smart-spawn       Intelligently spawn agents based on specific requirements\r\n  workflow-select   Select and configure optimal workflows for project types\r\n  run-workflow      Execute workflows from JSON/YAML files with Claude integration\r\n  mle-star          Run MLE-STAR Machine Learning Engineering workflow (flagship)\r\n\r\nAUTO-AGENT OPTIONS:\r\n  --task-complexity <level>  Task complexity level (default: medium)\r\n                             Options: low, medium, high, enterprise\r\n  --swarm-id <id>           Target swarm ID for agent spawning\r\n\r\nSMART-SPAWN OPTIONS:\r\n  --requirement <req>       Specific requirement description\r\n                           Examples: \"web-development\", \"data-analysis\", \"enterprise-api\"\r\n  --max-agents <n>         Maximum number of agents to spawn (default: 10)\r\n\r\nWORKFLOW-SELECT OPTIONS:\r\n  --project-type <type>     Project type (default: general)\r\n                           Options: web-app, api, data-analysis, enterprise, general\r\n  --priority <priority>     Optimization priority (default: balanced)\r\n                           Options: speed, quality, cost, balanced\r\n\r\nRUN-WORKFLOW OPTIONS:\r\n  --claude                  Enable Claude CLI integration for actual execution\r\n  --non-interactive         Run in non-interactive mode (no prompts)\r\n  --output-format <format>  Output format (text, json)\r\n  --variables <json>        Override workflow variables (JSON format)\r\n  --max-concurrency <n>     Maximum concurrent tasks (default: 3)\r\n  --timeout <ms>            Execution timeout in milliseconds\r\n  --verbose                 Enable detailed logging\r\n\r\nMLE-STAR OPTIONS:\r\n  --claude                  Enable Claude CLI integration (recommended)\r\n  --dataset <path>          Path to dataset file (default: ./data/dataset.csv)\r\n  --target <column>         Target column name (default: target)\r\n  --output <dir>            Model output directory (default: ./models/)\r\n  --name <experiment>       Experiment name for tracking\r\n  --search-iterations <n>   Web search iterations (default: 3)\r\n  --refinement-iterations <n> Refinement cycles (default: 5)\r\n  --max-agents <n>          Maximum agents to spawn (default: 6)\r\n  --interactive             Use interactive mode with master coordinator (single Claude instance)\r\n  --non-interactive         Force non-interactive mode (default for MLE-STAR)\r\n  --output-format <format>  Output format (stream-json enables chaining)\r\n  --chaining                Enable stream-json chaining between agents (default: true)\r\n  --no-chaining             Disable stream-json chaining\r\n  --no-claude-warning       Suppress Claude integration warnings\r\n  --quiet                   Minimal output (only show major progress milestones)\r\n  --verbose                 Detailed output with all agent activities\r\n\r\nSTREAM CHAINING:\r\n  Stream chaining automatically pipes output from one agent to the next based on task dependencies.\r\n  When enabled (default), agents can pass rich context and results directly to dependent tasks.\r\n  \r\n  Benefits:\r\n  ‚Ä¢ 40-60% faster execution vs file-based handoffs\r\n  ‚Ä¢ 100% context preservation between agents\r\n  ‚Ä¢ Real-time processing without intermediate files\r\n  ‚Ä¢ Automatic dependency detection and piping\r\n  \r\n  The system detects task dependencies and creates chains like:\r\n  search_agent ‚Üí foundation_agent ‚Üí refinement_agent ‚Üí validation_agent\r\n  \r\n  Example workflow with chaining:\r\n  {\r\n    \"tasks\": [\r\n      { \"id\": \"analyze\", \"assignTo\": \"researcher\" },\r\n      { \"id\": \"process\", \"assignTo\": \"processor\", \"depends\": [\"analyze\"] },\r\n      { \"id\": \"validate\", \"assignTo\": \"validator\", \"depends\": [\"process\"] }\r\n    ]\r\n  }\r\n  \r\n  With stream-json chaining, the researcher's output flows directly to the processor,\r\n  and the processor's output flows to the validator - no intermediate files needed!\r\n\r\nEXAMPLES:\r\n  # Auto-spawn for complex enterprise task\r\n  claude-flow automation auto-agent --task-complexity enterprise --swarm-id swarm-123\r\n\r\n  # Smart spawn for web development\r\n  claude-flow automation smart-spawn --requirement \"web-development\" --max-agents 8\r\n\r\n  # Select workflow for API project optimized for speed\r\n  claude-flow automation workflow-select --project-type api --priority speed\r\n\r\n  # Execute custom workflow with Claude integration\r\n  claude-flow automation run-workflow my-workflow.json --claude --non-interactive\r\n\r\n  # Run MLE-STAR ML engineering workflow (flagship command) - non-interactive by default\r\n  claude-flow automation mle-star --dataset data/train.csv --target price --claude\r\n\r\n  # MLE-STAR with custom configuration\r\n  claude-flow automation mle-star --dataset sales.csv --target revenue --output models/sales/ --name \"sales-prediction\" --search-iterations 5\r\n  \r\n  # MLE-STAR with interactive mode (single Claude coordinator)\r\n  claude-flow automation mle-star --dataset data.csv --target label --claude --interactive\r\n  \r\n  # MLE-STAR with stream-json chaining (agents pipe outputs to each other)\r\n  claude-flow automation mle-star --dataset data.csv --target label --claude --output-format stream-json\r\n  \r\n  # MLE-STAR with minimal output for CI/CD pipelines\r\n  claude-flow automation mle-star --dataset data.csv --target label --claude --quiet\r\n  \r\n  # Custom workflow with stream chaining enabled\r\n  claude-flow automation run-workflow analysis-pipeline.json --claude --output-format stream-json\r\n  \r\n  # Disable chaining for independent task execution\r\n  claude-flow automation mle-star --dataset data.csv --target label --claude --no-chaining\r\n  \r\n  # View stream chaining in action with verbose output\r\n  claude-flow automation mle-star --dataset data.csv --target label --claude --verbose\r\n\r\nüéØ Automation benefits:\r\n  ‚Ä¢ Optimal resource allocation\r\n  ‚Ä¢ Intelligent agent selection  \r\n  ‚Ä¢ Workflow optimization\r\n  ‚Ä¢ Reduced manual configuration\r\n  ‚Ä¢ Performance-based scaling\r\n  ‚Ä¢ Claude CLI integration for actual execution\r\n  ‚Ä¢ MLE-STAR methodology for ML engineering\r\n  ‚Ä¢ Non-interactive mode for CI/CD integration\r\n  ‚Ä¢ Comprehensive workflow templates\r\n`);\r\n}\r\n"],"names":["printSuccess","printError","printWarning","WorkflowExecutor","loadWorkflowFromFile","getMLEStarWorkflowPath","existsSync","generateId","prefix","Date","now","Math","random","toString","substr","automationAction","subArgs","flags","subcommand","options","help","h","showAutomationHelp","autoAgentCommand","smartSpawnCommand","workflowSelectCommand","runWorkflowCommand","mleStarCommand","err","message","complexity","swarmId","console","log","agentConfig","toLowerCase","coordinator","developer","total","researcher","analyzer","tester","Object","entries","forEach","type","count","Promise","resolve","setTimeout","requirement","maxAgents","parseInt","recommendedAgents","includes","push","reason","length","totalRecommended","agent","projectType","project","priority","workflows","phases","agents","duration","api","enterprise","general","selectedWorkflow","toUpperCase","phase","index","charAt","slice","workflowFile","workflowData","executor","enableClaude","claude","nonInteractive","outputFormat","maxConcurrency","timeout","logLevel","verbose","workflowName","name","workflowType","enableChaining","chaining","variables","assign","JSON","parse","error","result","executeWorkflow","stringify","success","errors","process","exit","workflowPath","description","metadata","expected_runtime","datasetPath","dataset","data","targetColumn","target","isNonInteractive","interactive","undefined","quiet","dataset_path","target_column","experiment_name","model_output_dir","output","search_iterations","refinement_iterations","completedTasks","totalTasks","formatDuration","executionId","results","keys","taskId","taskResult","status"],"mappings":"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"}