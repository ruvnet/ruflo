{"version":3,"sources":["../../../../src/cli/simple-commands/timestamp-fix.js"],"sourcesContent":["/**\r\n * Fix for hive-mind creation time issue #246\r\n * This file demonstrates how to properly handle timezones in hive-mind displays\r\n */\r\n\r\nimport {\r\n  getLocalTimestamp,\r\n  convertToLocalTime,\r\n  formatTimestampForDisplay,\r\n  getTimezoneInfo,\r\n} from '../../utils/timezone-utils.js';\r\n\r\n/**\r\n * Fixed function to create session with proper timezone handling\r\n */\r\nexport function createSessionWithProperTimezone(objective, options = {}) {\r\n  const sessionId = `session-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n\r\n  // Store both UTC timestamp (for consistency) and timezone info\r\n  const utcTimestamp = new Date().toISOString();\r\n  const localTimestamp = getLocalTimestamp();\r\n  const timezoneInfo = getTimezoneInfo();\r\n\r\n  const session = {\r\n    id: sessionId,\r\n    objective,\r\n    createdAt: utcTimestamp,\r\n    createdAtLocal: localTimestamp,\r\n    timezone: timezoneInfo,\r\n    status: 'active',\r\n    ...options,\r\n  };\r\n\r\n  return session;\r\n}\r\n\r\n/**\r\n * Fixed function to display session info with proper timezone\r\n */\r\nexport function displaySessionInfo(session) {\r\n  const timeDisplay = formatTimestampForDisplay(session.createdAt);\r\n\r\n  console.log(`ðŸ Hive Mind Session`);\r\n  console.log(`ðŸ“‹ ID: ${session.id}`);\r\n  console.log(`ðŸŽ¯ Objective: ${session.objective}`);\r\n  console.log(`â° Created: ${timeDisplay.display}`);\r\n  console.log(`ðŸŒ Timezone: ${session.timezone?.name || 'Unknown'}`);\r\n  console.log(`ðŸ“Š Status: ${session.status}`);\r\n}\r\n\r\n/**\r\n * Fixed function to list sessions with proper timezone display\r\n */\r\nexport function listSessionsWithTimezone(sessions) {\r\n  console.log('ðŸ“‹ Hive Mind Sessions:\\n');\r\n\r\n  if (sessions.length === 0) {\r\n    console.log('No sessions found.');\r\n    return;\r\n  }\r\n\r\n  // Table header\r\n  console.log('ID'.padEnd(25) + 'Objective'.padEnd(30) + 'Created'.padEnd(25) + 'Status');\r\n  console.log('-'.repeat(100));\r\n\r\n  sessions.forEach((session) => {\r\n    const timeDisplay = formatTimestampForDisplay(session.createdAt);\r\n    const id = session.id.length > 22 ? session.id.substr(0, 22) + '...' : session.id;\r\n    const objective =\r\n      session.objective.length > 27 ? session.objective.substr(0, 27) + '...' : session.objective;\r\n\r\n    console.log(\r\n      id.padEnd(25) + objective.padEnd(30) + timeDisplay.relative.padEnd(25) + session.status,\r\n    );\r\n  });\r\n\r\n  console.log(`\\nðŸ’¡ Times shown in your timezone: ${getTimezoneInfo().name}`);\r\n}\r\n\r\n/**\r\n * Example usage and test function\r\n */\r\nexport function demonstrateTimezonefix() {\r\n  console.log('ðŸ§ª Testing timezone fix for issue #246\\n');\r\n\r\n  // Show timezone info\r\n  const tz = getTimezoneInfo();\r\n  console.log(`ðŸŒ Your timezone: ${tz.name} (${tz.abbreviation})`);\r\n  console.log(`â° UTC offset: ${tz.offset > 0 ? '+' : ''}${tz.offset} hours\\n`);\r\n\r\n  // Create sample session\r\n  const session = createSessionWithProperTimezone('Build microservices API', {\r\n    queenType: 'strategic',\r\n    maxWorkers: 6,\r\n  });\r\n\r\n  // Display with proper timezone\r\n  displaySessionInfo(session);\r\n\r\n  console.log('\\nðŸ“‹ Session list example:');\r\n  listSessionsWithTimezone([session]);\r\n\r\n  console.log(\"\\nâœ… Fix applied - timestamps now show in user's local timezone!\");\r\n}\r\n"],"names":["getLocalTimestamp","formatTimestampForDisplay","getTimezoneInfo","createSessionWithProperTimezone","objective","options","sessionId","Date","now","Math","random","toString","substr","utcTimestamp","toISOString","localTimestamp","timezoneInfo","session","id","createdAt","createdAtLocal","timezone","status","displaySessionInfo","timeDisplay","console","log","display","name","listSessionsWithTimezone","sessions","length","padEnd","repeat","forEach","relative","demonstrateTimezonefix","tz","abbreviation","offset","queenType","maxWorkers"],"mappings":"AAKA,SACEA,iBAAiB,EAEjBC,yBAAyB,EACzBC,eAAe,QACV,gCAAgC;AAKvC,OAAO,SAASC,gCAAgCC,SAAS,EAAEC,UAAU,CAAC,CAAC;IACrE,MAAMC,YAAY,CAAC,QAAQ,EAAEC,KAAKC,GAAG,GAAG,CAAC,EAAEC,KAAKC,MAAM,GAAGC,QAAQ,CAAC,IAAIC,MAAM,CAAC,GAAG,IAAI;IAGpF,MAAMC,eAAe,IAAIN,OAAOO,WAAW;IAC3C,MAAMC,iBAAiBf;IACvB,MAAMgB,eAAed;IAErB,MAAMe,UAAU;QACdC,IAAIZ;QACJF;QACAe,WAAWN;QACXO,gBAAgBL;QAChBM,UAAUL;QACVM,QAAQ;QACR,GAAGjB,OAAO;IACZ;IAEA,OAAOY;AACT;AAKA,OAAO,SAASM,mBAAmBN,OAAO;IACxC,MAAMO,cAAcvB,0BAA0BgB,QAAQE,SAAS;IAE/DM,QAAQC,GAAG,CAAC,CAAC,oBAAoB,CAAC;IAClCD,QAAQC,GAAG,CAAC,CAAC,OAAO,EAAET,QAAQC,EAAE,EAAE;IAClCO,QAAQC,GAAG,CAAC,CAAC,cAAc,EAAET,QAAQb,SAAS,EAAE;IAChDqB,QAAQC,GAAG,CAAC,CAAC,WAAW,EAAEF,YAAYG,OAAO,EAAE;IAC/CF,QAAQC,GAAG,CAAC,CAAC,aAAa,EAAET,QAAQI,QAAQ,EAAEO,QAAQ,WAAW;IACjEH,QAAQC,GAAG,CAAC,CAAC,WAAW,EAAET,QAAQK,MAAM,EAAE;AAC5C;AAKA,OAAO,SAASO,yBAAyBC,QAAQ;IAC/CL,QAAQC,GAAG,CAAC;IAEZ,IAAII,SAASC,MAAM,KAAK,GAAG;QACzBN,QAAQC,GAAG,CAAC;QACZ;IACF;IAGAD,QAAQC,GAAG,CAAC,KAAKM,MAAM,CAAC,MAAM,YAAYA,MAAM,CAAC,MAAM,UAAUA,MAAM,CAAC,MAAM;IAC9EP,QAAQC,GAAG,CAAC,IAAIO,MAAM,CAAC;IAEvBH,SAASI,OAAO,CAAC,CAACjB;QAChB,MAAMO,cAAcvB,0BAA0BgB,QAAQE,SAAS;QAC/D,MAAMD,KAAKD,QAAQC,EAAE,CAACa,MAAM,GAAG,KAAKd,QAAQC,EAAE,CAACN,MAAM,CAAC,GAAG,MAAM,QAAQK,QAAQC,EAAE;QACjF,MAAMd,YACJa,QAAQb,SAAS,CAAC2B,MAAM,GAAG,KAAKd,QAAQb,SAAS,CAACQ,MAAM,CAAC,GAAG,MAAM,QAAQK,QAAQb,SAAS;QAE7FqB,QAAQC,GAAG,CACTR,GAAGc,MAAM,CAAC,MAAM5B,UAAU4B,MAAM,CAAC,MAAMR,YAAYW,QAAQ,CAACH,MAAM,CAAC,MAAMf,QAAQK,MAAM;IAE3F;IAEAG,QAAQC,GAAG,CAAC,CAAC,mCAAmC,EAAExB,kBAAkB0B,IAAI,EAAE;AAC5E;AAKA,OAAO,SAASQ;IACdX,QAAQC,GAAG,CAAC;IAGZ,MAAMW,KAAKnC;IACXuB,QAAQC,GAAG,CAAC,CAAC,kBAAkB,EAAEW,GAAGT,IAAI,CAAC,EAAE,EAAES,GAAGC,YAAY,CAAC,CAAC,CAAC;IAC/Db,QAAQC,GAAG,CAAC,CAAC,cAAc,EAAEW,GAAGE,MAAM,GAAG,IAAI,MAAM,KAAKF,GAAGE,MAAM,CAAC,QAAQ,CAAC;IAG3E,MAAMtB,UAAUd,gCAAgC,2BAA2B;QACzEqC,WAAW;QACXC,YAAY;IACd;IAGAlB,mBAAmBN;IAEnBQ,QAAQC,GAAG,CAAC;IACZG,yBAAyB;QAACZ;KAAQ;IAElCQ,QAAQC,GAAG,CAAC;AACd"}