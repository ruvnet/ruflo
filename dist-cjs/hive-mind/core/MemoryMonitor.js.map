{
  "version": 3,
  "sources": ["../../../src/hive-mind/core/MemoryMonitor.ts"],
  "sourcesContent": ["/**\n * Memory Monitor and Optimization System\n *\n * Provides real-time monitoring, analysis, and optimization\n * recommendations for the Hive Mind memory subsystem.\n */\n\nimport { EventEmitter } from 'events';\nimport { performance } from 'perf_hooks';\nimport { Memory } from './Memory.js';\nimport { DatabaseManager } from './DatabaseManager.js';\n\ninterface MemoryAlert {\n  level: 'info' | 'warning' | 'critical';\n  type: string;\n  message: string;\n  value: number;\n  threshold: number;\n  timestamp: Date;\n  recommendations: string[];\n}\n\ninterface OptimizationSuggestion {\n  type: 'cache' | 'database' | 'pool' | 'compression' | 'cleanup';\n  priority: 'low' | 'medium' | 'high' | 'critical';\n  title: string;\n  description: string;\n  estimatedImpact: string;\n  implementation: string;\n  effort: 'minimal' | 'moderate' | 'significant';\n}\n\ninterface MemoryHealthReport {\n  overall: {\n    score: number;\n    status: 'excellent' | 'good' | 'fair' | 'poor' | 'critical';\n    summary: string;\n  };\n  metrics: {\n    cacheHitRate: number;\n    avgQueryTime: number;\n    memoryUtilization: number;\n    compressionRatio: number;\n    poolEfficiency: number;\n  };\n  alerts: MemoryAlert[];\n  suggestions: OptimizationSuggestion[];\n  trends: {\n    performance: 'improving' | 'stable' | 'degrading';\n    memoryUsage: 'increasing' | 'stable' | 'decreasing';\n    cacheEfficiency: 'improving' | 'stable' | 'degrading';\n  };\n}\n\nexport class MemoryMonitor extends EventEmitter {\n  private memory: Memory;\n  private db: DatabaseManager;\n  private isActive = false;\n  private monitoringTimers: NodeJS.Timeout[] = [];\n  private historicalData: Map<string, number[]> = new Map();\n  private alertThresholds = {\n    cacheHitRate: { warning: 50, critical: 30 },\n    avgQueryTime: { warning: 100, critical: 500 },\n    memoryUtilization: { warning: 80, critical: 95 },\n    poolReuseRate: { warning: 30, critical: 10 },\n  };\n  private alerts: MemoryAlert[] = [];\n  private maxHistorySize = 1000;\n\n  constructor(memory: Memory, db: DatabaseManager) {\n    super();\n    this.memory = memory;\n    this.db = db;\n  }\n\n  /**\n   * Start memory monitoring\n   */\n  async start(): Promise<void> {\n    if (this.isActive) return;\n\n    this.isActive = true;\n\n    // Real-time monitoring (every 10 seconds)\n    const realtimeTimer = setInterval(() => {\n      this.collectMetrics();\n    }, 10000);\n\n    // Health analysis (every minute)\n    const healthTimer = setInterval(() => {\n      this.analyzeHealth();\n    }, 60000);\n\n    // Trend analysis (every 5 minutes)\n    const trendTimer = setInterval(() => {\n      this.analyzeTrends();\n    }, 300000);\n\n    // Optimization suggestions (every 15 minutes)\n    const optimizationTimer = setInterval(() => {\n      this.generateOptimizationSuggestions();\n    }, 900000);\n\n    // Alert cleanup (every hour)\n    const cleanupTimer = setInterval(() => {\n      this.cleanupOldAlerts();\n    }, 3600000);\n\n    this.monitoringTimers.push(\n      realtimeTimer,\n      healthTimer,\n      trendTimer,\n      optimizationTimer,\n      cleanupTimer,\n    );\n\n    // Initial baseline collection\n    await this.establishBaseline();\n\n    this.emit('monitoring:started');\n  }\n\n  /**\n   * Stop memory monitoring\n   */\n  stop(): void {\n    this.isActive = false;\n\n    this.monitoringTimers.forEach((timer) => clearInterval(timer));\n    this.monitoringTimers.length = 0;\n\n    this.emit('monitoring:stopped');\n  }\n\n  /**\n   * Collect real-time metrics\n   */\n  private async collectMetrics(): Promise<void> {\n    if (!this.isActive) return;\n\n    try {\n      const startTime = performance.now();\n\n      // Get memory analytics\n      const memoryAnalytics = this.memory.getAdvancedAnalytics();\n      const dbAnalytics = this.db.getDatabaseAnalytics();\n\n      // Extract key metrics\n      const metrics = {\n        cacheHitRate: memoryAnalytics.cache.hitRate || 0,\n        avgQueryTime: dbAnalytics.performance.query_execution?.avg || 0,\n        memoryUtilization: memoryAnalytics.cache.utilizationPercent || 0,\n        poolEfficiency: this.calculatePoolEfficiency(memoryAnalytics.pools),\n        dbFragmentation: dbAnalytics.fragmentation || 0,\n        activeConnections: 1, // Simplified for now\n        timestamp: Date.now(),\n      };\n\n      // Store historical data\n      this.storeHistoricalData(metrics);\n\n      // Check for alerts\n      this.checkAlerts(metrics);\n\n      const duration = performance.now() - startTime;\n      this.emit('metrics:collected', { metrics, duration });\n    } catch (error) {\n      this.emit('error', error);\n    }\n  }\n\n  /**\n   * Establish performance baseline\n   */\n  private async establishBaseline(): Promise<void> {\n    const samples = [];\n\n    for (let i = 0; i < 10; i++) {\n      await this.collectMetrics();\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n    }\n\n    this.emit('baseline:established', { samples: samples.length });\n  }\n\n  /**\n   * Store historical performance data\n   */\n  private storeHistoricalData(metrics: any): void {\n    for (const [key, value] of Object.entries(metrics)) {\n      if (typeof value === 'number') {\n        if (!this.historicalData.has(key)) {\n          this.historicalData.set(key, []);\n        }\n\n        const history = this.historicalData.get(key)!;\n        history.push(value);\n\n        // Limit history size\n        if (history.length > this.maxHistorySize) {\n          history.shift();\n        }\n      }\n    }\n  }\n\n  /**\n   * Check metrics against alert thresholds\n   */\n  private checkAlerts(metrics: any): void {\n    const newAlerts: MemoryAlert[] = [];\n\n    // Cache hit rate alerts\n    const cacheHitRate = metrics.cacheHitRate;\n    if (cacheHitRate < this.alertThresholds.cacheHitRate.critical) {\n      newAlerts.push({\n        level: 'critical',\n        type: 'cache_performance',\n        message: `Cache hit rate critically low: ${cacheHitRate.toFixed(1)}%`,\n        value: cacheHitRate,\n        threshold: this.alertThresholds.cacheHitRate.critical,\n        timestamp: new Date(),\n        recommendations: [\n          'Increase cache size immediately',\n          'Review access patterns',\n          'Consider cache warming strategies',\n        ],\n      });\n    } else if (cacheHitRate < this.alertThresholds.cacheHitRate.warning) {\n      newAlerts.push({\n        level: 'warning',\n        type: 'cache_performance',\n        message: `Cache hit rate below optimal: ${cacheHitRate.toFixed(1)}%`,\n        value: cacheHitRate,\n        threshold: this.alertThresholds.cacheHitRate.warning,\n        timestamp: new Date(),\n        recommendations: [\n          'Monitor cache patterns',\n          'Consider increasing cache size',\n          'Review cache eviction policy',\n        ],\n      });\n    }\n\n    // Query performance alerts\n    const avgQueryTime = metrics.avgQueryTime;\n    if (avgQueryTime > this.alertThresholds.avgQueryTime.critical) {\n      newAlerts.push({\n        level: 'critical',\n        type: 'query_performance',\n        message: `Query performance critically slow: ${avgQueryTime.toFixed(1)}ms`,\n        value: avgQueryTime,\n        threshold: this.alertThresholds.avgQueryTime.critical,\n        timestamp: new Date(),\n        recommendations: [\n          'Immediate database optimization required',\n          'Review query plans and indexes',\n          'Consider query result caching',\n        ],\n      });\n    } else if (avgQueryTime > this.alertThresholds.avgQueryTime.warning) {\n      newAlerts.push({\n        level: 'warning',\n        type: 'query_performance',\n        message: `Query performance degraded: ${avgQueryTime.toFixed(1)}ms`,\n        value: avgQueryTime,\n        threshold: this.alertThresholds.avgQueryTime.warning,\n        timestamp: new Date(),\n        recommendations: [\n          'Monitor query performance trends',\n          'Consider database maintenance',\n          'Review recent schema changes',\n        ],\n      });\n    }\n\n    // Memory utilization alerts\n    const memoryUtilization = metrics.memoryUtilization;\n    if (memoryUtilization > this.alertThresholds.memoryUtilization.critical) {\n      newAlerts.push({\n        level: 'critical',\n        type: 'memory_utilization',\n        message: `Memory utilization critical: ${memoryUtilization.toFixed(1)}%`,\n        value: memoryUtilization,\n        threshold: this.alertThresholds.memoryUtilization.critical,\n        timestamp: new Date(),\n        recommendations: [\n          'Immediate memory cleanup required',\n          'Increase memory limits',\n          'Enable aggressive garbage collection',\n        ],\n      });\n    } else if (memoryUtilization > this.alertThresholds.memoryUtilization.warning) {\n      newAlerts.push({\n        level: 'warning',\n        type: 'memory_utilization',\n        message: `Memory utilization high: ${memoryUtilization.toFixed(1)}%`,\n        value: memoryUtilization,\n        threshold: this.alertThresholds.memoryUtilization.warning,\n        timestamp: new Date(),\n        recommendations: [\n          'Monitor memory usage trends',\n          'Consider memory optimization',\n          'Review cache sizes',\n        ],\n      });\n    }\n\n    // Add new alerts and emit events\n    if (newAlerts.length > 0) {\n      this.alerts.push(...newAlerts);\n      newAlerts.forEach((alert) => {\n        this.emit('alert', alert);\n      });\n    }\n  }\n\n  /**\n   * Analyze overall system health\n   */\n  private async analyzeHealth(): Promise<void> {\n    const memoryHealth = await this.memory.healthCheck();\n    const dbHealth = await this.db.healthCheck();\n    const analytics = this.memory.getAdvancedAnalytics();\n\n    const healthReport: MemoryHealthReport = {\n      overall: {\n        score: this.calculateOverallScore(memoryHealth, dbHealth, analytics),\n        status: 'good',\n        summary: '',\n      },\n      metrics: {\n        cacheHitRate: analytics.cache.hitRate || 0,\n        avgQueryTime: this.getAverageFromHistory('avgQueryTime'),\n        memoryUtilization: analytics.cache.utilizationPercent || 0,\n        compressionRatio: 0.7, // Simplified\n        poolEfficiency: this.calculatePoolEfficiency(analytics.pools),\n      },\n      alerts: this.getActiveAlerts(),\n      suggestions: this.generateHealthSuggestions(analytics),\n      trends: this.calculateTrends(),\n    };\n\n    // Determine status\n    if (healthReport.overall.score >= 90) {\n      healthReport.overall.status = 'excellent';\n    } else if (healthReport.overall.score >= 75) {\n      healthReport.overall.status = 'good';\n    } else if (healthReport.overall.score >= 60) {\n      healthReport.overall.status = 'fair';\n    } else if (healthReport.overall.score >= 40) {\n      healthReport.overall.status = 'poor';\n    } else {\n      healthReport.overall.status = 'critical';\n    }\n\n    // Generate summary\n    healthReport.overall.summary = this.generateHealthSummary(healthReport);\n\n    this.emit('health:analyzed', healthReport);\n  }\n\n  /**\n   * Generate optimization suggestions\n   */\n  private generateOptimizationSuggestions(): void {\n    const analytics = this.memory.getAdvancedAnalytics();\n    const suggestions: OptimizationSuggestion[] = [];\n\n    // Cache optimization suggestions\n    if ((analytics.cache.hitRate || 0) < 70) {\n      suggestions.push({\n        type: 'cache',\n        priority: 'high',\n        title: 'Optimize Cache Configuration',\n        description: 'Cache hit rate is below optimal threshold',\n        estimatedImpact: 'Reduce database queries by 20-40%',\n        implementation: 'Increase cache size and adjust eviction policy',\n        effort: 'minimal',\n      });\n    }\n\n    // Database optimization suggestions\n    const avgQueryTime = this.getAverageFromHistory('avgQueryTime');\n    if (avgQueryTime > 50) {\n      suggestions.push({\n        type: 'database',\n        priority: 'medium',\n        title: 'Database Performance Tuning',\n        description: 'Query execution times are above optimal range',\n        estimatedImpact: 'Improve query performance by 30-50%',\n        implementation: 'Add indexes, optimize queries, run ANALYZE',\n        effort: 'moderate',\n      });\n    }\n\n    // Pool optimization suggestions\n    const poolEfficiency = this.calculatePoolEfficiency(analytics.pools);\n    if (poolEfficiency < 50) {\n      suggestions.push({\n        type: 'pool',\n        priority: 'low',\n        title: 'Object Pool Optimization',\n        description: 'Object pools have low reuse rates',\n        estimatedImpact: 'Reduce garbage collection pressure',\n        implementation: 'Increase pool sizes and improve object lifecycle',\n        effort: 'minimal',\n      });\n    }\n\n    this.emit('suggestions:generated', suggestions);\n  }\n\n  /**\n   * Calculate pool efficiency\n   */\n  private calculatePoolEfficiency(pools: any): number {\n    if (!pools) return 0;\n\n    const efficiencies = Object.values(pools).map((pool: any) => pool.reuseRate || 0);\n    return efficiencies.length > 0\n      ? efficiencies.reduce((a, b) => a + b, 0) / efficiencies.length\n      : 0;\n  }\n\n  /**\n   * Get average value from historical data\n   */\n  private getAverageFromHistory(metric: string): number {\n    const history = this.historicalData.get(metric);\n    if (!history || history.length === 0) return 0;\n\n    return history.reduce((a, b) => a + b, 0) / history.length;\n  }\n\n  /**\n   * Calculate overall health score\n   */\n  private calculateOverallScore(memoryHealth: any, dbHealth: any, analytics: any): number {\n    let score = 100;\n\n    // Cache performance impact (30%)\n    const cacheHitRate = analytics.cache.hitRate || 0;\n    score -= Math.max(0, (70 - cacheHitRate) * 0.3);\n\n    // Query performance impact (25%)\n    const avgQueryTime = this.getAverageFromHistory('avgQueryTime');\n    if (avgQueryTime > 50) {\n      score -= Math.min(25, (avgQueryTime - 50) * 0.5);\n    }\n\n    // Memory utilization impact (20%)\n    const memoryUtil = analytics.cache.utilizationPercent || 0;\n    if (memoryUtil > 80) {\n      score -= (memoryUtil - 80) * 0.5;\n    }\n\n    // Active alerts impact (15%)\n    const criticalAlerts = this.alerts.filter((a) => a.level === 'critical').length;\n    const warningAlerts = this.alerts.filter((a) => a.level === 'warning').length;\n    score -= criticalAlerts * 10 + warningAlerts * 5;\n\n    // Pool efficiency impact (10%)\n    const poolEff = this.calculatePoolEfficiency(analytics.pools);\n    score -= Math.max(0, (50 - poolEff) * 0.2);\n\n    return Math.max(0, Math.min(100, score));\n  }\n\n  /**\n   * Get active alerts (within last hour)\n   */\n  private getActiveAlerts(): MemoryAlert[] {\n    const oneHourAgo = Date.now() - 3600000;\n    return this.alerts.filter((alert) => alert.timestamp.getTime() > oneHourAgo);\n  }\n\n  /**\n   * Generate health-based suggestions\n   */\n  private generateHealthSuggestions(analytics: any): OptimizationSuggestion[] {\n    const suggestions: OptimizationSuggestion[] = [];\n\n    // Add specific suggestions based on current state\n    if ((analytics.cache.utilizationPercent || 0) > 90) {\n      suggestions.push({\n        type: 'cache',\n        priority: 'critical',\n        title: 'Immediate Cache Memory Relief',\n        description: 'Cache memory utilization is critically high',\n        estimatedImpact: 'Prevent system instability',\n        implementation: 'Increase cache memory limit or enable aggressive cleanup',\n        effort: 'minimal',\n      });\n    }\n\n    return suggestions;\n  }\n\n  /**\n   * Calculate performance trends\n   */\n  private calculateTrends(): any {\n    const trends = {\n      performance: 'stable' as 'improving' | 'stable' | 'degrading',\n      memoryUsage: 'stable' as 'increasing' | 'stable' | 'decreasing',\n      cacheEfficiency: 'stable' as 'improving' | 'stable' | 'degrading',\n    };\n\n    // Analyze query time trend\n    const queryTimes = this.historicalData.get('avgQueryTime') || [];\n    if (queryTimes.length >= 10) {\n      const recent = queryTimes.slice(-5);\n      const older = queryTimes.slice(-10, -5);\n      const recentAvg = recent.reduce((a, b) => a + b, 0) / recent.length;\n      const olderAvg = older.reduce((a, b) => a + b, 0) / older.length;\n\n      if (recentAvg < olderAvg * 0.9) {\n        trends.performance = 'improving';\n      } else if (recentAvg > olderAvg * 1.1) {\n        trends.performance = 'degrading';\n      }\n    }\n\n    // Analyze memory usage trend\n    const memoryUsage = this.historicalData.get('memoryUtilization') || [];\n    if (memoryUsage.length >= 10) {\n      const recent = memoryUsage.slice(-5);\n      const older = memoryUsage.slice(-10, -5);\n      const recentAvg = recent.reduce((a, b) => a + b, 0) / recent.length;\n      const olderAvg = older.reduce((a, b) => a + b, 0) / older.length;\n\n      if (recentAvg > olderAvg * 1.05) {\n        trends.memoryUsage = 'increasing';\n      } else if (recentAvg < olderAvg * 0.95) {\n        trends.memoryUsage = 'decreasing';\n      }\n    }\n\n    // Analyze cache efficiency trend\n    const cacheHitRates = this.historicalData.get('cacheHitRate') || [];\n    if (cacheHitRates.length >= 10) {\n      const recent = cacheHitRates.slice(-5);\n      const older = cacheHitRates.slice(-10, -5);\n      const recentAvg = recent.reduce((a, b) => a + b, 0) / recent.length;\n      const olderAvg = older.reduce((a, b) => a + b, 0) / older.length;\n\n      if (recentAvg > olderAvg * 1.05) {\n        trends.cacheEfficiency = 'improving';\n      } else if (recentAvg < olderAvg * 0.95) {\n        trends.cacheEfficiency = 'degrading';\n      }\n    }\n\n    return trends;\n  }\n\n  /**\n   * Analyze trends over time\n   */\n  private analyzeTrends(): void {\n    const trends = this.calculateTrends();\n    this.emit('trends:analyzed', trends);\n  }\n\n  /**\n   * Generate health summary\n   */\n  private generateHealthSummary(report: MemoryHealthReport): string {\n    const { overall, metrics, alerts } = report;\n\n    if (overall.status === 'excellent') {\n      return 'All memory systems are operating at peak efficiency with optimal performance metrics.';\n    } else if (overall.status === 'good') {\n      return 'Memory systems are performing well with minor optimization opportunities.';\n    } else if (overall.status === 'fair') {\n      return `Memory performance is acceptable but ${alerts.length} issue(s) need attention.`;\n    } else if (overall.status === 'poor') {\n      return `Memory systems require optimization. Cache hit rate: ${metrics.cacheHitRate.toFixed(1)}%, Avg query time: ${metrics.avgQueryTime.toFixed(1)}ms.`;\n    } else {\n      return `Critical memory issues detected. Immediate intervention required. ${alerts.filter((a) => a.level === 'critical').length} critical alert(s) active.`;\n    }\n  }\n\n  /**\n   * Clean up old alerts\n   */\n  private cleanupOldAlerts(): void {\n    const cutoff = Date.now() - 86400000; // 24 hours\n    const initialCount = this.alerts.length;\n\n    this.alerts = this.alerts.filter((alert) => alert.timestamp.getTime() > cutoff);\n\n    const cleaned = initialCount - this.alerts.length;\n    if (cleaned > 0) {\n      this.emit('alerts:cleaned', { cleaned });\n    }\n  }\n\n  /**\n   * Get current monitoring status\n   */\n  getStatus() {\n    return {\n      isActive: this.isActive,\n      alertCount: this.alerts.length,\n      criticalAlerts: this.alerts.filter((a) => a.level === 'critical').length,\n      warningAlerts: this.alerts.filter((a) => a.level === 'warning').length,\n      historicalDataPoints: Array.from(this.historicalData.entries()).map(([key, values]) => ({\n        metric: key,\n        samples: values.length,\n      })),\n    };\n  }\n\n  /**\n   * Get detailed memory report\n   */\n  async generateDetailedReport(): Promise<MemoryHealthReport> {\n    const memoryHealth = await this.memory.healthCheck();\n    const dbHealth = await this.db.healthCheck();\n    const analytics = this.memory.getAdvancedAnalytics();\n\n    return {\n      overall: {\n        score: this.calculateOverallScore(memoryHealth, dbHealth, analytics),\n        status: 'good',\n        summary: '',\n      },\n      metrics: {\n        cacheHitRate: analytics.cache.hitRate || 0,\n        avgQueryTime: this.getAverageFromHistory('avgQueryTime'),\n        memoryUtilization: analytics.cache.utilizationPercent || 0,\n        compressionRatio: 0.7,\n        poolEfficiency: this.calculatePoolEfficiency(analytics.pools),\n      },\n      alerts: this.getActiveAlerts(),\n      suggestions: this.generateHealthSuggestions(analytics),\n      trends: this.calculateTrends(),\n    };\n  }\n\n  /**\n   * Export monitoring data for analysis\n   */\n  exportData() {\n    return {\n      historicalData: Object.fromEntries(this.historicalData),\n      alerts: this.alerts,\n      thresholds: this.alertThresholds,\n      status: this.getStatus(),\n    };\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
