{
  "version": 3,
  "sources": ["../../src/task/commands.ts"],
  "sourcesContent": ["// Task command creators\nimport type { TaskCommandContext } from './types.js';\n\nexport function createTaskCreateCommand(context: TaskCommandContext) {\n  return {\n    name: 'create',\n    description: 'Create a new task',\n    execute: async (args: any) => {\n      try {\n        const task = await context.taskEngine.createTask(args);\n        context.logger?.info('Task created successfully', { taskId: task.id });\n        return task;\n      } catch (error) {\n        context.logger?.error('Failed to create task', error);\n        throw error;\n      }\n    },\n  };\n}\n\nexport function createTaskListCommand(context: TaskCommandContext) {\n  return {\n    name: 'list',\n    description: 'List all tasks',\n    execute: async (filter?: any, sort?: any, limit?: number, offset?: number) => {\n      try {\n        const result = await context.taskEngine.listTasks(filter, sort, limit, offset);\n        context.logger?.info('Tasks listed successfully', { count: result.tasks.length });\n        return result;\n      } catch (error) {\n        context.logger?.error('Failed to list tasks', error);\n        throw error;\n      }\n    },\n  };\n}\n\nexport function createTaskStatusCommand(context: TaskCommandContext) {\n  return {\n    name: 'status',\n    description: 'Get task status',\n    execute: async (taskId: string) => {\n      try {\n        const status = await context.taskEngine.getTaskStatus(taskId);\n        if (!status) {\n          throw new Error(`Task ${taskId} not found`);\n        }\n        context.logger?.info('Task status retrieved', { taskId });\n        return status;\n      } catch (error) {\n        context.logger?.error('Failed to get task status', error);\n        throw error;\n      }\n    },\n  };\n}\n\nexport function createTaskCancelCommand(context: TaskCommandContext) {\n  return {\n    name: 'cancel',\n    description: 'Cancel a task',\n    execute: async (\n      taskId: string,\n      reason: string = 'User requested',\n      rollback: boolean = true,\n    ) => {\n      try {\n        await context.taskEngine.cancelTask(taskId, reason, rollback);\n        context.logger?.info('Task cancelled successfully', { taskId, reason });\n        return { success: true, taskId, reason };\n      } catch (error) {\n        context.logger?.error('Failed to cancel task', error);\n        throw error;\n      }\n    },\n  };\n}\n\nexport function createTaskWorkflowCommand(context: TaskCommandContext) {\n  return {\n    name: 'workflow',\n    description: 'Manage task workflows',\n    execute: async (action: 'create' | 'execute' | 'list' | 'get', ...args: any[]) => {\n      try {\n        switch (action) {\n          case 'create':\n            const [workflowData] = args;\n            const createdWorkflow = await context.taskEngine.createWorkflow(workflowData);\n            context.logger?.info('Workflow created successfully', {\n              workflowId: createdWorkflow.id,\n            });\n            return createdWorkflow;\n          case 'execute':\n            const [workflowToExecute] = args;\n            await context.taskEngine.executeWorkflow(workflowToExecute);\n            context.logger?.info('Workflow execution started', {\n              workflowId: workflowToExecute.id,\n            });\n            return { success: true, workflowId: workflowToExecute.id };\n          case 'list':\n            context.logger?.info('Workflow list requested');\n            return { workflows: [] }; // Would need additional implementation\n          case 'get':\n            const [workflowId] = args;\n            context.logger?.info('Workflow details requested', { workflowId });\n            return { workflowId }; // Would need additional implementation\n          default:\n            throw new Error(`Unknown workflow action: ${action}`);\n        }\n      } catch (error) {\n        context.logger?.error('Workflow operation failed', error);\n        throw error;\n      }\n    },\n  };\n}\n"],
  "mappings": "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",
  "names": []
}
