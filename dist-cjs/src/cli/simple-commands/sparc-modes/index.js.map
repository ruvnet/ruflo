{"version":3,"sources":["../../../../../src/cli/simple-commands/sparc-modes/index.js"],"sourcesContent":["// index.js - SPARC mode orchestration loader\r\nimport { getArchitectOrchestration } from './architect.js';\r\nimport { getCodeOrchestration } from './code.js';\r\nimport { getTddOrchestration } from './tdd.js';\r\nimport { getDebugOrchestration } from './debug.js';\r\nimport { getSecurityReviewOrchestration } from './security-review.js';\r\nimport { getDocsWriterOrchestration } from './docs-writer.js';\r\nimport { getIntegrationOrchestration } from './integration.js';\r\nimport { getMonitoringOrchestration } from './monitoring.js';\r\nimport { getOptimizationOrchestration } from './optimization.js';\r\nimport { getSupabaseAdminOrchestration } from './supabase-admin.js';\r\nimport { getSpecPseudocodeOrchestration } from './spec-pseudocode.js';\r\nimport { getMcpOrchestration } from './mcp.js';\r\nimport { getDevOpsOrchestration } from './devops.js';\r\nimport { getAskOrchestration } from './ask.js';\r\nimport { getTutorialOrchestration } from './tutorial.js';\r\nimport { getSparcOrchestratorOrchestration } from './sparc-orchestrator.js';\r\nimport { getGenericOrchestration } from './generic.js';\r\nimport { getSwarmOrchestration } from './swarm.js';\r\n\r\n// Mode orchestration mapping\r\nconst modeOrchestrations = {\r\n  architect: getArchitectOrchestration,\r\n  code: getCodeOrchestration,\r\n  tdd: getTddOrchestration,\r\n  debug: getDebugOrchestration,\r\n  'security-review': getSecurityReviewOrchestration,\r\n  'docs-writer': getDocsWriterOrchestration,\r\n  integration: getIntegrationOrchestration,\r\n  'post-deployment-monitoring-mode': getMonitoringOrchestration,\r\n  'refinement-optimization-mode': getOptimizationOrchestration,\r\n  'supabase-admin': getSupabaseAdminOrchestration,\r\n  'spec-pseudocode': getSpecPseudocodeOrchestration,\r\n  mcp: getMcpOrchestration,\r\n  devops: getDevOpsOrchestration,\r\n  ask: getAskOrchestration,\r\n  tutorial: getTutorialOrchestration,\r\n  sparc: getSparcOrchestratorOrchestration,\r\n  swarm: getSwarmOrchestration,\r\n};\r\n\r\n/**\r\n * Get orchestration template for a specific mode\r\n * @param {string} modeSlug - The mode slug identifier\r\n * @param {string} taskDescription - The task description\r\n * @param {string} memoryNamespace - The memory namespace\r\n * @returns {string} The orchestration template\r\n */\r\nexport function getModeOrchestration(modeSlug, taskDescription, memoryNamespace) {\r\n  const orchestrationFunction = modeOrchestrations[modeSlug];\r\n\r\n  if (orchestrationFunction) {\r\n    return orchestrationFunction(taskDescription, memoryNamespace);\r\n  }\r\n\r\n  // Return generic orchestration for unknown modes\r\n  return getGenericOrchestration(taskDescription, memoryNamespace);\r\n}\r\n\r\n/**\r\n * Get the base SPARC prompt template\r\n * @param {Object} mode - The mode configuration\r\n * @param {string} taskDescription - The task description\r\n * @param {string} memoryNamespace - The memory namespace\r\n * @returns {string} The complete SPARC prompt\r\n */\r\nexport function createSparcPrompt(mode, taskDescription, memoryNamespace) {\r\n  const orchestration = getModeOrchestration(mode.slug, taskDescription, memoryNamespace);\r\n  // Get the actual working directory where the command was run from\r\n  const cwd = process.env.PWD || process.cwd();\r\n\r\n  return `# ${mode.name} - Task Execution\r\n\r\n## üéØ Your Mission\r\nBuild exactly what the user requested: \"${taskDescription}\"\r\n\r\n## üìÅ IMPORTANT: Project Directory\r\n**Current Working Directory:** ${cwd}\r\n\r\n‚ö†Ô∏è **CRITICAL INSTRUCTIONS:**\r\n- Create ALL project files in the current working directory: ${cwd}\r\n- NEVER create files in node_modules/ or any claude-flow directories\r\n- If the task specifies a project name (e.g., \"hello-world\"), create it as a subdirectory in ${cwd}\r\n- Use paths relative to ${cwd} for all file operations\r\n- Example: If creating \"hello-world\" app, use ${cwd}/hello-world/\r\n\r\n## üöÄ Your Role\r\n${mode.roleDefinition}\r\n\r\n${orchestration}\r\n\r\n## üìã Mode-Specific Guidelines\r\n${mode.customInstructions}\r\n\r\n## üõ†Ô∏è Claude-Flow Integration\r\n\r\n### Memory Operations\r\nUse the memory system to track your progress and share context:\r\n\r\n\\`\\`\\`bash\r\n# Store your work\r\nnpx claude-flow memory store ${memoryNamespace}_<phase> \"description of work completed\"\r\n\r\n# Query previous work\r\nnpx claude-flow memory query ${memoryNamespace}\r\n\r\n# Examples for this task\r\nnpx claude-flow memory store ${memoryNamespace}_analysis \"Analyzed ${taskDescription} - found X components needed\"\r\nnpx claude-flow memory store ${memoryNamespace}_progress \"Completed Y% of implementation\"\r\nnpx claude-flow memory store ${memoryNamespace}_blockers \"Issue with Z - need clarification\"\r\n\\`\\`\\`\r\n\r\n### Task Orchestration\r\nFor complex tasks, coordinate with other specialists:\r\n\r\n\\`\\`\\`bash\r\n# Check system status\r\nnpx claude-flow status\r\n\r\n# View active agents (if --parallel was used)\r\nnpx claude-flow agent list\r\n\r\n# Monitor progress\r\nnpx claude-flow monitor\r\n\\`\\`\\`\r\n\r\n### üöÄ Parallel Execution with BatchTool\r\nUse BatchTool to orchestrate multiple SPARC modes concurrently in a boomerang pattern:\r\n\r\n\\`\\`\\`bash\r\n# Example: Parallel development workflow\r\nbatchtool run --parallel \\\\\r\n  \"npx claude-flow sparc run architect 'design user authentication system' --non-interactive\" \\\\\r\n  \"npx claude-flow sparc run security-review 'analyze authentication requirements' --non-interactive\" \\\\\r\n  \"npx claude-flow sparc run spec-pseudocode 'create auth flow pseudocode' --non-interactive\"\r\n\r\n# Boomerang Pattern: Research ‚Üí Design ‚Üí Implement ‚Üí Test ‚Üí Refine\r\nbatchtool orchestrate --boomerang \\\\\r\n  --phase1 \"npx claude-flow sparc run ask 'research best auth practices' --non-interactive\" \\\\\r\n  --phase2 \"npx claude-flow sparc run architect 'design based on research' --non-interactive\" \\\\\r\n  --phase3 \"npx claude-flow sparc run code 'implement auth system' --non-interactive\" \\\\\r\n  --phase4 \"npx claude-flow sparc run tdd 'test auth implementation' --non-interactive\" \\\\\r\n  --phase5 \"npx claude-flow sparc run optimization 'refine auth performance' --non-interactive\"\r\n\r\n# Concurrent Feature Development\r\nbatchtool run --concurrent --max-parallel 3 \\\\\r\n  \"npx claude-flow sparc run code 'implement login feature' --non-interactive\" \\\\\r\n  \"npx claude-flow sparc run code 'implement registration feature' --non-interactive\" \\\\\r\n  \"npx claude-flow sparc run code 'implement password reset' --non-interactive\" \\\\\r\n  \"npx claude-flow sparc run tdd 'create auth test suite' --non-interactive\"\r\n\\`\\`\\`\r\n\r\n#### Boomerang Orchestration Pattern\r\nThe boomerang pattern allows for iterative development where results from one phase inform the next:\r\n1. **Research Phase**: Gather requirements and best practices\r\n2. **Design Phase**: Create architecture based on research\r\n3. **Implementation Phase**: Build according to design\r\n4. **Testing Phase**: Validate implementation\r\n5. **Refinement Phase**: Optimize based on test results\r\n6. **Loop Back**: Results feed back to improve the cycle\r\n\r\nBenefits of --non-interactive mode with BatchTool:\r\n- No manual intervention required\r\n- Parallel execution of independent tasks\r\n- Automatic result collection and aggregation\r\n- Progress tracking across all concurrent operations\r\n- Efficient resource utilization\r\n\r\n## ‚ö° Execution Guidelines\r\n\r\n1. **Focus on User's Project**\r\n   - Build what they asked for, not improvements to claude-flow\r\n   - Create files ONLY in the current working directory: ${cwd}\r\n   - NEVER create files in node_modules/ or system directories\r\n   - If creating a named project, make it a subdirectory of ${cwd}\r\n   - Use appropriate project structure relative to ${cwd}\r\n\r\n2. **Directory Rules**\r\n   - Current directory: ${cwd}\r\n   - Create new projects as: ${cwd}/<project-name>/\r\n   - Use relative paths from ${cwd} for all operations\r\n   - Verify you're in the correct directory before creating files\r\n\r\n3. **Quality Standards**\r\n   - Keep all files under 500 lines\r\n   - Never hardcode secrets or credentials\r\n   - Use environment variables and config files\r\n   - Write clean, maintainable code\r\n\r\n4. **Communication**\r\n   - Store progress updates in memory\r\n   - Document key decisions\r\n   - Ask for clarification if needed\r\n   - Provide clear status updates\r\n\r\n## üèÅ Start Execution\r\n\r\nBegin with Step 1 of the orchestration plan above. Focus on delivering exactly what was requested: \"${taskDescription}\"\r\n\r\nRemember: You're building the user's project, using claude-flow only for memory and orchestration support.`;\r\n}\r\n"],"names":["getArchitectOrchestration","getCodeOrchestration","getTddOrchestration","getDebugOrchestration","getSecurityReviewOrchestration","getDocsWriterOrchestration","getIntegrationOrchestration","getMonitoringOrchestration","getOptimizationOrchestration","getSupabaseAdminOrchestration","getSpecPseudocodeOrchestration","getMcpOrchestration","getDevOpsOrchestration","getAskOrchestration","getTutorialOrchestration","getSparcOrchestratorOrchestration","getGenericOrchestration","getSwarmOrchestration","modeOrchestrations","architect","code","tdd","debug","integration","mcp","devops","ask","tutorial","sparc","swarm","getModeOrchestration","modeSlug","taskDescription","memoryNamespace","orchestrationFunction","createSparcPrompt","mode","orchestration","slug","cwd","process","env","PWD","name","roleDefinition","customInstructions"],"mappings":"AACA,SAASA,yBAAyB,QAAQ,iBAAiB;AAC3D,SAASC,oBAAoB,QAAQ,YAAY;AACjD,SAASC,mBAAmB,QAAQ,WAAW;AAC/C,SAASC,qBAAqB,QAAQ,aAAa;AACnD,SAASC,8BAA8B,QAAQ,uBAAuB;AACtE,SAASC,0BAA0B,QAAQ,mBAAmB;AAC9D,SAASC,2BAA2B,QAAQ,mBAAmB;AAC/D,SAASC,0BAA0B,QAAQ,kBAAkB;AAC7D,SAASC,4BAA4B,QAAQ,oBAAoB;AACjE,SAASC,6BAA6B,QAAQ,sBAAsB;AACpE,SAASC,8BAA8B,QAAQ,uBAAuB;AACtE,SAASC,mBAAmB,QAAQ,WAAW;AAC/C,SAASC,sBAAsB,QAAQ,cAAc;AACrD,SAASC,mBAAmB,QAAQ,WAAW;AAC/C,SAASC,wBAAwB,QAAQ,gBAAgB;AACzD,SAASC,iCAAiC,QAAQ,0BAA0B;AAC5E,SAASC,uBAAuB,QAAQ,eAAe;AACvD,SAASC,qBAAqB,QAAQ,aAAa;AAGnD,MAAMC,qBAAqB;IACzBC,WAAWnB;IACXoB,MAAMnB;IACNoB,KAAKnB;IACLoB,OAAOnB;IACP,mBAAmBC;IACnB,eAAeC;IACfkB,aAAajB;IACb,mCAAmCC;IACnC,gCAAgCC;IAChC,kBAAkBC;IAClB,mBAAmBC;IACnBc,KAAKb;IACLc,QAAQb;IACRc,KAAKb;IACLc,UAAUb;IACVc,OAAOb;IACPc,OAAOZ;AACT;AASA,OAAO,SAASa,qBAAqBC,QAAQ,EAAEC,eAAe,EAAEC,eAAe;IAC7E,MAAMC,wBAAwBhB,kBAAkB,CAACa,SAAS;IAE1D,IAAIG,uBAAuB;QACzB,OAAOA,sBAAsBF,iBAAiBC;IAChD;IAGA,OAAOjB,wBAAwBgB,iBAAiBC;AAClD;AASA,OAAO,SAASE,kBAAkBC,IAAI,EAAEJ,eAAe,EAAEC,eAAe;IACtE,MAAMI,gBAAgBP,qBAAqBM,KAAKE,IAAI,EAAEN,iBAAiBC;IAEvE,MAAMM,MAAMC,QAAQC,GAAG,CAACC,GAAG,IAAIF,QAAQD,GAAG;IAE1C,OAAO,CAAC,EAAE,EAAEH,KAAKO,IAAI,CAAC;;;wCAGgB,EAAEX,gBAAgB;;;+BAG3B,EAAEO,IAAI;;;6DAGwB,EAAEA,IAAI;;6FAE0B,EAAEA,IAAI;wBAC3E,EAAEA,IAAI;8CACgB,EAAEA,IAAI;;;AAGpD,EAAEH,KAAKQ,cAAc,CAAC;;AAEtB,EAAEP,cAAc;;;AAGhB,EAAED,KAAKS,kBAAkB,CAAC;;;;;;;;;6BASG,EAAEZ,gBAAgB;;;6BAGlB,EAAEA,gBAAgB;;;6BAGlB,EAAEA,gBAAgB,oBAAoB,EAAED,gBAAgB;6BACxD,EAAEC,gBAAgB;6BAClB,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yDA+DU,EAAEM,IAAI;;4DAEH,EAAEA,IAAI;mDACf,EAAEA,IAAI;;;wBAGjC,EAAEA,IAAI;6BACD,EAAEA,IAAI;6BACN,EAAEA,IAAI;;;;;;;;;;;;;;;;;oGAiBiE,EAAEP,gBAAgB;;0GAEZ,CAAC;AAC3G"}