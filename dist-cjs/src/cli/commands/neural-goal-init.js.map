{"version":3,"sources":["../../../../src/cli/commands/neural-goal-init.js"],"sourcesContent":["#!/usr/bin/env node\r\n/**\r\n * Neural and Goal module initialization commands\r\n * Handles both 'neural init' and 'goal init' commands\r\n */\r\n\r\nimport { promises as fs } from 'fs';\r\nimport path from 'path';\r\nimport chalk from 'chalk';\r\nimport { fileURLToPath } from 'url';\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nexport async function registerNeuralGoalCommands(program) {\r\n  // Neural init command\r\n  program\r\n    .command('neural')\r\n    .description('Neural module commands')\r\n    .command('init')\r\n    .description('Initialize SAFLA neural module')\r\n    .option('--force', 'Overwrite existing module')\r\n    .option('--target <dir>', 'Target directory', '.claude/agents/neural')\r\n    .action(async (options) => {\r\n      await initNeuralModule(options);\r\n    });\r\n\r\n  // Goal init command  \r\n  program\r\n    .command('goal')\r\n    .description('Goal module commands')\r\n    .command('init')\r\n    .description('Initialize GOAP goal module')\r\n    .option('--force', 'Overwrite existing module')\r\n    .option('--target <dir>', 'Target directory', '.claude/agents/goal')\r\n    .action(async (options) => {\r\n      await initGoalModule(options);\r\n    });\r\n}\r\n\r\nasync function initNeuralModule(options) {\r\n  const targetDir = path.resolve(process.cwd(), options.target || '.claude/agents/neural');\r\n  \r\n  console.log(chalk.cyan('üß† Initializing Claude Flow Neural Module...'));\r\n  \r\n  try {\r\n    // Check if exists\r\n    if (await exists(targetDir) && !options.force) {\r\n      console.log(chalk.yellow('‚ö†Ô∏è  Neural module already exists. Use --force to overwrite.'));\r\n      return;\r\n    }\r\n    \r\n    // Create directory\r\n    await fs.mkdir(targetDir, { recursive: true });\r\n    \r\n    // Create SAFLA neural agent\r\n    const saflaContent = `---\r\nname: safla-neural\r\ndescription: \"Self-Aware Feedback Loop Algorithm (SAFLA) neural specialist\"\r\ncolor: cyan\r\n---\r\n\r\nYou are a SAFLA Neural Specialist with:\r\n- 4-tier memory (Vector, Episodic, Semantic, Working)\r\n- 172,000+ ops/sec processing\r\n- 60% memory compression\r\n- Cross-session learning\r\n\r\n## MCP Integration\r\n\\`\\`\\`javascript\r\nmcp__claude-flow__neural_train {\r\n  pattern_type: \"coordination\",\r\n  training_data: safla_config\r\n}\r\n\\`\\`\\`\r\n`;\r\n    \r\n    await fs.writeFile(path.join(targetDir, 'safla-neural.md'), saflaContent);\r\n    console.log(chalk.gray('  ‚úì Created safla-neural.md'));\r\n    \r\n    // Create config\r\n    const config = {\r\n      version: '1.0.0',\r\n      neural: {\r\n        enabled: true,\r\n        defaultModel: 'safla',\r\n        wasmOptimization: true,\r\n        memoryCompression: 0.6\r\n      }\r\n    };\r\n    \r\n    await fs.writeFile(\r\n      path.join(targetDir, 'config.json'),\r\n      JSON.stringify(config, null, 2)\r\n    );\r\n    console.log(chalk.gray('  ‚úì Created config.json'));\r\n    \r\n    console.log(chalk.green('‚úÖ Neural module initialized successfully!'));\r\n    console.log(chalk.cyan('\\nüìö Usage:'));\r\n    console.log(chalk.gray('  @agent-safla-neural \"Create self-improving system\"'));\r\n    \r\n  } catch (error) {\r\n    console.error(chalk.red('‚ùå Failed:'), error.message);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\nasync function initGoalModule(options) {\r\n  const targetDir = path.resolve(process.cwd(), options.target || '.claude/agents/goal');\r\n  \r\n  console.log(chalk.magenta('üéØ Initializing Claude Flow Goal Module...'));\r\n  \r\n  try {\r\n    // Check if exists\r\n    if (await exists(targetDir) && !options.force) {\r\n      console.log(chalk.yellow('‚ö†Ô∏è  Goal module already exists. Use --force to overwrite.'));\r\n      return;\r\n    }\r\n    \r\n    // Create directory\r\n    await fs.mkdir(targetDir, { recursive: true });\r\n    \r\n    // Create goal-planner agent\r\n    const plannerContent = `---\r\nname: goal-planner\r\ndescription: \"Goal-Oriented Action Planning (GOAP) specialist\"\r\ncolor: purple\r\n---\r\n\r\nYou are a GOAP specialist with:\r\n- A* search algorithms\r\n- OODA loop execution\r\n- Adaptive replanning\r\n- Mixed LLM + code execution\r\n\r\n## MCP Integration\r\n\\`\\`\\`javascript\r\nmcp__claude-flow__task_orchestrate {\r\n  task: \"achieve_goal\",\r\n  strategy: \"adaptive\"\r\n}\r\n\\`\\`\\`\r\n`;\r\n    \r\n    await fs.writeFile(path.join(targetDir, 'goal-planner.md'), plannerContent);\r\n    console.log(chalk.gray('  ‚úì Created goal-planner.md'));\r\n    \r\n    // Create config\r\n    const config = {\r\n      version: '1.0.0',\r\n      goal: {\r\n        enabled: true,\r\n        algorithm: 'astar',\r\n        maxPlanDepth: 100,\r\n        replanning: {\r\n          enabled: true,\r\n          threshold: 0.3\r\n        }\r\n      }\r\n    };\r\n    \r\n    await fs.writeFile(\r\n      path.join(targetDir, 'config.json'),\r\n      JSON.stringify(config, null, 2)\r\n    );\r\n    console.log(chalk.gray('  ‚úì Created config.json'));\r\n    \r\n    console.log(chalk.green('‚úÖ Goal module initialized successfully!'));\r\n    console.log(chalk.magenta('\\nüìö Usage:'));\r\n    console.log(chalk.gray('  @agent-goal-planner \"Create deployment plan\"'));\r\n    \r\n  } catch (error) {\r\n    console.error(chalk.red('‚ùå Failed:'), error.message);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\nasync function exists(path) {\r\n  try {\r\n    await fs.access(path);\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport default { registerNeuralGoalCommands };"],"names":["promises","fs","path","chalk","fileURLToPath","__filename","url","__dirname","dirname","registerNeuralGoalCommands","program","command","description","option","action","options","initNeuralModule","initGoalModule","targetDir","resolve","process","cwd","target","console","log","cyan","exists","force","yellow","mkdir","recursive","saflaContent","writeFile","join","gray","config","version","neural","enabled","defaultModel","wasmOptimization","memoryCompression","JSON","stringify","green","error","red","message","exit","magenta","plannerContent","goal","algorithm","maxPlanDepth","replanning","threshold","access"],"mappings":"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"}