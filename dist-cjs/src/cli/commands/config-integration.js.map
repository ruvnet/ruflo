{"version":3,"sources":["../../../../src/cli/commands/config-integration.ts"],"sourcesContent":["/**\r\n * Configuration integration commands for ruv-swarm\r\n *\r\n * These commands provide enhanced configuration management\r\n * specifically for ruv-swarm integration with Claude Code.\r\n */\r\n\r\nimport { success, error, warning, info } from '../cli-core.js';\r\nimport type { CommandContext } from '../cli-core.js';\r\nimport { configManager } from '../../config/config-manager.js';\r\nimport {\r\n  getRuvSwarmIntegration,\r\n  RuvSwarmConfigHelpers,\r\n  initializeRuvSwarmIntegration,\r\n} from '../../config/ruv-swarm-integration.js';\r\n\r\n/**\r\n * Enhanced configuration command with ruv-swarm integration\r\n */\r\nexport async function configIntegrationAction(ctx: CommandContext) {\r\n  if (ctx.flags.help || ctx.flags.h || ctx.args.length === 0) {\r\n    showConfigIntegrationHelp();\r\n    return;\r\n  }\r\n\r\n  const subcommand = ctx.args[0];\r\n  const subArgs = ctx.args.slice(1);\r\n\r\n  try {\r\n    switch (subcommand) {\r\n      case 'setup':\r\n        await handleSetup(ctx);\r\n        break;\r\n      case 'sync':\r\n        await handleSync(ctx);\r\n        break;\r\n      case 'status':\r\n        await handleStatus(ctx);\r\n        break;\r\n      case 'validate':\r\n        await handleValidate(ctx);\r\n        break;\r\n      case 'preset':\r\n        await handlePreset(ctx);\r\n        break;\r\n      case 'export':\r\n        await handleExport(ctx);\r\n        break;\r\n      case 'import':\r\n        await handleImport(ctx);\r\n        break;\r\n      default:\r\n        error(`Unknown config-integration subcommand: ${subcommand}`);\r\n        showConfigIntegrationHelp();\r\n        break;\r\n    }\r\n  } catch (err) {\r\n    error(`Configuration integration command failed: ${(err as Error).message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Show configuration integration help\r\n */\r\nfunction showConfigIntegrationHelp() {\r\n  console.log('config-integration - Enhanced configuration management with ruv-swarm\\\\n');\r\n\r\n  console.log('Usage:');\r\n  console.log('  claude-flow config-integration <command> [options]\\\\n');\r\n\r\n  console.log('Commands:');\r\n  console.log('  setup                      Initialize ruv-swarm integration');\r\n  console.log('  sync                       Synchronize configurations');\r\n  console.log('  status                     Show integration status');\r\n  console.log('  validate                   Validate all configurations');\r\n  console.log('  preset <type>              Apply configuration preset');\r\n  console.log('  export <file>              Export unified configuration');\r\n  console.log('  import <file>              Import and apply configuration\\\\n');\r\n\r\n  console.log('Presets:');\r\n  console.log('  development                Optimized for development workflows');\r\n  console.log('  research                   Optimized for research and analysis');\r\n  console.log('  production                 Optimized for production environments\\\\n');\r\n\r\n  console.log('Examples:');\r\n  console.log('  claude-flow config-integration setup --enable-ruv-swarm');\r\n  console.log('  claude-flow config-integration preset development');\r\n  console.log('  claude-flow config-integration sync --force');\r\n  console.log('  claude-flow config-integration export my-config.json');\r\n  console.log('  claude-flow config-integration status --verbose');\r\n}\r\n\r\n/**\r\n * Handle setup command\r\n */\r\nasync function handleSetup(ctx: CommandContext) {\r\n  const enableRuvSwarm =\r\n    (ctx.flags.enableRuvSwarm as boolean) || (ctx.flags['enable-ruv-swarm'] as boolean) || true;\r\n  const force = (ctx.flags.force as boolean) || (ctx.flags.f as boolean);\r\n\r\n  info('Setting up ruv-swarm integration...');\r\n\r\n  try {\r\n    // Enable ruv-swarm in main config if requested\r\n    if (enableRuvSwarm) {\r\n      configManager.setRuvSwarmConfig({ enabled: true });\r\n      await configManager.save();\r\n      success('ruv-swarm enabled in main configuration');\r\n    }\r\n\r\n    // Initialize integration\r\n    const result = await initializeRuvSwarmIntegration();\r\n\r\n    if (result.success) {\r\n      success('ruv-swarm integration setup completed successfully!');\r\n      console.log(`‚úÖ ${result.message}`);\r\n\r\n      // Show quick status\r\n      const integration = getRuvSwarmIntegration();\r\n      const status = integration.getStatus();\r\n\r\n      console.log('\\\\nüìã Integration Status:');\r\n      console.log(`  Enabled: ${status.enabled ? '‚úÖ' : '‚ùå'}`);\r\n      console.log(`  Synchronized: ${status.synchronized ? '‚úÖ' : '‚ö†Ô∏è'}`);\r\n      console.log(`  Topology: ${status.mainConfig.defaultTopology}`);\r\n      console.log(`  Max Agents: ${status.mainConfig.maxAgents}`);\r\n      console.log(`  Strategy: ${status.mainConfig.defaultStrategy}`);\r\n    } else {\r\n      error('ruv-swarm integration setup failed');\r\n      console.log(`‚ùå ${result.message}`);\r\n\r\n      if (force) {\r\n        warning('Continuing despite errors due to --force flag');\r\n      }\r\n    }\r\n  } catch (err) {\r\n    error(`Setup failed: ${(err as Error).message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle sync command\r\n */\r\nasync function handleSync(ctx: CommandContext) {\r\n  const force = (ctx.flags.force as boolean) || (ctx.flags.f as boolean);\r\n\r\n  info('Synchronizing configurations...');\r\n\r\n  try {\r\n    const integration = getRuvSwarmIntegration();\r\n\r\n    // Check current sync status\r\n    const statusBefore = integration.getStatus();\r\n    if (statusBefore.synchronized && !force) {\r\n      success('Configurations are already synchronized');\r\n      return;\r\n    }\r\n\r\n    // Perform sync\r\n    integration.syncConfiguration();\r\n\r\n    // Verify sync\r\n    const statusAfter = integration.getStatus();\r\n\r\n    if (statusAfter.synchronized) {\r\n      success('Configuration synchronization completed');\r\n      console.log('‚úÖ Main config and ruv-swarm config are now synchronized');\r\n    } else {\r\n      warning('Synchronization completed but configurations may still differ');\r\n      console.log('‚ö†Ô∏è  Manual review recommended');\r\n    }\r\n  } catch (err) {\r\n    error(`Synchronization failed: ${(err as Error).message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle status command\r\n */\r\nasync function handleStatus(ctx: CommandContext) {\r\n  const verbose = (ctx.flags.verbose as boolean) || (ctx.flags.v as boolean);\r\n  const json = ctx.flags.json as boolean;\r\n\r\n  try {\r\n    const integration = getRuvSwarmIntegration();\r\n    const status = integration.getStatus();\r\n\r\n    if (json) {\r\n      console.log(JSON.stringify(status, null, 2));\r\n      return;\r\n    }\r\n\r\n    console.log('üîß Configuration Integration Status\\\\n');\r\n\r\n    // Main status\r\n    console.log('üìä Overview:');\r\n    console.log(`  ruv-swarm Enabled: ${status.enabled ? '‚úÖ Yes' : '‚ùå No'}`);\r\n    console.log(`  Configurations Synchronized: ${status.synchronized ? '‚úÖ Yes' : '‚ö†Ô∏è  No'}`);\r\n\r\n    // Main configuration\r\n    console.log('\\\\n‚öôÔ∏è  Main Configuration:');\r\n    console.log(`  Default Topology: ${status.mainConfig.defaultTopology}`);\r\n    console.log(`  Max Agents: ${status.mainConfig.maxAgents}`);\r\n    console.log(`  Default Strategy: ${status.mainConfig.defaultStrategy}`);\r\n    console.log(`  Auto Init: ${status.mainConfig.autoInit ? '‚úÖ' : '‚ùå'}`);\r\n    console.log(`  Hooks Enabled: ${status.mainConfig.enableHooks ? '‚úÖ' : '‚ùå'}`);\r\n    console.log(`  Persistence Enabled: ${status.mainConfig.enablePersistence ? '‚úÖ' : '‚ùå'}`);\r\n    console.log(`  Neural Training: ${status.mainConfig.enableNeuralTraining ? '‚úÖ' : '‚ùå'}`);\r\n\r\n    if (verbose) {\r\n      console.log('\\\\nüß† ruv-swarm Configuration:');\r\n      console.log(`  Swarm Max Agents: ${status.ruvSwarmConfig.swarm.maxAgents}`);\r\n      console.log(\r\n        `  Memory Persistence: ${status.ruvSwarmConfig.memory.enablePersistence ? '‚úÖ' : '‚ùå'}`,\r\n      );\r\n      console.log(\r\n        `  Neural Training: ${status.ruvSwarmConfig.neural.enableTraining ? '‚úÖ' : '‚ùå'}`,\r\n      );\r\n      console.log(`  MCP Tools: ${status.ruvSwarmConfig.integration.enableMCPTools ? '‚úÖ' : '‚ùå'}`);\r\n      console.log(\r\n        `  CLI Commands: ${status.ruvSwarmConfig.integration.enableCLICommands ? '‚úÖ' : '‚ùå'}`,\r\n      );\r\n\r\n      console.log('\\\\nüìà Monitoring:');\r\n      console.log(\r\n        `  Metrics Enabled: ${status.ruvSwarmConfig.monitoring.enableMetrics ? '‚úÖ' : '‚ùå'}`,\r\n      );\r\n      console.log(\r\n        `  Alerts Enabled: ${status.ruvSwarmConfig.monitoring.enableAlerts ? '‚úÖ' : '‚ùå'}`,\r\n      );\r\n      console.log(`  CPU Threshold: ${status.ruvSwarmConfig.monitoring.alertThresholds.cpu}%`);\r\n      console.log(\r\n        `  Memory Threshold: ${status.ruvSwarmConfig.monitoring.alertThresholds.memory}%`,\r\n      );\r\n    }\r\n  } catch (err) {\r\n    error(`Failed to get status: ${(err as Error).message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle validate command\r\n */\r\nasync function handleValidate(ctx: CommandContext) {\r\n  const fix = (ctx.flags.fix as boolean) || (ctx.flags.f as boolean);\r\n\r\n  info('Validating configurations...');\r\n\r\n  try {\r\n    const integration = getRuvSwarmIntegration();\r\n\r\n    // Validate main config\r\n    console.log('üîç Validating main configuration...');\r\n    try {\r\n      const mainConfig = configManager.show();\r\n      configManager.validate(mainConfig);\r\n      success('Main configuration is valid');\r\n    } catch (err) {\r\n      error(`Main configuration validation failed: ${(err as Error).message}`);\r\n      if (fix) {\r\n        warning('Auto-fix for main configuration not implemented');\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Validate ruv-swarm config\r\n    console.log('üîç Validating ruv-swarm configuration...');\r\n    const ruvSwarmManager = integration['ruvSwarmManager'];\r\n    const ruvSwarmValidation = ruvSwarmManager.validateConfig();\r\n\r\n    if (ruvSwarmValidation.valid) {\r\n      success('ruv-swarm configuration is valid');\r\n    } else {\r\n      error('ruv-swarm configuration validation failed:');\r\n      ruvSwarmValidation.errors.forEach((err) => console.log(`  - ${err}`));\r\n\r\n      if (fix) {\r\n        warning('Auto-fix for ruv-swarm configuration not implemented');\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Check synchronization\r\n    console.log('üîç Checking synchronization...');\r\n    const status = integration.getStatus();\r\n\r\n    if (status.synchronized) {\r\n      success('Configurations are synchronized');\r\n    } else {\r\n      warning('Configurations are not synchronized');\r\n      if (fix) {\r\n        info('Attempting to synchronize...');\r\n        integration.syncConfiguration();\r\n        success('Synchronization completed');\r\n      }\r\n    }\r\n\r\n    success('All validations passed');\r\n  } catch (err) {\r\n    error(`Validation failed: ${(err as Error).message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle preset command\r\n */\r\nasync function handlePreset(ctx: CommandContext) {\r\n  if (ctx.args.length < 2) {\r\n    error('Preset type is required');\r\n    console.log('Available presets: development, research, production');\r\n    return;\r\n  }\r\n\r\n  const presetType = ctx.args[1] as 'development' | 'research' | 'production';\r\n  const dryRun = (ctx.flags.dryRun as boolean) || (ctx.flags['dry-run'] as boolean);\r\n\r\n  if (!['development', 'research', 'production'].includes(presetType)) {\r\n    error('Invalid preset type');\r\n    console.log('Available presets: development, research, production');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    if (dryRun) {\r\n      info(`Showing ${presetType} preset configuration (dry run):`);\r\n      const config = RuvSwarmConfigHelpers.getConfigForUseCase(presetType);\r\n      console.log(JSON.stringify(config, null, 2));\r\n      return;\r\n    }\r\n\r\n    info(`Applying ${presetType} preset...`);\r\n\r\n    switch (presetType) {\r\n      case 'development':\r\n        RuvSwarmConfigHelpers.setupDevelopmentConfig();\r\n        break;\r\n      case 'research':\r\n        RuvSwarmConfigHelpers.setupResearchConfig();\r\n        break;\r\n      case 'production':\r\n        RuvSwarmConfigHelpers.setupProductionConfig();\r\n        break;\r\n    }\r\n\r\n    // Save configuration\r\n    await configManager.save();\r\n\r\n    success(`${presetType} preset applied successfully`);\r\n\r\n    // Show applied configuration\r\n    const integration = getRuvSwarmIntegration();\r\n    const status = integration.getStatus();\r\n\r\n    console.log('\\\\nüìã Applied Configuration:');\r\n    console.log(`  Topology: ${status.mainConfig.defaultTopology}`);\r\n    console.log(`  Max Agents: ${status.mainConfig.maxAgents}`);\r\n    console.log(`  Strategy: ${status.mainConfig.defaultStrategy}`);\r\n    console.log(\r\n      `  Features: ${Object.entries(status.mainConfig)\r\n        .filter(([key, value]) => key.startsWith('enable') && value)\r\n        .map(([key]) => key.replace('enable', '').toLowerCase())\r\n        .join(', ')}`,\r\n    );\r\n  } catch (err) {\r\n    error(`Failed to apply preset: ${(err as Error).message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle export command\r\n */\r\nasync function handleExport(ctx: CommandContext) {\r\n  if (ctx.args.length < 2) {\r\n    error('Export file path is required');\r\n    console.log('Usage: config-integration export <file>');\r\n    return;\r\n  }\r\n\r\n  const filePath = ctx.args[1];\r\n  const format = (ctx.flags.format as string) || 'json';\r\n\r\n  try {\r\n    const integration = getRuvSwarmIntegration();\r\n    const status = integration.getStatus();\r\n\r\n    const exportData = {\r\n      timestamp: new Date().toISOString(),\r\n      version: '1.0.0',\r\n      main: status.mainConfig,\r\n      ruvSwarm: status.ruvSwarmConfig,\r\n      unified: integration.getUnifiedCommandArgs(),\r\n    };\r\n\r\n    const { writeFile } = await import('fs/promises');\r\n\r\n    if (format === 'yaml') {\r\n      // Simple YAML export (basic implementation)\r\n      const yamlContent = `# Claude-Flow Configuration Export\r\n# Generated: ${exportData.timestamp}\r\n\r\nmain:\r\n${JSON.stringify(exportData.main, null, 2)\r\n  .split('\\\\n')\r\n  .map((line) => '  ' + line)\r\n  .join('\\\\n')}\r\n\r\nruvSwarm:\r\n${JSON.stringify(exportData.ruvSwarm, null, 2)\r\n  .split('\\\\n')\r\n  .map((line) => '  ' + line)\r\n  .join('\\\\n')}\r\n\r\nunified:\r\n${JSON.stringify(exportData.unified, null, 2)\r\n  .split('\\\\n')\r\n  .map((line) => '  ' + line)\r\n  .join('\\\\n')}\r\n`;\r\n      await writeFile(filePath, yamlContent, 'utf8');\r\n    } else {\r\n      await writeFile(filePath, JSON.stringify(exportData, null, 2), 'utf8');\r\n    }\r\n\r\n    success(`Configuration exported to: ${filePath}`);\r\n    console.log(`üìÑ Format: ${format}`);\r\n    console.log(`üìä Size: ${JSON.stringify(exportData).length} bytes`);\r\n  } catch (err) {\r\n    error(`Export failed: ${(err as Error).message}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle import command\r\n */\r\nasync function handleImport(ctx: CommandContext) {\r\n  if (ctx.args.length < 2) {\r\n    error('Import file path is required');\r\n    console.log('Usage: config-integration import <file>');\r\n    return;\r\n  }\r\n\r\n  const filePath = ctx.args[1];\r\n  const dryRun = (ctx.flags.dryRun as boolean) || (ctx.flags['dry-run'] as boolean);\r\n  const force = (ctx.flags.force as boolean) || (ctx.flags.f as boolean);\r\n\r\n  try {\r\n    const { readFile } = await import('fs/promises');\r\n    const content = await readFile(filePath, 'utf8');\r\n\r\n    let importData;\r\n    try {\r\n      importData = JSON.parse(content);\r\n    } catch {\r\n      error('Invalid JSON format in import file');\r\n      return;\r\n    }\r\n\r\n    if (!importData.main || !importData.ruvSwarm) {\r\n      error('Import file does not contain required configuration sections');\r\n      return;\r\n    }\r\n\r\n    if (dryRun) {\r\n      info('Import preview (dry run):');\r\n      console.log('\\\\nüìã Main Configuration Changes:');\r\n      console.log(JSON.stringify(importData.main, null, 2));\r\n      console.log('\\\\nüß† ruv-swarm Configuration Changes:');\r\n      console.log(JSON.stringify(importData.ruvSwarm, null, 2));\r\n      return;\r\n    }\r\n\r\n    if (!force) {\r\n      warning('This will overwrite current configuration');\r\n      console.log('Use --force to proceed or --dry-run to preview changes');\r\n      return;\r\n    }\r\n\r\n    info('Importing configuration...');\r\n\r\n    const integration = getRuvSwarmIntegration();\r\n\r\n    // Update configurations\r\n    integration.updateConfiguration({\r\n      main: importData.main,\r\n      ruvSwarm: importData.ruvSwarm,\r\n    });\r\n\r\n    // Save changes\r\n    await configManager.save();\r\n\r\n    success('Configuration imported successfully');\r\n    console.log(`üìÑ Source: ${filePath}`);\r\n    console.log(`üìÖ Imported: ${importData.timestamp || 'Unknown timestamp'}`);\r\n  } catch (err) {\r\n    error(`Import failed: ${(err as Error).message}`);\r\n  }\r\n}\r\n\r\nexport default {\r\n  configIntegrationAction,\r\n};\r\n"],"names":["success","error","warning","info","configManager","getRuvSwarmIntegration","RuvSwarmConfigHelpers","initializeRuvSwarmIntegration","configIntegrationAction","ctx","flags","help","h","args","length","showConfigIntegrationHelp","subcommand","subArgs","slice","handleSetup","handleSync","handleStatus","handleValidate","handlePreset","handleExport","handleImport","err","message","console","log","enableRuvSwarm","force","f","setRuvSwarmConfig","enabled","save","result","integration","status","getStatus","synchronized","mainConfig","defaultTopology","maxAgents","defaultStrategy","statusBefore","syncConfiguration","statusAfter","verbose","v","json","JSON","stringify","autoInit","enableHooks","enablePersistence","enableNeuralTraining","ruvSwarmConfig","swarm","memory","neural","enableTraining","enableMCPTools","enableCLICommands","monitoring","enableMetrics","enableAlerts","alertThresholds","cpu","fix","show","validate","ruvSwarmManager","ruvSwarmValidation","validateConfig","valid","errors","forEach","presetType","dryRun","includes","config","getConfigForUseCase","setupDevelopmentConfig","setupResearchConfig","setupProductionConfig","Object","entries","filter","key","value","startsWith","map","replace","toLowerCase","join","filePath","format","exportData","timestamp","Date","toISOString","version","main","ruvSwarm","unified","getUnifiedCommandArgs","writeFile","yamlContent","split","line","readFile","content","importData","parse","updateConfiguration"],"mappings":"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"}