{
  "version": 3,
  "sources": ["../../src/migration/index.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n/**\n * Claude-Flow Migration Tool\n * Helps existing projects migrate to optimized prompts and configurations\n */\n\nimport { Command } from '@cliffy/command';\nimport { MigrationRunner } from './migration-runner.js';\nimport { MigrationAnalyzer } from './migration-analyzer.js';\nimport type { MigrationStrategy } from './types.js';\nimport { logger } from './logger.js';\nimport * as chalk from 'chalk';\nimport * as path from 'path';\n\nconst program = new Command();\n\nprogram\n  .name('claude-flow-migrate')\n  .description('Migrate existing claude-flow projects to optimized prompts')\n  .version('1.0.0');\n\nprogram\n  .command('analyze [path]')\n  .description('Analyze existing project for migration readiness')\n  .option('-d, --detailed', 'Show detailed analysis')\n  .option('-o, --output <file>', 'Output analysis to file')\n  .action(async (projectPath = '.', options) => {\n    try {\n      const analyzer = new MigrationAnalyzer();\n      const analysis = await analyzer.analyze(path.resolve(projectPath));\n\n      if (options.output) {\n        await analyzer.saveAnalysis(analysis, options.output);\n        logger.success(`Analysis saved to ${options.output}`);\n      }\n\n      analyzer.printAnalysis(analysis, options.detailed);\n    } catch (error) {\n      logger.error('Analysis failed:', error);\n      process.exit(1);\n    }\n  });\n\nprogram\n  .command('migrate [path]')\n  .description('Migrate project to optimized prompts')\n  .option('-s, --strategy <type>', 'Migration strategy: full, selective, merge', 'selective')\n  .option('-b, --backup <dir>', 'Backup directory', '.claude-backup')\n  .option('-f, --force', 'Force migration without prompts')\n  .option('--dry-run', 'Simulate migration without making changes')\n  .option('--preserve-custom', 'Preserve custom commands and configurations')\n  .option('--skip-validation', 'Skip post-migration validation')\n  .action(async (projectPath = '.', options) => {\n    try {\n      const runner = new MigrationRunner({\n        projectPath: path.resolve(projectPath),\n        strategy: options.strategy as MigrationStrategy,\n        backupDir: options.backup,\n        force: options.force,\n        dryRun: options.dryRun,\n        preserveCustom: options.preserveCustom,\n        skipValidation: options.skipValidation,\n      });\n\n      await runner.run();\n    } catch (error) {\n      logger.error('Migration failed:', error);\n      process.exit(1);\n    }\n  });\n\nprogram\n  .command('rollback [path]')\n  .description('Rollback to previous configuration')\n  .option('-b, --backup <dir>', 'Backup directory to restore from', '.claude-backup')\n  .option('-t, --timestamp <time>', 'Restore from specific timestamp')\n  .option('-f, --force', 'Force rollback without prompts')\n  .action(async (projectPath = '.', options) => {\n    try {\n      const runner = new MigrationRunner({\n        projectPath: path.resolve(projectPath),\n        strategy: 'full',\n        backupDir: options.backup,\n        force: options.force,\n      });\n\n      await runner.rollback(options.timestamp);\n    } catch (error) {\n      logger.error('Rollback failed:', error);\n      process.exit(1);\n    }\n  });\n\nprogram\n  .command('validate [path]')\n  .description('Validate migration was successful')\n  .option('-v, --verbose', 'Show detailed validation results')\n  .action(async (projectPath = '.', options) => {\n    try {\n      const runner = new MigrationRunner({\n        projectPath: path.resolve(projectPath),\n        strategy: 'full',\n      });\n\n      const isValid = await runner.validate(options.verbose);\n\n      if (isValid) {\n        logger.success('Migration validated successfully!');\n      } else {\n        logger.error('Migration validation failed');\n        process.exit(1);\n      }\n    } catch (error) {\n      logger.error('Validation failed:', error);\n      process.exit(1);\n    }\n  });\n\nprogram\n  .command('list-backups [path]')\n  .description('List available backups')\n  .option('-b, --backup <dir>', 'Backup directory', '.claude-backup')\n  .action(async (projectPath = '.', options) => {\n    try {\n      const runner = new MigrationRunner({\n        projectPath: path.resolve(projectPath),\n        strategy: 'full',\n        backupDir: options.backup,\n      });\n\n      await runner.listBackups();\n    } catch (error) {\n      logger.error('Failed to list backups:', error);\n      process.exit(1);\n    }\n  });\n\n// Show help if no command provided\nif (!process.argv.slice(2).length) {\n  program.outputHelp();\n}\n\nprogram.parse(process.argv);\n"],
  "mappings": "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",
  "names": []
}
