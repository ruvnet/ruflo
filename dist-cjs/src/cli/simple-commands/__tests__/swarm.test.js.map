{"version":3,"sources":["../../../../../src/cli/simple-commands/__tests__/swarm.test.js"],"sourcesContent":["/**\r\n * Tests for swarm command\r\n */\r\n\r\nimport { jest } from '@jest/globals';\r\nimport { swarmCommand } from '../swarm.js';\r\nimport fs from 'fs-extra';\r\nimport path from 'path';\r\nimport { spawn } from 'child_process';\r\nimport ora from 'ora';\r\n\r\njest.mock('fs-extra');\r\njest.mock('child_process');\r\njest.mock('ora');\r\n\r\ndescribe('Swarm Command', () => {\r\n  let consoleLogSpy;\r\n  let consoleErrorSpy;\r\n  let mockSpinner;\r\n  let mockSpawnProcess;\r\n\r\n  beforeEach(() => {\r\n    consoleLogSpy = jest.spyOn(console, 'log').mockImplementation();\r\n    consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation();\r\n\r\n    mockSpinner = {\r\n      start: jest.fn().mockReturnThis(),\r\n      succeed: jest.fn().mockReturnThis(),\r\n      fail: jest.fn().mockReturnThis(),\r\n      info: jest.fn().mockReturnThis(),\r\n      warn: jest.fn().mockReturnThis(),\r\n      text: '',\r\n    };\r\n    ora.mockReturnValue(mockSpinner);\r\n\r\n    mockSpawnProcess = {\r\n      stdout: { on: jest.fn() },\r\n      stderr: { on: jest.fn() },\r\n      on: jest.fn(),\r\n    };\r\n    spawn.mockReturnValue(mockSpawnProcess);\r\n\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  afterEach(() => {\r\n    consoleLogSpy.mockRestore();\r\n    consoleErrorSpy.mockRestore();\r\n  });\r\n\r\n  describe('main swarm command', () => {\r\n    test('should initialize swarm with objective', async () => {\r\n      const swarmDir = path.join(process.cwd(), '.claude', 'swarm');\r\n      fs.ensureDir.mockResolvedValue(undefined);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      // Mock spawn process events\r\n      mockSpawnProcess.on.mockImplementation((event, callback) => {\r\n        if (event === 'close') {\r\n          setTimeout(() => callback(0), 100);\r\n        }\r\n      });\r\n\r\n      await swarmCommand(['Build a REST API'], {});\r\n\r\n      expect(mockSpinner.start).toHaveBeenCalledWith('Initializing swarm...');\r\n      expect(fs.ensureDir).toHaveBeenCalledWith(swarmDir);\r\n\r\n      const writeJsonCall = fs.writeJson.mock.calls[0];\r\n      expect(writeJsonCall[0]).toBe(path.join(swarmDir, 'swarm.json'));\r\n      expect(writeJsonCall[1]).toMatchObject({\r\n        objective: 'Build a REST API',\r\n        status: 'initializing',\r\n        topology: 'hierarchical',\r\n        strategy: 'adaptive',\r\n      });\r\n    });\r\n\r\n    test('should handle custom strategy', async () => {\r\n      fs.ensureDir.mockResolvedValue(undefined);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      mockSpawnProcess.on.mockImplementation((event, callback) => {\r\n        if (event === 'close') callback(0);\r\n      });\r\n\r\n      await swarmCommand(['Research task'], { strategy: 'research' });\r\n\r\n      const writeJsonCall = fs.writeJson.mock.calls[0];\r\n      expect(writeJsonCall[1].strategy).toBe('research');\r\n    });\r\n\r\n    test('should handle custom topology mode', async () => {\r\n      fs.ensureDir.mockResolvedValue(undefined);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      mockSpawnProcess.on.mockImplementation((event, callback) => {\r\n        if (event === 'close') callback(0);\r\n      });\r\n\r\n      await swarmCommand(['Task'], { mode: 'mesh' });\r\n\r\n      const writeJsonCall = fs.writeJson.mock.calls[0];\r\n      expect(writeJsonCall[1].topology).toBe('mesh');\r\n    });\r\n\r\n    test('should set max agents', async () => {\r\n      fs.ensureDir.mockResolvedValue(undefined);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      mockSpawnProcess.on.mockImplementation((event, callback) => {\r\n        if (event === 'close') callback(0);\r\n      });\r\n\r\n      await swarmCommand(['Task'], { 'max-agents': '10' });\r\n\r\n      const writeJsonCall = fs.writeJson.mock.calls[0];\r\n      expect(writeJsonCall[1].maxAgents).toBe(10);\r\n    });\r\n\r\n    test('should enable parallel execution', async () => {\r\n      fs.ensureDir.mockResolvedValue(undefined);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      mockSpawnProcess.on.mockImplementation((event, callback) => {\r\n        if (event === 'close') callback(0);\r\n      });\r\n\r\n      await swarmCommand(['Task'], { parallel: true });\r\n\r\n      const writeJsonCall = fs.writeJson.mock.calls[0];\r\n      expect(writeJsonCall[1].parallel).toBe(true);\r\n    });\r\n\r\n    test('should enable monitoring', async () => {\r\n      fs.ensureDir.mockResolvedValue(undefined);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      mockSpawnProcess.on.mockImplementation((event, callback) => {\r\n        if (event === 'close') callback(0);\r\n      });\r\n\r\n      await swarmCommand(['Task'], { monitor: true });\r\n\r\n      expect(spawn).toHaveBeenCalledWith(\r\n        'npx',\r\n        expect.arrayContaining(['--monitor']),\r\n        expect.any(Object),\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('swarm status', () => {\r\n    test('should show swarm status', async () => {\r\n      const mockSwarmData = {\r\n        id: 'swarm-123',\r\n        objective: 'Build API',\r\n        status: 'active',\r\n        topology: 'hierarchical',\r\n        agents: [\r\n          { id: 'agent-1', type: 'researcher', status: 'active' },\r\n          { id: 'agent-2', type: 'coder', status: 'working' },\r\n        ],\r\n        metrics: {\r\n          startTime: new Date(Date.now() - 300000).toISOString(),\r\n          tasksCompleted: 15,\r\n          tasksInProgress: 3,\r\n          tasksPending: 7,\r\n        },\r\n      };\r\n\r\n      fs.pathExists.mockResolvedValue(true);\r\n      fs.readJson.mockResolvedValue(mockSwarmData);\r\n\r\n      await swarmCommand(['status'], {});\r\n\r\n      const output = consoleLogSpy.mock.calls.flat().join('\\n');\r\n      expect(output).toContain('Swarm Status');\r\n      expect(output).toContain('Build API');\r\n      expect(output).toContain('active');\r\n      expect(output).toContain('hierarchical');\r\n      expect(output).toContain('2 agents');\r\n      expect(output).toContain('15 completed');\r\n    });\r\n\r\n    test('should show no active swarm message', async () => {\r\n      fs.pathExists.mockResolvedValue(false);\r\n\r\n      await swarmCommand(['status'], {});\r\n\r\n      expect(consoleLogSpy).toHaveBeenCalledWith(expect.stringContaining('No active swarm found'));\r\n    });\r\n  });\r\n\r\n  describe('swarm stop', () => {\r\n    test('should stop active swarm', async () => {\r\n      const mockSwarmData = {\r\n        id: 'swarm-123',\r\n        status: 'active',\r\n        agents: [{ id: 'agent-1' }, { id: 'agent-2' }],\r\n      };\r\n\r\n      fs.pathExists.mockResolvedValue(true);\r\n      fs.readJson.mockResolvedValue(mockSwarmData);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n      fs.remove.mockResolvedValue(undefined);\r\n\r\n      await swarmCommand(['stop'], {});\r\n\r\n      expect(mockSpinner.succeed).toHaveBeenCalledWith('Swarm stopped successfully');\r\n      expect(fs.remove).toHaveBeenCalledWith(\r\n        path.join(process.cwd(), '.claude', 'swarm', 'swarm.json'),\r\n      );\r\n    });\r\n\r\n    test('should handle stop with force flag', async () => {\r\n      fs.pathExists.mockResolvedValue(true);\r\n      fs.remove.mockResolvedValue(undefined);\r\n\r\n      await swarmCommand(['stop'], { force: true });\r\n\r\n      expect(fs.remove).toHaveBeenCalled();\r\n      expect(mockSpinner.warn).toHaveBeenCalledWith('Swarm forcefully terminated');\r\n    });\r\n  });\r\n\r\n  describe('swarm pause/resume', () => {\r\n    test('should pause active swarm', async () => {\r\n      const mockSwarmData = {\r\n        id: 'swarm-123',\r\n        status: 'active',\r\n      };\r\n\r\n      fs.pathExists.mockResolvedValue(true);\r\n      fs.readJson.mockResolvedValue(mockSwarmData);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      await swarmCommand(['pause'], {});\r\n\r\n      const writeCall = fs.writeJson.mock.calls[0];\r\n      expect(writeCall[1].status).toBe('paused');\r\n      expect(mockSpinner.succeed).toHaveBeenCalledWith('Swarm paused');\r\n    });\r\n\r\n    test('should resume paused swarm', async () => {\r\n      const mockSwarmData = {\r\n        id: 'swarm-123',\r\n        status: 'paused',\r\n      };\r\n\r\n      fs.pathExists.mockResolvedValue(true);\r\n      fs.readJson.mockResolvedValue(mockSwarmData);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      await swarmCommand(['resume'], {});\r\n\r\n      const writeCall = fs.writeJson.mock.calls[0];\r\n      expect(writeCall[1].status).toBe('active');\r\n      expect(mockSpinner.succeed).toHaveBeenCalledWith('Swarm resumed');\r\n    });\r\n  });\r\n\r\n  describe('swarm logs', () => {\r\n    test('should display swarm logs', async () => {\r\n      const mockLogs = [\r\n        { timestamp: new Date().toISOString(), level: 'info', message: 'Swarm initialized' },\r\n        { timestamp: new Date().toISOString(), level: 'info', message: 'Agent spawned' },\r\n        { timestamp: new Date().toISOString(), level: 'error', message: 'Task failed' },\r\n      ];\r\n\r\n      fs.pathExists.mockResolvedValue(true);\r\n      fs.readJson.mockResolvedValue({ logs: mockLogs });\r\n\r\n      await swarmCommand(['logs'], {});\r\n\r\n      const output = consoleLogSpy.mock.calls.flat().join('\\n');\r\n      expect(output).toContain('Swarm Logs');\r\n      expect(output).toContain('Swarm initialized');\r\n      expect(output).toContain('Agent spawned');\r\n      expect(output).toContain('Task failed');\r\n    });\r\n\r\n    test('should filter logs by level', async () => {\r\n      const mockLogs = [\r\n        { timestamp: new Date().toISOString(), level: 'info', message: 'Info message' },\r\n        { timestamp: new Date().toISOString(), level: 'error', message: 'Error message' },\r\n        { timestamp: new Date().toISOString(), level: 'debug', message: 'Debug message' },\r\n      ];\r\n\r\n      fs.pathExists.mockResolvedValue(true);\r\n      fs.readJson.mockResolvedValue({ logs: mockLogs });\r\n\r\n      await swarmCommand(['logs'], { level: 'error' });\r\n\r\n      const output = consoleLogSpy.mock.calls.flat().join('\\n');\r\n      expect(output).toContain('Error message');\r\n      expect(output).not.toContain('Info message');\r\n      expect(output).not.toContain('Debug message');\r\n    });\r\n\r\n    test('should tail logs', async () => {\r\n      const mockLogs = Array.from({ length: 50 }, (_, i) => ({\r\n        timestamp: new Date().toISOString(),\r\n        level: 'info',\r\n        message: `Log entry ${i + 1}`,\r\n      }));\r\n\r\n      fs.pathExists.mockResolvedValue(true);\r\n      fs.readJson.mockResolvedValue({ logs: mockLogs });\r\n\r\n      await swarmCommand(['logs'], { tail: '10' });\r\n\r\n      const output = consoleLogSpy.mock.calls.flat().join('\\n');\r\n      expect(output).toContain('Log entry 50');\r\n      expect(output).toContain('Log entry 41');\r\n      expect(output).not.toContain('Log entry 40');\r\n    });\r\n  });\r\n\r\n  describe('error handling', () => {\r\n    test('should handle missing objective', async () => {\r\n      await swarmCommand([], {});\r\n\r\n      expect(consoleErrorSpy).toHaveBeenCalledWith(\r\n        expect.stringContaining('objective is required'),\r\n      );\r\n    });\r\n\r\n    test('should handle invalid strategy', async () => {\r\n      fs.ensureDir.mockResolvedValue(undefined);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      await swarmCommand(['Task'], { strategy: 'invalid-strategy' });\r\n\r\n      expect(consoleErrorSpy).toHaveBeenCalledWith(expect.stringContaining('Invalid strategy'));\r\n    });\r\n\r\n    test('should handle spawn process errors', async () => {\r\n      fs.ensureDir.mockResolvedValue(undefined);\r\n      fs.writeJson.mockResolvedValue(undefined);\r\n\r\n      mockSpawnProcess.on.mockImplementation((event, callback) => {\r\n        if (event === 'error') callback(new Error('Spawn failed'));\r\n      });\r\n\r\n      await swarmCommand(['Task'], {});\r\n\r\n      expect(mockSpinner.fail).toHaveBeenCalledWith(\r\n        expect.stringContaining('Failed to initialize swarm'),\r\n      );\r\n    });\r\n\r\n    test('should handle file system errors', async () => {\r\n      fs.ensureDir.mockRejectedValue(new Error('Permission denied'));\r\n\r\n      await swarmCommand(['Task'], {});\r\n\r\n      expect(consoleErrorSpy).toHaveBeenCalledWith(expect.stringContaining('Error:'));\r\n    });\r\n  });\r\n\r\n  describe('help', () => {\r\n    test('should show help for invalid subcommand', async () => {\r\n      await swarmCommand(['invalid'], {});\r\n\r\n      const output = consoleLogSpy.mock.calls.flat().join('\\n');\r\n      expect(output).toContain('Swarm Orchestration');\r\n      expect(output).toContain('USAGE:');\r\n    });\r\n  });\r\n});\r\n"],"names":["jest","swarmCommand","fs","path","spawn","ora","mock","describe","consoleLogSpy","consoleErrorSpy","mockSpinner","mockSpawnProcess","beforeEach","spyOn","console","mockImplementation","start","fn","mockReturnThis","succeed","fail","info","warn","text","mockReturnValue","stdout","on","stderr","clearAllMocks","afterEach","mockRestore","test","swarmDir","join","process","cwd","ensureDir","mockResolvedValue","undefined","writeJson","event","callback","setTimeout","expect","toHaveBeenCalledWith","writeJsonCall","calls","toBe","toMatchObject","objective","status","topology","strategy","mode","maxAgents","parallel","monitor","arrayContaining","any","Object","mockSwarmData","id","agents","type","metrics","startTime","Date","now","toISOString","tasksCompleted","tasksInProgress","tasksPending","pathExists","readJson","output","flat","toContain","stringContaining","remove","force","toHaveBeenCalled","writeCall","mockLogs","timestamp","level","message","logs","not","Array","from","length","_","i","tail","Error","mockRejectedValue"],"mappings":"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"}