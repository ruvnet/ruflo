{
  "version": 3,
  "sources": ["../../src/enterprise/analytics-manager.ts"],
  "sourcesContent": ["import { EventEmitter } from 'events';\nimport { writeFile, readFile, mkdir, readdir } from 'fs/promises';\nimport { join } from 'path';\nimport { Logger } from '../core/logger.js';\nimport { ConfigManager } from '../core/config.js';\n\nexport interface AnalyticsMetric {\n  id: string;\n  name: string;\n  description: string;\n  type: 'counter' | 'gauge' | 'histogram' | 'summary';\n  category: 'performance' | 'usage' | 'business' | 'technical' | 'security' | 'cost';\n  unit: string;\n  value: number;\n  tags: Record<string, string>;\n  timestamp: Date;\n  source: string;\n  metadata: Record<string, any>;\n}\n\nexport interface AnalyticsDashboard {\n  id: string;\n  name: string;\n  description: string;\n  type: 'operational' | 'executive' | 'technical' | 'business' | 'security' | 'custom';\n  widgets: DashboardWidget[];\n  layout: DashboardLayout;\n  permissions: {\n    viewers: string[];\n    editors: string[];\n    public: boolean;\n  };\n  schedule: {\n    autoRefresh: boolean;\n    refreshInterval: number; // seconds\n    exportSchedule?: {\n      frequency: 'daily' | 'weekly' | 'monthly';\n      format: 'pdf' | 'png' | 'csv' | 'json';\n      recipients: string[];\n    };\n  };\n  filters: DashboardFilter[];\n  createdAt: Date;\n  updatedAt: Date;\n  createdBy: string;\n}\n\nexport interface DashboardWidget {\n  id: string;\n  title: string;\n  type: 'chart' | 'table' | 'metric' | 'gauge' | 'map' | 'text' | 'alert';\n  size: 'small' | 'medium' | 'large' | 'full-width';\n  position: { x: number; y: number; width: number; height: number };\n  dataSource: {\n    query: string;\n    metrics: string[];\n    aggregation: 'sum' | 'avg' | 'min' | 'max' | 'count' | 'p95' | 'p99';\n    timeRange: string;\n    groupBy: string[];\n  };\n  visualization: {\n    chartType?: 'line' | 'bar' | 'pie' | 'scatter' | 'heatmap' | 'area';\n    options: Record<string, any>;\n    thresholds?: {\n      warning: number;\n      critical: number;\n    };\n  };\n  alerts: {\n    enabled: boolean;\n    conditions: AlertCondition[];\n  };\n}\n\nexport interface DashboardLayout {\n  columns: number;\n  rows: number;\n  grid: boolean;\n  responsive: boolean;\n}\n\nexport interface DashboardFilter {\n  id: string;\n  name: string;\n  type: 'dropdown' | 'multiselect' | 'daterange' | 'text' | 'number';\n  field: string;\n  values?: string[];\n  defaultValue?: any;\n  required: boolean;\n}\n\nexport interface AlertCondition {\n  metric: string;\n  operator: '>' | '<' | '>=' | '<=' | '==' | '!=';\n  threshold: number;\n  duration: number; // seconds\n  severity: 'info' | 'warning' | 'critical';\n}\n\nexport interface AnalyticsInsight {\n  id: string;\n  title: string;\n  description: string;\n  type: 'anomaly' | 'trend' | 'correlation' | 'prediction' | 'recommendation';\n  category: 'performance' | 'usage' | 'business' | 'technical' | 'security' | 'cost';\n  confidence: number; // 0-100\n  impact: 'low' | 'medium' | 'high';\n  priority: 'low' | 'medium' | 'high' | 'critical';\n  data: {\n    metrics: string[];\n    timeRange: { start: Date; end: Date };\n    values: Record<string, number>;\n    baseline?: Record<string, number>;\n    deviation?: number;\n  };\n  recommendations: {\n    action: string;\n    effort: 'low' | 'medium' | 'high';\n    impact: string;\n    implementation: string[];\n  }[];\n  status: 'new' | 'acknowledged' | 'investigating' | 'resolved' | 'dismissed';\n  assignedTo?: string;\n  createdAt: Date;\n  updatedAt: Date;\n  expiresAt?: Date;\n}\n\nexport interface PerformanceMetrics {\n  system: {\n    cpu: {\n      usage: number;\n      cores: number;\n      loadAverage: number[];\n    };\n    memory: {\n      used: number;\n      free: number;\n      total: number;\n      usage: number;\n    };\n    disk: {\n      used: number;\n      free: number;\n      total: number;\n      usage: number;\n      iops: number;\n    };\n    network: {\n      bytesIn: number;\n      bytesOut: number;\n      packetsIn: number;\n      packetsOut: number;\n      errors: number;\n    };\n  };\n  application: {\n    responseTime: {\n      avg: number;\n      p50: number;\n      p95: number;\n      p99: number;\n    };\n    throughput: {\n      requestsPerSecond: number;\n      transactionsPerSecond: number;\n    };\n    errors: {\n      rate: number;\n      count: number;\n      types: Record<string, number>;\n    };\n    availability: {\n      uptime: number;\n      sla: number;\n      incidents: number;\n    };\n  };\n  database: {\n    connections: {\n      active: number;\n      idle: number;\n      max: number;\n    };\n    queries: {\n      avgExecutionTime: number;\n      slowQueries: number;\n      deadlocks: number;\n    };\n    storage: {\n      size: number;\n      growth: number;\n      fragmentation: number;\n    };\n  };\n  infrastructure: {\n    containers: {\n      running: number;\n      stopped: number;\n      restarts: number;\n    };\n    services: {\n      healthy: number;\n      unhealthy: number;\n      degraded: number;\n    };\n  };\n}\n\nexport interface UsageMetrics {\n  users: {\n    total: number;\n    active: number;\n    new: number;\n    returning: number;\n    churn: number;\n  };\n  sessions: {\n    total: number;\n    duration: {\n      avg: number;\n      median: number;\n    };\n    bounceRate: number;\n    pagesPerSession: number;\n  };\n  features: {\n    adoption: Record<\n      string,\n      {\n        users: number;\n        usage: number;\n        retention: number;\n      }\n    >;\n    mostUsed: string[];\n    leastUsed: string[];\n  };\n  api: {\n    calls: number;\n    uniqueConsumers: number;\n    avgResponseTime: number;\n    errorRate: number;\n    rateLimits: {\n      hit: number;\n      consumed: number;\n    };\n  };\n  content: {\n    created: number;\n    modified: number;\n    deleted: number;\n    views: number;\n  };\n}\n\nexport interface BusinessMetrics {\n  revenue: {\n    total: number;\n    recurring: number;\n    growth: number;\n    arpu: number; // Average Revenue Per User\n    ltv: number; // Lifetime Value\n  };\n  customers: {\n    total: number;\n    new: number;\n    retained: number;\n    churned: number;\n    satisfaction: number;\n  };\n  conversion: {\n    leads: number;\n    qualified: number;\n    opportunities: number;\n    closed: number;\n    rate: number;\n  };\n  support: {\n    tickets: number;\n    resolved: number;\n    avgResolutionTime: number;\n    satisfaction: number;\n  };\n}\n\nexport interface PredictiveModel {\n  id: string;\n  name: string;\n  description: string;\n  type: 'regression' | 'classification' | 'time-series' | 'anomaly-detection';\n  algorithm: string;\n  features: string[];\n  target: string;\n  accuracy: number;\n  confidence: number;\n  trainedAt: Date;\n  lastPrediction?: Date;\n  trainingData: {\n    samples: number;\n    features: number;\n    timeRange: { start: Date; end: Date };\n  };\n  performance: {\n    precision: number;\n    recall: number;\n    f1Score: number;\n    mse?: number;\n    mae?: number;\n  };\n  predictions: PredictionResult[];\n  status: 'training' | 'ready' | 'needs-retraining' | 'error';\n}\n\nexport interface PredictionResult {\n  id: string;\n  modelId: string;\n  input: Record<string, any>;\n  prediction: any;\n  confidence: number;\n  timestamp: Date;\n  actual?: any; // For validation\n  accuracy?: number;\n}\n\nexport interface AnalyticsReport {\n  id: string;\n  name: string;\n  description: string;\n  type: 'performance' | 'usage' | 'business' | 'security' | 'compliance' | 'custom';\n  format: 'pdf' | 'html' | 'csv' | 'json' | 'xlsx';\n  schedule: {\n    frequency: 'manual' | 'hourly' | 'daily' | 'weekly' | 'monthly' | 'quarterly';\n    time?: string;\n    timezone?: string;\n    recipients: string[];\n  };\n  sections: ReportSection[];\n  filters: Record<string, any>;\n  lastGenerated?: Date;\n  nextGeneration?: Date;\n  generatedBy: string;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface ReportSection {\n  id: string;\n  title: string;\n  type: 'summary' | 'chart' | 'table' | 'text' | 'metrics';\n  content: {\n    query?: string;\n    visualization?: any;\n    text?: string;\n    metrics?: string[];\n  };\n  order: number;\n}\n\nexport interface AnalyticsConfiguration {\n  collection: {\n    enabled: boolean;\n    samplingRate: number;\n    batchSize: number;\n    flushInterval: number;\n  };\n  storage: {\n    retention: {\n      raw: string; // e.g., '7d'\n      aggregated: string; // e.g., '90d'\n      summary: string; // e.g., '1y'\n    };\n    compression: boolean;\n    encryption: boolean;\n  };\n  processing: {\n    realTime: boolean;\n    batchProcessing: boolean;\n    aggregationIntervals: string[];\n  };\n  alerts: {\n    enabled: boolean;\n    channels: string[];\n    escalation: {\n      levels: number;\n      intervals: number[];\n    };\n  };\n  privacy: {\n    anonymization: boolean;\n    gdprCompliant: boolean;\n    dataMinimization: boolean;\n  };\n  integrations: {\n    grafana?: { url: string; apiKey: string };\n    prometheus?: { url: string };\n    elasticsearch?: { url: string; index: string };\n    splunk?: { url: string; token: string };\n  };\n}\n\nexport class AnalyticsManager extends EventEmitter {\n  private metrics: Map<string, AnalyticsMetric[]> = new Map();\n  private dashboards: Map<string, AnalyticsDashboard> = new Map();\n  private insights: Map<string, AnalyticsInsight> = new Map();\n  private models: Map<string, PredictiveModel> = new Map();\n  private reports: Map<string, AnalyticsReport> = new Map();\n  private analyticsPath: string;\n  private logger: Logger;\n  private config: ConfigManager;\n  private configuration: AnalyticsConfiguration;\n\n  constructor(analyticsPath: string = './analytics', logger?: Logger, config?: ConfigManager) {\n    super();\n    this.analyticsPath = analyticsPath;\n    this.logger = logger || new Logger({ level: 'info', format: 'text', destination: 'console' });\n    this.config = config || ConfigManager.getInstance();\n    this.configuration = this.getDefaultConfiguration();\n  }\n\n  async initialize(): Promise<void> {\n    try {\n      await mkdir(this.analyticsPath, { recursive: true });\n      await mkdir(join(this.analyticsPath, 'metrics'), { recursive: true });\n      await mkdir(join(this.analyticsPath, 'dashboards'), { recursive: true });\n      await mkdir(join(this.analyticsPath, 'insights'), { recursive: true });\n      await mkdir(join(this.analyticsPath, 'models'), { recursive: true });\n      await mkdir(join(this.analyticsPath, 'reports'), { recursive: true });\n\n      await this.loadConfigurations();\n      await this.initializeDefaultDashboards();\n      await this.startMetricsCollection();\n\n      this.logger.info('Analytics Manager initialized successfully');\n    } catch (error) {\n      this.logger.error('Failed to initialize Analytics Manager', { error });\n      throw error;\n    }\n  }\n\n  async recordMetric(metric: Omit<AnalyticsMetric, 'id' | 'timestamp'>): Promise<void> {\n    const fullMetric: AnalyticsMetric = {\n      id: `metric-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: new Date(),\n      ...metric,\n    };\n\n    const key = `${metric.category}-${metric.name}`;\n    if (!this.metrics.has(key)) {\n      this.metrics.set(key, []);\n    }\n\n    const metricArray = this.metrics.get(key)!;\n    metricArray.push(fullMetric);\n\n    // Keep only recent metrics in memory (configurable retention)\n    const retentionPeriod = 24 * 60 * 60 * 1000; // 24 hours\n    const cutoff = Date.now() - retentionPeriod;\n    const filteredMetrics = metricArray.filter((m) => m.timestamp.getTime() > cutoff);\n    this.metrics.set(key, filteredMetrics);\n\n    // Persist to disk for longer-term storage\n    await this.persistMetric(fullMetric);\n\n    this.emit('metric:recorded', fullMetric);\n\n    // Check for anomalies and generate insights\n    await this.checkForAnomalies(key, fullMetric);\n  }\n\n  async queryMetrics(query: {\n    metrics: string[];\n    timeRange: { start: Date; end: Date };\n    aggregation?: 'sum' | 'avg' | 'min' | 'max' | 'count' | 'p95' | 'p99';\n    groupBy?: string[];\n    filters?: Record<string, any>;\n  }): Promise<Record<string, any[]>> {\n    const results: Record<string, any[]> = {};\n\n    for (const metricName of query.metrics) {\n      const key = metricName.includes('-') ? metricName : `*-${metricName}`;\n      const matchingKeys = Array.from(this.metrics.keys()).filter(\n        (k) => key === '*' || k.includes(key.replace('*-', '')) || k === key,\n      );\n\n      let allMetrics: AnalyticsMetric[] = [];\n      for (const k of matchingKeys) {\n        const keyMetrics = this.metrics.get(k) || [];\n        allMetrics.push(...keyMetrics);\n      }\n\n      // Filter by time range\n      allMetrics = allMetrics.filter(\n        (m) => m.timestamp >= query.timeRange.start && m.timestamp <= query.timeRange.end,\n      );\n\n      // Apply filters\n      if (query.filters) {\n        for (const [field, value] of Object.entries(query.filters)) {\n          allMetrics = allMetrics.filter((m) => {\n            if (field === 'tags') {\n              return Object.entries(value as Record<string, string>).every(\n                ([k, v]) => m.tags[k] === v,\n              );\n            }\n            return (m as any)[field] === value;\n          });\n        }\n      }\n\n      // Group by if specified\n      if (query.groupBy && query.groupBy.length > 0) {\n        const grouped = this.groupMetrics(allMetrics, query.groupBy);\n        for (const [group, metrics] of Object.entries(grouped)) {\n          const aggregated = this.aggregateMetrics(metrics, query.aggregation || 'avg');\n          results[`${metricName}-${group}`] = aggregated;\n        }\n      } else {\n        const aggregated = this.aggregateMetrics(allMetrics, query.aggregation || 'avg');\n        results[metricName] = aggregated;\n      }\n    }\n\n    return results;\n  }\n\n  async createDashboard(dashboardData: {\n    name: string;\n    description: string;\n    type: AnalyticsDashboard['type'];\n    widgets: Omit<DashboardWidget, 'id'>[];\n    permissions?: Partial<AnalyticsDashboard['permissions']>;\n  }): Promise<AnalyticsDashboard> {\n    const dashboard: AnalyticsDashboard = {\n      id: `dashboard-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      name: dashboardData.name,\n      description: dashboardData.description,\n      type: dashboardData.type,\n      widgets: dashboardData.widgets.map((widget, index) => ({\n        id: `widget-${Date.now()}-${index}`,\n        ...widget,\n      })),\n      layout: {\n        columns: 12,\n        rows: 8,\n        grid: true,\n        responsive: true,\n      },\n      permissions: {\n        viewers: [],\n        editors: [],\n        public: false,\n        ...dashboardData.permissions,\n      },\n      schedule: {\n        autoRefresh: true,\n        refreshInterval: 30,\n      },\n      filters: [],\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      createdBy: 'system',\n    };\n\n    this.dashboards.set(dashboard.id, dashboard);\n    await this.saveDashboard(dashboard);\n\n    this.emit('dashboard:created', dashboard);\n    this.logger.info(`Dashboard created: ${dashboard.name} (${dashboard.id})`);\n\n    return dashboard;\n  }\n\n  async generateInsights(\n    scope: {\n      metrics?: string[];\n      timeRange?: { start: Date; end: Date };\n      categories?: string[];\n    } = {},\n  ): Promise<AnalyticsInsight[]> {\n    const insights: AnalyticsInsight[] = [];\n\n    // Default time range: last 24 hours\n    const timeRange = scope.timeRange || {\n      start: new Date(Date.now() - 24 * 60 * 60 * 1000),\n      end: new Date(),\n    };\n\n    // Anomaly detection\n    const anomalies = await this.detectAnomalies(timeRange, scope.metrics);\n    insights.push(...anomalies);\n\n    // Trend analysis\n    const trends = await this.analyzeTrends(timeRange, scope.metrics);\n    insights.push(...trends);\n\n    // Performance insights\n    const performance = await this.analyzePerformance(timeRange);\n    insights.push(...performance);\n\n    // Usage insights\n    const usage = await this.analyzeUsage(timeRange);\n    insights.push(...usage);\n\n    // Cost optimization insights\n    const costOptimizations = await this.analyzeCostOptimization(timeRange);\n    insights.push(...costOptimizations);\n\n    // Store insights\n    for (const insight of insights) {\n      this.insights.set(insight.id, insight);\n      await this.saveInsight(insight);\n    }\n\n    this.emit('insights:generated', { insights, scope });\n    this.logger.info(`Generated ${insights.length} insights`);\n\n    return insights;\n  }\n\n  async trainPredictiveModel(modelConfig: {\n    name: string;\n    description: string;\n    type: PredictiveModel['type'];\n    algorithm: string;\n    features: string[];\n    target: string;\n    trainingPeriod: { start: Date; end: Date };\n  }): Promise<PredictiveModel> {\n    const model: PredictiveModel = {\n      id: `model-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      name: modelConfig.name,\n      description: modelConfig.description,\n      type: modelConfig.type,\n      algorithm: modelConfig.algorithm,\n      features: modelConfig.features,\n      target: modelConfig.target,\n      accuracy: 0,\n      confidence: 0,\n      trainedAt: new Date(),\n      trainingData: {\n        samples: 0,\n        features: modelConfig.features.length,\n        timeRange: modelConfig.trainingPeriod,\n      },\n      performance: {\n        precision: 0,\n        recall: 0,\n        f1Score: 0,\n      },\n      predictions: [],\n      status: 'training',\n    };\n\n    try {\n      // Collect training data\n      const trainingData = await this.collectTrainingData(model);\n\n      // Train the model (simplified implementation)\n      const trained = await this.executeModelTraining(model, trainingData);\n\n      Object.assign(model, trained);\n      model.status = 'ready';\n\n      this.models.set(model.id, model);\n      await this.saveModel(model);\n\n      this.emit('model:trained', model);\n      this.logger.info(\n        `Predictive model trained: ${model.name} (${model.id}) - Accuracy: ${model.accuracy}%`,\n      );\n    } catch (error) {\n      model.status = 'error';\n      this.logger.error(`Model training failed: ${model.name}`, { error });\n      throw error;\n    }\n\n    return model;\n  }\n\n  async makePrediction(modelId: string, input: Record<string, any>): Promise<PredictionResult> {\n    const model = this.models.get(modelId);\n    if (!model) {\n      throw new Error(`Model not found: ${modelId}`);\n    }\n\n    if (model.status !== 'ready') {\n      throw new Error(`Model is not ready for predictions: ${model.status}`);\n    }\n\n    // Simple prediction logic (would be replaced with actual ML inference)\n    const prediction = await this.executePrediction(model, input);\n\n    const result: PredictionResult = {\n      id: `prediction-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      modelId,\n      input,\n      prediction: prediction.value,\n      confidence: prediction.confidence,\n      timestamp: new Date(),\n    };\n\n    model.predictions.push(result);\n    model.lastPrediction = new Date();\n\n    await this.saveModel(model);\n\n    this.emit('prediction:made', { model, result });\n    this.logger.debug(`Prediction made: ${modelId} - ${JSON.stringify(result.prediction)}`);\n\n    return result;\n  }\n\n  async getPerformanceMetrics(timeRange?: { start: Date; end: Date }): Promise<PerformanceMetrics> {\n    const range = timeRange || {\n      start: new Date(Date.now() - 60 * 60 * 1000), // Last hour\n      end: new Date(),\n    };\n\n    const systemMetrics = await this.queryMetrics({\n      metrics: ['cpu-usage', 'memory-usage', 'disk-usage', 'network-io'],\n      timeRange: range,\n      aggregation: 'avg',\n    });\n\n    const appMetrics = await this.queryMetrics({\n      metrics: ['response-time', 'request-rate', 'error-rate', 'uptime'],\n      timeRange: range,\n      aggregation: 'avg',\n    });\n\n    const dbMetrics = await this.queryMetrics({\n      metrics: ['db-connections', 'query-time', 'db-size'],\n      timeRange: range,\n      aggregation: 'avg',\n    });\n\n    // Construct performance metrics (simplified)\n    return {\n      system: {\n        cpu: {\n          usage: this.getLatestValue(systemMetrics['cpu-usage']) || 0,\n          cores: 8, // Would be detected from system\n          loadAverage: [1.2, 1.5, 1.8], // Would be collected from system\n        },\n        memory: {\n          used: this.getLatestValue(systemMetrics['memory-usage']) || 0,\n          free: 4000000000, // Would be calculated\n          total: 8000000000,\n          usage: 50,\n        },\n        disk: {\n          used: this.getLatestValue(systemMetrics['disk-usage']) || 0,\n          free: 100000000000,\n          total: 500000000000,\n          usage: 20,\n          iops: 1000,\n        },\n        network: {\n          bytesIn: 1000000,\n          bytesOut: 2000000,\n          packetsIn: 5000,\n          packetsOut: 6000,\n          errors: 5,\n        },\n      },\n      application: {\n        responseTime: {\n          avg: this.getLatestValue(appMetrics['response-time']) || 0,\n          p50: 150,\n          p95: 500,\n          p99: 1000,\n        },\n        throughput: {\n          requestsPerSecond: this.getLatestValue(appMetrics['request-rate']) || 0,\n          transactionsPerSecond: 50,\n        },\n        errors: {\n          rate: this.getLatestValue(appMetrics['error-rate']) || 0,\n          count: 10,\n          types: { '500': 5, '404': 3, '400': 2 },\n        },\n        availability: {\n          uptime: this.getLatestValue(appMetrics['uptime']) || 0,\n          sla: 99.9,\n          incidents: 2,\n        },\n      },\n      database: {\n        connections: {\n          active: 25,\n          idle: 75,\n          max: 100,\n        },\n        queries: {\n          avgExecutionTime: this.getLatestValue(dbMetrics['query-time']) || 0,\n          slowQueries: 5,\n          deadlocks: 0,\n        },\n        storage: {\n          size: this.getLatestValue(dbMetrics['db-size']) || 0,\n          growth: 1000000, // bytes per day\n          fragmentation: 5,\n        },\n      },\n      infrastructure: {\n        containers: {\n          running: 12,\n          stopped: 2,\n          restarts: 3,\n        },\n        services: {\n          healthy: 15,\n          unhealthy: 1,\n          degraded: 0,\n        },\n      },\n    };\n  }\n\n  async getUsageMetrics(timeRange?: { start: Date; end: Date }): Promise<UsageMetrics> {\n    const range = timeRange || {\n      start: new Date(Date.now() - 24 * 60 * 60 * 1000), // Last 24 hours\n      end: new Date(),\n    };\n\n    const usageData = await this.queryMetrics({\n      metrics: ['active-users', 'sessions', 'api-calls', 'feature-usage'],\n      timeRange: range,\n      aggregation: 'sum',\n    });\n\n    return {\n      users: {\n        total: 10000,\n        active: this.getLatestValue(usageData['active-users']) || 0,\n        new: 50,\n        returning: 1500,\n        churn: 25,\n      },\n      sessions: {\n        total: this.getLatestValue(usageData['sessions']) || 0,\n        duration: {\n          avg: 15 * 60, // 15 minutes\n          median: 12 * 60,\n        },\n        bounceRate: 25,\n        pagesPerSession: 4.5,\n      },\n      features: {\n        adoption: {\n          dashboard: { users: 800, usage: 5000, retention: 85 },\n          reports: { users: 600, usage: 2000, retention: 70 },\n          analytics: { users: 400, usage: 1500, retention: 60 },\n        },\n        mostUsed: ['dashboard', 'reports', 'search'],\n        leastUsed: ['advanced-filters', 'export', 'integrations'],\n      },\n      api: {\n        calls: this.getLatestValue(usageData['api-calls']) || 0,\n        uniqueConsumers: 150,\n        avgResponseTime: 250,\n        errorRate: 2.5,\n        rateLimits: {\n          hit: 5,\n          consumed: 75,\n        },\n      },\n      content: {\n        created: 100,\n        modified: 250,\n        deleted: 25,\n        views: 5000,\n      },\n    };\n  }\n\n  async getBusinessMetrics(timeRange?: { start: Date; end: Date }): Promise<BusinessMetrics> {\n    // This would integrate with business systems (CRM, billing, etc.)\n    return {\n      revenue: {\n        total: 1000000,\n        recurring: 800000,\n        growth: 15,\n        arpu: 100,\n        ltv: 2400,\n      },\n      customers: {\n        total: 500,\n        new: 25,\n        retained: 450,\n        churned: 10,\n        satisfaction: 4.2,\n      },\n      conversion: {\n        leads: 1000,\n        qualified: 400,\n        opportunities: 200,\n        closed: 50,\n        rate: 5,\n      },\n      support: {\n        tickets: 150,\n        resolved: 140,\n        avgResolutionTime: 4 * 60 * 60, // 4 hours\n        satisfaction: 4.5,\n      },\n    };\n  }\n\n  // Private helper methods\n  private getDefaultConfiguration(): AnalyticsConfiguration {\n    return {\n      collection: {\n        enabled: true,\n        samplingRate: 1.0,\n        batchSize: 1000,\n        flushInterval: 60000,\n      },\n      storage: {\n        retention: {\n          raw: '7d',\n          aggregated: '90d',\n          summary: '1y',\n        },\n        compression: true,\n        encryption: false,\n      },\n      processing: {\n        realTime: true,\n        batchProcessing: true,\n        aggregationIntervals: ['1m', '5m', '1h', '1d'],\n      },\n      alerts: {\n        enabled: true,\n        channels: ['email', 'slack'],\n        escalation: {\n          levels: 3,\n          intervals: [5, 15, 30], // minutes\n        },\n      },\n      privacy: {\n        anonymization: true,\n        gdprCompliant: true,\n        dataMinimization: true,\n      },\n      integrations: {},\n    };\n  }\n\n  private async loadConfigurations(): Promise<void> {\n    try {\n      // Load dashboards\n      const dashboardFiles = await readdir(join(this.analyticsPath, 'dashboards'));\n      for (const file of dashboardFiles.filter((f) => f.endsWith('.json'))) {\n        const content = await readFile(join(this.analyticsPath, 'dashboards', file), 'utf-8');\n        const dashboard: AnalyticsDashboard = JSON.parse(content);\n        this.dashboards.set(dashboard.id, dashboard);\n      }\n\n      // Load insights\n      const insightFiles = await readdir(join(this.analyticsPath, 'insights'));\n      for (const file of insightFiles.filter((f) => f.endsWith('.json'))) {\n        const content = await readFile(join(this.analyticsPath, 'insights', file), 'utf-8');\n        const insight: AnalyticsInsight = JSON.parse(content);\n        this.insights.set(insight.id, insight);\n      }\n\n      // Load models\n      const modelFiles = await readdir(join(this.analyticsPath, 'models'));\n      for (const file of modelFiles.filter((f) => f.endsWith('.json'))) {\n        const content = await readFile(join(this.analyticsPath, 'models', file), 'utf-8');\n        const model: PredictiveModel = JSON.parse(content);\n        this.models.set(model.id, model);\n      }\n\n      this.logger.info(\n        `Loaded ${this.dashboards.size} dashboards, ${this.insights.size} insights, ${this.models.size} models`,\n      );\n    } catch (error) {\n      this.logger.warn('Failed to load some analytics configurations', { error });\n    }\n  }\n\n  private async initializeDefaultDashboards(): Promise<void> {\n    const defaultDashboards = [\n      {\n        name: 'System Performance',\n        description: 'Real-time system performance metrics',\n        type: 'operational' as const,\n        widgets: [\n          {\n            title: 'CPU Usage',\n            type: 'gauge' as const,\n            size: 'medium' as const,\n            position: { x: 0, y: 0, width: 6, height: 3 },\n            dataSource: {\n              query: 'cpu-usage',\n              metrics: ['cpu-usage'],\n              aggregation: 'avg' as const,\n              timeRange: '1h',\n              groupBy: [],\n            },\n            visualization: {\n              chartType: 'gauge' as const,\n              options: { max: 100, unit: '%' },\n              thresholds: { warning: 70, critical: 90 },\n            },\n            alerts: { enabled: true, conditions: [] },\n          },\n          {\n            title: 'Memory Usage',\n            type: 'gauge' as const,\n            size: 'medium' as const,\n            position: { x: 6, y: 0, width: 6, height: 3 },\n            dataSource: {\n              query: 'memory-usage',\n              metrics: ['memory-usage'],\n              aggregation: 'avg' as const,\n              timeRange: '1h',\n              groupBy: [],\n            },\n            visualization: {\n              chartType: 'gauge' as const,\n              options: { max: 100, unit: '%' },\n              thresholds: { warning: 80, critical: 95 },\n            },\n            alerts: { enabled: true, conditions: [] },\n          },\n          {\n            title: 'Response Time',\n            type: 'chart' as const,\n            size: 'large' as const,\n            position: { x: 0, y: 3, width: 12, height: 4 },\n            dataSource: {\n              query: 'response-time',\n              metrics: ['response-time'],\n              aggregation: 'avg' as const,\n              timeRange: '24h',\n              groupBy: ['service'],\n            },\n            visualization: {\n              chartType: 'line' as const,\n              options: { unit: 'ms' },\n            },\n            alerts: { enabled: false, conditions: [] },\n          },\n        ],\n      },\n      {\n        name: 'Business KPIs',\n        description: 'Key business performance indicators',\n        type: 'executive' as const,\n        widgets: [\n          {\n            title: 'Active Users',\n            type: 'metric' as const,\n            size: 'small' as const,\n            position: { x: 0, y: 0, width: 3, height: 2 },\n            dataSource: {\n              query: 'active-users',\n              metrics: ['active-users'],\n              aggregation: 'count' as const,\n              timeRange: '24h',\n              groupBy: [],\n            },\n            visualization: {\n              options: { unit: 'users' },\n            },\n            alerts: { enabled: false, conditions: [] },\n          },\n        ],\n      },\n    ];\n\n    for (const dashboardData of defaultDashboards) {\n      if (!Array.from(this.dashboards.values()).some((d) => d.name === dashboardData.name)) {\n        await this.createDashboard(dashboardData);\n      }\n    }\n  }\n\n  private async startMetricsCollection(): Promise<void> {\n    // Start collecting system metrics\n    setInterval(async () => {\n      await this.collectSystemMetrics();\n    }, 60000); // Every minute\n\n    // Start collecting application metrics\n    setInterval(async () => {\n      await this.collectApplicationMetrics();\n    }, 30000); // Every 30 seconds\n\n    this.logger.info('Started automatic metrics collection');\n  }\n\n  private async collectSystemMetrics(): Promise<void> {\n    try {\n      // Mock system metrics collection\n      await this.recordMetric({\n        name: 'cpu-usage',\n        description: 'CPU usage percentage',\n        type: 'gauge',\n        category: 'performance',\n        unit: 'percent',\n        value: Math.random() * 100,\n        tags: { host: 'localhost', service: 'system' },\n        source: 'system-monitor',\n        metadata: {},\n      });\n\n      await this.recordMetric({\n        name: 'memory-usage',\n        description: 'Memory usage percentage',\n        type: 'gauge',\n        category: 'performance',\n        unit: 'percent',\n        value: Math.random() * 100,\n        tags: { host: 'localhost', service: 'system' },\n        source: 'system-monitor',\n        metadata: {},\n      });\n\n      await this.recordMetric({\n        name: 'disk-usage',\n        description: 'Disk usage percentage',\n        type: 'gauge',\n        category: 'performance',\n        unit: 'percent',\n        value: Math.random() * 100,\n        tags: { host: 'localhost', service: 'system' },\n        source: 'system-monitor',\n        metadata: {},\n      });\n    } catch (error) {\n      this.logger.error('Failed to collect system metrics', { error });\n    }\n  }\n\n  private async collectApplicationMetrics(): Promise<void> {\n    try {\n      // Mock application metrics collection\n      await this.recordMetric({\n        name: 'response-time',\n        description: 'Average response time',\n        type: 'gauge',\n        category: 'performance',\n        unit: 'milliseconds',\n        value: Math.random() * 1000 + 100,\n        tags: { service: 'api', endpoint: '/users' },\n        source: 'application',\n        metadata: {},\n      });\n\n      await this.recordMetric({\n        name: 'request-rate',\n        description: 'Requests per second',\n        type: 'counter',\n        category: 'usage',\n        unit: 'requests/sec',\n        value: Math.random() * 100 + 10,\n        tags: { service: 'api' },\n        source: 'application',\n        metadata: {},\n      });\n\n      await this.recordMetric({\n        name: 'error-rate',\n        description: 'Error rate percentage',\n        type: 'gauge',\n        category: 'performance',\n        unit: 'percent',\n        value: Math.random() * 5,\n        tags: { service: 'api' },\n        source: 'application',\n        metadata: {},\n      });\n    } catch (error) {\n      this.logger.error('Failed to collect application metrics', { error });\n    }\n  }\n\n  private async persistMetric(metric: AnalyticsMetric): Promise<void> {\n    const date = metric.timestamp.toISOString().split('T')[0];\n    const filePath = join(this.analyticsPath, 'metrics', `${date}.json`);\n\n    try {\n      let existingData: AnalyticsMetric[] = [];\n      try {\n        const content = await readFile(filePath, 'utf-8');\n        existingData = JSON.parse(content);\n      } catch {\n        // File doesn't exist yet\n      }\n\n      existingData.push(metric);\n      await writeFile(filePath, JSON.stringify(existingData, null, 2));\n    } catch (error) {\n      this.logger.error('Failed to persist metric', { error, metric: metric.id });\n    }\n  }\n\n  private async checkForAnomalies(metricKey: string, metric: AnalyticsMetric): Promise<void> {\n    const historical = this.metrics.get(metricKey) || [];\n    if (historical.length < 10) return; // Need enough data for baseline\n\n    const recent = historical.slice(-10);\n    const average = recent.reduce((sum, m) => sum + m.value, 0) / recent.length;\n    const stdDev = Math.sqrt(\n      recent.reduce((sum, m) => sum + Math.pow(m.value - average, 2), 0) / recent.length,\n    );\n\n    const threshold = 2; // 2 standard deviations\n    const deviation = Math.abs(metric.value - average) / stdDev;\n\n    if (deviation > threshold) {\n      const insight: AnalyticsInsight = {\n        id: `insight-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n        title: `Anomaly detected in ${metric.name}`,\n        description: `The metric ${metric.name} has deviated significantly from its normal pattern`,\n        type: 'anomaly',\n        category: metric.category,\n        confidence: Math.min(95, deviation * 20),\n        impact: deviation > 3 ? 'high' : 'medium',\n        priority: deviation > 3 ? 'high' : 'medium',\n        data: {\n          metrics: [metric.name],\n          timeRange: { start: recent[0].timestamp, end: metric.timestamp },\n          values: { current: metric.value, average, stdDev },\n          baseline: { average, stdDev },\n          deviation,\n        },\n        recommendations: [\n          {\n            action: 'Investigate the cause of the anomaly',\n            effort: 'medium',\n            impact: 'Identify potential issues before they become critical',\n            implementation: [\n              'Check recent deployments or configuration changes',\n              'Review system logs for errors or warnings',\n              'Monitor related metrics for correlation',\n            ],\n          },\n        ],\n        status: 'new',\n        createdAt: new Date(),\n        updatedAt: new Date(),\n      };\n\n      this.insights.set(insight.id, insight);\n      await this.saveInsight(insight);\n\n      this.emit('anomaly:detected', { metric, insight, deviation });\n      this.logger.warn(`Anomaly detected in ${metric.name}`, {\n        current: metric.value,\n        average,\n        deviation,\n      });\n    }\n  }\n\n  private async detectAnomalies(\n    timeRange: { start: Date; end: Date },\n    metrics?: string[],\n  ): Promise<AnalyticsInsight[]> {\n    // Simplified anomaly detection\n    return [];\n  }\n\n  private async analyzeTrends(\n    timeRange: { start: Date; end: Date },\n    metrics?: string[],\n  ): Promise<AnalyticsInsight[]> {\n    // Simplified trend analysis\n    return [];\n  }\n\n  private async analyzePerformance(timeRange: {\n    start: Date;\n    end: Date;\n  }): Promise<AnalyticsInsight[]> {\n    const insights: AnalyticsInsight[] = [];\n\n    // Check response time trends\n    const responseTimeData = await this.queryMetrics({\n      metrics: ['response-time'],\n      timeRange,\n      aggregation: 'avg',\n    });\n\n    if (responseTimeData['response-time']?.length > 0) {\n      const values = responseTimeData['response-time'].map((d: any) => d.value);\n      const recent = values.slice(-5);\n      const earlier = values.slice(0, -5);\n\n      if (recent.length > 0 && earlier.length > 0) {\n        const recentAvg = recent.reduce((sum, v) => sum + v, 0) / recent.length;\n        const earlierAvg = earlier.reduce((sum, v) => sum + v, 0) / earlier.length;\n        const change = ((recentAvg - earlierAvg) / earlierAvg) * 100;\n\n        if (Math.abs(change) > 20) {\n          insights.push({\n            id: `perf-insight-${Date.now()}`,\n            title: `Response time ${change > 0 ? 'increased' : 'decreased'} by ${Math.abs(change).toFixed(1)}%`,\n            description: `Response time has changed significantly in the recent period`,\n            type: 'trend',\n            category: 'performance',\n            confidence: 80,\n            impact: Math.abs(change) > 50 ? 'high' : 'medium',\n            priority: Math.abs(change) > 50 ? 'high' : 'medium',\n            data: {\n              metrics: ['response-time'],\n              timeRange,\n              values: { recent: recentAvg, earlier: earlierAvg, change },\n            },\n            recommendations:\n              change > 0\n                ? [\n                    {\n                      action: 'Investigate performance degradation',\n                      effort: 'medium',\n                      impact: 'Restore optimal response times',\n                      implementation: [\n                        'Check for increased load or traffic',\n                        'Review recent code deployments',\n                        'Analyze database query performance',\n                        'Monitor resource utilization',\n                      ],\n                    },\n                  ]\n                : [\n                    {\n                      action: 'Document performance improvement',\n                      effort: 'low',\n                      impact: 'Understand what caused the improvement',\n                      implementation: [\n                        'Identify recent optimizations',\n                        'Document best practices',\n                        'Monitor sustainability',\n                      ],\n                    },\n                  ],\n            status: 'new',\n            createdAt: new Date(),\n            updatedAt: new Date(),\n          });\n        }\n      }\n    }\n\n    return insights;\n  }\n\n  private async analyzeUsage(timeRange: { start: Date; end: Date }): Promise<AnalyticsInsight[]> {\n    // Simplified usage analysis\n    return [];\n  }\n\n  private async analyzeCostOptimization(timeRange: {\n    start: Date;\n    end: Date;\n  }): Promise<AnalyticsInsight[]> {\n    // Simplified cost optimization analysis\n    return [];\n  }\n\n  private async collectTrainingData(model: PredictiveModel): Promise<any[]> {\n    // Collect historical data for training\n    const data = await this.queryMetrics({\n      metrics: model.features,\n      timeRange: model.trainingData.timeRange,\n      aggregation: 'avg',\n    });\n\n    // Transform data for ML training (simplified)\n    return Object.values(data).flat();\n  }\n\n  private async executeModelTraining(\n    model: PredictiveModel,\n    data: any[],\n  ): Promise<Partial<PredictiveModel>> {\n    // Simplified model training\n    return {\n      accuracy: 85 + Math.random() * 10,\n      confidence: 80 + Math.random() * 15,\n      performance: {\n        precision: 0.85,\n        recall: 0.82,\n        f1Score: 0.83,\n      },\n      trainingData: {\n        ...model.trainingData,\n        samples: data.length,\n      },\n    };\n  }\n\n  private async executePrediction(\n    model: PredictiveModel,\n    input: Record<string, any>,\n  ): Promise<{ value: any; confidence: number }> {\n    // Simplified prediction logic\n    const value = Math.random() * 100;\n    const confidence = 70 + Math.random() * 25;\n\n    return { value, confidence };\n  }\n\n  private groupMetrics(\n    metrics: AnalyticsMetric[],\n    groupBy: string[],\n  ): Record<string, AnalyticsMetric[]> {\n    const groups: Record<string, AnalyticsMetric[]> = {};\n\n    for (const metric of metrics) {\n      const key = groupBy\n        .map((field) => {\n          if (field === 'tags') {\n            return Object.entries(metric.tags)\n              .map(([k, v]) => `${k}:${v}`)\n              .join(',');\n          }\n          return (metric as any)[field] || 'unknown';\n        })\n        .join('-');\n\n      if (!groups[key]) {\n        groups[key] = [];\n      }\n      groups[key].push(metric);\n    }\n\n    return groups;\n  }\n\n  private aggregateMetrics(metrics: AnalyticsMetric[], aggregation: string): any[] {\n    if (metrics.length === 0) return [];\n\n    // Group by time buckets for time series aggregation\n    const buckets: Record<string, AnalyticsMetric[]> = {};\n\n    for (const metric of metrics) {\n      const bucket = new Date(Math.floor(metric.timestamp.getTime() / 60000) * 60000).toISOString();\n      if (!buckets[bucket]) {\n        buckets[bucket] = [];\n      }\n      buckets[bucket].push(metric);\n    }\n\n    return Object.entries(buckets)\n      .map(([timestamp, bucketMetrics]) => {\n        const values = bucketMetrics.map((m) => m.value);\n        let aggregatedValue: number;\n\n        switch (aggregation) {\n          case 'sum':\n            aggregatedValue = values.reduce((sum, v) => sum + v, 0);\n            break;\n          case 'min':\n            aggregatedValue = Math.min(...values);\n            break;\n          case 'max':\n            aggregatedValue = Math.max(...values);\n            break;\n          case 'count':\n            aggregatedValue = values.length;\n            break;\n          case 'p95':\n            values.sort((a, b) => a - b);\n            aggregatedValue = values[Math.floor(values.length * 0.95)];\n            break;\n          case 'p99':\n            values.sort((a, b) => a - b);\n            aggregatedValue = values[Math.floor(values.length * 0.99)];\n            break;\n          case 'avg':\n          default:\n            aggregatedValue = values.reduce((sum, v) => sum + v, 0) / values.length;\n        }\n\n        return {\n          timestamp: new Date(timestamp),\n          value: aggregatedValue,\n          count: values.length,\n        };\n      })\n      .sort((a, b) => a.timestamp.getTime() - b.timestamp.getTime());\n  }\n\n  private getLatestValue(dataPoints: any[]): number {\n    if (!dataPoints || dataPoints.length === 0) return 0;\n    return dataPoints[dataPoints.length - 1]?.value || 0;\n  }\n\n  private async saveDashboard(dashboard: AnalyticsDashboard): Promise<void> {\n    const filePath = join(this.analyticsPath, 'dashboards', `${dashboard.id}.json`);\n    await writeFile(filePath, JSON.stringify(dashboard, null, 2));\n  }\n\n  private async saveInsight(insight: AnalyticsInsight): Promise<void> {\n    const filePath = join(this.analyticsPath, 'insights', `${insight.id}.json`);\n    await writeFile(filePath, JSON.stringify(insight, null, 2));\n  }\n\n  private async saveModel(model: PredictiveModel): Promise<void> {\n    const filePath = join(this.analyticsPath, 'models', `${model.id}.json`);\n    await writeFile(filePath, JSON.stringify(model, null, 2));\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
