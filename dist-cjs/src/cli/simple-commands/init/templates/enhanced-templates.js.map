{"version":3,"sources":["../../../../../../src/cli/simple-commands/init/templates/enhanced-templates.js"],"sourcesContent":["// enhanced-templates.js - Generate Claude Flow v2.0.0 enhanced templates\r\nimport { readFileSync } from 'fs';\r\nimport { dirname, join } from 'path';\r\nimport { fileURLToPath } from 'url';\r\n\r\nconst __dirname = dirname(fileURLToPath(import.meta.url));\r\n\r\n// Load template files\r\nconst loadTemplate = (filename) => {\r\n  try {\r\n    return readFileSync(join(__dirname, filename), 'utf8');\r\n  } catch (error) {\r\n    // Silently fall back to hardcoded templates if files not found\r\n    // This handles npm packaging scenarios where template files may not be included\r\n    return null;\r\n  }\r\n};\r\n\r\nexport function createEnhancedClaudeMd() {\r\n  const template = loadTemplate('CLAUDE.md');\r\n  if (!template) {\r\n    // Fallback to hardcoded if template file not found\r\n    return createEnhancedClaudeMdFallback();\r\n  }\r\n  return template;\r\n}\r\n\r\nexport function createEnhancedSettingsJson() {\r\n  const template = loadTemplate('settings.json');\r\n  if (!template) {\r\n    return createEnhancedSettingsJsonFallback();\r\n  }\r\n  return template;\r\n}\r\n\r\nexport function createWrapperScript(type = 'unix') {\r\n  // For unix, use the universal wrapper that works in both CommonJS and ES modules\r\n  if (type === 'unix') {\r\n    const universalTemplate = loadTemplate('claude-flow-universal');\r\n    if (universalTemplate) {\r\n      return universalTemplate;\r\n    }\r\n  }\r\n\r\n  const filename =\r\n    type === 'unix' ? 'claude-flow' : type === 'windows' ? 'claude-flow.bat' : 'claude-flow.ps1';\r\n\r\n  const template = loadTemplate(filename);\r\n  if (!template) {\r\n    return createWrapperScriptFallback(type);\r\n  }\r\n  return template;\r\n}\r\n\r\nexport function createCommandDoc(category, command) {\r\n  const template = loadTemplate(`commands/${category}/${command}.md`);\r\n  if (!template) {\r\n    // Silently fall back to generated documentation\r\n    return createCommandDocFallback(category, command);\r\n  }\r\n  return template;\r\n}\r\n\r\n// Generate command documentation fallbacks\r\nfunction createCommandDocFallback(category, command) {\r\n  const docs = {\r\n    analysis: {\r\n      'bottleneck-detect': `# bottleneck-detect\r\n\r\nAutomatically detect performance bottlenecks in your swarm operations.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow analysis bottleneck-detect [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--swarm-id <id>\\` - Target specific swarm\r\n- \\`--threshold <ms>\\` - Performance threshold (default: 1000ms)\r\n- \\`--export <file>\\` - Export results to file\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Detect bottlenecks in current swarm\r\nnpx claude-flow analysis bottleneck-detect\r\n\r\n# Set custom threshold\r\nnpx claude-flow analysis bottleneck-detect --threshold 500\r\n\r\n# Export results\r\nnpx claude-flow analysis bottleneck-detect --export bottlenecks.json\r\n\\`\\`\\`\r\n`,\r\n      'token-usage': `# token-usage\r\n\r\nAnalyze token usage patterns and optimize for efficiency.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow analysis token-usage [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--period <time>\\` - Analysis period (1h, 24h, 7d, 30d)\r\n- \\`--by-agent\\` - Break down by agent\r\n- \\`--by-operation\\` - Break down by operation type\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Last 24 hours token usage\r\nnpx claude-flow analysis token-usage --period 24h\r\n\r\n# By agent breakdown\r\nnpx claude-flow analysis token-usage --by-agent\r\n\r\n# Export detailed report\r\nnpx claude-flow analysis token-usage --period 7d --export tokens.csv\r\n\\`\\`\\`\r\n`,\r\n      'performance-report': `# performance-report\r\n\r\nGenerate comprehensive performance reports for swarm operations.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow analysis performance-report [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--format <type>\\` - Report format (json, html, markdown)\r\n- \\`--include-metrics\\` - Include detailed metrics\r\n- \\`--compare <id>\\` - Compare with previous swarm\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Generate HTML report\r\nnpx claude-flow analysis performance-report --format html\r\n\r\n# Compare swarms\r\nnpx claude-flow analysis performance-report --compare swarm-123\r\n\r\n# Full metrics report\r\nnpx claude-flow analysis performance-report --include-metrics --format markdown\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    automation: {\r\n      'auto-agent': `# auto-agent\r\n\r\nAutomatically assign agents based on task analysis.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow automation auto-agent [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--task <description>\\` - Task to analyze\r\n- \\`--max-agents <n>\\` - Maximum agents to spawn\r\n- \\`--strategy <type>\\` - Assignment strategy\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Auto-assign for task\r\nnpx claude-flow automation auto-agent --task \"Build REST API\"\r\n\r\n# Limit agents\r\nnpx claude-flow automation auto-agent --task \"Fix bugs\" --max-agents 3\r\n\r\n# Use specific strategy\r\nnpx claude-flow automation auto-agent --strategy specialized\r\n\\`\\`\\`\r\n`,\r\n      'smart-spawn': `# smart-spawn\r\n\r\nIntelligently spawn agents based on workload analysis.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow automation smart-spawn [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--analyze\\` - Analyze before spawning\r\n- \\`--threshold <n>\\` - Spawn threshold\r\n- \\`--topology <type>\\` - Preferred topology\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Smart spawn with analysis\r\nnpx claude-flow automation smart-spawn --analyze\r\n\r\n# Set spawn threshold\r\nnpx claude-flow automation smart-spawn --threshold 5\r\n\r\n# Force topology\r\nnpx claude-flow automation smart-spawn --topology hierarchical\r\n\\`\\`\\`\r\n`,\r\n      'workflow-select': `# workflow-select\r\n\r\nAutomatically select optimal workflow based on task type.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow automation workflow-select [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--task <description>\\` - Task description\r\n- \\`--constraints <list>\\` - Workflow constraints\r\n- \\`--preview\\` - Preview without executing\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Select workflow for task\r\nnpx claude-flow automation workflow-select --task \"Deploy to production\"\r\n\r\n# With constraints\r\nnpx claude-flow automation workflow-select --constraints \"no-downtime,rollback\"\r\n\r\n# Preview mode\r\nnpx claude-flow automation workflow-select --task \"Database migration\" --preview\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    coordination: {\r\n      'swarm-init': `# swarm-init\r\n\r\nInitialize a new agent swarm with specified topology.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm init [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--topology <type>\\` - Swarm topology (mesh, hierarchical, ring, star)\r\n- \\`--max-agents <n>\\` - Maximum number of agents\r\n- \\`--strategy <type>\\` - Execution strategy (parallel, sequential, adaptive)\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Initialize hierarchical swarm\r\nnpx claude-flow swarm init --topology hierarchical\r\n\r\n# With agent limit\r\nnpx claude-flow swarm init --topology mesh --max-agents 8\r\n\r\n# Parallel execution\r\nnpx claude-flow swarm init --strategy parallel\r\n\\`\\`\\`\r\n`,\r\n      'agent-spawn': `# agent-spawn\r\n\r\nSpawn a new agent in the current swarm.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow agent spawn [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--type <type>\\` - Agent type (coder, researcher, analyst, tester, coordinator)\r\n- \\`--name <name>\\` - Custom agent name\r\n- \\`--skills <list>\\` - Specific skills (comma-separated)\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Spawn coder agent\r\nnpx claude-flow agent spawn --type coder\r\n\r\n# With custom name\r\nnpx claude-flow agent spawn --type researcher --name \"API Expert\"\r\n\r\n# With specific skills\r\nnpx claude-flow agent spawn --type coder --skills \"python,fastapi,testing\"\r\n\\`\\`\\`\r\n`,\r\n      'task-orchestrate': `# task-orchestrate\r\n\r\nOrchestrate complex tasks across the swarm.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow task orchestrate [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--task <description>\\` - Task description\r\n- \\`--strategy <type>\\` - Orchestration strategy\r\n- \\`--priority <level>\\` - Task priority (low, medium, high, critical)\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Orchestrate development task\r\nnpx claude-flow task orchestrate --task \"Implement user authentication\"\r\n\r\n# High priority task\r\nnpx claude-flow task orchestrate --task \"Fix production bug\" --priority critical\r\n\r\n# With specific strategy\r\nnpx claude-flow task orchestrate --task \"Refactor codebase\" --strategy parallel\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    github: {\r\n      'github-swarm': `# github-swarm\r\n\r\nCreate a specialized swarm for GitHub repository management.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow github swarm [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--repository <owner/repo>\\` - Target repository\r\n- \\`--agents <n>\\` - Number of specialized agents\r\n- \\`--focus <area>\\` - Focus area (maintenance, features, security)\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Create GitHub swarm\r\nnpx claude-flow github swarm --repository myorg/myrepo\r\n\r\n# With specific focus\r\nnpx claude-flow github swarm --repository myorg/myrepo --focus security\r\n\r\n# Custom agent count\r\nnpx claude-flow github swarm --repository myorg/myrepo --agents 6\r\n\\`\\`\\`\r\n`,\r\n      'repo-analyze': `# repo-analyze\r\n\r\nDeep analysis of GitHub repository with AI insights.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow github repo-analyze [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--repository <owner/repo>\\` - Repository to analyze\r\n- \\`--deep\\` - Enable deep analysis\r\n- \\`--include <areas>\\` - Include specific areas (issues, prs, code, commits)\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Basic analysis\r\nnpx claude-flow github repo-analyze --repository myorg/myrepo\r\n\r\n# Deep analysis\r\nnpx claude-flow github repo-analyze --repository myorg/myrepo --deep\r\n\r\n# Specific areas\r\nnpx claude-flow github repo-analyze --repository myorg/myrepo --include issues,prs\r\n\\`\\`\\`\r\n`,\r\n      'pr-enhance': `# pr-enhance\r\n\r\nAI-powered pull request enhancements.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow github pr-enhance [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--pr-number <n>\\` - Pull request number\r\n- \\`--add-tests\\` - Add missing tests\r\n- \\`--improve-docs\\` - Improve documentation\r\n- \\`--check-security\\` - Security review\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Enhance PR\r\nnpx claude-flow github pr-enhance --pr-number 123\r\n\r\n# Add tests\r\nnpx claude-flow github pr-enhance --pr-number 123 --add-tests\r\n\r\n# Full enhancement\r\nnpx claude-flow github pr-enhance --pr-number 123 --add-tests --improve-docs\r\n\\`\\`\\`\r\n`,\r\n      'issue-triage': `# issue-triage\r\n\r\nIntelligent issue classification and triage.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow github issue-triage [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--repository <owner/repo>\\` - Target repository\r\n- \\`--auto-label\\` - Automatically apply labels\r\n- \\`--assign\\` - Auto-assign to team members\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Triage issues\r\nnpx claude-flow github issue-triage --repository myorg/myrepo\r\n\r\n# With auto-labeling\r\nnpx claude-flow github issue-triage --repository myorg/myrepo --auto-label\r\n\r\n# Full automation\r\nnpx claude-flow github issue-triage --repository myorg/myrepo --auto-label --assign\r\n\\`\\`\\`\r\n`,\r\n      'code-review': `# code-review\r\n\r\nAutomated code review with swarm intelligence.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow github code-review [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--pr-number <n>\\` - Pull request to review\r\n- \\`--focus <areas>\\` - Review focus (security, performance, style)\r\n- \\`--suggest-fixes\\` - Suggest code fixes\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Review PR\r\nnpx claude-flow github code-review --pr-number 456\r\n\r\n# Security focus\r\nnpx claude-flow github code-review --pr-number 456 --focus security\r\n\r\n# With fix suggestions\r\nnpx claude-flow github code-review --pr-number 456 --suggest-fixes\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    hooks: {\r\n      'pre-task': `# pre-task\r\n\r\nHook executed before task execution.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow hook pre-task [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--description <text>\\` - Task description\r\n- \\`--auto-spawn-agents\\` - Automatically spawn required agents\r\n- \\`--load-context\\` - Load previous context\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Basic pre-task hook\r\nnpx claude-flow hook pre-task --description \"Building API endpoints\"\r\n\r\n# With auto-spawn\r\nnpx claude-flow hook pre-task --description \"Complex refactoring\" --auto-spawn-agents\r\n\r\n# Load context\r\nnpx claude-flow hook pre-task --description \"Continue feature\" --load-context\r\n\\`\\`\\`\r\n`,\r\n      'post-task': `# post-task\r\n\r\nHook executed after task completion.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow hook post-task [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--task-id <id>\\` - Task identifier\r\n- \\`--analyze-performance\\` - Analyze task performance\r\n- \\`--update-memory\\` - Update swarm memory\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Basic post-task\r\nnpx claude-flow hook post-task --task-id task-123\r\n\r\n# With performance analysis\r\nnpx claude-flow hook post-task --task-id task-123 --analyze-performance\r\n\r\n# Update memory\r\nnpx claude-flow hook post-task --task-id task-123 --update-memory\r\n\\`\\`\\`\r\n`,\r\n      'pre-edit': `# pre-edit\r\n\r\nHook executed before file edits.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow hook pre-edit [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--file <path>\\` - File to be edited\r\n- \\`--validate-syntax\\` - Validate syntax before edit\r\n- \\`--backup\\` - Create backup\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Pre-edit hook\r\nnpx claude-flow hook pre-edit --file src/api.js\r\n\r\n# With validation\r\nnpx claude-flow hook pre-edit --file src/api.js --validate-syntax\r\n\r\n# Create backup\r\nnpx claude-flow hook pre-edit --file src/api.js --backup\r\n\\`\\`\\`\r\n`,\r\n      'post-edit': `# post-edit\r\n\r\nHook executed after file edits.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow hook post-edit [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--file <path>\\` - Edited file\r\n- \\`--memory-key <key>\\` - Memory storage key\r\n- \\`--format\\` - Auto-format code\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Post-edit hook\r\nnpx claude-flow hook post-edit --file src/api.js\r\n\r\n# Store in memory\r\nnpx claude-flow hook post-edit --file src/api.js --memory-key \"api-changes\"\r\n\r\n# With formatting\r\nnpx claude-flow hook post-edit --file src/api.js --format\r\n\\`\\`\\`\r\n`,\r\n      'session-end': `# session-end\r\n\r\nHook executed at session end.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow hook session-end [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--export-metrics\\` - Export session metrics\r\n- \\`--generate-summary\\` - Generate session summary\r\n- \\`--persist-state\\` - Save session state\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# End session\r\nnpx claude-flow hook session-end\r\n\r\n# Export metrics\r\nnpx claude-flow hook session-end --export-metrics\r\n\r\n# Full closure\r\nnpx claude-flow hook session-end --export-metrics --generate-summary --persist-state\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    memory: {\r\n      'memory-usage': `# memory-usage\r\n\r\nManage persistent memory storage.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow memory usage [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--action <type>\\` - Action (store, retrieve, list, clear)\r\n- \\`--key <key>\\` - Memory key\r\n- \\`--value <data>\\` - Data to store (JSON)\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Store memory\r\nnpx claude-flow memory usage --action store --key \"project-config\" --value '{\"api\": \"v2\"}'\r\n\r\n# Retrieve memory\r\nnpx claude-flow memory usage --action retrieve --key \"project-config\"\r\n\r\n# List all keys\r\nnpx claude-flow memory usage --action list\r\n\\`\\`\\`\r\n`,\r\n      'memory-persist': `# memory-persist\r\n\r\nPersist memory across sessions.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow memory persist [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--export <file>\\` - Export to file\r\n- \\`--import <file>\\` - Import from file\r\n- \\`--compress\\` - Compress memory data\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Export memory\r\nnpx claude-flow memory persist --export memory-backup.json\r\n\r\n# Import memory\r\nnpx claude-flow memory persist --import memory-backup.json\r\n\r\n# Compressed export\r\nnpx claude-flow memory persist --export memory.gz --compress\r\n\\`\\`\\`\r\n`,\r\n      'memory-search': `# memory-search\r\n\r\nSearch through stored memory.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow memory search [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--query <text>\\` - Search query\r\n- \\`--pattern <regex>\\` - Pattern matching\r\n- \\`--limit <n>\\` - Result limit\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Search memory\r\nnpx claude-flow memory search --query \"authentication\"\r\n\r\n# Pattern search\r\nnpx claude-flow memory search --pattern \"api-.*\"\r\n\r\n# Limited results\r\nnpx claude-flow memory search --query \"config\" --limit 10\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    monitoring: {\r\n      'swarm-monitor': `# swarm-monitor\r\n\r\nReal-time swarm monitoring.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm monitor [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--interval <ms>\\` - Update interval\r\n- \\`--metrics\\` - Show detailed metrics\r\n- \\`--export\\` - Export monitoring data\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Start monitoring\r\nnpx claude-flow swarm monitor\r\n\r\n# Custom interval\r\nnpx claude-flow swarm monitor --interval 5000\r\n\r\n# With metrics\r\nnpx claude-flow swarm monitor --metrics\r\n\\`\\`\\`\r\n`,\r\n      'agent-metrics': `# agent-metrics\r\n\r\nView agent performance metrics.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow agent metrics [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--agent-id <id>\\` - Specific agent\r\n- \\`--period <time>\\` - Time period\r\n- \\`--format <type>\\` - Output format\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# All agents metrics\r\nnpx claude-flow agent metrics\r\n\r\n# Specific agent\r\nnpx claude-flow agent metrics --agent-id agent-001\r\n\r\n# Last hour\r\nnpx claude-flow agent metrics --period 1h\r\n\\`\\`\\`\r\n`,\r\n      'real-time-view': `# real-time-view\r\n\r\nReal-time view of swarm activity.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow monitoring real-time-view [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--filter <type>\\` - Filter view\r\n- \\`--highlight <pattern>\\` - Highlight pattern\r\n- \\`--tail <n>\\` - Show last N events\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Start real-time view\r\nnpx claude-flow monitoring real-time-view\r\n\r\n# Filter errors\r\nnpx claude-flow monitoring real-time-view --filter errors\r\n\r\n# Highlight pattern\r\nnpx claude-flow monitoring real-time-view --highlight \"API\"\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    optimization: {\r\n      'topology-optimize': `# topology-optimize\r\n\r\nOptimize swarm topology for current workload.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow optimization topology-optimize [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--analyze-first\\` - Analyze before optimizing\r\n- \\`--target <metric>\\` - Optimization target\r\n- \\`--apply\\` - Apply optimizations\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Analyze and suggest\r\nnpx claude-flow optimization topology-optimize --analyze-first\r\n\r\n# Optimize for speed\r\nnpx claude-flow optimization topology-optimize --target speed\r\n\r\n# Apply changes\r\nnpx claude-flow optimization topology-optimize --target efficiency --apply\r\n\\`\\`\\`\r\n`,\r\n      'parallel-execute': `# parallel-execute\r\n\r\nExecute tasks in parallel for maximum efficiency.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow optimization parallel-execute [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--tasks <file>\\` - Task list file\r\n- \\`--max-parallel <n>\\` - Maximum parallel tasks\r\n- \\`--strategy <type>\\` - Execution strategy\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Execute task list\r\nnpx claude-flow optimization parallel-execute --tasks tasks.json\r\n\r\n# Limit parallelism\r\nnpx claude-flow optimization parallel-execute --tasks tasks.json --max-parallel 5\r\n\r\n# Custom strategy\r\nnpx claude-flow optimization parallel-execute --strategy adaptive\r\n\\`\\`\\`\r\n`,\r\n      'cache-manage': `# cache-manage\r\n\r\nManage operation cache for performance.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow optimization cache-manage [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--action <type>\\` - Action (view, clear, optimize)\r\n- \\`--max-size <mb>\\` - Maximum cache size\r\n- \\`--ttl <seconds>\\` - Time to live\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# View cache stats\r\nnpx claude-flow optimization cache-manage --action view\r\n\r\n# Clear cache\r\nnpx claude-flow optimization cache-manage --action clear\r\n\r\n# Set limits\r\nnpx claude-flow optimization cache-manage --max-size 100 --ttl 3600\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    training: {\r\n      'neural-train': `# neural-train\r\n\r\nTrain neural patterns from operations.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow training neural-train [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--data <source>\\` - Training data source\r\n- \\`--model <name>\\` - Target model\r\n- \\`--epochs <n>\\` - Training epochs\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Train from recent ops\r\nnpx claude-flow training neural-train --data recent\r\n\r\n# Specific model\r\nnpx claude-flow training neural-train --model task-predictor\r\n\r\n# Custom epochs\r\nnpx claude-flow training neural-train --epochs 100\r\n\\`\\`\\`\r\n`,\r\n      'pattern-learn': `# pattern-learn\r\n\r\nLearn patterns from successful operations.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow training pattern-learn [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--source <type>\\` - Pattern source\r\n- \\`--threshold <score>\\` - Success threshold\r\n- \\`--save <name>\\` - Save pattern set\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Learn from all ops\r\nnpx claude-flow training pattern-learn\r\n\r\n# High success only\r\nnpx claude-flow training pattern-learn --threshold 0.9\r\n\r\n# Save patterns\r\nnpx claude-flow training pattern-learn --save optimal-patterns\r\n\\`\\`\\`\r\n`,\r\n      'model-update': `# model-update\r\n\r\nUpdate neural models with new data.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow training model-update [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--model <name>\\` - Model to update\r\n- \\`--incremental\\` - Incremental update\r\n- \\`--validate\\` - Validate after update\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Update all models\r\nnpx claude-flow training model-update\r\n\r\n# Specific model\r\nnpx claude-flow training model-update --model agent-selector\r\n\r\n# Incremental with validation\r\nnpx claude-flow training model-update --incremental --validate\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    workflows: {\r\n      'workflow-create': `# workflow-create\r\n\r\nCreate reusable workflow templates.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow workflow create [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--name <name>\\` - Workflow name\r\n- \\`--from-history\\` - Create from history\r\n- \\`--interactive\\` - Interactive creation\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Create workflow\r\nnpx claude-flow workflow create --name \"deploy-api\"\r\n\r\n# From history\r\nnpx claude-flow workflow create --name \"test-suite\" --from-history\r\n\r\n# Interactive mode\r\nnpx claude-flow workflow create --interactive\r\n\\`\\`\\`\r\n`,\r\n      'workflow-execute': `# workflow-execute\r\n\r\nExecute saved workflows.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow workflow execute [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--name <name>\\` - Workflow name\r\n- \\`--params <json>\\` - Workflow parameters\r\n- \\`--dry-run\\` - Preview execution\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Execute workflow\r\nnpx claude-flow workflow execute --name \"deploy-api\"\r\n\r\n# With parameters\r\nnpx claude-flow workflow execute --name \"test-suite\" --params '{\"env\": \"staging\"}'\r\n\r\n# Dry run\r\nnpx claude-flow workflow execute --name \"deploy-api\" --dry-run\r\n\\`\\`\\`\r\n`,\r\n      'workflow-export': `# workflow-export\r\n\r\nExport workflows for sharing.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow workflow export [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--name <name>\\` - Workflow to export\r\n- \\`--format <type>\\` - Export format\r\n- \\`--include-history\\` - Include execution history\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Export workflow\r\nnpx claude-flow workflow export --name \"deploy-api\"\r\n\r\n# As YAML\r\nnpx claude-flow workflow export --name \"test-suite\" --format yaml\r\n\r\n# With history\r\nnpx claude-flow workflow export --name \"deploy-api\" --include-history\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    swarm: {\r\n      'swarm': `# swarm\r\n\r\nMain swarm orchestration command for Claude Flow.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm <objective> [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--strategy <type>\\` - Execution strategy (research, development, analysis, testing)\r\n- \\`--mode <type>\\` - Coordination mode (centralized, distributed, hierarchical, mesh)\r\n- \\`--max-agents <n>\\` - Maximum number of agents (default: 5)\r\n- \\`--claude\\` - Open Claude Code CLI with swarm prompt\r\n- \\`--parallel\\` - Enable parallel execution\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Basic swarm\r\nnpx claude-flow swarm \"Build REST API\"\r\n\r\n# With strategy\r\nnpx claude-flow swarm \"Research AI patterns\" --strategy research\r\n\r\n# Open in Claude Code\r\nnpx claude-flow swarm \"Build API\" --claude\r\n\\`\\`\\`\r\n`,\r\n      'swarm-init': `# swarm-init\r\n\r\nInitialize a new swarm with specified topology.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm init [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--topology <type>\\` - Swarm topology (mesh, hierarchical, ring, star)\r\n- \\`--max-agents <n>\\` - Maximum agents\r\n- \\`--strategy <type>\\` - Distribution strategy\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm init --topology mesh\r\nnpx claude-flow swarm init --topology hierarchical --max-agents 8\r\n\\`\\`\\`\r\n`,\r\n      'swarm-spawn': `# swarm-spawn\r\n\r\nSpawn agents in the swarm.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm spawn [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--type <type>\\` - Agent type\r\n- \\`--count <n>\\` - Number to spawn\r\n- \\`--capabilities <list>\\` - Agent capabilities\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm spawn --type coder --count 3\r\nnpx claude-flow swarm spawn --type researcher --capabilities \"web-search,analysis\"\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    'hive-mind': {\r\n      'hive-mind': `# hive-mind\r\n\r\nHive Mind collective intelligence system for advanced swarm coordination.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow hive-mind [subcommand] [options]\r\n\\`\\`\\`\r\n\r\n## Subcommands\r\n- \\`init\\` - Initialize hive mind system\r\n- \\`spawn\\` - Spawn hive mind swarm\r\n- \\`status\\` - Show hive mind status\r\n- \\`resume\\` - Resume paused session\r\n- \\`stop\\` - Stop running session\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\n# Initialize hive mind\r\nnpx claude-flow hive-mind init\r\n\r\n# Spawn swarm\r\nnpx claude-flow hive-mind spawn \"Build microservices\"\r\n\r\n# Check status\r\nnpx claude-flow hive-mind status\r\n\\`\\`\\`\r\n`,\r\n      'hive-mind-init': `# hive-mind-init\r\n\r\nInitialize the Hive Mind collective intelligence system.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow hive-mind init [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--force\\` - Force reinitialize\r\n- \\`--config <file>\\` - Configuration file\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\nnpx claude-flow hive-mind init\r\nnpx claude-flow hive-mind init --force\r\n\\`\\`\\`\r\n`,\r\n      'hive-mind-spawn': `# hive-mind-spawn\r\n\r\nSpawn a Hive Mind swarm with queen-led coordination.\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\nnpx claude-flow hive-mind spawn <objective> [options]\r\n\\`\\`\\`\r\n\r\n## Options\r\n- \\`--queen-type <type>\\` - Queen type (strategic, tactical, adaptive)\r\n- \\`--max-workers <n>\\` - Maximum worker agents\r\n- \\`--consensus <type>\\` - Consensus algorithm\r\n- \\`--claude\\` - Generate Claude Code spawn commands\r\n\r\n## Examples\r\n\\`\\`\\`bash\r\nnpx claude-flow hive-mind spawn \"Build API\"\r\nnpx claude-flow hive-mind spawn \"Research patterns\" --queen-type adaptive\r\nnpx claude-flow hive-mind spawn \"Build service\" --claude\r\n\\`\\`\\`\r\n`,\r\n    },\r\n    agents: {\r\n      'agent-types': `# agent-types\r\n\r\nComplete guide to all 54 available agent types in Claude Flow.\r\n\r\n## Core Development Agents\r\n- \\`coder\\` - Implementation specialist\r\n- \\`reviewer\\` - Code quality assurance\r\n- \\`tester\\` - Test creation and validation\r\n- \\`planner\\` - Strategic planning\r\n- \\`researcher\\` - Information gathering\r\n\r\n## Swarm Coordination Agents\r\n- \\`hierarchical-coordinator\\` - Queen-led coordination\r\n- \\`mesh-coordinator\\` - Peer-to-peer networks\r\n- \\`adaptive-coordinator\\` - Dynamic topology\r\n\r\n## Specialized Agents\r\n- \\`backend-dev\\` - API development\r\n- \\`mobile-dev\\` - React Native development\r\n- \\`ml-developer\\` - Machine learning\r\n- \\`system-architect\\` - High-level design\r\n\r\nFor full list and details:\r\n\\`\\`\\`bash\r\nnpx claude-flow agents list\r\n\\`\\`\\`\r\n`,\r\n      'agent-capabilities': `# agent-capabilities\r\n\r\nMatrix of agent capabilities and their specializations.\r\n\r\n## Capability Matrix\r\n\r\n| Agent Type | Primary Skills | Best For |\r\n|------------|---------------|----------|\r\n| coder | Implementation, debugging | Feature development |\r\n| researcher | Analysis, synthesis | Requirements gathering |\r\n| tester | Testing, validation | Quality assurance |\r\n| architect | Design, planning | System architecture |\r\n\r\n## Querying Capabilities\r\n\\`\\`\\`bash\r\n# List all capabilities\r\nnpx claude-flow agents capabilities\r\n\r\n# For specific agent\r\nnpx claude-flow agents capabilities --type coder\r\n\\`\\`\\`\r\n`,\r\n      'agent-coordination': `# agent-coordination\r\n\r\nCoordination patterns for multi-agent collaboration.\r\n\r\n## Coordination Patterns\r\n\r\n### Hierarchical\r\nQueen-led with worker specialization\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm init --topology hierarchical\r\n\\`\\`\\`\r\n\r\n### Mesh\r\nPeer-to-peer collaboration\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm init --topology mesh\r\n\\`\\`\\`\r\n\r\n### Adaptive\r\nDynamic topology based on workload\r\n\\`\\`\\`bash\r\nnpx claude-flow swarm init --topology adaptive\r\n\\`\\`\\`\r\n\r\n## Best Practices\r\n- Use hierarchical for complex projects\r\n- Use mesh for research tasks\r\n- Use adaptive for unknown workloads\r\n`,\r\n      'agent-spawning': `# agent-spawning\r\n\r\nGuide to spawning agents with Claude Code's Task tool.\r\n\r\n## Using Claude Code's Task Tool\r\n\r\n**CRITICAL**: Always use Claude Code's Task tool for actual agent execution:\r\n\r\n\\`\\`\\`javascript\r\n// Spawn ALL agents in ONE message\r\nTask(\"Researcher\", \"Analyze requirements...\", \"researcher\")\r\nTask(\"Coder\", \"Implement features...\", \"coder\")\r\nTask(\"Tester\", \"Create tests...\", \"tester\")\r\n\\`\\`\\`\r\n\r\n## MCP Coordination Setup (Optional)\r\n\r\nMCP tools are ONLY for coordination:\r\n\\`\\`\\`javascript\r\nmcp__claude-flow__swarm_init { topology: \"mesh\" }\r\nmcp__claude-flow__agent_spawn { type: \"researcher\" }\r\n\\`\\`\\`\r\n\r\n## Best Practices\r\n1. Always spawn agents concurrently\r\n2. Use Task tool for execution\r\n3. MCP only for coordination\r\n4. Batch all operations\r\n`,\r\n    },\r\n  };\r\n\r\n  return (\r\n    docs[category]?.[command] ||\r\n    `# ${command}\\n\\nCommand documentation for ${command} in category ${category}.\\n\\nUsage:\\n\\`\\`\\`bash\\nnpx claude-flow ${category} ${command} [options]\\n\\`\\`\\`\\n`\r\n  );\r\n}\r\n\r\n// Command categories and their commands\r\nexport const COMMAND_STRUCTURE = {\r\n  analysis: ['bottleneck-detect', 'token-usage', 'performance-report'],\r\n  automation: ['auto-agent', 'smart-spawn', 'workflow-select'],\r\n  coordination: ['swarm-init', 'agent-spawn', 'task-orchestrate'],\r\n  github: ['github-swarm', 'repo-analyze', 'pr-enhance', 'issue-triage', 'code-review'],\r\n  hooks: ['pre-task', 'post-task', 'pre-edit', 'post-edit', 'session-end'],\r\n  memory: ['memory-usage', 'memory-persist', 'memory-search'],\r\n  monitoring: ['swarm-monitor', 'agent-metrics', 'real-time-view'],\r\n  optimization: ['topology-optimize', 'parallel-execute', 'cache-manage'],\r\n  training: ['neural-train', 'pattern-learn', 'model-update'],\r\n  workflows: ['workflow-create', 'workflow-execute', 'workflow-export'],\r\n  swarm: ['swarm', 'swarm-init', 'swarm-spawn', 'swarm-status', 'swarm-monitor', 'swarm-strategies', 'swarm-modes', 'swarm-background', 'swarm-analysis'],\r\n  'hive-mind': ['hive-mind', 'hive-mind-init', 'hive-mind-spawn', 'hive-mind-status', 'hive-mind-resume', 'hive-mind-stop', 'hive-mind-sessions', 'hive-mind-consensus', 'hive-mind-memory', 'hive-mind-metrics', 'hive-mind-wizard'],\r\n  agents: ['agent-types', 'agent-capabilities', 'agent-coordination', 'agent-spawning'],\r\n};\r\n\r\n// Helper script content\r\nexport function createHelperScript(name) {\r\n  const scripts = {\r\n    'setup-mcp.sh': `#!/bin/bash\r\n# Setup MCP server for Claude Flow\r\n\r\necho \"üöÄ Setting up Claude Flow MCP server...\"\r\n\r\n# Check if claude command exists\r\nif ! command -v claude &> /dev/null; then\r\n    echo \"‚ùå Error: Claude Code CLI not found\"\r\n    echo \"Please install Claude Code first\"\r\n    exit 1\r\nfi\r\n\r\n# Add MCP server\r\necho \"üì¶ Adding Claude Flow MCP server...\"\r\nclaude mcp add claude-flow npx claude-flow mcp start\r\n\r\necho \"‚úÖ MCP server setup complete!\"\r\necho \"üéØ You can now use mcp__claude-flow__ tools in Claude Code\"\r\n`,\r\n    'quick-start.sh': `#!/bin/bash\r\n# Quick start guide for Claude Flow\r\n\r\necho \"üöÄ Claude Flow Quick Start\"\r\necho \"==========================\"\r\necho \"\"\r\necho \"1. Initialize a swarm:\"\r\necho \"   npx claude-flow swarm init --topology hierarchical\"\r\necho \"\"\r\necho \"2. Spawn agents:\"\r\necho \"   npx claude-flow agent spawn --type coder --name \\\"API Developer\\\"\"\r\necho \"\"\r\necho \"3. Orchestrate tasks:\"\r\necho \"   npx claude-flow task orchestrate --task \\\"Build REST API\\\"\"\r\necho \"\"\r\necho \"4. Monitor progress:\"\r\necho \"   npx claude-flow swarm monitor\"\r\necho \"\"\r\necho \"üìö For more examples, see .claude/commands/\"\r\n`,\r\n    'github-setup.sh': `#!/bin/bash\r\n# Setup GitHub integration for Claude Flow\r\n\r\necho \"üîó Setting up GitHub integration...\"\r\n\r\n# Check for gh CLI\r\nif ! command -v gh &> /dev/null; then\r\n    echo \"‚ö†Ô∏è  GitHub CLI (gh) not found\"\r\n    echo \"Install from: https://cli.github.com/\"\r\n    echo \"Continuing without GitHub features...\"\r\nelse\r\n    echo \"‚úÖ GitHub CLI found\"\r\n    \r\n    # Check auth status\r\n    if gh auth status &> /dev/null; then\r\n        echo \"‚úÖ GitHub authentication active\"\r\n    else\r\n        echo \"‚ö†Ô∏è  Not authenticated with GitHub\"\r\n        echo \"Run: gh auth login\"\r\n    fi\r\nfi\r\n\r\necho \"\"\r\necho \"üì¶ GitHub swarm commands available:\"\r\necho \"  - npx claude-flow github swarm\"\r\necho \"  - npx claude-flow repo analyze\"\r\necho \"  - npx claude-flow pr enhance\"\r\necho \"  - npx claude-flow issue triage\"\r\n`,\r\n    'github-safe.js': `#!/usr/bin/env node\r\n\r\n/**\r\n * Safe GitHub CLI Helper\r\n * Prevents timeout issues when using gh commands with special characters\r\n * \r\n * Usage:\r\n *   ./github-safe.js issue comment 123 \"Message with \\`backticks\\`\"\r\n *   ./github-safe.js pr create --title \"Title\" --body \"Complex body\"\r\n */\r\n\r\nimport { execSync } from 'child_process';\r\nimport { writeFileSync, unlinkSync } from 'fs';\r\nimport { tmpdir } from 'os';\r\nimport { join } from 'path';\r\nimport { randomBytes } from 'crypto';\r\n\r\nconst args = process.argv.slice(2);\r\n\r\nif (args.length < 2) {\r\n  console.log(\\`\r\nSafe GitHub CLI Helper\r\n\r\nUsage:\r\n  ./github-safe.js issue comment <number> <body>\r\n  ./github-safe.js pr comment <number> <body>\r\n  ./github-safe.js issue create --title <title> --body <body>\r\n  ./github-safe.js pr create --title <title> --body <body>\r\n\r\nThis helper prevents timeout issues with special characters like:\r\n- Backticks in code examples\r\n- Command substitution \\\\$(...)\r\n- Directory paths\r\n- Special shell characters\r\n\\`);\r\n  process.exit(1);\r\n}\r\n\r\nconst [command, subcommand, ...restArgs] = args;\r\n\r\n// Handle commands that need body content\r\nif ((command === 'issue' || command === 'pr') && \r\n    (subcommand === 'comment' || subcommand === 'create')) {\r\n  \r\n  let bodyIndex = -1;\r\n  let body = '';\r\n  \r\n  if (subcommand === 'comment' && restArgs.length >= 2) {\r\n    // Simple format: github-safe.js issue comment 123 \"body\"\r\n    body = restArgs[1];\r\n    bodyIndex = 1;\r\n  } else {\r\n    // Flag format: --body \"content\" \r\n    bodyIndex = restArgs.indexOf('--body');\r\n    if (bodyIndex !== -1 && bodyIndex < restArgs.length - 1) {\r\n      body = restArgs[bodyIndex + 1];\r\n    }\r\n  }\r\n  \r\n  if (body) {\r\n    // Use temporary file for body content\r\n    const tmpFile = join(tmpdir(), \\`gh-body-\\${randomBytes(8).toString('hex')}.tmp\\`);\r\n    \r\n    try {\r\n      writeFileSync(tmpFile, body, 'utf8');\r\n      \r\n      // Build new command with --body-file\r\n      const newArgs = [...restArgs];\r\n      if (subcommand === 'comment' && bodyIndex === 1) {\r\n        // Replace body with --body-file\r\n        newArgs[1] = '--body-file';\r\n        newArgs.push(tmpFile);\r\n      } else if (bodyIndex !== -1) {\r\n        // Replace --body with --body-file\r\n        newArgs[bodyIndex] = '--body-file';\r\n        newArgs[bodyIndex + 1] = tmpFile;\r\n      }\r\n      \r\n      // Execute safely\r\n      const ghCommand = \\`gh \\${command} \\${subcommand} \\${newArgs.join(' ')}\\`;\r\n      console.log(\\`Executing: \\${ghCommand}\\`);\r\n      \r\n      const result = execSync(ghCommand, { \r\n        stdio: 'inherit',\r\n        timeout: 30000 // 30 second timeout\r\n      });\r\n      \r\n    } catch (error) {\r\n      console.error('Error:', error.message);\r\n      process.exit(1);\r\n    } finally {\r\n      // Clean up\r\n      try {\r\n        unlinkSync(tmpFile);\r\n      } catch (e) {\r\n        // Ignore cleanup errors\r\n      }\r\n    }\r\n  } else {\r\n    // No body content, execute normally\r\n    execSync(\\`gh \\${args.join(' ')}\\`, { stdio: 'inherit' });\r\n  }\r\n} else {\r\n  // Other commands, execute normally\r\n  execSync(\\`gh \\${args.join(' ')}\\`, { stdio: 'inherit' });\r\n}\r\n`,\r\n    'checkpoint-hooks.sh': `#!/bin/bash\r\n# Checkpoint hook functions for Claude settings.json\r\n\r\n# Function to handle pre-edit checkpoints\r\npre_edit_checkpoint() {\r\n    local tool_input=\"$1\"\r\n    local file=$(echo \"$tool_input\" | jq -r '.file_path // empty')\r\n    \r\n    if [ -n \"$file\" ]; then\r\n        local checkpoint_branch=\"checkpoint/pre-edit-$(date +%Y%m%d-%H%M%S)\"\r\n        local current_branch=$(git branch --show-current)\r\n        \r\n        # Create checkpoint\r\n        git add -A\r\n        git stash push -m \"Pre-edit checkpoint for $file\" >/dev/null 2>&1\r\n        git branch \"$checkpoint_branch\"\r\n        \r\n        # Store metadata\r\n        mkdir -p .claude/checkpoints\r\n        cat > \".claude/checkpoints/$(date +%s).json\" <<EOF\r\n{\r\n  \"branch\": \"$checkpoint_branch\",\r\n  \"file\": \"$file\",\r\n  \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",\r\n  \"type\": \"pre-edit\",\r\n  \"original_branch\": \"$current_branch\"\r\n}\r\nEOF\r\n        \r\n        # Restore working directory\r\n        git stash pop --quiet >/dev/null 2>&1 || true\r\n        \r\n        echo \"‚úÖ Created checkpoint: $checkpoint_branch for $file\"\r\n    fi\r\n}\r\n\r\n# Function to handle post-edit checkpoints\r\npost_edit_checkpoint() {\r\n    local tool_input=\"$1\"\r\n    local file=$(echo \"$tool_input\" | jq -r '.file_path // empty')\r\n    \r\n    if [ -n \"$file\" ] && [ -f \"$file\" ]; then\r\n        # Check if file was modified - first check if file is tracked\r\n        if ! git ls-files --error-unmatch \"$file\" >/dev/null 2>&1; then\r\n            # File is not tracked, add it first\r\n            git add \"$file\"\r\n        fi\r\n        \r\n        # Now check if there are changes\r\n        if git diff --cached --quiet \"$file\" 2>/dev/null && git diff --quiet \"$file\" 2>/dev/null; then\r\n            echo \"‚ÑπÔ∏è  No changes to checkpoint for $file\"\r\n        else\r\n            local tag_name=\"checkpoint-$(date +%Y%m%d-%H%M%S)\"\r\n            local current_branch=$(git branch --show-current)\r\n            \r\n            # Create commit\r\n            git add \"$file\"\r\n            if git commit -m \"üîñ Checkpoint: Edit $file\r\n\r\nAutomatic checkpoint created by Claude\r\n- File: $file\r\n- Branch: $current_branch\r\n- Timestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\r\n\r\n[Auto-checkpoint]\" --quiet; then\r\n                # Create tag only if commit succeeded\r\n                git tag -a \"$tag_name\" -m \"Checkpoint after editing $file\"\r\n                \r\n                # Store metadata\r\n                mkdir -p .claude/checkpoints\r\n                local diff_stats=$(git diff HEAD~1 --stat | tr '\\\\n' ' ' | sed 's/\"/\\\\\\\\\"/g')\r\n                cat > \".claude/checkpoints/$(date +%s).json\" <<EOF\r\n{\r\n  \"tag\": \"$tag_name\",\r\n  \"file\": \"$file\",\r\n  \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",\r\n  \"type\": \"post-edit\",\r\n  \"branch\": \"$current_branch\",\r\n  \"diff_summary\": \"$diff_stats\"\r\n}\r\nEOF\r\n                \r\n                echo \"‚úÖ Created checkpoint: $tag_name for $file\"\r\n            else\r\n                echo \"‚ÑπÔ∏è  No commit created (no changes or commit failed)\"\r\n            fi\r\n        fi\r\n    fi\r\n}\r\n\r\n# Function to handle task checkpoints\r\ntask_checkpoint() {\r\n    local user_prompt=\"$1\"\r\n    local task=$(echo \"$user_prompt\" | head -c 100 | tr '\\\\n' ' ')\r\n    \r\n    if [ -n \"$task\" ]; then\r\n        local checkpoint_name=\"task-$(date +%Y%m%d-%H%M%S)\"\r\n        \r\n        # Commit current state\r\n        git add -A\r\n        git commit -m \"üîñ Task checkpoint: $task...\" --quiet || true\r\n        \r\n        # No GitHub release in standard version\r\n        \r\n        # Store metadata\r\n        mkdir -p .claude/checkpoints\r\n        cat > \".claude/checkpoints/task-$(date +%s).json\" <<EOF\r\n{\r\n  \"checkpoint\": \"$checkpoint_name\",\r\n  \"task\": \"$task\",\r\n  \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",\r\n  \"commit\": \"$(git rev-parse HEAD)\"\r\n}\r\nEOF\r\n        \r\n        echo \"‚úÖ Created task checkpoint: $checkpoint_name\"\r\n    fi\r\n}\r\n\r\n# Function to handle session end\r\nsession_end_checkpoint() {\r\n    local session_id=\"session-$(date +%Y%m%d-%H%M%S)\"\r\n    local summary_file=\".claude/checkpoints/summary-$session_id.md\"\r\n    \r\n    mkdir -p .claude/checkpoints\r\n    \r\n    # Create summary\r\n    cat > \"$summary_file\" <<EOF\r\n# Session Summary - $(date +'%Y-%m-%d %H:%M:%S')\r\n\r\n## Checkpoints Created\r\n$(find .claude/checkpoints -name '*.json' -mtime -1 -exec basename {} \\\\; | sort)\r\n\r\n## Files Modified\r\n$(git diff --name-only $(git log --format=%H -n 1 --before=\"1 hour ago\" 2>/dev/null) 2>/dev/null || echo \"No files tracked\")\r\n\r\n## Recent Commits\r\n$(git log --oneline -10 --grep=\"Checkpoint\" || echo \"No checkpoint commits\")\r\n\r\n## Rollback Instructions\r\nTo rollback to a specific checkpoint:\r\n\\\\\\`\\\\\\`\\\\\\`bash\r\n# List all checkpoints\r\ngit tag -l 'checkpoint-*' | sort -r\r\n\r\n# Rollback to a checkpoint\r\ngit checkout checkpoint-YYYYMMDD-HHMMSS\r\n\r\n# Or reset to a checkpoint (destructive)\r\ngit reset --hard checkpoint-YYYYMMDD-HHMMSS\r\n\\\\\\`\\\\\\`\\\\\\`\r\nEOF\r\n    \r\n    # Create final checkpoint\r\n    git add -A\r\n    git commit -m \"üèÅ Session end checkpoint: $session_id\" --quiet || true\r\n    git tag -a \"session-end-$session_id\" -m \"End of Claude session\"\r\n    \r\n    echo \"‚úÖ Session summary saved to: $summary_file\"\r\n    echo \"üìå Final checkpoint: session-end-$session_id\"\r\n}\r\n\r\n# Main entry point\r\ncase \"$1\" in\r\n    pre-edit)\r\n        pre_edit_checkpoint \"$2\"\r\n        ;;\r\n    post-edit)\r\n        post_edit_checkpoint \"$2\"\r\n        ;;\r\n    task)\r\n        task_checkpoint \"$2\"\r\n        ;;\r\n    session-end)\r\n        session_end_checkpoint\r\n        ;;\r\n    *)\r\n        echo \"Usage: $0 {pre-edit|post-edit|task|session-end} [input]\"\r\n        exit 1\r\n        ;;\r\nesac\r\n`,\r\n    'checkpoint-manager.sh': `#!/bin/bash\r\n# Claude Checkpoint Manager\r\n# Provides easy rollback and management of Claude Code checkpoints\r\n\r\nset -e\r\n\r\n# Colors\r\nRED='\\\\033[0;31m'\r\nGREEN='\\\\033[0;32m'\r\nYELLOW='\\\\033[1;33m'\r\nBLUE='\\\\033[0;34m'\r\nNC='\\\\033[0m' # No Color\r\n\r\n# Configuration\r\nCHECKPOINT_DIR=\".claude/checkpoints\"\r\nBACKUP_DIR=\".claude/backups\"\r\n\r\n# Help function\r\nshow_help() {\r\n    cat << EOF\r\nClaude Checkpoint Manager\r\n========================\r\n\r\nUsage: $0 <command> [options]\r\n\r\nCommands:\r\n  list              List all checkpoints\r\n  show <id>         Show details of a specific checkpoint\r\n  rollback <id>     Rollback to a specific checkpoint\r\n  diff <id>         Show diff since checkpoint\r\n  clean             Clean old checkpoints (older than 7 days)\r\n  summary           Show session summary\r\n  \r\nOptions:\r\n  --hard            For rollback: use git reset --hard (destructive)\r\n  --soft            For rollback: use git reset --soft (default)\r\n  --branch          For rollback: create new branch from checkpoint\r\n\r\nExamples:\r\n  $0 list\r\n  $0 show checkpoint-20240130-143022\r\n  $0 rollback checkpoint-20240130-143022 --branch\r\n  $0 diff session-end-session-20240130-150000\r\nEOF\r\n}\r\n\r\n# List all checkpoints\r\nfunction list_checkpoints() {\r\n    echo -e \"\\${BLUE}üìã Available Checkpoints:\\${NC}\"\r\n    echo \"\"\r\n    \r\n    # List checkpoint tags\r\n    echo -e \"\\${YELLOW}Git Tags:\\${NC}\"\r\n    local tags=$(git tag -l 'checkpoint-*' -l 'session-end-*' -l 'task-*' --sort=-creatordate | head -20)\r\n    if [ -n \"$tags\" ]; then\r\n        echo \"$tags\"\r\n    else\r\n        echo \"No checkpoint tags found\"\r\n    fi\r\n    \r\n    echo \"\"\r\n    \r\n    # List checkpoint branches\r\n    echo -e \"\\${YELLOW}Checkpoint Branches:\\${NC}\"\r\n    local branches=$(git branch -a | grep \"checkpoint/\" | sed 's/^[ *]*//')\r\n    if [ -n \"$branches\" ]; then\r\n        echo \"$branches\"\r\n    else\r\n        echo \"No checkpoint branches found\"\r\n    fi\r\n    \r\n    echo \"\"\r\n    \r\n    # List checkpoint files\r\n    if [ -d \"$CHECKPOINT_DIR\" ]; then\r\n        echo -e \"\\${YELLOW}Recent Checkpoint Files:\\${NC}\"\r\n        find \"$CHECKPOINT_DIR\" -name \"*.json\" -type f -printf \"%T@ %p\\\\n\" | \\\\\r\n            sort -rn | head -10 | cut -d' ' -f2- | xargs -I {} basename {}\r\n    fi\r\n}\r\n\r\n# Show checkpoint details\r\nfunction show_checkpoint() {\r\n    local checkpoint_id=\"$1\"\r\n    \r\n    echo -e \"\\${BLUE}üìç Checkpoint Details: $checkpoint_id\\${NC}\"\r\n    echo \"\"\r\n    \r\n    # Check if it's a tag\r\n    if git tag -l \"$checkpoint_id\" | grep -q \"$checkpoint_id\"; then\r\n        echo -e \"\\${YELLOW}Type:\\${NC} Git Tag\"\r\n        echo -e \"\\${YELLOW}Commit:\\${NC} $(git rev-list -n 1 \"$checkpoint_id\")\"\r\n        echo -e \"\\${YELLOW}Date:\\${NC} $(git log -1 --format=%ai \"$checkpoint_id\")\"\r\n        echo -e \"\\${YELLOW}Message:\\${NC}\"\r\n        git log -1 --format=%B \"$checkpoint_id\" | sed 's/^/  /'\r\n        echo \"\"\r\n        echo -e \"\\${YELLOW}Files changed:\\${NC}\"\r\n        git diff-tree --no-commit-id --name-status -r \"$checkpoint_id\" | sed 's/^/  /'\r\n    # Check if it's a branch\r\n    elif git branch -a | grep -q \"$checkpoint_id\"; then\r\n        echo -e \"\\${YELLOW}Type:\\${NC} Git Branch\"\r\n        echo -e \"\\${YELLOW}Latest commit:\\${NC}\"\r\n        git log -1 --oneline \"$checkpoint_id\"\r\n    else\r\n        echo -e \"\\${RED}‚ùå Checkpoint not found: $checkpoint_id\\${NC}\"\r\n        exit 1\r\n    fi\r\n}\r\n\r\n# Rollback to checkpoint\r\nfunction rollback_checkpoint() {\r\n    local checkpoint_id=\"$1\"\r\n    local mode=\"$2\"\r\n    \r\n    echo -e \"\\${YELLOW}üîÑ Rolling back to checkpoint: $checkpoint_id\\${NC}\"\r\n    echo \"\"\r\n    \r\n    # Verify checkpoint exists\r\n    if ! git tag -l \"$checkpoint_id\" | grep -q \"$checkpoint_id\" && \\\\\r\n       ! git branch -a | grep -q \"$checkpoint_id\"; then\r\n        echo -e \"\\${RED}‚ùå Checkpoint not found: $checkpoint_id\\${NC}\"\r\n        exit 1\r\n    fi\r\n    \r\n    # Create backup before rollback\r\n    local backup_name=\"backup-$(date +%Y%m%d-%H%M%S)\"\r\n    echo \"Creating backup: $backup_name\"\r\n    git tag \"$backup_name\" -m \"Backup before rollback to $checkpoint_id\"\r\n    \r\n    case \"$mode\" in\r\n        \"--hard\")\r\n            echo -e \"\\${RED}‚ö†Ô∏è  Performing hard reset (destructive)\\${NC}\"\r\n            git reset --hard \"$checkpoint_id\"\r\n            echo -e \"\\${GREEN}‚úÖ Rolled back to $checkpoint_id (hard reset)\\${NC}\"\r\n            ;;\r\n        \"--branch\")\r\n            local branch_name=\"rollback-$checkpoint_id-$(date +%Y%m%d-%H%M%S)\"\r\n            echo \"Creating new branch: $branch_name\"\r\n            git checkout -b \"$branch_name\" \"$checkpoint_id\"\r\n            echo -e \"\\${GREEN}‚úÖ Created branch $branch_name from $checkpoint_id\\${NC}\"\r\n            ;;\r\n        \"--stash\"|*)\r\n            echo \"Stashing current changes...\"\r\n            git stash push -m \"Stash before rollback to $checkpoint_id\"\r\n            git reset --soft \"$checkpoint_id\"\r\n            echo -e \"\\${GREEN}‚úÖ Rolled back to $checkpoint_id (soft reset)\\${NC}\"\r\n            echo \"Your changes are stashed. Use 'git stash pop' to restore them.\"\r\n            ;;\r\n    esac\r\n}\r\n\r\n# Show diff since checkpoint\r\nfunction diff_checkpoint() {\r\n    local checkpoint_id=\"$1\"\r\n    \r\n    echo -e \"\\${BLUE}üìä Changes since checkpoint: $checkpoint_id\\${NC}\"\r\n    echo \"\"\r\n    \r\n    if git tag -l \"$checkpoint_id\" | grep -q \"$checkpoint_id\"; then\r\n        git diff \"$checkpoint_id\"\r\n    elif git branch -a | grep -q \"$checkpoint_id\"; then\r\n        git diff \"$checkpoint_id\"\r\n    else\r\n        echo -e \"\\${RED}‚ùå Checkpoint not found: $checkpoint_id\\${NC}\"\r\n        exit 1\r\n    fi\r\n}\r\n\r\n# Clean old checkpoints\r\nfunction clean_checkpoints() {\r\n    local days=\\${1:-7}\r\n    \r\n    echo -e \"\\${YELLOW}üßπ Cleaning checkpoints older than $days days...\\${NC}\"\r\n    echo \"\"\r\n    \r\n    # Clean old checkpoint files\r\n    if [ -d \"$CHECKPOINT_DIR\" ]; then\r\n        find \"$CHECKPOINT_DIR\" -name \"*.json\" -type f -mtime +$days -delete\r\n        echo \"‚úÖ Cleaned old checkpoint files\"\r\n    fi\r\n    \r\n    # List old tags (but don't delete automatically)\r\n    echo \"\"\r\n    echo \"Old checkpoint tags (manual deletion required):\"\r\n    git tag -l 'checkpoint-*' --sort=-creatordate | tail -n +50 || echo \"No old tags found\"\r\n}\r\n\r\n# Show session summary\r\nfunction show_summary() {\r\n    echo -e \"\\${BLUE}üìä Session Summary\\${NC}\"\r\n    echo \"\"\r\n    \r\n    # Find most recent session summary\r\n    if [ -d \"$CHECKPOINT_DIR\" ]; then\r\n        local latest_summary=$(find \"$CHECKPOINT_DIR\" -name \"summary-*.md\" -type f -printf \"%T@ %p\\\\n\" | \\\\\r\n            sort -rn | head -1 | cut -d' ' -f2-)\r\n        \r\n        if [ -n \"$latest_summary\" ]; then\r\n            echo -e \"\\${YELLOW}Latest session summary:\\${NC}\"\r\n            cat \"$latest_summary\"\r\n        else\r\n            echo \"No session summaries found\"\r\n        fi\r\n    fi\r\n}\r\n\r\n# Main command handling\r\ncase \"$1\" in\r\n    list)\r\n        list_checkpoints\r\n        ;;\r\n    show)\r\n        if [ -z \"$2\" ]; then\r\n            echo -e \"\\${RED}Error: Please specify a checkpoint ID\\${NC}\"\r\n            show_help\r\n            exit 1\r\n        fi\r\n        show_checkpoint \"$2\"\r\n        ;;\r\n    rollback)\r\n        if [ -z \"$2\" ]; then\r\n            echo -e \"\\${RED}Error: Please specify a checkpoint ID\\${NC}\"\r\n            show_help\r\n            exit 1\r\n        fi\r\n        rollback_checkpoint \"$2\" \"$3\"\r\n        ;;\r\n    diff)\r\n        if [ -z \"$2\" ]; then\r\n            echo -e \"\\${RED}Error: Please specify a checkpoint ID\\${NC}\"\r\n            show_help\r\n            exit 1\r\n        fi\r\n        diff_checkpoint \"$2\"\r\n        ;;\r\n    clean)\r\n        clean_checkpoints \"$2\"\r\n        ;;\r\n    summary)\r\n        show_summary\r\n        ;;\r\n    help|--help|-h)\r\n        show_help\r\n        ;;\r\n    *)\r\n        echo -e \"\\${RED}Error: Unknown command: $1\\${NC}\"\r\n        echo \"\"\r\n        show_help\r\n        exit 1\r\n        ;;\r\nesac\r\n`,\r\n    'standard-checkpoint-hooks.sh': `#!/bin/bash\r\n# Standard checkpoint hook functions for Claude settings.json (without GitHub features)\r\n\r\n# Function to handle pre-edit checkpoints\r\npre_edit_checkpoint() {\r\n    local tool_input=\"$1\"\r\n    local file=$(echo \"$tool_input\" | jq -r '.file_path // empty')\r\n    \r\n    if [ -n \"$file\" ]; then\r\n        local checkpoint_branch=\"checkpoint/pre-edit-$(date +%Y%m%d-%H%M%S)\"\r\n        local current_branch=$(git branch --show-current)\r\n        \r\n        # Create checkpoint\r\n        git add -A\r\n        git stash push -m \"Pre-edit checkpoint for $file\" >/dev/null 2>&1\r\n        git branch \"$checkpoint_branch\"\r\n        \r\n        # Store metadata\r\n        mkdir -p .claude/checkpoints\r\n        cat > \".claude/checkpoints/$(date +%s).json\" <<EOF\r\n{\r\n  \"branch\": \"$checkpoint_branch\",\r\n  \"file\": \"$file\",\r\n  \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",\r\n  \"type\": \"pre-edit\",\r\n  \"original_branch\": \"$current_branch\"\r\n}\r\nEOF\r\n        \r\n        # Restore working directory\r\n        git stash pop --quiet >/dev/null 2>&1 || true\r\n        \r\n        echo \"‚úÖ Created checkpoint: $checkpoint_branch for $file\"\r\n    fi\r\n}\r\n\r\n# Function to handle post-edit checkpoints\r\npost_edit_checkpoint() {\r\n    local tool_input=\"$1\"\r\n    local file=$(echo \"$tool_input\" | jq -r '.file_path // empty')\r\n    \r\n    if [ -n \"$file\" ] && [ -f \"$file\" ]; then\r\n        # Check if file was modified - first check if file is tracked\r\n        if ! git ls-files --error-unmatch \"$file\" >/dev/null 2>&1; then\r\n            # File is not tracked, add it first\r\n            git add \"$file\"\r\n        fi\r\n        \r\n        # Now check if there are changes\r\n        if git diff --cached --quiet \"$file\" 2>/dev/null && git diff --quiet \"$file\" 2>/dev/null; then\r\n            echo \"‚ÑπÔ∏è  No changes to checkpoint for $file\"\r\n        else\r\n            local tag_name=\"checkpoint-$(date +%Y%m%d-%H%M%S)\"\r\n            local current_branch=$(git branch --show-current)\r\n            \r\n            # Create commit\r\n            git add \"$file\"\r\n            if git commit -m \"üîñ Checkpoint: Edit $file\r\n\r\nAutomatic checkpoint created by Claude\r\n- File: $file\r\n- Branch: $current_branch\r\n- Timestamp: $(date -u +%Y-%m-%dT%H:%M:%SZ)\r\n\r\n[Auto-checkpoint]\" --quiet; then\r\n                # Create tag only if commit succeeded\r\n                git tag -a \"$tag_name\" -m \"Checkpoint after editing $file\"\r\n                \r\n                # Store metadata\r\n                mkdir -p .claude/checkpoints\r\n                local diff_stats=$(git diff HEAD~1 --stat | tr '\\\\n' ' ' | sed 's/\"/\\\\\"/g')\r\n                cat > \".claude/checkpoints/$(date +%s).json\" <<EOF\r\n{\r\n  \"tag\": \"$tag_name\",\r\n  \"file\": \"$file\",\r\n  \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",\r\n  \"type\": \"post-edit\",\r\n  \"branch\": \"$current_branch\",\r\n  \"diff_summary\": \"$diff_stats\"\r\n}\r\nEOF\r\n                \r\n                echo \"‚úÖ Created checkpoint: $tag_name for $file\"\r\n            else\r\n                echo \"‚ÑπÔ∏è  No commit created (no changes or commit failed)\"\r\n            fi\r\n        fi\r\n    fi\r\n}\r\n\r\n# Function to handle task checkpoints\r\ntask_checkpoint() {\r\n    local user_prompt=\"$1\"\r\n    local task=$(echo \"$user_prompt\" | head -c 100 | tr '\\\\n' ' ')\r\n    \r\n    if [ -n \"$task\" ]; then\r\n        local checkpoint_name=\"task-$(date +%Y%m%d-%H%M%S)\"\r\n        \r\n        # Commit current state\r\n        git add -A\r\n        git commit -m \"üîñ Task checkpoint: $task...\" --quiet || true\r\n        \r\n        # Store metadata\r\n        mkdir -p .claude/checkpoints\r\n        cat > \".claude/checkpoints/task-$(date +%s).json\" <<EOF\r\n{\r\n  \"checkpoint\": \"$checkpoint_name\",\r\n  \"task\": \"$task\",\r\n  \"timestamp\": \"$(date -u +%Y-%m-%dT%H:%M:%SZ)\",\r\n  \"commit\": \"$(git rev-parse HEAD)\"\r\n}\r\nEOF\r\n        \r\n        echo \"‚úÖ Created task checkpoint: $checkpoint_name\"\r\n    fi\r\n}\r\n\r\n# Function to handle session end\r\nsession_end_checkpoint() {\r\n    local session_id=\"session-$(date +%Y%m%d-%H%M%S)\"\r\n    local summary_file=\".claude/checkpoints/summary-$session_id.md\"\r\n    \r\n    mkdir -p .claude/checkpoints\r\n    \r\n    # Create summary\r\n    cat > \"$summary_file\" <<EOF\r\n# Session Summary - $(date +'%Y-%m-%d %H:%M:%S')\r\n\r\n## Checkpoints Created\r\n$(find .claude/checkpoints -name '*.json' -mtime -1 -exec basename {} \\\\; | sort)\r\n\r\n## Files Modified\r\n$(git diff --name-only $(git log --format=%H -n 1 --before=\"1 hour ago\" 2>/dev/null) 2>/dev/null || echo \"No files tracked\")\r\n\r\n## Recent Commits\r\n$(git log --oneline -10 --grep=\"Checkpoint\" || echo \"No checkpoint commits\")\r\n\r\n## Rollback Instructions\r\nTo rollback to a specific checkpoint:\r\n\\\\\\`\\\\\\`\\\\\\`bash\r\n# List all checkpoints\r\ngit tag -l 'checkpoint-*' | sort -r\r\n\r\n# Rollback to a checkpoint\r\ngit checkout checkpoint-YYYYMMDD-HHMMSS\r\n\r\n# Or reset to a checkpoint (destructive)\r\ngit reset --hard checkpoint-YYYYMMDD-HHMMSS\r\n\\\\\\`\\\\\\`\\\\\\`\r\nEOF\r\n    \r\n    # Create final checkpoint\r\n    git add -A\r\n    git commit -m \"üèÅ Session end checkpoint: $session_id\" --quiet || true\r\n    git tag -a \"session-end-$session_id\" -m \"End of Claude session\"\r\n    \r\n    echo \"‚úÖ Session summary saved to: $summary_file\"\r\n    echo \"üìå Final checkpoint: session-end-$session_id\"\r\n}\r\n\r\n# Main entry point\r\ncase \"$1\" in\r\n    pre-edit)\r\n        pre_edit_checkpoint \"$2\"\r\n        ;;\r\n    post-edit)\r\n        post_edit_checkpoint \"$2\"\r\n        ;;\r\n    task)\r\n        task_checkpoint \"$2\"\r\n        ;;\r\n    session-end)\r\n        session_end_checkpoint\r\n        ;;\r\n    *)\r\n        echo \"Usage: $0 {pre-edit|post-edit|task|session-end} [input]\"\r\n        exit 1\r\n        ;;\r\nesac\r\n`,\r\n  };\r\n\r\n  return scripts[name] || '';\r\n}\r\n\r\n// Wrapper script fallbacks\r\nfunction createWrapperScriptFallback(type) {\r\n  if (type === 'unix') {\r\n    // Return the universal ES module compatible wrapper\r\n    return `#!/usr/bin/env node\r\n\r\n/**\r\n * Claude Flow CLI - Universal Wrapper\r\n * Works in both CommonJS and ES Module projects\r\n */\r\n\r\n// Use dynamic import to work in both CommonJS and ES modules\r\n(async () => {\r\n  const { spawn } = await import('child_process');\r\n  const { resolve } = await import('path');\r\n  const { fileURLToPath } = await import('url');\r\n  \r\n  try {\r\n    // Try to use import.meta.url (ES modules)\r\n    const __filename = fileURLToPath(import.meta.url);\r\n    const __dirname = resolve(__filename, '..');\r\n  } catch {\r\n    // Fallback for CommonJS\r\n  }\r\n\r\n  // Try multiple strategies to find claude-flow\r\n  const strategies = [\r\n    // 1. Local node_modules\r\n    async () => {\r\n      try {\r\n        const localPath = resolve(process.cwd(), 'node_modules/.bin/claude-flow');\r\n        const { existsSync } = await import('fs');\r\n        if (existsSync(localPath)) {\r\n          return spawn(localPath, process.argv.slice(2), { stdio: 'inherit' });\r\n        }\r\n      } catch {}\r\n    },\r\n    \r\n    // 2. Parent node_modules (monorepo)\r\n    async () => {\r\n      try {\r\n        const parentPath = resolve(process.cwd(), '../node_modules/.bin/claude-flow');\r\n        const { existsSync } = await import('fs');\r\n        if (existsSync(parentPath)) {\r\n          return spawn(parentPath, process.argv.slice(2), { stdio: 'inherit' });\r\n        }\r\n      } catch {}\r\n    },\r\n    \r\n    // 3. NPX with latest alpha version (prioritized over global)\r\n    async () => {\r\n      return spawn('npx', ['claude-flow@2.0.0-alpha.25', ...process.argv.slice(2)], { stdio: 'inherit' });\r\n    }\r\n  ];\r\n\r\n  // Try each strategy\r\n  for (const strategy of strategies) {\r\n    try {\r\n      const child = await strategy();\r\n      if (child) {\r\n        child.on('exit', (code) => process.exit(code || 0));\r\n        child.on('error', (err) => {\r\n          if (err.code !== 'ENOENT') {\r\n            console.error('Error:', err);\r\n            process.exit(1);\r\n          }\r\n        });\r\n        return;\r\n      }\r\n    } catch {}\r\n  }\r\n  \r\n  console.error('Could not find claude-flow. Please install it with: npm install claude-flow');\r\n  process.exit(1);\r\n})();`;\r\n  } else if (type === 'windows') {\r\n    return `@echo off\r\nrem Claude Flow wrapper script for Windows\r\n\r\nrem Check if package.json exists in current directory\r\nif exist \"%~dp0package.json\" (\r\n    rem Local development mode\r\n    if exist \"%~dp0src\\\\cli\\\\simple-cli.js\" (\r\n        node \"%~dp0src\\\\cli\\\\simple-cli.js\" %*\r\n    ) else if exist \"%~dp0dist\\\\cli.js\" (\r\n        node \"%~dp0dist\\\\cli.js\" %*\r\n    ) else (\r\n        echo Error: Could not find Claude Flow CLI files\r\n        exit /b 1\r\n    )\r\n) else (\r\n    rem Production mode - use npx alpha\r\n    npx claude-flow@alpha %*\r\n)`;\r\n  } else if (type === 'powershell') {\r\n    return `# Claude Flow wrapper script for PowerShell\r\n\r\n$scriptPath = Split-Path -Parent $MyInvocation.MyCommand.Path\r\n\r\nif (Test-Path \"$scriptPath\\\\package.json\") {\r\n    # Local development mode\r\n    if (Test-Path \"$scriptPath\\\\src\\\\cli\\\\simple-cli.js\") {\r\n        & node \"$scriptPath\\\\src\\\\cli\\\\simple-cli.js\" $args\r\n    } elseif (Test-Path \"$scriptPath\\\\dist\\\\cli.js\") {\r\n        & node \"$scriptPath\\\\dist\\\\cli.js\" $args\r\n    } else {\r\n        Write-Error \"Could not find Claude Flow CLI files\"\r\n        exit 1\r\n    }\r\n} else {\r\n    # Production mode - use npx alpha\r\n    & npx claude-flow@alpha $args\r\n}`;\r\n  }\r\n  return '';\r\n}\r\n\r\n// Fallback functions for when templates can't be loaded\r\nfunction createEnhancedClaudeMdFallback() {\r\n  // Read from the actual template file we created\r\n  try {\r\n    return readFileSync(join(__dirname, 'CLAUDE.md'), 'utf8');\r\n  } catch (error) {\r\n    // If that fails, return a minimal version\r\n    return `# Claude Code Configuration for Claude Flow\r\n\r\n## üöÄ IMPORTANT: Claude Flow AI-Driven Development\r\n\r\n### Claude Code Handles:\r\n- ‚úÖ **ALL file operations** (Read, Write, Edit, MultiEdit)\r\n- ‚úÖ **ALL code generation** and development tasks\r\n- ‚úÖ **ALL bash commands** and system operations\r\n- ‚úÖ **ALL actual implementation** work\r\n- ‚úÖ **Project navigation** and code analysis\r\n\r\n### Claude Flow MCP Tools Handle:\r\n- üß† **Coordination only** - Orchestrating Claude Code's actions\r\n- üíæ **Memory management** - Persistent state across sessions\r\n- ü§ñ **Neural features** - Cognitive patterns and learning\r\n- üìä **Performance tracking** - Monitoring and metrics\r\n- üêù **Swarm orchestration** - Multi-agent coordination\r\n- üîó **GitHub integration** - Advanced repository management\r\n\r\n### ‚ö†Ô∏è Key Principle:\r\n**MCP tools DO NOT create content or write code.** They coordinate and enhance Claude Code's native capabilities.\r\n\r\n## Quick Start\r\n\r\n1. Add MCP server: \\`claude mcp add claude-flow npx claude-flow mcp start\\`\r\n2. Initialize swarm: \\`mcp__claude-flow__swarm_init { topology: \"hierarchical\" }\\`\r\n3. Spawn agents: \\`mcp__claude-flow__agent_spawn { type: \"coder\" }\\`\r\n4. Orchestrate: \\`mcp__claude-flow__task_orchestrate { task: \"Build feature\" }\\`\r\n\r\nSee full documentation in \\`.claude/commands/\\`\r\n`;\r\n  }\r\n}\r\n\r\nfunction createEnhancedSettingsJsonFallback() {\r\n  return JSON.stringify(\r\n    {\r\n      env: {\r\n        CLAUDE_FLOW_AUTO_COMMIT: 'false',\r\n        CLAUDE_FLOW_AUTO_PUSH: 'false',\r\n        CLAUDE_FLOW_HOOKS_ENABLED: 'true',\r\n        CLAUDE_FLOW_TELEMETRY_ENABLED: 'true',\r\n        CLAUDE_FLOW_REMOTE_EXECUTION: 'true',\r\n        CLAUDE_FLOW_CHECKPOINTS_ENABLED: 'true',\r\n      },\r\n      permissions: {\r\n        allow: [\r\n          'Bash(npx claude-flow:*)',\r\n          'Bash(npm run lint)',\r\n          'Bash(npm run test:*)',\r\n          'Bash(npm test:*)',\r\n          'Bash(git status)',\r\n          'Bash(git diff:*)',\r\n          'Bash(git log:*)',\r\n          'Bash(git add:*)',\r\n          'Bash(git commit:*)',\r\n          'Bash(git push)',\r\n          'Bash(git config:*)',\r\n          'Bash(git tag:*)',\r\n          'Bash(git branch:*)',\r\n          'Bash(git checkout:*)',\r\n          'Bash(git stash:*)',\r\n          'Bash(node:*)',\r\n          'Bash(which:*)',\r\n          'Bash(pwd)',\r\n          'Bash(ls:*)',\r\n          'Bash(jq:*)',\r\n        ],\r\n        deny: ['Bash(rm -rf /)'],\r\n      },\r\n      enabledMcpjsonServers: ['claude-flow', 'ruv-swarm'],\r\n      hooks: {\r\n        PreToolUse: [\r\n          {\r\n            matcher: 'Bash',\r\n            hooks: [\r\n              {\r\n                type: 'command',\r\n                command:\r\n                  'cat | jq -r \\'.tool_input.command // \"\"\\' | xargs -I {} npx claude-flow@alpha hooks pre-command --command \"{}\" --validate-safety true --prepare-resources true',\r\n              },\r\n            ],\r\n          },\r\n          {\r\n            matcher: 'Write|Edit|MultiEdit',\r\n            hooks: [\r\n              {\r\n                type: 'command',\r\n                command:\r\n                  'cat | jq -r \\'.tool_input.file_path // .tool_input.path // \"\"\\' | xargs -I {} npx claude-flow@alpha hooks pre-edit --file \"{}\" --auto-assign-agents true --load-context true',\r\n              },\r\n              {\r\n                type: 'command',\r\n                command: './.claude/helpers/standard-checkpoint-hooks.sh pre-edit \"{{tool_input}}\"',\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n        PostToolUse: [\r\n          {\r\n            matcher: 'Bash',\r\n            hooks: [\r\n              {\r\n                type: 'command',\r\n                command:\r\n                  'cat | jq -r \\'.tool_input.command // \"\"\\' | xargs -I {} npx claude-flow@alpha hooks post-command --command \"{}\" --track-metrics true --store-results true',\r\n              },\r\n            ],\r\n          },\r\n          {\r\n            matcher: 'Write|Edit|MultiEdit',\r\n            hooks: [\r\n              {\r\n                type: 'command',\r\n                command:\r\n                  'cat | jq -r \\'.tool_input.file_path // .tool_input.path // \"\"\\' | xargs -I {} npx claude-flow@alpha hooks post-edit --file \"{}\" --format true --update-memory true --train-neural true',\r\n              },\r\n              {\r\n                type: 'command',\r\n                command: './.claude/helpers/standard-checkpoint-hooks.sh post-edit \"{{tool_input}}\"',\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n        UserPromptSubmit: [\r\n          {\r\n            hooks: [\r\n              {\r\n                type: 'command',\r\n                command: './.claude/helpers/standard-checkpoint-hooks.sh task \"{{user_prompt}}\"',\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n        Stop: [\r\n          {\r\n            hooks: [\r\n              {\r\n                type: 'command',\r\n                command:\r\n                  '/usr/bin/env bash -c \\'if command -v npx >/dev/null 2>&1; then npx claude-flow@alpha hooks session-end --generate-summary true --persist-state true --export-metrics true; else echo \"‚ö†Ô∏è  npx not available, skipping Claude Flow session-end hook\"; fi\\'',\r\n              },\r\n              {\r\n                type: 'command',\r\n                command: '/usr/bin/env bash -c \\'if [ -f ./.claude/helpers/standard-checkpoint-hooks.sh ]; then ./.claude/helpers/standard-checkpoint-hooks.sh session-end; else echo \"‚ö†Ô∏è  Checkpoint hooks not found\"; fi\\'',\r\n              },\r\n            ],\r\n          },\r\n        ],\r\n      },\r\n      includeCoAuthoredBy: true,\r\n      statusLine: {\r\n        type: 'command',\r\n        command: '.claude/statusline-command.sh',\r\n      },\r\n    },\r\n    null,\r\n    2,\r\n  );\r\n}\r\n"],"names":["readFileSync","dirname","join","fileURLToPath","__dirname","url","loadTemplate","filename","error","createEnhancedClaudeMd","template","createEnhancedClaudeMdFallback","createEnhancedSettingsJson","createEnhancedSettingsJsonFallback","createWrapperScript","type","universalTemplate","createWrapperScriptFallback","createCommandDoc","category","command","createCommandDocFallback","docs","analysis","automation","coordination","github","hooks","memory","monitoring","optimization","training","workflows","swarm","agents","COMMAND_STRUCTURE","createHelperScript","name","scripts","JSON","stringify","env","CLAUDE_FLOW_AUTO_COMMIT","CLAUDE_FLOW_AUTO_PUSH","CLAUDE_FLOW_HOOKS_ENABLED","CLAUDE_FLOW_TELEMETRY_ENABLED","CLAUDE_FLOW_REMOTE_EXECUTION","CLAUDE_FLOW_CHECKPOINTS_ENABLED","permissions","allow","deny","enabledMcpjsonServers","PreToolUse","matcher","PostToolUse","UserPromptSubmit","Stop","includeCoAuthoredBy","statusLine"],"mappings":"AACA,SAASA,YAAY,QAAQ,KAAK;AAClC,SAASC,OAAO,EAAEC,IAAI,QAAQ,OAAO;AACrC,SAASC,aAAa,QAAQ,MAAM;AAEpC,MAAMC,YAAYH,QAAQE,cAAc,YAAYE,GAAG;AAGvD,MAAMC,eAAe,CAACC;IACpB,IAAI;QACF,OAAOP,aAAaE,KAAKE,WAAWG,WAAW;IACjD,EAAE,OAAOC,OAAO;QAGd,OAAO;IACT;AACF;AAEA,OAAO,SAASC;IACd,MAAMC,WAAWJ,aAAa;IAC9B,IAAI,CAACI,UAAU;QAEb,OAAOC;IACT;IACA,OAAOD;AACT;AAEA,OAAO,SAASE;IACd,MAAMF,WAAWJ,aAAa;IAC9B,IAAI,CAACI,UAAU;QACb,OAAOG;IACT;IACA,OAAOH;AACT;AAEA,OAAO,SAASI,oBAAoBC,OAAO,MAAM;IAE/C,IAAIA,SAAS,QAAQ;QACnB,MAAMC,oBAAoBV,aAAa;QACvC,IAAIU,mBAAmB;YACrB,OAAOA;QACT;IACF;IAEA,MAAMT,WACJQ,SAAS,SAAS,gBAAgBA,SAAS,YAAY,oBAAoB;IAE7E,MAAML,WAAWJ,aAAaC;IAC9B,IAAI,CAACG,UAAU;QACb,OAAOO,4BAA4BF;IACrC;IACA,OAAOL;AACT;AAEA,OAAO,SAASQ,iBAAiBC,QAAQ,EAAEC,OAAO;IAChD,MAAMV,WAAWJ,aAAa,CAAC,SAAS,EAAEa,SAAS,CAAC,EAAEC,QAAQ,GAAG,CAAC;IAClE,IAAI,CAACV,UAAU;QAEb,OAAOW,yBAAyBF,UAAUC;IAC5C;IACA,OAAOV;AACT;AAGA,SAASW,yBAAyBF,QAAQ,EAAEC,OAAO;IACjD,MAAME,OAAO;QACXC,UAAU;YACR,qBAAqB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB5B,CAAC;YACK,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBtB,CAAC;YACK,sBAAsB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB7B,CAAC;QACG;QACAC,YAAY;YACV,cAAc,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBrB,CAAC;YACK,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBtB,CAAC;YACK,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB1B,CAAC;QACG;QACAC,cAAc;YACZ,cAAc,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBrB,CAAC;YACK,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBtB,CAAC;YACK,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB3B,CAAC;QACG;QACAC,QAAQ;YACN,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBvB,CAAC;YACK,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBvB,CAAC;YACK,cAAc,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BrB,CAAC;YACK,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBvB,CAAC;YACK,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBtB,CAAC;QACG;QACAC,OAAO;YACL,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBnB,CAAC;YACK,aAAa,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBpB,CAAC;YACK,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBnB,CAAC;YACK,aAAa,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBpB,CAAC;YACK,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBtB,CAAC;QACG;QACAC,QAAQ;YACN,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBvB,CAAC;YACK,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBzB,CAAC;YACK,iBAAiB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBxB,CAAC;QACG;QACAC,YAAY;YACV,iBAAiB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBxB,CAAC;YACK,iBAAiB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBxB,CAAC;YACK,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBzB,CAAC;QACG;QACAC,cAAc;YACZ,qBAAqB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB5B,CAAC;YACK,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB3B,CAAC;YACK,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBvB,CAAC;QACG;QACAC,UAAU;YACR,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBvB,CAAC;YACK,iBAAiB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBxB,CAAC;YACK,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyBvB,CAAC;QACG;QACAC,WAAW;YACT,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB1B,CAAC;YACK,oBAAoB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB3B,CAAC;YACK,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;AAyB1B,CAAC;QACG;QACAC,OAAO;YACL,SAAS,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BhB,CAAC;YACK,cAAc,CAAC;;;;;;;;;;;;;;;;;;;AAmBrB,CAAC;YACK,eAAe,CAAC;;;;;;;;;;;;;;;;;;;AAmBtB,CAAC;QACG;QACA,aAAa;YACX,aAAa,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BpB,CAAC;YACK,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;AAkBzB,CAAC;YACK,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;AAqB1B,CAAC;QACG;QACAC,QAAQ;YACN,eAAe,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BtB,CAAC;YACK,sBAAsB,CAAC;;;;;;;;;;;;;;;;;;;;;AAqB7B,CAAC;YACK,sBAAsB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4B7B,CAAC;YACK,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BzB,CAAC;QACG;IACF;IAEA,OACEZ,IAAI,CAACH,SAAS,EAAE,CAACC,QAAQ,IACzB,CAAC,EAAE,EAAEA,QAAQ,8BAA8B,EAAEA,QAAQ,aAAa,EAAED,SAAS,yCAAyC,EAAEA,SAAS,CAAC,EAAEC,QAAQ,oBAAoB,CAAC;AAErK;AAGA,OAAO,MAAMe,oBAAoB;IAC/BZ,UAAU;QAAC;QAAqB;QAAe;KAAqB;IACpEC,YAAY;QAAC;QAAc;QAAe;KAAkB;IAC5DC,cAAc;QAAC;QAAc;QAAe;KAAmB;IAC/DC,QAAQ;QAAC;QAAgB;QAAgB;QAAc;QAAgB;KAAc;IACrFC,OAAO;QAAC;QAAY;QAAa;QAAY;QAAa;KAAc;IACxEC,QAAQ;QAAC;QAAgB;QAAkB;KAAgB;IAC3DC,YAAY;QAAC;QAAiB;QAAiB;KAAiB;IAChEC,cAAc;QAAC;QAAqB;QAAoB;KAAe;IACvEC,UAAU;QAAC;QAAgB;QAAiB;KAAe;IAC3DC,WAAW;QAAC;QAAmB;QAAoB;KAAkB;IACrEC,OAAO;QAAC;QAAS;QAAc;QAAe;QAAgB;QAAiB;QAAoB;QAAe;QAAoB;KAAiB;IACvJ,aAAa;QAAC;QAAa;QAAkB;QAAmB;QAAoB;QAAoB;QAAkB;QAAsB;QAAuB;QAAoB;QAAqB;KAAmB;IACnOC,QAAQ;QAAC;QAAe;QAAsB;QAAsB;KAAiB;AACvF,EAAE;AAGF,OAAO,SAASE,mBAAmBC,IAAI;IACrC,MAAMC,UAAU;QACd,gBAAgB,CAAC;;;;;;;;;;;;;;;;;;AAkBrB,CAAC;QACG,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;;AAmBvB,CAAC;QACG,mBAAmB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BxB,CAAC;QACG,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GvB,CAAC;QACG,uBAAuB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqL5B,CAAC;QACG,yBAAyB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2P9B,CAAC;QACG,gCAAgC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmLrC,CAAC;IACC;IAEA,OAAOA,OAAO,CAACD,KAAK,IAAI;AAC1B;AAGA,SAASpB,4BAA4BF,IAAI;IACvC,IAAIA,SAAS,QAAQ;QAEnB,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAsEP,CAAC;IACJ,OAAO,IAAIA,SAAS,WAAW;QAC7B,OAAO,CAAC;;;;;;;;;;;;;;;;;CAiBX,CAAC;IACA,OAAO,IAAIA,SAAS,cAAc;QAChC,OAAO,CAAC;;;;;;;;;;;;;;;;;CAiBX,CAAC;IACA;IACA,OAAO;AACT;AAGA,SAASJ;IAEP,IAAI;QACF,OAAOX,aAAaE,KAAKE,WAAW,cAAc;IACpD,EAAE,OAAOI,OAAO;QAEd,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BZ,CAAC;IACC;AACF;AAEA,SAASK;IACP,OAAO0B,KAAKC,SAAS,CACnB;QACEC,KAAK;YACHC,yBAAyB;YACzBC,uBAAuB;YACvBC,2BAA2B;YAC3BC,+BAA+B;YAC/BC,8BAA8B;YAC9BC,iCAAiC;QACnC;QACAC,aAAa;YACXC,OAAO;gBACL;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;aACD;YACDC,MAAM;gBAAC;aAAiB;QAC1B;QACAC,uBAAuB;YAAC;YAAe;SAAY;QACnDxB,OAAO;YACLyB,YAAY;gBACV;oBACEC,SAAS;oBACT1B,OAAO;wBACL;4BACEZ,MAAM;4BACNK,SACE;wBACJ;qBACD;gBACH;gBACA;oBACEiC,SAAS;oBACT1B,OAAO;wBACL;4BACEZ,MAAM;4BACNK,SACE;wBACJ;wBACA;4BACEL,MAAM;4BACNK,SAAS;wBACX;qBACD;gBACH;aACD;YACDkC,aAAa;gBACX;oBACED,SAAS;oBACT1B,OAAO;wBACL;4BACEZ,MAAM;4BACNK,SACE;wBACJ;qBACD;gBACH;gBACA;oBACEiC,SAAS;oBACT1B,OAAO;wBACL;4BACEZ,MAAM;4BACNK,SACE;wBACJ;wBACA;4BACEL,MAAM;4BACNK,SAAS;wBACX;qBACD;gBACH;aACD;YACDmC,kBAAkB;gBAChB;oBACE5B,OAAO;wBACL;4BACEZ,MAAM;4BACNK,SAAS;wBACX;qBACD;gBACH;aACD;YACDoC,MAAM;gBACJ;oBACE7B,OAAO;wBACL;4BACEZ,MAAM;4BACNK,SACE;wBACJ;wBACA;4BACEL,MAAM;4BACNK,SAAS;wBACX;qBACD;gBACH;aACD;QACH;QACAqC,qBAAqB;QACrBC,YAAY;YACV3C,MAAM;YACNK,SAAS;QACX;IACF,GACA,MACA;AAEJ"}