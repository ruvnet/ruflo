{"version":3,"sources":["../../../../src/cli/commands/claude-api.ts"],"sourcesContent":["/**\r\n * Claude API management commands\r\n */\r\n\r\nimport chalk from 'chalk';\r\nimport inquirer from 'inquirer';\r\nimport { Command } from '../commander-fix.js';\r\nimport { ConfigManager } from '../../config/config-manager.js';\r\nimport { ClaudeAPIClient, ClaudeModel } from '../../api/claude-client.js';\r\nimport { Logger } from '../../core/logger.js';\r\nimport { getErrorMessage } from '../../utils/error-handler.js';\r\n\r\nexport const claudeApiCommand = new Command()\r\n  .name('claude-api')\r\n  .description('Manage Claude API configuration and test connectivity')\r\n  .action(() => {\r\n    claudeApiCommand.help();\r\n  });\r\n\r\n// Configure command\r\nclaudeApiCommand\r\n  .command('configure')\r\n  .description('Configure Claude API settings')\r\n  .option('--api-key <key>', 'Claude API key')\r\n  .option('--model <model>', 'Claude model to use')\r\n  .option('--temperature <temp>', 'Temperature (0.0-1.0)', parseFloat)\r\n  .option('--max-tokens <tokens>', 'Maximum tokens', parseInt)\r\n  .option('--interactive', 'Interactive configuration')\r\n  .action(async (options: any) => {\r\n    try {\r\n      const configManager = ConfigManager.getInstance();\r\n      let config = configManager.getClaudeConfig();\r\n\r\n      if (options.interactive) {\r\n        console.log(chalk.blue('ü§ñ Claude API Configuration'));\r\n        console.log('Configure your Claude API settings.\\n');\r\n\r\n        const answers = await inquirer.prompt([\r\n          {\r\n            type: 'input',\r\n            name: 'apiKey',\r\n            message: 'Enter your Claude API key:',\r\n            default: config.apiKey || process.env.ANTHROPIC_API_KEY,\r\n            validate: (input) => (input ? true : 'API key is required'),\r\n          },\r\n          {\r\n            type: 'list',\r\n            name: 'model',\r\n            message: 'Select Claude model:',\r\n            choices: [\r\n              { name: 'Claude 3 Opus (Most capable)', value: 'claude-3-opus-20240229' },\r\n              { name: 'Claude 3 Sonnet (Balanced)', value: 'claude-3-sonnet-20240229' },\r\n              { name: 'Claude 3 Haiku (Fastest)', value: 'claude-3-haiku-20240307' },\r\n              { name: 'Claude 2.1', value: 'claude-2.1' },\r\n              { name: 'Claude 2.0', value: 'claude-2.0' },\r\n              { name: 'Claude Instant 1.2', value: 'claude-instant-1.2' },\r\n            ],\r\n            default: config.model || 'claude-3-sonnet-20240229',\r\n          },\r\n          {\r\n            type: 'input',\r\n            name: 'temperature',\r\n            message: 'Temperature (0.0-1.0):',\r\n            default: config.temperature?.toString() || '0.7',\r\n            validate: (input) => {\r\n              const num = parseFloat(input);\r\n              return num >= 0 && num <= 1 ? true : 'Temperature must be between 0.0 and 1.0';\r\n            },\r\n            filter: (input) => parseFloat(input),\r\n          },\r\n          {\r\n            type: 'input',\r\n            name: 'maxTokens',\r\n            message: 'Maximum tokens:',\r\n            default: config.maxTokens?.toString() || '4096',\r\n            validate: (input) => {\r\n              const num = parseInt(input);\r\n              return num > 0 && num <= 100000 ? true : 'Max tokens must be between 1 and 100000';\r\n            },\r\n            filter: (input) => parseInt(input),\r\n          },\r\n        ]);\r\n\r\n        config = { ...config, ...answers };\r\n      } else {\r\n        // Non-interactive mode\r\n        if (options.apiKey) config.apiKey = options.apiKey;\r\n        if (options.model) config.model = options.model;\r\n        if (options.temperature !== undefined) config.temperature = options.temperature;\r\n        if (options.maxTokens !== undefined) config.maxTokens = options.maxTokens;\r\n      }\r\n\r\n      // Update configuration\r\n      configManager.setClaudeConfig(config);\r\n      await configManager.save();\r\n\r\n      console.log(chalk.green('‚úÖ Claude API configuration saved'));\r\n      console.log(chalk.gray(`Model: ${config.model}`));\r\n      console.log(chalk.gray(`Temperature: ${config.temperature}`));\r\n      console.log(chalk.gray(`Max tokens: ${config.maxTokens}`));\r\n    } catch (error) {\r\n      console.error(chalk.red('‚ùå Failed to configure Claude API:'), getErrorMessage(error));\r\n      process.exit(1);\r\n    }\r\n  });\r\n\r\n// Test command\r\nclaudeApiCommand\r\n  .command('test')\r\n  .description('Test Claude API connectivity')\r\n  .option('--model <model>', 'Model to test')\r\n  .option('--temperature <temp>', 'Temperature for test', parseFloat)\r\n  .option(\r\n    '--prompt <prompt>',\r\n    'Test prompt',\r\n    'Hello, Claude! Please respond with a brief greeting.',\r\n  )\r\n  .action(async (options: any) => {\r\n    try {\r\n      const configManager = ConfigManager.getInstance();\r\n\r\n      if (!configManager.isClaudeAPIConfigured()) {\r\n        console.error(chalk.red('‚ùå Claude API not configured. Run \"claude-api configure\" first.'));\r\n        process.exit(1);\r\n      }\r\n\r\n      console.log(chalk.blue('üß™ Testing Claude API connectivity...'));\r\n\r\n      const logger = new Logger({ level: 'info', format: 'text', destination: 'console' });\r\n      const client = new ClaudeAPIClient(logger, configManager);\r\n\r\n      const testOptions: any = {};\r\n      if (options.model) testOptions.model = options.model;\r\n      if (options.temperature !== undefined) testOptions.temperature = options.temperature;\r\n\r\n      const start = Date.now();\r\n      const response = await client.complete(options.prompt, testOptions);\r\n      const duration = Date.now() - start;\r\n\r\n      console.log(chalk.green('‚úÖ Claude API test successful!'));\r\n      console.log(chalk.gray(`Duration: ${duration}ms`));\r\n      console.log(chalk.cyan('\\nResponse:'));\r\n      console.log(response);\r\n    } catch (error) {\r\n      console.error(chalk.red('‚ùå Claude API test failed:'), getErrorMessage(error));\r\n      process.exit(1);\r\n    }\r\n  });\r\n\r\n// Status command\r\nclaudeApiCommand\r\n  .command('status')\r\n  .description('Show Claude API configuration status')\r\n  .action(async () => {\r\n    try {\r\n      const configManager = ConfigManager.getInstance();\r\n      const config = configManager.getClaudeConfig();\r\n      const isConfigured = configManager.isClaudeAPIConfigured();\r\n\r\n      console.log(chalk.blue('ü§ñ Claude API Status\\n'));\r\n\r\n      if (isConfigured) {\r\n        console.log(chalk.green('‚úÖ Configured'));\r\n        console.log(chalk.gray(`Model: ${config.model || 'claude-3-sonnet-20240229'}`));\r\n        console.log(chalk.gray(`Temperature: ${config.temperature ?? 0.7}`));\r\n        console.log(chalk.gray(`Max tokens: ${config.maxTokens || 4096}`));\r\n        console.log(chalk.gray(`API key: ${config.apiKey ? '***masked***' : 'Not set'}`));\r\n\r\n        if (process.env.ANTHROPIC_API_KEY && !config.apiKey) {\r\n          console.log(\r\n            chalk.yellow('‚ö†Ô∏è  Using API key from ANTHROPIC_API_KEY environment variable'),\r\n          );\r\n        }\r\n      } else {\r\n        console.log(chalk.red('‚ùå Not configured'));\r\n        console.log(chalk.gray('Run \"claude-api configure\" to set up Claude API.'));\r\n      }\r\n    } catch (error) {\r\n      console.error(chalk.red('‚ùå Failed to get status:'), getErrorMessage(error));\r\n      process.exit(1);\r\n    }\r\n  });\r\n\r\n// Models command\r\nclaudeApiCommand\r\n  .command('models')\r\n  .description('List available Claude models')\r\n  .action(() => {\r\n    console.log(chalk.blue('üìã Available Claude Models\\n'));\r\n\r\n    const models = [\r\n      {\r\n        id: 'claude-3-opus-20240229',\r\n        name: 'Claude 3 Opus',\r\n        description: 'Most capable model, best for complex tasks',\r\n        contextWindow: '200K tokens',\r\n      },\r\n      {\r\n        id: 'claude-3-sonnet-20240229',\r\n        name: 'Claude 3 Sonnet',\r\n        description: 'Balanced performance and speed',\r\n        contextWindow: '200K tokens',\r\n      },\r\n      {\r\n        id: 'claude-3-haiku-20240307',\r\n        name: 'Claude 3 Haiku',\r\n        description: 'Fastest model, best for simple tasks',\r\n        contextWindow: '200K tokens',\r\n      },\r\n      {\r\n        id: 'claude-2.1',\r\n        name: 'Claude 2.1',\r\n        description: 'Previous generation, enhanced capabilities',\r\n        contextWindow: '200K tokens',\r\n      },\r\n      {\r\n        id: 'claude-2.0',\r\n        name: 'Claude 2.0',\r\n        description: 'Previous generation model',\r\n        contextWindow: '100K tokens',\r\n      },\r\n      {\r\n        id: 'claude-instant-1.2',\r\n        name: 'Claude Instant 1.2',\r\n        description: 'Fast, cost-effective model',\r\n        contextWindow: '100K tokens',\r\n      },\r\n    ];\r\n\r\n    models.forEach((model) => {\r\n      console.log(chalk.cyan(`${model.name} (${model.id})`));\r\n      console.log(chalk.gray(`  ${model.description}`));\r\n      console.log(chalk.gray(`  Context: ${model.contextWindow}\\n`));\r\n    });\r\n  });\r\n\r\n// Update command\r\nclaudeApiCommand\r\n  .command('update')\r\n  .description('Update specific Claude API settings')\r\n  .option('--model <model>', 'Update model')\r\n  .option('--temperature <temp>', 'Update temperature', parseFloat)\r\n  .option('--max-tokens <tokens>', 'Update max tokens', parseInt)\r\n  .action(async (options: any) => {\r\n    try {\r\n      const configManager = ConfigManager.getInstance();\r\n\r\n      if (!configManager.isClaudeAPIConfigured()) {\r\n        console.error(chalk.red('‚ùå Claude API not configured. Run \"claude-api configure\" first.'));\r\n        process.exit(1);\r\n      }\r\n\r\n      const updates: any = {};\r\n      if (options.model) updates.model = options.model;\r\n      if (options.temperature !== undefined) updates.temperature = options.temperature;\r\n      if (options.maxTokens !== undefined) updates.maxTokens = options.maxTokens;\r\n\r\n      if (Object.keys(updates).length === 0) {\r\n        console.log(\r\n          chalk.yellow('‚ö†Ô∏è  No updates specified. Use --model, --temperature, or --max-tokens.'),\r\n        );\r\n        return;\r\n      }\r\n\r\n      configManager.setClaudeConfig(updates);\r\n      await configManager.save();\r\n\r\n      console.log(chalk.green('‚úÖ Claude API configuration updated'));\r\n      Object.entries(updates).forEach(([key, value]) => {\r\n        console.log(chalk.gray(`${key}: ${value}`));\r\n      });\r\n    } catch (error) {\r\n      console.error(chalk.red('‚ùå Failed to update configuration:'), getErrorMessage(error));\r\n      process.exit(1);\r\n    }\r\n  });\r\n"],"names":["chalk","inquirer","Command","ConfigManager","ClaudeAPIClient","Logger","getErrorMessage","claudeApiCommand","name","description","action","help","command","option","parseFloat","parseInt","options","configManager","getInstance","config","getClaudeConfig","interactive","console","log","blue","answers","prompt","type","message","default","apiKey","process","env","ANTHROPIC_API_KEY","validate","input","choices","value","model","temperature","toString","num","filter","maxTokens","undefined","setClaudeConfig","save","green","gray","error","red","exit","isClaudeAPIConfigured","logger","level","format","destination","client","testOptions","start","Date","now","response","complete","duration","cyan","isConfigured","yellow","models","id","contextWindow","forEach","updates","Object","keys","length","entries","key"],"mappings":"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"}