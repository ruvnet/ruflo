{"version":3,"sources":["../../../../src/cli/commands/task.ts"],"sourcesContent":["import { getErrorMessage } from '../../utils/error-handler.js';\r\n/**\r\n * Task management commands\r\n */\r\n\r\nimport { Command } from '../commander-fix.js';\r\nimport { promises as fs } from 'node:fs';\r\nimport chalk from 'chalk';\r\nimport { generateId } from '../../utils/helpers.js';\r\nimport type { Task } from '../../utils/types.js';\r\nexport const taskCommand = new Command()\r\n  .name('task')\r\n  .description('Manage tasks')\r\n  .action(() => {\r\n    taskCommand.outputHelp();\r\n  })\r\n  .command('create')\r\n  .description('Create a new task')\r\n  .argument('<type>', 'Task type')\r\n  .argument('<description>', 'Task description')\r\n  .option('-p, --priority <priority>', 'Task priority', '0')\r\n  .option('-d, --dependencies <deps>', 'Comma-separated list of dependency task IDs')\r\n  .option('-i, --input <input>', 'Task input as JSON')\r\n  .option('-a, --assign <agent>', 'Assign to specific agent')\r\n  .action(async (type: string, description: string, options: any) => {\r\n    const task: Task = {\r\n      id: generateId('task'),\r\n      type,\r\n      description,\r\n      priority: parseInt(options.priority, 10),\r\n      dependencies: options.dependencies ? options.dependencies.split(',') : [],\r\n      assignedAgent: options.assign,\r\n      status: 'pending',\r\n      input: options.input ? JSON.parse(options.input) : {},\r\n      createdAt: new Date(),\r\n    };\r\n\r\n    console.log(chalk.green('Task created:'));\r\n    console.log(JSON.stringify(task, null, 2));\r\n    console.log(chalk.yellow('\\nTo submit this task, ensure Claude-Flow is running'));\r\n  })\r\n  .command('list')\r\n  .description('List all tasks')\r\n  .option('-s, --status <status:string>', 'Filter by status')\r\n  .option('-a, --agent <agent:string>', 'Filter by assigned agent')\r\n  .action(async (options: any) => {\r\n    console.log(chalk.yellow('Task listing requires a running Claude-Flow instance'));\r\n  })\r\n  .command('status')\r\n  .description('Get task status')\r\n  .argument('<task-id>', 'Task ID')\r\n  .action(async (taskId: string, options: any) => {\r\n    console.log(chalk.yellow(`Task status requires a running Claude-Flow instance`));\r\n  })\r\n  .command('cancel')\r\n  .description('Cancel a task')\r\n  .argument('<task-id>', 'Task ID')\r\n  .option('-r, --reason <reason>', 'Cancellation reason')\r\n  .action(async (taskId: string, options: any) => {\r\n    console.log(chalk.yellow(`Cancelling task ${taskId} requires a running Claude-Flow instance`));\r\n  })\r\n  .command('workflow')\r\n  .description('Execute a workflow from file')\r\n  .argument('<workflow-file>', 'Workflow file path')\r\n  .action(async (workflowFile: string, options: any) => {\r\n    try {\r\n      const content = await fs.readFile(workflowFile, 'utf-8');\r\n      const workflow = JSON.parse(content);\r\n\r\n      console.log(chalk.green('Workflow loaded:'));\r\n      console.log(`- Name: ${workflow.name || 'Unnamed'}`);\r\n      console.log(`- Tasks: ${workflow.tasks?.length || 0}`);\r\n      console.log(chalk.yellow('\\nTo execute this workflow, ensure Claude-Flow is running'));\r\n    } catch (error) {\r\n      console.error(chalk.red('Failed to load workflow:'), getErrorMessage(error));\r\n    }\r\n  });\r\n"],"names":["getErrorMessage","Command","promises","fs","chalk","generateId","taskCommand","name","description","action","outputHelp","command","argument","option","type","options","task","id","priority","parseInt","dependencies","split","assignedAgent","assign","status","input","JSON","parse","createdAt","Date","console","log","green","stringify","yellow","taskId","workflowFile","content","readFile","workflow","tasks","length","error","red"],"mappings":"AAAA,SAASA,eAAe,QAAQ,+BAA+B;AAK/D,SAASC,OAAO,QAAQ,sBAAsB;AAC9C,SAASC,YAAYC,EAAE,QAAQ,UAAU;AACzC,OAAOC,WAAW,QAAQ;AAC1B,SAASC,UAAU,QAAQ,yBAAyB;AAEpD,OAAO,MAAMC,cAAc,IAAIL,UAC5BM,IAAI,CAAC,QACLC,WAAW,CAAC,gBACZC,MAAM,CAAC;IACNH,YAAYI,UAAU;AACxB,GACCC,OAAO,CAAC,UACRH,WAAW,CAAC,qBACZI,QAAQ,CAAC,UAAU,aACnBA,QAAQ,CAAC,iBAAiB,oBAC1BC,MAAM,CAAC,6BAA6B,iBAAiB,KACrDA,MAAM,CAAC,6BAA6B,+CACpCA,MAAM,CAAC,uBAAuB,sBAC9BA,MAAM,CAAC,wBAAwB,4BAC/BJ,MAAM,CAAC,OAAOK,MAAcN,aAAqBO;IAChD,MAAMC,OAAa;QACjBC,IAAIZ,WAAW;QACfS;QACAN;QACAU,UAAUC,SAASJ,QAAQG,QAAQ,EAAE;QACrCE,cAAcL,QAAQK,YAAY,GAAGL,QAAQK,YAAY,CAACC,KAAK,CAAC,OAAO,EAAE;QACzEC,eAAeP,QAAQQ,MAAM;QAC7BC,QAAQ;QACRC,OAAOV,QAAQU,KAAK,GAAGC,KAAKC,KAAK,CAACZ,QAAQU,KAAK,IAAI,CAAC;QACpDG,WAAW,IAAIC;IACjB;IAEAC,QAAQC,GAAG,CAAC3B,MAAM4B,KAAK,CAAC;IACxBF,QAAQC,GAAG,CAACL,KAAKO,SAAS,CAACjB,MAAM,MAAM;IACvCc,QAAQC,GAAG,CAAC3B,MAAM8B,MAAM,CAAC;AAC3B,GACCvB,OAAO,CAAC,QACRH,WAAW,CAAC,kBACZK,MAAM,CAAC,gCAAgC,oBACvCA,MAAM,CAAC,8BAA8B,4BACrCJ,MAAM,CAAC,OAAOM;IACbe,QAAQC,GAAG,CAAC3B,MAAM8B,MAAM,CAAC;AAC3B,GACCvB,OAAO,CAAC,UACRH,WAAW,CAAC,mBACZI,QAAQ,CAAC,aAAa,WACtBH,MAAM,CAAC,OAAO0B,QAAgBpB;IAC7Be,QAAQC,GAAG,CAAC3B,MAAM8B,MAAM,CAAC,CAAC,mDAAmD,CAAC;AAChF,GACCvB,OAAO,CAAC,UACRH,WAAW,CAAC,iBACZI,QAAQ,CAAC,aAAa,WACtBC,MAAM,CAAC,yBAAyB,uBAChCJ,MAAM,CAAC,OAAO0B,QAAgBpB;IAC7Be,QAAQC,GAAG,CAAC3B,MAAM8B,MAAM,CAAC,CAAC,gBAAgB,EAAEC,OAAO,wCAAwC,CAAC;AAC9F,GACCxB,OAAO,CAAC,YACRH,WAAW,CAAC,gCACZI,QAAQ,CAAC,mBAAmB,sBAC5BH,MAAM,CAAC,OAAO2B,cAAsBrB;IACnC,IAAI;QACF,MAAMsB,UAAU,MAAMlC,GAAGmC,QAAQ,CAACF,cAAc;QAChD,MAAMG,WAAWb,KAAKC,KAAK,CAACU;QAE5BP,QAAQC,GAAG,CAAC3B,MAAM4B,KAAK,CAAC;QACxBF,QAAQC,GAAG,CAAC,CAAC,QAAQ,EAAEQ,SAAShC,IAAI,IAAI,WAAW;QACnDuB,QAAQC,GAAG,CAAC,CAAC,SAAS,EAAEQ,SAASC,KAAK,EAAEC,UAAU,GAAG;QACrDX,QAAQC,GAAG,CAAC3B,MAAM8B,MAAM,CAAC;IAC3B,EAAE,OAAOQ,OAAO;QACdZ,QAAQY,KAAK,CAACtC,MAAMuC,GAAG,CAAC,6BAA6B3C,gBAAgB0C;IACvE;AACF,GAAG"}