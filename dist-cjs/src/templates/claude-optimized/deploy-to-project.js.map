{"version":3,"sources":["../../../../src/templates/claude-optimized/deploy-to-project.js"],"sourcesContent":["#!/usr/bin/env node\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\n/**\r\n * Deploy Claude optimized template to a target project\r\n * Usage: node deploy-to-project.js <target-project-path>\r\n */\r\n\r\nconst args = process.argv.slice(2);\r\nif (args.length === 0) {\r\n  console.error('Usage: node deploy-to-project.js <target-project-path>');\r\n  console.error('Example: node deploy-to-project.js /path/to/my-project');\r\n  process.exit(1);\r\n}\r\n\r\nconst TARGET_PROJECT = args[0];\r\nconst SOURCE_DIR = path.join(__dirname, '.claude');\r\nconst TARGET_DIR = path.join(TARGET_PROJECT, '.claude');\r\nconst MANIFEST_PATH = path.join(__dirname, 'manifest.json');\r\n\r\nconsole.log('Claude Optimized Template Deployment');\r\nconsole.log('====================================');\r\nconsole.log(`Source: ${SOURCE_DIR}`);\r\nconsole.log(`Target: ${TARGET_DIR}`);\r\n\r\n// Validate target project\r\nif (!fs.existsSync(TARGET_PROJECT)) {\r\n  console.error(`Error: Target project directory does not exist: ${TARGET_PROJECT}`);\r\n  process.exit(1);\r\n}\r\n\r\n// Check if it's a valid project (has package.json or similar)\r\nconst projectFiles = [\r\n  'package.json',\r\n  'tsconfig.json',\r\n  'deno.json',\r\n  'go.mod',\r\n  'Cargo.toml',\r\n  'setup.py',\r\n];\r\nconst hasProjectFile = projectFiles.some((file) => fs.existsSync(path.join(TARGET_PROJECT, file)));\r\n\r\nif (!hasProjectFile) {\r\n  console.warn(\r\n    'Warning: Target directory does not appear to be a project root (no package.json, etc.)',\r\n  );\r\n  console.log('Continue anyway? (y/n)');\r\n  // For automation, we'll continue\r\n}\r\n\r\n// Read manifest\r\nconst manifest = JSON.parse(fs.readFileSync(MANIFEST_PATH, 'utf8'));\r\n\r\n// Create target .claude directory\r\nif (!fs.existsSync(TARGET_DIR)) {\r\n  fs.mkdirSync(TARGET_DIR, { recursive: true });\r\n  console.log('‚úì Created .claude directory');\r\n} else {\r\n  console.log('‚ö†Ô∏è  .claude directory already exists - files will be overwritten');\r\n}\r\n\r\n// Create directory structure\r\nconsole.log('\\nCreating directory structure...');\r\nfor (const [dirName, dirInfo] of Object.entries(manifest.directories)) {\r\n  const targetPath = path.join(TARGET_DIR, dirInfo.path);\r\n  if (!fs.existsSync(targetPath)) {\r\n    fs.mkdirSync(targetPath, { recursive: true });\r\n    console.log(`  ‚úì ${dirInfo.path}`);\r\n  }\r\n\r\n  // Create README for empty directories\r\n  if (dirInfo.createEmpty) {\r\n    const readmePath = path.join(targetPath, 'README.md');\r\n    if (!fs.existsSync(readmePath)) {\r\n      fs.writeFileSync(\r\n        readmePath,\r\n        `# ${dirName}\\n\\nThis directory will be populated during usage.\\n`,\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n// Copy files\r\nconsole.log('\\nDeploying template files...');\r\nlet successCount = 0;\r\nlet errorCount = 0;\r\n\r\nfor (const file of manifest.files) {\r\n  const sourcePath = path.join(SOURCE_DIR, file.destination);\r\n  const targetPath = path.join(TARGET_DIR, file.destination);\r\n\r\n  try {\r\n    if (fs.existsSync(sourcePath)) {\r\n      // Ensure target directory exists\r\n      const targetDir = path.dirname(targetPath);\r\n      if (!fs.existsSync(targetDir)) {\r\n        fs.mkdirSync(targetDir, { recursive: true });\r\n      }\r\n\r\n      // Copy file\r\n      fs.copyFileSync(sourcePath, targetPath);\r\n      console.log(`  ‚úì ${file.destination}`);\r\n      successCount++;\r\n    } else {\r\n      console.error(`  ‚úó ${file.destination} - Source file not found`);\r\n      errorCount++;\r\n    }\r\n  } catch (error) {\r\n    console.error(`  ‚úó ${file.destination} - Error: ${error.message}`);\r\n    errorCount++;\r\n  }\r\n}\r\n\r\n// Create deployment info\r\nconst deploymentInfo = {\r\n  deployed: new Date().toISOString(),\r\n  version: manifest.version,\r\n  targetProject: TARGET_PROJECT,\r\n  filesDeployed: successCount,\r\n  errors: errorCount,\r\n};\r\n\r\nfs.writeFileSync(\r\n  path.join(TARGET_DIR, '.deployment-info.json'),\r\n  JSON.stringify(deploymentInfo, null, 2),\r\n);\r\n\r\n// Summary\r\nconsole.log('\\n' + '='.repeat(50));\r\nconsole.log('Deployment Summary:');\r\nconsole.log(`  Files deployed: ${successCount}`);\r\nconsole.log(`  Errors: ${errorCount}`);\r\nconsole.log(`  Target project: ${TARGET_PROJECT}`);\r\nconsole.log(`  Template version: ${manifest.version}`);\r\n\r\nif (errorCount === 0) {\r\n  console.log('\\nüéâ Template deployed successfully!');\r\n  console.log('\\nNext steps:');\r\n  console.log('1. Open Claude Code in your project');\r\n  console.log('2. Type / to see available commands');\r\n  console.log('3. Use /sparc for SPARC methodology');\r\n  console.log('4. Use /claude-flow-* for Claude Flow features');\r\n  console.log('\\nFor help, see the documentation files in .claude/');\r\n} else {\r\n  console.log('\\n‚ö†Ô∏è  Template deployed with errors. Please check the messages above.');\r\n}\r\n"],"names":["fs","require","path","args","process","argv","slice","length","console","error","exit","TARGET_PROJECT","SOURCE_DIR","join","__dirname","TARGET_DIR","MANIFEST_PATH","log","existsSync","projectFiles","hasProjectFile","some","file","warn","manifest","JSON","parse","readFileSync","mkdirSync","recursive","dirName","dirInfo","Object","entries","directories","targetPath","createEmpty","readmePath","writeFileSync","successCount","errorCount","files","sourcePath","destination","targetDir","dirname","copyFileSync","message","deploymentInfo","deployed","Date","toISOString","version","targetProject","filesDeployed","errors","stringify","repeat"],"mappings":"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"}