{"version":3,"sources":["../../../../../src/cli/simple-commands/sparc-modes/architect.js"],"sourcesContent":["// architect.js - Architect mode orchestration template\r\nexport function getArchitectOrchestration(taskDescription, memoryNamespace) {\r\n  return `\r\n## Task Orchestration Steps\r\n\r\n1. **Requirements Analysis** (10 mins)\r\n   - Analyze the user's request: \"${taskDescription}\"\r\n   - Query existing project context: \\`npx claude-flow memory query ${memoryNamespace}\\`\r\n   - Identify core components, services, and modular boundaries\r\n   - List external dependencies and integration points\r\n   - Document scalability and security requirements\r\n   - Store findings: \\`npx claude-flow memory store ${memoryNamespace}_requirements \"Core components: X, Y, Z. External deps: API-A, Service-B. Security: OAuth2, RLS policies needed.\"\\`\r\n\r\n2. **System Architecture Design** (20 mins)\r\n   - Create modular architecture diagram using Mermaid syntax\r\n   - Define clear service boundaries and responsibilities\r\n   - Design API contracts between components\r\n   - Plan data flow and state management patterns\r\n   - Ensure NO hardcoded secrets or env values in design\r\n   - Create extensible integration points\r\n   - Store architecture: \\`npx claude-flow memory store ${memoryNamespace}_architecture \"Microservices: auth-service, user-service, data-processor. APIs: REST for external, gRPC for internal. State: Event-sourced with CQRS.\"\\`\r\n\r\n3. **Technical Specifications** (15 mins)\r\n   - Define detailed interface contracts (OpenAPI/AsyncAPI)\r\n   - Specify data models and database schemas\r\n   - Plan security boundaries and authentication flows\r\n   - Document performance and scaling considerations\r\n   - Define configuration management strategy\r\n   - Store specs: \\`npx claude-flow memory store ${memoryNamespace}_tech_specs \"Auth: JWT with refresh tokens. DB: PostgreSQL with read replicas. Cache: Redis. Config: Environment-based with secrets manager.\"\\`\r\n\r\n4. **Modular Implementation Plan** (10 mins)\r\n   - Break system into modules < 500 lines each\r\n   - Create development phases with clear milestones\r\n   - Define testing strategy (unit, integration, e2e)\r\n   - Plan deployment and rollback procedures\r\n   - Identify tasks for other SPARC modes\r\n   - Store plan: \\`npx claude-flow memory store ${memoryNamespace}_implementation_plan \"Phase 1: Core auth (tdd mode). Phase 2: User management (code mode). Phase 3: Integration (integration mode).\"\\`\r\n\r\n5. **Directory Safety**\r\n   - **IMPORTANT**: All files should be created in the current working directory\r\n   - **DO NOT** create files in system directories or node_modules\r\n   - For named projects, create a subdirectory: \\\\\\`mkdir project-name && cd project-name\\\\\\`\r\n   - Use relative paths from your working directory\r\n   - Example structure:\r\n     \\\\\\`\\\\\\`\\\\\\`\r\n     ./ (current directory)\r\n     â”œâ”€â”€ architecture/\r\n     â”‚   â”œâ”€â”€ system-overview.md\r\n     â”‚   â””â”€â”€ api-specifications.md\r\n     â””â”€â”€ implementation-plan.md\r\n     \\\\\\`\\\\\\`\\\\\\`\r\n\r\n6. **Deliverables**\r\n   - architecture/\r\n     - system-overview.md (with Mermaid diagrams)\r\n     - api-specifications.md (OpenAPI/AsyncAPI specs)\r\n     - data-models.md (schemas with relationships)\r\n     - security-architecture.md (auth flows, boundaries)\r\n     - deployment-architecture.md (infrastructure design)\r\n   - implementation-plan.md (phased approach with SPARC mode assignments)\r\n\r\n## Next Steps - Sequential and Background Execution\r\nAfter completing architecture, delegate to appropriate modes:\r\n\r\n### Sequential Mode (for simple tasks):\r\n- \\`npx claude-flow sparc run spec-pseudocode \"Create detailed pseudocode for ${taskDescription}\" --non-interactive\\`\r\n- \\`npx claude-flow sparc run security-review \"Review architecture for vulnerabilities\" --non-interactive\\`\r\n\r\n### Background Swarm Mode (for complex implementation):\r\n- \\`npx claude-flow swarm \"Implement complete ${taskDescription} based on architecture\" --strategy development --background --monitor\\`\r\n- \\`npx claude-flow swarm \"Create comprehensive test suite for ${taskDescription}\" --strategy testing --background --parallel\\`\r\n- \\`npx claude-flow swarm \"Generate complete documentation for ${taskDescription}\" --strategy research --background\\`\r\n\r\n## ðŸ Enhanced Architecture with Background Swarms\r\nLeverage background swarm processing for complex architecture tasks:\r\n\r\n\\`\\`\\`bash\r\n# Background research swarm for comprehensive analysis\r\nnpx claude-flow swarm \"Research and analyze all architectural patterns for ${taskDescription}\" \\\\\r\n  --strategy research --background --parallel --monitor \\\\\r\n  --output ./architecture-research\r\n\r\n# Background development swarm for proof of concepts\r\nnpx claude-flow swarm \"Create architectural proof of concepts and prototypes for ${taskDescription}\" \\\\\r\n  --strategy development --background --testing --monitor \\\\\r\n  --output ./architecture-prototypes\r\n\r\n# Background documentation swarm for comprehensive specs\r\nnpx claude-flow swarm \"Generate complete technical specifications and API documentation for ${taskDescription}\" \\\\\r\n  --strategy research --background --parallel \\\\\r\n  --output ./architecture-docs\r\n\r\n# Monitor all background swarms\r\nnpx claude-flow status\r\nnpx claude-flow monitor\r\n\r\n# Sequential architecture refinement with background support\r\nnpx claude-flow sparc run architect \"Initial system design for ${taskDescription}\" --non-interactive\r\nnpx claude-flow swarm \"Refine architecture based on security and performance analysis\" \\\\\r\n  --strategy optimization --background --review --testing \\\\\r\n  --output ./architecture-refined\r\n\\`\\`\\`\r\n\r\n## ðŸ”„ Hybrid SPARC-Swarm Workflow\r\nCombine SPARC modes with background swarms for optimal efficiency:\r\n\r\n\\`\\`\\`bash\r\n# Phase 1: Quick architecture analysis (SPARC)\r\nnpx claude-flow sparc run architect \"Core system design\" --non-interactive\r\n\r\n# Phase 2: Parallel background research (Swarm)\r\nnpx claude-flow swarm \"Deep dive research into scalability patterns\" --strategy research --background &\r\nnpx claude-flow swarm \"Security analysis and threat modeling\" --strategy analysis --background &\r\nnpx claude-flow swarm \"Performance benchmarking and optimization research\" --strategy optimization --background &\r\n\r\n# Phase 3: Implementation swarm (Background)\r\nnpx claude-flow swarm \"Full implementation of ${taskDescription} architecture\" \\\\\r\n  --strategy development --background --parallel --monitor --testing \\\\\r\n  --max-agents 8 --output ./implementation\r\n\r\n# Monitor progress\r\nnpx claude-flow status\r\ntail -f ./swarm-runs/*/swarm.log\r\n\\`\\`\\``;\r\n}\r\n"],"names":["getArchitectOrchestration","taskDescription","memoryNamespace"],"mappings":"AACA,OAAO,SAASA,0BAA0BC,eAAe,EAAEC,eAAe;IACxE,OAAO,CAAC;;;;kCAIwB,EAAED,gBAAgB;oEACgB,EAAEC,gBAAgB;;;;oDAIlC,EAAEA,gBAAgB;;;;;;;;;wDASd,EAAEA,gBAAgB;;;;;;;;iDAQzB,EAAEA,gBAAgB;;;;;;;;gDAQnB,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;8EA6BY,EAAED,gBAAgB;;;;8CAIlD,EAAEA,gBAAgB;+DACD,EAAEA,gBAAgB;+DAClB,EAAEA,gBAAgB;;;;;;;2EAON,EAAEA,gBAAgB;;;;;iFAKZ,EAAEA,gBAAgB;;;;;4FAKP,EAAEA,gBAAgB;;;;;;;;;+DAS/C,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;;;8CAmBnC,EAAEA,gBAAgB;;;;;;;MAO1D,CAAC;AACP"}