{"version":3,"sources":["../../../../../src/cli/commands/hive-mind/optimize-memory.ts"],"sourcesContent":["/**\r\n * Memory Optimization Command\r\n *\r\n * Provides comprehensive memory optimization tools for the Hive Mind system.\r\n */\r\n\r\nimport { Command } from '../commander-fix.js';\r\nimport { CollectiveMemory, MemoryOptimizer } from '../../simple-commands/hive-mind/memory.js';\r\nimport { MemoryMonitor } from '../../../hive-mind/core/MemoryMonitor.js';\r\nimport { Memory } from '../../../hive-mind/core/Memory.js';\r\nimport { DatabaseManager } from '../../../hive-mind/core/DatabaseManager.js';\r\nimport chalk from 'chalk';\r\n\r\nexport function createOptimizeMemoryCommand(): Command {\r\n  const command = new Command('optimize-memory')\r\n    .description('Optimize memory usage and performance for Hive Mind')\r\n    .option('-a, --analyze', 'Analyze current memory performance')\r\n    .option('-o, --optimize', 'Run comprehensive memory optimization')\r\n    .option('-m, --monitor', 'Start memory monitoring dashboard')\r\n    .option('-r, --report', 'Generate detailed memory report')\r\n    .option('-c, --cleanup', 'Perform memory cleanup operations')\r\n    .option('--cache-size <size>', 'Set cache size (entries)', '10000')\r\n    .option('--cache-memory <mb>', 'Set cache memory limit (MB)', '100')\r\n    .option('--compression-threshold <bytes>', 'Set compression threshold', '10000')\r\n    .action(async (options) => {\r\n      try {\r\n        console.log(chalk.blue.bold('\\nüß† Hive Mind Memory Optimization System\\n'));\r\n\r\n        if (options.analyze) {\r\n          await analyzeMemoryPerformance();\r\n        }\r\n\r\n        if (options.optimize) {\r\n          await runMemoryOptimization(options);\r\n        }\r\n\r\n        if (options.monitor) {\r\n          await startMemoryMonitoring();\r\n        }\r\n\r\n        if (options.report) {\r\n          await generateMemoryReport();\r\n        }\r\n\r\n        if (options.cleanup) {\r\n          await performMemoryCleanup();\r\n        }\r\n\r\n        if (\r\n          !options.analyze &&\r\n          !options.optimize &&\r\n          !options.monitor &&\r\n          !options.report &&\r\n          !options.cleanup\r\n        ) {\r\n          await showMemoryOverview();\r\n        }\r\n      } catch (error) {\r\n        console.error(chalk.red('‚ùå Memory optimization failed:'), (error as Error).message);\r\n        process.exit(1);\r\n      }\r\n    });\r\n\r\n  return command;\r\n}\r\n\r\n/**\r\n * Analyze current memory performance\r\n */\r\nasync function analyzeMemoryPerformance(): Promise<void> {\r\n  console.log(chalk.yellow('üîç Analyzing memory performance...\\n'));\r\n\r\n  try {\r\n    // Initialize memory systems\r\n    const memory = new Memory('hive-mind-optimizer', {\r\n      cacheSize: 10000,\r\n      cacheMemoryMB: 100,\r\n      enablePooling: true,\r\n      compressionThreshold: 10000,\r\n    });\r\n\r\n    await memory.initialize();\r\n\r\n    // Get comprehensive analytics\r\n    const analytics = memory.getAdvancedAnalytics();\r\n    const healthCheck = await memory.healthCheck();\r\n\r\n    // Display results\r\n    console.log(chalk.green.bold('üìä Memory Performance Analysis\\n'));\r\n\r\n    // Cache Performance\r\n    console.log(chalk.cyan('üóÑÔ∏è Cache Performance:'));\r\n    console.log(`   Hit Rate: ${chalk.bold(analytics.cache.hitRate?.toFixed(1) || '0')}%`);\r\n    console.log(\r\n      `   Memory Usage: ${chalk.bold(analytics.cache.memoryUsage?.toFixed(1) || '0')} MB`,\r\n    );\r\n    console.log(\r\n      `   Utilization: ${chalk.bold(analytics.cache.utilizationPercent?.toFixed(1) || '0')}%`,\r\n    );\r\n    console.log(`   Evictions: ${chalk.bold(analytics.cache.evictions || 0)}\\n`);\r\n\r\n    // Performance Metrics\r\n    console.log(chalk.cyan('‚ö° Performance Metrics:'));\r\n    for (const [operation, stats] of Object.entries(analytics.performance)) {\r\n      if (typeof stats === 'object' && stats.avg) {\r\n        console.log(\r\n          `   ${operation}: ${chalk.bold(stats.avg.toFixed(2))}ms avg (${stats.count} samples)`,\r\n        );\r\n      }\r\n    }\r\n    console.log('');\r\n\r\n    // Object Pools\r\n    if (analytics.pools) {\r\n      console.log(chalk.cyan('üîÑ Object Pools:'));\r\n      for (const [name, stats] of Object.entries(analytics.pools)) {\r\n        if (typeof stats === 'object' && stats.reuseRate !== undefined) {\r\n          console.log(`   ${name}: ${chalk.bold(stats.reuseRate.toFixed(1))}% reuse rate`);\r\n        }\r\n      }\r\n      console.log('');\r\n    }\r\n\r\n    // Health Status\r\n    console.log(chalk.cyan('üè• Health Status:'));\r\n    const statusColor =\r\n      healthCheck.status === 'healthy'\r\n        ? 'green'\r\n        : healthCheck.status === 'warning'\r\n          ? 'yellow'\r\n          : 'red';\r\n    console.log(`   Overall: ${chalk[statusColor].bold(healthCheck.status.toUpperCase())}`);\r\n    console.log(`   Score: ${chalk.bold(healthCheck.score)}/100`);\r\n\r\n    if (healthCheck.issues.length > 0) {\r\n      console.log(`   Issues: ${chalk.red(healthCheck.issues.length)}`);\r\n      healthCheck.issues.forEach((issue) => {\r\n        console.log(`     ‚Ä¢ ${chalk.red(issue)}`);\r\n      });\r\n    }\r\n\r\n    if (healthCheck.recommendations.length > 0) {\r\n      console.log(`   Recommendations:`);\r\n      healthCheck.recommendations.forEach((rec) => {\r\n        console.log(`     ‚Ä¢ ${chalk.blue(rec)}`);\r\n      });\r\n    }\r\n\r\n    await memory.shutdown();\r\n  } catch (error) {\r\n    console.error(chalk.red('‚ùå Analysis failed:'), (error as Error).message);\r\n  }\r\n}\r\n\r\n/**\r\n * Run comprehensive memory optimization\r\n */\r\nasync function runMemoryOptimization(options: any): Promise<void> {\r\n  console.log(chalk.yellow('‚ö° Running memory optimization...\\n'));\r\n\r\n  try {\r\n    // Initialize optimized memory system\r\n    const memory = new Memory('hive-mind-optimizer', {\r\n      cacheSize: parseInt(options.cacheSize),\r\n      cacheMemoryMB: parseInt(options.cacheMemory),\r\n      enablePooling: true,\r\n      compressionThreshold: parseInt(options.compressionThreshold),\r\n      batchSize: 100,\r\n    });\r\n\r\n    await memory.initialize();\r\n\r\n    // Get baseline metrics\r\n    const baselineAnalytics = memory.getAdvancedAnalytics();\r\n    const baselineHealth = await memory.healthCheck();\r\n\r\n    console.log(chalk.cyan('üìã Baseline Metrics:'));\r\n    console.log(`   Cache Hit Rate: ${baselineAnalytics.cache.hitRate?.toFixed(1) || '0'}%`);\r\n    console.log(`   Health Score: ${baselineHealth.score}/100\\n`);\r\n\r\n    // Run optimization steps\r\n    console.log(chalk.yellow('üîß Optimization Steps:\\n'));\r\n\r\n    // Step 1: Cache optimization\r\n    console.log(chalk.blue('1. Optimizing cache configuration...'));\r\n    // Cache is already optimized in constructor\r\n    console.log(chalk.green('   ‚úì Cache configuration optimized\\n'));\r\n\r\n    // Step 2: Database optimization\r\n    console.log(chalk.blue('2. Optimizing database performance...'));\r\n    const db = await DatabaseManager.getInstance();\r\n    const dbAnalytics = db.getDatabaseAnalytics();\r\n\r\n    if (dbAnalytics.fragmentation > 20) {\r\n      console.log(chalk.yellow('   ‚ö†Ô∏è High database fragmentation detected'));\r\n      console.log(chalk.blue('   Running database optimization...'));\r\n      // Database optimization would happen here\r\n    }\r\n    console.log(chalk.green('   ‚úì Database optimization completed\\n'));\r\n\r\n    // Step 3: Memory cleanup\r\n    console.log(chalk.blue('3. Performing memory cleanup...'));\r\n    await memory.compress();\r\n    console.log(chalk.green('   ‚úì Memory compression completed\\n'));\r\n\r\n    // Step 4: Pattern analysis\r\n    console.log(chalk.blue('4. Analyzing access patterns...'));\r\n    const patterns = await memory.learnPatterns();\r\n    console.log(chalk.green(`   ‚úì Learned ${patterns.length} access patterns\\n`));\r\n\r\n    // Get final metrics\r\n    const finalAnalytics = memory.getAdvancedAnalytics();\r\n    const finalHealth = await memory.healthCheck();\r\n\r\n    // Show improvement\r\n    console.log(chalk.green.bold('üìà Optimization Results:\\n'));\r\n\r\n    const hitRateImprovement =\r\n      (finalAnalytics.cache.hitRate || 0) - (baselineAnalytics.cache.hitRate || 0);\r\n    const healthImprovement = finalHealth.score - baselineHealth.score;\r\n\r\n    console.log(chalk.cyan('Performance Improvements:'));\r\n    console.log(\r\n      `   Cache Hit Rate: ${hitRateImprovement >= 0 ? '+' : ''}${hitRateImprovement.toFixed(1)}%`,\r\n    );\r\n    console.log(\r\n      `   Health Score: ${healthImprovement >= 0 ? '+' : ''}${healthImprovement.toFixed(1)} points`,\r\n    );\r\n\r\n    if (hitRateImprovement > 0 || healthImprovement > 0) {\r\n      console.log(chalk.green('\\n‚úÖ Memory optimization completed successfully!'));\r\n    } else {\r\n      console.log(chalk.yellow('\\n‚ö†Ô∏è System was already well-optimized'));\r\n    }\r\n\r\n    await memory.shutdown();\r\n  } catch (error) {\r\n    console.error(chalk.red('‚ùå Optimization failed:'), (error as Error).message);\r\n  }\r\n}\r\n\r\n/**\r\n * Start interactive memory monitoring dashboard\r\n */\r\nasync function startMemoryMonitoring(): Promise<void> {\r\n  console.log(chalk.yellow('üìä Starting memory monitoring dashboard...\\n'));\r\n\r\n  try {\r\n    // Initialize systems\r\n    const memory = new Memory('hive-mind-monitor');\r\n    const db = await DatabaseManager.getInstance();\r\n    await memory.initialize();\r\n\r\n    const monitor = new MemoryMonitor(memory, db);\r\n\r\n    // Set up event listeners\r\n    monitor.on('alert', (alert) => {\r\n      const color =\r\n        alert.level === 'critical' ? 'red' : alert.level === 'warning' ? 'yellow' : 'blue';\r\n      console.log(chalk[color](`üö® ${alert.level.toUpperCase()}: ${alert.message}`));\r\n    });\r\n\r\n    monitor.on('metrics:collected', (data) => {\r\n      // Clear screen and show current metrics\r\n      console.clear();\r\n      console.log(chalk.blue.bold('üß† Hive Mind Memory Monitor\\n'));\r\n\r\n      const { metrics } = data;\r\n      console.log(chalk.cyan('üìä Real-time Metrics:'));\r\n      console.log(`   Cache Hit Rate: ${chalk.bold(metrics.cacheHitRate.toFixed(1))}%`);\r\n      console.log(`   Avg Query Time: ${chalk.bold(metrics.avgQueryTime.toFixed(1))}ms`);\r\n      console.log(`   Memory Utilization: ${chalk.bold(metrics.memoryUtilization.toFixed(1))}%`);\r\n      console.log(`   Pool Efficiency: ${chalk.bold(metrics.poolEfficiency.toFixed(1))}%`);\r\n      console.log(`   DB Fragmentation: ${chalk.bold(metrics.dbFragmentation.toFixed(1))}%`);\r\n      console.log(`   Last Updated: ${chalk.gray(new Date().toLocaleTimeString())}\\n`);\r\n\r\n      console.log(chalk.gray('Press Ctrl+C to stop monitoring...'));\r\n    });\r\n\r\n    monitor.on('health:analyzed', (report) => {\r\n      if (report.overall.status !== 'good' && report.overall.status !== 'excellent') {\r\n        console.log(chalk.yellow(`\\n‚ö†Ô∏è Health Status: ${report.overall.status}`));\r\n        console.log(`   ${report.overall.summary}`);\r\n      }\r\n    });\r\n\r\n    // Start monitoring\r\n    await monitor.start();\r\n\r\n    // Handle shutdown\r\n    process.on('SIGINT', async () => {\r\n      console.log(chalk.yellow('\\n\\nüõë Shutting down monitor...'));\r\n      monitor.stop();\r\n      await memory.shutdown();\r\n      process.exit(0);\r\n    });\r\n\r\n    console.log(chalk.green('‚úÖ Memory monitoring started!'));\r\n    console.log(chalk.gray('Real-time metrics will appear below...\\n'));\r\n  } catch (error) {\r\n    console.error(chalk.red('‚ùå Monitoring startup failed:'), (error as Error).message);\r\n  }\r\n}\r\n\r\n/**\r\n * Generate detailed memory report\r\n */\r\nasync function generateMemoryReport(): Promise<void> {\r\n  console.log(chalk.yellow('üìÑ Generating detailed memory report...\\n'));\r\n\r\n  try {\r\n    // Initialize systems\r\n    const memory = new Memory('hive-mind-reporter');\r\n    const db = await DatabaseManager.getInstance();\r\n    await memory.initialize();\r\n\r\n    const monitor = new MemoryMonitor(memory, db);\r\n\r\n    // Generate comprehensive report\r\n    const report = await monitor.generateDetailedReport();\r\n    const analytics = memory.getAdvancedAnalytics();\r\n\r\n    console.log(chalk.green.bold('üìä Comprehensive Memory Report\\n'));\r\n\r\n    // Executive Summary\r\n    console.log(chalk.cyan.bold('üéØ Executive Summary:'));\r\n    console.log(`   Overall Status: ${getStatusBadge(report.overall.status)}`);\r\n    console.log(`   Health Score: ${chalk.bold(report.overall.score)}/100`);\r\n    console.log(`   ${report.overall.summary}\\n`);\r\n\r\n    // Key Metrics\r\n    console.log(chalk.cyan.bold('üìà Key Performance Metrics:'));\r\n    console.log(`   Cache Hit Rate: ${formatMetric(report.metrics.cacheHitRate, '%', 70)}`);\r\n    console.log(\r\n      `   Average Query Time: ${formatMetric(report.metrics.avgQueryTime, 'ms', 50, true)}`,\r\n    );\r\n    console.log(\r\n      `   Memory Utilization: ${formatMetric(report.metrics.memoryUtilization, '%', 80)}`,\r\n    );\r\n    console.log(`   Pool Efficiency: ${formatMetric(report.metrics.poolEfficiency, '%', 50)}`);\r\n    console.log(\r\n      `   Compression Ratio: ${formatMetric(report.metrics.compressionRatio * 100, '%', 60)}\\n`,\r\n    );\r\n\r\n    // Trends Analysis\r\n    console.log(chalk.cyan.bold('üìä Performance Trends:'));\r\n    console.log(`   Performance: ${getTrendIndicator(report.trends.performance)}`);\r\n    console.log(`   Memory Usage: ${getTrendIndicator(report.trends.memoryUsage)}`);\r\n    console.log(`   Cache Efficiency: ${getTrendIndicator(report.trends.cacheEfficiency)}\\n`);\r\n\r\n    // Active Alerts\r\n    if (report.alerts.length > 0) {\r\n      console.log(chalk.cyan.bold('üö® Active Alerts:'));\r\n      report.alerts.forEach((alert) => {\r\n        const color =\r\n          alert.level === 'critical' ? 'red' : alert.level === 'warning' ? 'yellow' : 'blue';\r\n        console.log(`   ${chalk[color]('‚óè')} ${alert.message}`);\r\n      });\r\n      console.log('');\r\n    }\r\n\r\n    // Optimization Suggestions\r\n    if (report.suggestions.length > 0) {\r\n      console.log(chalk.cyan.bold('üí° Optimization Suggestions:'));\r\n      report.suggestions.forEach((suggestion, index) => {\r\n        const priorityColor =\r\n          suggestion.priority === 'critical'\r\n            ? 'red'\r\n            : suggestion.priority === 'high'\r\n              ? 'yellow'\r\n              : suggestion.priority === 'medium'\r\n                ? 'blue'\r\n                : 'gray';\r\n        console.log(`   ${index + 1}. ${chalk[priorityColor].bold(suggestion.title)}`);\r\n        console.log(`      ${suggestion.description}`);\r\n        console.log(`      Impact: ${chalk.green(suggestion.estimatedImpact)}`);\r\n        console.log(`      Effort: ${chalk.blue(suggestion.effort)}\\n`);\r\n      });\r\n    }\r\n\r\n    // Resource Utilization\r\n    console.log(chalk.cyan.bold('üíæ Resource Utilization:'));\r\n    console.log(`   Cache Memory: ${(analytics.cache.memoryUsage / 1024 / 1024).toFixed(1)} MB`);\r\n    console.log(`   Cache Entries: ${analytics.cache.size || 0}`);\r\n    console.log(`   Access Patterns: ${analytics.accessPatterns.total || 0} tracked\\n`);\r\n\r\n    // Recommendations\r\n    console.log(chalk.cyan.bold('üéØ Immediate Actions Recommended:'));\r\n    if (report.overall.score < 70) {\r\n      console.log(`   ‚Ä¢ ${chalk.red('Run memory optimization immediately')}`);\r\n    }\r\n    if (report.metrics.cacheHitRate < 50) {\r\n      console.log(`   ‚Ä¢ ${chalk.yellow('Increase cache size')}`);\r\n    }\r\n    if (report.metrics.avgQueryTime > 100) {\r\n      console.log(`   ‚Ä¢ ${chalk.yellow('Optimize database queries')}`);\r\n    }\r\n    if (report.alerts.filter((a) => a.level === 'critical').length > 0) {\r\n      console.log(`   ‚Ä¢ ${chalk.red('Address critical alerts immediately')}`);\r\n    }\r\n\r\n    console.log(chalk.green('\\n‚úÖ Report generation completed!'));\r\n\r\n    await memory.shutdown();\r\n  } catch (error) {\r\n    console.error(chalk.red('‚ùå Report generation failed:'), (error as Error).message);\r\n  }\r\n}\r\n\r\n/**\r\n * Perform memory cleanup operations\r\n */\r\nasync function performMemoryCleanup(): Promise<void> {\r\n  console.log(chalk.yellow('üßπ Performing memory cleanup...\\n'));\r\n\r\n  try {\r\n    const memory = new Memory('hive-mind-cleaner');\r\n    await memory.initialize();\r\n\r\n    console.log(chalk.blue('1. Cleaning expired entries...'));\r\n    // Cleanup would happen automatically through memory management\r\n\r\n    console.log(chalk.blue('2. Compressing old data...'));\r\n    await memory.compress();\r\n\r\n    console.log(chalk.blue('3. Optimizing cache...'));\r\n    // Cache optimization happens automatically\r\n\r\n    console.log(chalk.blue('4. Analyzing patterns...'));\r\n    const patterns = await memory.learnPatterns();\r\n\r\n    console.log(chalk.green(`‚úÖ Cleanup completed!`));\r\n    console.log(`   ‚Ä¢ Learned ${patterns.length} patterns`);\r\n    console.log(`   ‚Ä¢ Cache optimized`);\r\n    console.log(`   ‚Ä¢ Memory compressed\\n`);\r\n\r\n    await memory.shutdown();\r\n  } catch (error) {\r\n    console.error(chalk.red('‚ùå Cleanup failed:'), (error as Error).message);\r\n  }\r\n}\r\n\r\n/**\r\n * Show memory system overview\r\n */\r\nasync function showMemoryOverview(): Promise<void> {\r\n  console.log(chalk.cyan('Welcome to the Hive Mind Memory Optimization System!\\n'));\r\n\r\n  console.log('Available commands:');\r\n  console.log(`  ${chalk.green('--analyze')}     Analyze current memory performance`);\r\n  console.log(`  ${chalk.green('--optimize')}    Run comprehensive optimization`);\r\n  console.log(`  ${chalk.green('--monitor')}     Start real-time monitoring dashboard`);\r\n  console.log(`  ${chalk.green('--report')}      Generate detailed performance report`);\r\n  console.log(`  ${chalk.green('--cleanup')}     Perform memory cleanup operations\\n`);\r\n\r\n  console.log('Configuration options:');\r\n  console.log(`  ${chalk.blue('--cache-size')}         Set cache size (default: 10000)`);\r\n  console.log(\r\n    `  ${chalk.blue('--cache-memory')}       Set cache memory limit in MB (default: 100)`,\r\n  );\r\n  console.log(\r\n    `  ${chalk.blue('--compression-threshold')} Set compression threshold in bytes (default: 10000)\\n`,\r\n  );\r\n\r\n  console.log(chalk.yellow('üí° Quick start: Run with --analyze to see current performance'));\r\n}\r\n\r\n/**\r\n * Helper functions\r\n */\r\n\r\nfunction getStatusBadge(status: string): string {\r\n  const colors: Record<string, string> = {\r\n    excellent: 'green',\r\n    good: 'cyan',\r\n    fair: 'yellow',\r\n    poor: 'red',\r\n    critical: 'red',\r\n  };\r\n  const color = colors[status] || 'gray';\r\n  return (chalk as any)[color].bold(status.toUpperCase());\r\n}\r\n\r\nfunction formatMetric(value: number, unit: string, threshold: number, inverse = false): string {\r\n  const good = inverse ? value <= threshold : value >= threshold;\r\n  const color = good ? 'green' : value >= threshold * 0.8 ? 'yellow' : 'red';\r\n  return chalk[color].bold(`${value.toFixed(1)}${unit}`);\r\n}\r\n\r\nfunction getTrendIndicator(trend: string): string {\r\n  const indicators: Record<string, string> = {\r\n    improving: chalk.green('üìà Improving'),\r\n    stable: chalk.blue('‚û°Ô∏è Stable'),\r\n    degrading: chalk.red('üìâ Degrading'),\r\n    increasing: chalk.red('üìà Increasing'),\r\n    decreasing: chalk.green('üìâ Decreasing'),\r\n  };\r\n  return indicators[trend] || chalk.gray('‚ùì Unknown');\r\n}\r\n"],"names":["Command","MemoryMonitor","Memory","DatabaseManager","chalk","createOptimizeMemoryCommand","command","description","option","action","options","console","log","blue","bold","analyze","analyzeMemoryPerformance","optimize","runMemoryOptimization","monitor","startMemoryMonitoring","report","generateMemoryReport","cleanup","performMemoryCleanup","showMemoryOverview","error","red","message","process","exit","yellow","memory","cacheSize","cacheMemoryMB","enablePooling","compressionThreshold","initialize","analytics","getAdvancedAnalytics","healthCheck","green","cyan","cache","hitRate","toFixed","memoryUsage","utilizationPercent","evictions","operation","stats","Object","entries","performance","avg","count","pools","name","reuseRate","undefined","statusColor","status","toUpperCase","score","issues","length","forEach","issue","recommendations","rec","shutdown","parseInt","cacheMemory","batchSize","baselineAnalytics","baselineHealth","db","getInstance","dbAnalytics","getDatabaseAnalytics","fragmentation","compress","patterns","learnPatterns","finalAnalytics","finalHealth","hitRateImprovement","healthImprovement","on","alert","color","level","data","clear","metrics","cacheHitRate","avgQueryTime","memoryUtilization","poolEfficiency","dbFragmentation","gray","Date","toLocaleTimeString","overall","summary","start","stop","generateDetailedReport","getStatusBadge","formatMetric","compressionRatio","getTrendIndicator","trends","cacheEfficiency","alerts","suggestions","suggestion","index","priorityColor","priority","title","estimatedImpact","effort","size","accessPatterns","total","filter","a","colors","excellent","good","fair","poor","critical","value","unit","threshold","inverse","trend","indicators","improving","stable","degrading","increasing","decreasing"],"mappings":"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"}