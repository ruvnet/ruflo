{"version":3,"sources":["../../../src/mcp/server-with-wrapper.ts"],"sourcesContent":["#!/usr/bin/env node\r\n/**\r\n * MCP Server entry point that uses the wrapper by default\r\n */\r\n\r\nimport { ClaudeCodeMCPWrapper } from './claude-code-wrapper.js';\r\n\r\n// Check if we should use the legacy server\r\nconst useLegacy =\r\n  process.env.CLAUDE_FLOW_LEGACY_MCP === 'true' || process.argv.includes('--legacy');\r\n\r\nasync function main() {\r\n  if (useLegacy) {\r\n    console.error('Starting Claude-Flow MCP in legacy mode...');\r\n    // Dynamically import the old server to avoid circular dependencies\r\n    const module = await import('./server.js');\r\n    if (module.runMCPServer) {\r\n      await module.runMCPServer();\r\n    } else if (module.default) {\r\n      await module.default();\r\n    } else {\r\n      console.error('Could not find runMCPServer function in legacy server');\r\n      process.exit(1);\r\n    }\r\n  } else {\r\n    console.error('Starting Claude-Flow MCP with Claude Code wrapper...');\r\n    const wrapper = new ClaudeCodeMCPWrapper();\r\n    await wrapper.run();\r\n  }\r\n}\r\n\r\n// Run the server\r\nmain().catch((error) => {\r\n  console.error('Fatal error:', error);\r\n  process.exit(1);\r\n});\r\n"],"names":["ClaudeCodeMCPWrapper","useLegacy","process","env","CLAUDE_FLOW_LEGACY_MCP","argv","includes","main","console","error","module","runMCPServer","default","exit","wrapper","run","catch"],"mappings":";AAKA,SAASA,oBAAoB,QAAQ,2BAA2B;AAGhE,MAAMC,YACJC,QAAQC,GAAG,CAACC,sBAAsB,KAAK,UAAUF,QAAQG,IAAI,CAACC,QAAQ,CAAC;AAEzE,eAAeC;IACb,IAAIN,WAAW;QACbO,QAAQC,KAAK,CAAC;QAEd,MAAMC,SAAS,MAAM,MAAM,CAAC;QAC5B,IAAIA,OAAOC,YAAY,EAAE;YACvB,MAAMD,OAAOC,YAAY;QAC3B,OAAO,IAAID,OAAOE,OAAO,EAAE;YACzB,MAAMF,OAAOE,OAAO;QACtB,OAAO;YACLJ,QAAQC,KAAK,CAAC;YACdP,QAAQW,IAAI,CAAC;QACf;IACF,OAAO;QACLL,QAAQC,KAAK,CAAC;QACd,MAAMK,UAAU,IAAId;QACpB,MAAMc,QAAQC,GAAG;IACnB;AACF;AAGAR,OAAOS,KAAK,CAAC,CAACP;IACZD,QAAQC,KAAK,CAAC,gBAAgBA;IAC9BP,QAAQW,IAAI,CAAC;AACf"}