{
  "version": 3,
  "sources": ["../../src/api/claude-api-errors.ts"],
  "sourcesContent": ["/**\n * Claude API specific error types with enhanced error handling\n */\n\nimport { ClaudeFlowError } from '../utils/errors.js';\n\n/**\n * Base error class for Claude API errors\n */\nexport class ClaudeAPIError extends ClaudeFlowError {\n  constructor(\n    message: string,\n    public readonly statusCode?: number,\n    public readonly retryable: boolean = false,\n    details?: unknown,\n  ) {\n    super(message, 'CLAUDE_API_ERROR', details);\n    this.name = 'ClaudeAPIError';\n  }\n}\n\n/**\n * Error for 500 Internal Server Error\n */\nexport class ClaudeInternalServerError extends ClaudeAPIError {\n  constructor(message: string, details?: unknown) {\n    super(\n      message || 'Claude API internal server error. The service may be temporarily unavailable.',\n      500,\n      true, // Retryable\n      details,\n    );\n    this.name = 'ClaudeInternalServerError';\n  }\n}\n\n/**\n * Error for 503 Service Unavailable\n */\nexport class ClaudeServiceUnavailableError extends ClaudeAPIError {\n  constructor(message: string, details?: unknown) {\n    super(\n      message || 'Claude API service is temporarily unavailable. Please try again later.',\n      503,\n      true, // Retryable\n      details,\n    );\n    this.name = 'ClaudeServiceUnavailableError';\n  }\n}\n\n/**\n * Error for 429 Too Many Requests (Rate Limit)\n */\nexport class ClaudeRateLimitError extends ClaudeAPIError {\n  constructor(\n    message: string,\n    public readonly retryAfter?: number,\n    details?: unknown,\n  ) {\n    super(\n      message || 'Rate limit exceeded. Please wait before making more requests.',\n      429,\n      true, // Retryable\n      details,\n    );\n    this.name = 'ClaudeRateLimitError';\n  }\n}\n\n/**\n * Error for network timeouts\n */\nexport class ClaudeTimeoutError extends ClaudeAPIError {\n  constructor(message: string, public readonly timeout: number, details?: unknown) {\n    super(\n      message || `Request timed out after ${timeout}ms. The API may be slow or unreachable.`,\n      undefined,\n      true, // Retryable\n      details,\n    );\n    this.name = 'ClaudeTimeoutError';\n  }\n}\n\n/**\n * Error for network-related issues\n */\nexport class ClaudeNetworkError extends ClaudeAPIError {\n  constructor(message: string, details?: unknown) {\n    super(\n      message || 'Network error occurred. Please check your internet connection.',\n      undefined,\n      true, // Retryable\n      details,\n    );\n    this.name = 'ClaudeNetworkError';\n  }\n}\n\n/**\n * Error for authentication issues\n */\nexport class ClaudeAuthenticationError extends ClaudeAPIError {\n  constructor(message: string, details?: unknown) {\n    super(\n      message || 'Authentication failed. Please check your API key.',\n      401,\n      false, // Not retryable\n      details,\n    );\n    this.name = 'ClaudeAuthenticationError';\n  }\n}\n\n/**\n * Error for invalid requests\n */\nexport class ClaudeValidationError extends ClaudeAPIError {\n  constructor(message: string, details?: unknown) {\n    super(\n      message || 'Invalid request. Please check your parameters.',\n      400,\n      false, // Not retryable\n      details,\n    );\n    this.name = 'ClaudeValidationError';\n  }\n}\n\n/**\n * Health check result\n */\nexport interface HealthCheckResult {\n  healthy: boolean;\n  latency?: number;\n  error?: string;\n  timestamp: Date;\n}\n\n/**\n * User-friendly error messages and fallback suggestions\n */\nexport const ERROR_MESSAGES = {\n  INTERNAL_SERVER_ERROR: {\n    title: 'Claude API Service Error',\n    message: 'The Claude API is experiencing technical difficulties.',\n    suggestions: [\n      'Wait a few minutes and try again',\n      'Check the Anthropic status page for service updates',\n      'Consider using a fallback AI service if available',\n      'Cache previous responses for offline usage',\n    ],\n  },\n  SERVICE_UNAVAILABLE: {\n    title: 'Service Temporarily Unavailable',\n    message: 'Claude API is temporarily unavailable or undergoing maintenance.',\n    suggestions: [\n      'Try again in 5-10 minutes',\n      'Check if there\\'s scheduled maintenance',\n      'Use cached responses if available',\n      'Consider implementing a queue for requests',\n    ],\n  },\n  RATE_LIMIT: {\n    title: 'Rate Limit Exceeded',\n    message: 'You\\'ve made too many requests to the Claude API.',\n    suggestions: [\n      'Implement request throttling',\n      'Batch multiple requests together',\n      'Consider upgrading your API plan',\n      'Use exponential backoff for retries',\n    ],\n  },\n  TIMEOUT: {\n    title: 'Request Timeout',\n    message: 'The request took too long to complete.',\n    suggestions: [\n      'Check your internet connection',\n      'Try a simpler request',\n      'Increase the timeout duration',\n      'Break large requests into smaller ones',\n    ],\n  },\n  NETWORK_ERROR: {\n    title: 'Network Connection Error',\n    message: 'Unable to connect to the Claude API.',\n    suggestions: [\n      'Check your internet connection',\n      'Verify firewall/proxy settings',\n      'Try using a different network',\n      'Check if the API endpoint is correct',\n    ],\n  },\n  AUTHENTICATION: {\n    title: 'Authentication Failed',\n    message: 'Unable to authenticate with the Claude API.',\n    suggestions: [\n      'Verify your API key is correct',\n      'Check if your API key has expired',\n      'Ensure the API key has proper permissions',\n      'Generate a new API key if needed',\n    ],\n  },\n  VALIDATION: {\n    title: 'Invalid Request',\n    message: 'The request contains invalid parameters.',\n    suggestions: [\n      'Check the request parameters',\n      'Verify the model name is correct',\n      'Ensure message format is valid',\n      'Review the API documentation',\n    ],\n  },\n};\n\n/**\n * Get user-friendly error information\n */\nexport function getUserFriendlyError(error: ClaudeAPIError): {\n  title: string;\n  message: string;\n  suggestions: string[];\n  retryable: boolean;\n} {\n  let errorInfo = ERROR_MESSAGES.INTERNAL_SERVER_ERROR; // Default\n  \n  if (error instanceof ClaudeInternalServerError) {\n    errorInfo = ERROR_MESSAGES.INTERNAL_SERVER_ERROR;\n  } else if (error instanceof ClaudeServiceUnavailableError) {\n    errorInfo = ERROR_MESSAGES.SERVICE_UNAVAILABLE;\n  } else if (error instanceof ClaudeRateLimitError) {\n    errorInfo = ERROR_MESSAGES.RATE_LIMIT;\n  } else if (error instanceof ClaudeTimeoutError) {\n    errorInfo = ERROR_MESSAGES.TIMEOUT;\n  } else if (error instanceof ClaudeNetworkError) {\n    errorInfo = ERROR_MESSAGES.NETWORK_ERROR;\n  } else if (error instanceof ClaudeAuthenticationError) {\n    errorInfo = ERROR_MESSAGES.AUTHENTICATION;\n  } else if (error instanceof ClaudeValidationError) {\n    errorInfo = ERROR_MESSAGES.VALIDATION;\n  }\n\n  return {\n    ...errorInfo,\n    retryable: error.retryable,\n  };\n}"],
  "mappings": "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",
  "names": []
}
