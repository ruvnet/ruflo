{
  "version": 3,
  "sources": ["../../src/config/ruv-swarm-integration.ts"],
  "sourcesContent": ["/**\n * ruv-swarm integration helper for Claude Code configuration\n *\n * This module bridges the main claude-flow configuration with\n * ruv-swarm specific settings and provides utility functions\n * for seamless integration.\n */\n\nimport { configManager, ConfigManager } from './config-manager.js';\nimport { getRuvSwarmConfigManager, RuvSwarmConfigManager } from './ruv-swarm-config.js';\n// import { createLogger } from '../core/logger.js';\n\n// Create logger for integration\n// const logger = createLogger('ruv-swarm-integration');\n\n/**\n * Integration manager that synchronizes configurations\n */\nexport class RuvSwarmIntegration {\n  private configManager: ConfigManager;\n  private ruvSwarmManager: RuvSwarmConfigManager;\n\n  constructor(configManager: ConfigManager, ruvSwarmManager: RuvSwarmConfigManager) {\n    this.configManager = configManager;\n    this.ruvSwarmManager = ruvSwarmManager;\n  }\n\n  /**\n   * Synchronize main config with ruv-swarm config\n   */\n  syncConfiguration(): void {\n    const mainConfig = this.configManager.getRuvSwarmConfig();\n    const ruvSwarmConfig = this.ruvSwarmManager.getConfig();\n\n    // Update ruv-swarm config from main config\n    if (mainConfig.enabled) {\n      this.ruvSwarmManager.updateSwarmConfig({\n        defaultTopology: mainConfig.defaultTopology,\n        maxAgents: mainConfig.maxAgents,\n        defaultStrategy: mainConfig.defaultStrategy,\n        enableHooks: mainConfig.enableHooks,\n      });\n\n      this.ruvSwarmManager.updateIntegrationConfig({\n        enableMCPTools: true,\n        enableCLICommands: true,\n        enableHooks: mainConfig.enableHooks,\n      });\n\n      this.ruvSwarmManager.updateMemoryConfig({\n        enablePersistence: mainConfig.enablePersistence,\n      });\n\n      this.ruvSwarmManager.updateNeuralConfig({\n        enableTraining: mainConfig.enableNeuralTraining,\n      });\n    }\n\n    // logger.debug('Configuration synchronized between main and ruv-swarm configs');\n  }\n\n  /**\n   * Get unified command arguments for ruv-swarm CLI\n   */\n  getUnifiedCommandArgs(): string[] {\n    const mainArgs = this.configManager.getRuvSwarmArgs();\n    const ruvSwarmArgs = this.ruvSwarmManager.getCommandArgs();\n\n    // Main config takes precedence, then ruv-swarm specific\n    const unified = [...mainArgs];\n\n    // Add ruv-swarm specific args that aren't in main config\n    for (let i = 0; i < ruvSwarmArgs.length; i += 2) {\n      const flag = ruvSwarmArgs[i];\n      const value = ruvSwarmArgs[i + 1];\n\n      // Skip if already set by main config\n      if (!unified.includes(flag)) {\n        unified.push(flag, value);\n      }\n    }\n\n    return unified;\n  }\n\n  /**\n   * Initialize ruv-swarm integration\n   */\n  async initialize(): Promise<{ success: boolean; message: string }> {\n    try {\n      // Check if ruv-swarm is enabled in main config\n      if (!this.configManager.isRuvSwarmEnabled()) {\n        return {\n          success: false,\n          message: 'ruv-swarm is disabled in main configuration',\n        };\n      }\n\n      // Sync configurations\n      this.syncConfiguration();\n\n      // Validate configurations\n      const mainValidation = this.validateMainConfig();\n      if (!mainValidation.valid) {\n        return {\n          success: false,\n          message: `Main config validation failed: ${mainValidation.errors.join(', ')}`,\n        };\n      }\n\n      const ruvSwarmValidation = this.ruvSwarmManager.validateConfig();\n      if (!ruvSwarmValidation.valid) {\n        return {\n          success: false,\n          message: `ruv-swarm config validation failed: ${ruvSwarmValidation.errors.join(', ')}`,\n        };\n      }\n\n      // logger.info('ruv-swarm integration initialized successfully');\n\n      return {\n        success: true,\n        message: 'ruv-swarm integration initialized and configured',\n      };\n    } catch (error) {\n      const message = `Failed to initialize ruv-swarm integration: ${(error as Error).message}`;\n      // logger.error(message, { error });\n\n      return {\n        success: false,\n        message,\n      };\n    }\n  }\n\n  /**\n   * Validate main configuration for ruv-swarm compatibility\n   */\n  private validateMainConfig(): { valid: boolean; errors: string[] } {\n    const errors: string[] = [];\n    const ruvSwarmConfig = this.configManager.getRuvSwarmConfig();\n\n    // Check required fields\n    if (!ruvSwarmConfig.defaultTopology) {\n      errors.push('ruvSwarm.defaultTopology is required');\n    }\n\n    if (ruvSwarmConfig.maxAgents <= 0) {\n      errors.push('ruvSwarm.maxAgents must be greater than 0');\n    }\n\n    if (!ruvSwarmConfig.defaultStrategy) {\n      errors.push('ruvSwarm.defaultStrategy is required');\n    }\n\n    return {\n      valid: errors.length === 0,\n      errors,\n    };\n  }\n\n  /**\n   * Get current integration status\n   */\n  getStatus(): {\n    enabled: boolean;\n    mainConfig: any;\n    ruvSwarmConfig: any;\n    synchronized: boolean;\n  } {\n    const mainConfig = this.configManager.getRuvSwarmConfig();\n    const ruvSwarmConfig = this.ruvSwarmManager.getConfig();\n\n    return {\n      enabled: mainConfig.enabled,\n      mainConfig,\n      ruvSwarmConfig,\n      synchronized: this.isConfigurationSynchronized(),\n    };\n  }\n\n  /**\n   * Check if configurations are synchronized\n   */\n  private isConfigurationSynchronized(): boolean {\n    const mainConfig = this.configManager.getRuvSwarmConfig();\n    const ruvSwarmConfig = this.ruvSwarmManager.getConfig();\n\n    return (\n      ruvSwarmConfig.swarm.defaultTopology === mainConfig.defaultTopology &&\n      ruvSwarmConfig.swarm.maxAgents === mainConfig.maxAgents &&\n      ruvSwarmConfig.swarm.defaultStrategy === mainConfig.defaultStrategy &&\n      ruvSwarmConfig.swarm.enableHooks === mainConfig.enableHooks &&\n      ruvSwarmConfig.memory.enablePersistence === mainConfig.enablePersistence &&\n      ruvSwarmConfig.neural.enableTraining === mainConfig.enableNeuralTraining\n    );\n  }\n\n  /**\n   * Update configuration and sync\n   */\n  updateConfiguration(updates: {\n    main?: Partial<Parameters<ConfigManager['setRuvSwarmConfig']>[0]>;\n    ruvSwarm?: Partial<Parameters<RuvSwarmConfigManager['updateConfig']>[0]>;\n  }): void {\n    if (updates.main) {\n      this.configManager.setRuvSwarmConfig(updates.main);\n    }\n\n    if (updates.ruvSwarm) {\n      this.ruvSwarmManager.updateConfig(updates.ruvSwarm);\n    }\n\n    // Re-sync after updates\n    this.syncConfiguration();\n  }\n}\n\n/**\n * Create singleton integration instance\n */\nlet integrationInstance: RuvSwarmIntegration | null = null;\n\nexport function getRuvSwarmIntegration(): RuvSwarmIntegration {\n  if (!integrationInstance) {\n    const ruvSwarmManager = getRuvSwarmConfigManager(logger);\n    integrationInstance = new RuvSwarmIntegration(configManager, ruvSwarmManager);\n  }\n  return integrationInstance;\n}\n\n/**\n * Initialize ruv-swarm integration with claude-flow\n */\nexport async function initializeRuvSwarmIntegration(): Promise<{\n  success: boolean;\n  message: string;\n}> {\n  const integration = getRuvSwarmIntegration();\n  return integration.initialize();\n}\n\n/**\n * Helper functions for CLI commands\n */\nexport class RuvSwarmConfigHelpers {\n  /**\n   * Quick setup for development environment\n   */\n  static setupDevelopmentConfig(): void {\n    const integration = getRuvSwarmIntegration();\n\n    integration.updateConfiguration({\n      main: {\n        enabled: true,\n        defaultTopology: 'hierarchical',\n        maxAgents: 8,\n        defaultStrategy: 'specialized',\n        autoInit: true,\n        enableHooks: true,\n        enablePersistence: true,\n        enableNeuralTraining: true,\n      },\n    });\n\n    // logger.info('Development configuration applied');\n  }\n\n  /**\n   * Quick setup for research environment\n   */\n  static setupResearchConfig(): void {\n    const integration = getRuvSwarmIntegration();\n\n    integration.updateConfiguration({\n      main: {\n        enabled: true,\n        defaultTopology: 'mesh',\n        maxAgents: 12,\n        defaultStrategy: 'adaptive',\n        autoInit: true,\n        enableHooks: true,\n        enablePersistence: true,\n        enableNeuralTraining: true,\n      },\n    });\n\n    // logger.info('Research configuration applied');\n  }\n\n  /**\n   * Quick setup for production environment\n   */\n  static setupProductionConfig(): void {\n    const integration = getRuvSwarmIntegration();\n\n    integration.updateConfiguration({\n      main: {\n        enabled: true,\n        defaultTopology: 'star',\n        maxAgents: 6,\n        defaultStrategy: 'balanced',\n        autoInit: false,\n        enableHooks: true,\n        enablePersistence: true,\n        enableNeuralTraining: false,\n      },\n    });\n\n    // logger.info('Production configuration applied');\n  }\n\n  /**\n   * Get configuration for specific use case\n   */\n  static getConfigForUseCase(useCase: 'development' | 'research' | 'production'): any {\n    const integration = getRuvSwarmIntegration();\n\n    switch (useCase) {\n      case 'development':\n        return {\n          topology: 'hierarchical',\n          maxAgents: 8,\n          strategy: 'specialized',\n          features: ['hooks', 'persistence', 'neural-training'],\n        };\n\n      case 'research':\n        return {\n          topology: 'mesh',\n          maxAgents: 12,\n          strategy: 'adaptive',\n          features: ['hooks', 'persistence', 'neural-training', 'advanced-metrics'],\n        };\n\n      case 'production':\n        return {\n          topology: 'star',\n          maxAgents: 6,\n          strategy: 'balanced',\n          features: ['hooks', 'persistence'],\n        };\n\n      default:\n        return integration.getStatus().mainConfig;\n    }\n  }\n}\n\nexport default {\n  RuvSwarmIntegration,\n  getRuvSwarmIntegration,\n  initializeRuvSwarmIntegration,\n  RuvSwarmConfigHelpers,\n};\n"],
  "mappings": "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",
  "names": ["configManager"]
}
