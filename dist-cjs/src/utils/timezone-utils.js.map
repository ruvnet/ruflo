{"version":3,"sources":["../../../src/utils/timezone-utils.js"],"sourcesContent":["/**\r\n * Timezone utilities for Claude Flow\r\n * Provides consistent timezone handling across the application\r\n */\r\n\r\n/**\r\n * Get current timestamp in user's local timezone\r\n * @returns {string} Formatted timestamp in local timezone\r\n */\r\nexport function getLocalTimestamp() {\r\n  const now = new Date();\r\n  return now.toLocaleString(undefined, {\r\n    year: 'numeric',\r\n    month: '2-digit',\r\n    day: '2-digit',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    second: '2-digit',\r\n    timeZoneName: 'short',\r\n  });\r\n}\r\n\r\n/**\r\n * Get current timestamp in ISO format but with timezone offset\r\n * @returns {string} ISO timestamp with timezone\r\n */\r\nexport function getLocalISOTimestamp() {\r\n  const now = new Date();\r\n  const timezoneOffset = -now.getTimezoneOffset();\r\n  const offsetHours = Math.floor(Math.abs(timezoneOffset) / 60);\r\n  const offsetMinutes = Math.abs(timezoneOffset) % 60;\r\n  const offsetSign = timezoneOffset >= 0 ? '+' : '-';\r\n\r\n  const year = now.getFullYear();\r\n  const month = String(now.getMonth() + 1).padStart(2, '0');\r\n  const day = String(now.getDate()).padStart(2, '0');\r\n  const hours = String(now.getHours()).padStart(2, '0');\r\n  const minutes = String(now.getMinutes()).padStart(2, '0');\r\n  const seconds = String(now.getSeconds()).padStart(2, '0');\r\n\r\n  const offsetHoursStr = String(offsetHours).padStart(2, '0');\r\n  const offsetMinutesStr = String(offsetMinutes).padStart(2, '0');\r\n\r\n  return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}${offsetSign}${offsetHoursStr}:${offsetMinutesStr}`;\r\n}\r\n\r\n/**\r\n * Convert UTC timestamp to local time display\r\n * @param {string|Date} timestamp - UTC timestamp\r\n * @returns {string} Formatted local timestamp\r\n */\r\nexport function convertToLocalTime(timestamp) {\r\n  const date = typeof timestamp === 'string' ? new Date(timestamp) : timestamp;\r\n\r\n  if (isNaN(date.getTime())) {\r\n    return 'Invalid Date';\r\n  }\r\n\r\n  return date.toLocaleString(undefined, {\r\n    year: 'numeric',\r\n    month: '2-digit',\r\n    day: '2-digit',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n    second: '2-digit',\r\n    timeZoneName: 'short',\r\n  });\r\n}\r\n\r\n/**\r\n * Get relative time description (e.g., \"2 hours ago\")\r\n * @param {string|Date} timestamp - Timestamp to compare\r\n * @returns {string} Relative time description\r\n */\r\nexport function getRelativeTime(timestamp) {\r\n  const date = typeof timestamp === 'string' ? new Date(timestamp) : timestamp;\r\n  const now = new Date();\r\n  const diffMs = now.getTime() - date.getTime();\r\n\r\n  if (isNaN(date.getTime())) {\r\n    return 'Invalid Date';\r\n  }\r\n\r\n  const diffSeconds = Math.floor(diffMs / 1000);\r\n  const diffMinutes = Math.floor(diffSeconds / 60);\r\n  const diffHours = Math.floor(diffMinutes / 60);\r\n  const diffDays = Math.floor(diffHours / 24);\r\n\r\n  if (diffSeconds < 60) {\r\n    return 'just now';\r\n  } else if (diffMinutes < 60) {\r\n    return `${diffMinutes} minute${diffMinutes === 1 ? '' : 's'} ago`;\r\n  } else if (diffHours < 24) {\r\n    return `${diffHours} hour${diffHours === 1 ? '' : 's'} ago`;\r\n  } else if (diffDays < 7) {\r\n    return `${diffDays} day${diffDays === 1 ? '' : 's'} ago`;\r\n  } else {\r\n    return date.toLocaleDateString();\r\n  }\r\n}\r\n\r\n/**\r\n * Format timestamp for display with both absolute and relative time\r\n * @param {string|Date} timestamp - Timestamp to format\r\n * @returns {object} Object with formatted times\r\n */\r\nexport function formatTimestampForDisplay(timestamp) {\r\n  const localTime = convertToLocalTime(timestamp);\r\n  const relativeTime = getRelativeTime(timestamp);\r\n\r\n  return {\r\n    absolute: localTime,\r\n    relative: relativeTime,\r\n    display: `${localTime} (${relativeTime})`,\r\n  };\r\n}\r\n\r\n/**\r\n * Get user's timezone information\r\n * @returns {object} Timezone information\r\n */\r\nexport function getTimezoneInfo() {\r\n  const date = new Date();\r\n  const formatter = new Intl.DateTimeFormat(undefined, { timeZoneName: 'long' });\r\n  const parts = formatter.formatToParts(date);\r\n  const timeZoneName = parts.find((part) => part.type === 'timeZoneName')?.value;\r\n\r\n  return {\r\n    name: timeZoneName || 'Unknown',\r\n    abbreviation: date.toLocaleString(undefined, { timeZoneName: 'short' }).split(' ').pop(),\r\n    offset: -date.getTimezoneOffset() / 60,\r\n    offsetString: date.toTimeString().split(' ')[1],\r\n  };\r\n}\r\n"],"names":["getLocalTimestamp","now","Date","toLocaleString","undefined","year","month","day","hour","minute","second","timeZoneName","getLocalISOTimestamp","timezoneOffset","getTimezoneOffset","offsetHours","Math","floor","abs","offsetMinutes","offsetSign","getFullYear","String","getMonth","padStart","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","offsetHoursStr","offsetMinutesStr","convertToLocalTime","timestamp","date","isNaN","getTime","getRelativeTime","diffMs","diffSeconds","diffMinutes","diffHours","diffDays","toLocaleDateString","formatTimestampForDisplay","localTime","relativeTime","absolute","relative","display","getTimezoneInfo","formatter","Intl","DateTimeFormat","parts","formatToParts","find","part","type","value","name","abbreviation","split","pop","offset","offsetString","toTimeString"],"mappings":"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"}