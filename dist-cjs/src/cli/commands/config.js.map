{"version":3,"sources":["../../../../src/cli/commands/config.ts"],"sourcesContent":["#!/usr/bin/env node\r\n\r\nimport { Command } from '../commander-fix.js';\r\nimport chalk from 'chalk';\r\nimport { readFileSync, writeFileSync } from 'fs';\r\nimport { ConfigManager } from '../../core/config.js';\r\n\r\nconst configManager = ConfigManager.getInstance();\r\n\r\nexport const configCommand = new Command('config').description('Configuration management commands');\r\n\r\n// Get command\r\nconfigCommand\r\n  .command('get')\r\n  .arguments('<key>')\r\n  .description('Get configuration value')\r\n  .action(async (key: string) => {\r\n    try {\r\n      const value = configManager.getValue(key);\r\n      console.log(chalk.green('✓'), `${key}:`, JSON.stringify(value, null, 2));\r\n    } catch (error) {\r\n      console.error(chalk.red('Failed to get configuration:'), (error as Error).message);\r\n      process.exit(1);\r\n    }\r\n  });\r\n\r\n// Set command\r\nconfigCommand\r\n  .command('set')\r\n  .arguments('<key> <value>')\r\n  .description('Set configuration value')\r\n  .action(async (key: string, value: string) => {\r\n    try {\r\n      let parsedValue: any = value;\r\n      try {\r\n        parsedValue = JSON.parse(value);\r\n      } catch {\r\n        // Keep as string if not valid JSON\r\n      }\r\n\r\n      await configManager.set(key, parsedValue);\r\n      console.log(\r\n        chalk.green('✓'),\r\n        `Configuration updated: ${key} = ${JSON.stringify(parsedValue)}`,\r\n      );\r\n    } catch (error) {\r\n      console.error(chalk.red('Failed to set configuration:'), (error as Error).message);\r\n      process.exit(1);\r\n    }\r\n  });\r\n\r\n// List command\r\nconfigCommand\r\n  .command('list')\r\n  .description('List all configuration values')\r\n  .option('--json', 'Output as JSON')\r\n  .action(async (options: any) => {\r\n    try {\r\n      const config = await configManager.getAll();\r\n\r\n      if (options.json) {\r\n        console.log(JSON.stringify(config, null, 2));\r\n      } else {\r\n        console.log(chalk.cyan.bold('Configuration:'));\r\n        console.log('─'.repeat(40));\r\n        for (const [key, value] of Object.entries(config)) {\r\n          console.log(`${chalk.yellow(key)}: ${JSON.stringify(value)}`);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error(chalk.red('Failed to list configuration:'), (error as Error).message);\r\n      process.exit(1);\r\n    }\r\n  });\r\n\r\n// Reset command\r\nconfigCommand\r\n  .command('reset')\r\n  .description('Reset configuration to defaults')\r\n  .option('--force', 'Skip confirmation')\r\n  .action(async (options: any) => {\r\n    try {\r\n      if (!options.force) {\r\n        console.log(chalk.yellow('This will reset all configuration to defaults.'));\r\n        // Note: In a real implementation, you'd want to add a confirmation prompt here\r\n      }\r\n\r\n      await configManager.reset();\r\n      console.log(chalk.green('✓'), 'Configuration reset to defaults');\r\n    } catch (error) {\r\n      console.error(chalk.red('Failed to reset configuration:'), (error as Error).message);\r\n      process.exit(1);\r\n    }\r\n  });\r\n\r\nexport default configCommand;\r\n"],"names":["Command","chalk","ConfigManager","configManager","getInstance","configCommand","description","command","arguments","action","key","value","getValue","console","log","green","JSON","stringify","error","red","message","process","exit","parsedValue","parse","set","option","options","config","getAll","json","cyan","bold","repeat","Object","entries","yellow","force","reset"],"mappings":";AAEA,SAASA,OAAO,QAAQ,sBAAsB;AAC9C,OAAOC,WAAW,QAAQ;AAE1B,SAASC,aAAa,QAAQ,uBAAuB;AAErD,MAAMC,gBAAgBD,cAAcE,WAAW;AAE/C,OAAO,MAAMC,gBAAgB,IAAIL,QAAQ,UAAUM,WAAW,CAAC,qCAAqC;AAGpGD,cACGE,OAAO,CAAC,OACRC,SAAS,CAAC,SACVF,WAAW,CAAC,2BACZG,MAAM,CAAC,OAAOC;IACb,IAAI;QACF,MAAMC,QAAQR,cAAcS,QAAQ,CAACF;QACrCG,QAAQC,GAAG,CAACb,MAAMc,KAAK,CAAC,MAAM,GAAGL,IAAI,CAAC,CAAC,EAAEM,KAAKC,SAAS,CAACN,OAAO,MAAM;IACvE,EAAE,OAAOO,OAAO;QACdL,QAAQK,KAAK,CAACjB,MAAMkB,GAAG,CAAC,iCAAiC,AAACD,MAAgBE,OAAO;QACjFC,QAAQC,IAAI,CAAC;IACf;AACF;AAGFjB,cACGE,OAAO,CAAC,OACRC,SAAS,CAAC,iBACVF,WAAW,CAAC,2BACZG,MAAM,CAAC,OAAOC,KAAaC;IAC1B,IAAI;QACF,IAAIY,cAAmBZ;QACvB,IAAI;YACFY,cAAcP,KAAKQ,KAAK,CAACb;QAC3B,EAAE,OAAM,CAER;QAEA,MAAMR,cAAcsB,GAAG,CAACf,KAAKa;QAC7BV,QAAQC,GAAG,CACTb,MAAMc,KAAK,CAAC,MACZ,CAAC,uBAAuB,EAAEL,IAAI,GAAG,EAAEM,KAAKC,SAAS,CAACM,cAAc;IAEpE,EAAE,OAAOL,OAAO;QACdL,QAAQK,KAAK,CAACjB,MAAMkB,GAAG,CAAC,iCAAiC,AAACD,MAAgBE,OAAO;QACjFC,QAAQC,IAAI,CAAC;IACf;AACF;AAGFjB,cACGE,OAAO,CAAC,QACRD,WAAW,CAAC,iCACZoB,MAAM,CAAC,UAAU,kBACjBjB,MAAM,CAAC,OAAOkB;IACb,IAAI;QACF,MAAMC,SAAS,MAAMzB,cAAc0B,MAAM;QAEzC,IAAIF,QAAQG,IAAI,EAAE;YAChBjB,QAAQC,GAAG,CAACE,KAAKC,SAAS,CAACW,QAAQ,MAAM;QAC3C,OAAO;YACLf,QAAQC,GAAG,CAACb,MAAM8B,IAAI,CAACC,IAAI,CAAC;YAC5BnB,QAAQC,GAAG,CAAC,IAAImB,MAAM,CAAC;YACvB,KAAK,MAAM,CAACvB,KAAKC,MAAM,IAAIuB,OAAOC,OAAO,CAACP,QAAS;gBACjDf,QAAQC,GAAG,CAAC,GAAGb,MAAMmC,MAAM,CAAC1B,KAAK,EAAE,EAAEM,KAAKC,SAAS,CAACN,QAAQ;YAC9D;QACF;IACF,EAAE,OAAOO,OAAO;QACdL,QAAQK,KAAK,CAACjB,MAAMkB,GAAG,CAAC,kCAAkC,AAACD,MAAgBE,OAAO;QAClFC,QAAQC,IAAI,CAAC;IACf;AACF;AAGFjB,cACGE,OAAO,CAAC,SACRD,WAAW,CAAC,mCACZoB,MAAM,CAAC,WAAW,qBAClBjB,MAAM,CAAC,OAAOkB;IACb,IAAI;QACF,IAAI,CAACA,QAAQU,KAAK,EAAE;YAClBxB,QAAQC,GAAG,CAACb,MAAMmC,MAAM,CAAC;QAE3B;QAEA,MAAMjC,cAAcmC,KAAK;QACzBzB,QAAQC,GAAG,CAACb,MAAMc,KAAK,CAAC,MAAM;IAChC,EAAE,OAAOG,OAAO;QACdL,QAAQK,KAAK,CAACjB,MAAMkB,GAAG,CAAC,mCAAmC,AAACD,MAAgBE,OAAO;QACnFC,QAAQC,IAAI,CAAC;IACf;AACF;AAEF,eAAejB,cAAc"}