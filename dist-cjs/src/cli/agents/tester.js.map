{"version":3,"sources":["../../../../src/cli/agents/tester.ts"],"sourcesContent":["/**\r\n * Tester Agent - Specialized in testing and quality assurance\r\n */\r\n\r\nimport { BaseAgent } from './base-agent.js';\r\nimport type {\r\n  AgentCapabilities,\r\n  AgentConfig,\r\n  AgentEnvironment,\r\n  TaskDefinition,\r\n} from '../../swarm/types.js';\r\nimport type { ILogger } from '../../core/logger.js';\r\nimport type { IEventBus } from '../../core/event-bus.js';\r\nimport type { DistributedMemorySystem } from '../../memory/distributed-memory.js';\r\n\r\n// Type definitions for tester activities\r\ninterface TestCoverageItem {\r\n  path: string;\r\n  testCount: number;\r\n  coverage: number;\r\n}\r\n\r\ninterface TestCase {\r\n  name: string;\r\n  steps: string[];\r\n  assertions: string[];\r\n}\r\n\r\ninterface PerformanceTestCase {\r\n  name: string;\r\n  steps: string[];\r\n  expected: string;\r\n}\r\n\r\ninterface SecurityIssue {\r\n  type: string;\r\n  severity: string;\r\n  location: string;\r\n  description: string;\r\n  impact: string;\r\n}\r\n\r\ninterface ApiTestResult {\r\n  endpoint: string;\r\n  status: string;\r\n  responseTime: number;\r\n  statusCode: number;\r\n  error?: string;\r\n}\r\n\r\nexport class TesterAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: AgentEnvironment,\r\n    logger: ILogger,\r\n    eventBus: IEventBus,\r\n    memory: DistributedMemorySystem,\r\n  ) {\r\n    super(id, 'tester', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      codeGeneration: true,\r\n      codeReview: true,\r\n      testing: true,\r\n      documentation: true,\r\n      research: false,\r\n      analysis: true,\r\n      webSearch: false,\r\n      apiIntegration: true,\r\n      fileSystem: true,\r\n      terminalAccess: true,\r\n      languages: ['typescript', 'javascript', 'python', 'java', 'csharp', 'go'],\r\n      frameworks: [\r\n        'jest',\r\n        'mocha',\r\n        'cypress',\r\n        'playwright',\r\n        'selenium',\r\n        'pytest',\r\n        'junit',\r\n        'testng',\r\n      ],\r\n      domains: [\r\n        'unit-testing',\r\n        'integration-testing',\r\n        'e2e-testing',\r\n        'performance-testing',\r\n        'security-testing',\r\n        'accessibility-testing',\r\n        'api-testing',\r\n        'mobile-testing',\r\n        'load-testing',\r\n        'test-automation',\r\n      ],\r\n      tools: [\r\n        'test-runner',\r\n        'coverage-analyzer',\r\n        'mock-generator',\r\n        'test-data-factory',\r\n        'assertion-library',\r\n        'browser-automation',\r\n        'api-tester',\r\n        'performance-profiler',\r\n      ],\r\n      maxConcurrentTasks: 4,\r\n      maxMemoryUsage: 1024 * 1024 * 1024, // 1GB\r\n      maxExecutionTime: 1800000, // 30 minutes\r\n      reliability: 0.95,\r\n      speed: 0.8,\r\n      quality: 0.95,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.8,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 16,\r\n      maxConcurrentTasks: 4,\r\n      timeoutThreshold: 1800000,\r\n      reportingInterval: 30000,\r\n      heartbeatInterval: 12000,\r\n      permissions: [\r\n        'file-read',\r\n        'file-write',\r\n        'terminal-access',\r\n        'browser-control',\r\n        'network-access',\r\n      ],\r\n      trustedAgents: [],\r\n      expertise: {\r\n        'unit-testing': 0.95,\r\n        'integration-testing': 0.9,\r\n        'e2e-testing': 0.88,\r\n        'test-automation': 0.92,\r\n        'performance-testing': 0.85,\r\n        'security-testing': 0.8,\r\n      },\r\n      preferences: {\r\n        testFramework: 'jest',\r\n        coverageThreshold: 80,\r\n        testStrategy: 'pyramid',\r\n        mockingStyle: 'minimal',\r\n        reportFormat: 'detailed',\r\n      },\r\n    };\r\n  }\r\n\r\n  override async executeTask(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Tester executing task', {\r\n      agentId: this.id,\r\n      taskType: task.type,\r\n      taskId: task.id,\r\n    });\r\n\r\n    try {\r\n      switch (task.type) {\r\n        case 'unit-testing':\r\n          return await this.createUnitTests(task);\r\n        case 'integration-testing':\r\n          return await this.createIntegrationTests(task);\r\n        case 'e2e-testing':\r\n          return await this.createE2ETests(task);\r\n        case 'performance-testing':\r\n          return await this.performanceTest(task);\r\n        case 'security-testing':\r\n          return await this.securityTest(task);\r\n        case 'api-testing':\r\n          return await this.testAPI(task);\r\n        case 'test-automation':\r\n          return await this.automateTests(task);\r\n        case 'test-analysis':\r\n          return await this.analyzeTests(task);\r\n        default:\r\n          return await this.performGeneralTesting(task);\r\n      }\r\n    } catch (error) {\r\n      this.logger.error('Testing task failed', {\r\n        agentId: this.id,\r\n        taskId: task.id,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async createUnitTests(task: TaskDefinition): Promise<any> {\r\n    const code = task.input?.code;\r\n    const framework = task.input?.framework || 'jest';\r\n    const coverage = task.input?.coverage || 80;\r\n    const style = task.input?.style || 'arrange-act-assert';\r\n\r\n    this.logger.info('Creating unit tests', {\r\n      framework,\r\n      coverage,\r\n      style,\r\n    });\r\n\r\n    const testing = {\r\n      framework,\r\n      style,\r\n      targetCoverage: coverage,\r\n      testFiles: [] as TestCoverageItem[],\r\n      testSuites: [] as any[],\r\n      coverage: {\r\n        lines: 0,\r\n        functions: 0,\r\n        branches: 0,\r\n        statements: 0,\r\n      },\r\n      mocks: [] as any[],\r\n      assertions: [] as any[],\r\n      setup: {\r\n        beforeEach: true,\r\n        afterEach: true,\r\n        fixtures: [] as any[],\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate unit test creation\r\n    await this.delay(2000);\r\n\r\n    testing.testFiles = [\r\n      {\r\n        path: 'tests/unit/user.test.ts',\r\n        testCount: 15,\r\n        coverage: 92,\r\n      },\r\n      {\r\n        path: 'tests/unit/auth.test.ts',\r\n        testCount: 8,\r\n        coverage: 88,\r\n      },\r\n    ];\r\n\r\n    testing.coverage = {\r\n      lines: 87,\r\n      functions: 92,\r\n      branches: 78,\r\n      statements: 89,\r\n    };\r\n\r\n    return testing;\r\n  }\r\n\r\n  private async createIntegrationTests(task: TaskDefinition): Promise<any> {\r\n    const components = task.input?.components || [];\r\n    const database = task.input?.database || false;\r\n    const api = task.input?.api || false;\r\n    const framework = task.input?.framework || 'jest';\r\n\r\n    this.logger.info('Creating integration tests', {\r\n      components: components.length,\r\n      database,\r\n      api,\r\n      framework,\r\n    });\r\n\r\n    const integration = {\r\n      framework,\r\n      components,\r\n      database,\r\n      api,\r\n      testSuites: [] as any[],\r\n      environment: {\r\n        setup: 'docker-compose',\r\n        database: 'test-db',\r\n        services: [] as any[],\r\n      },\r\n      scenarios: [] as TestCase[],\r\n      dataFlow: [] as any[],\r\n      assertions: [] as any[],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate integration test creation\r\n    await this.delay(3000);\r\n\r\n    integration.scenarios = [\r\n      {\r\n        name: 'User registration flow',\r\n        steps: ['Create user', 'Send email', 'Verify account'],\r\n        assertions: ['User created', 'Email sent', 'Account active'],\r\n      },\r\n      {\r\n        name: 'Order processing flow',\r\n        steps: ['Create order', 'Process payment', 'Update inventory'],\r\n        assertions: ['Order confirmed', 'Payment processed', 'Stock updated'],\r\n      },\r\n    ];\r\n\r\n    return integration;\r\n  }\r\n\r\n  private async createE2ETests(task: TaskDefinition): Promise<any> {\r\n    const userJourneys = task.input?.userJourneys || [];\r\n    const browser = task.input?.browser || 'chromium';\r\n    const framework = task.input?.framework || 'playwright';\r\n    const viewport = task.input?.viewport || 'desktop';\r\n\r\n    this.logger.info('Creating E2E tests', {\r\n      userJourneys: userJourneys.length,\r\n      browser,\r\n      framework,\r\n      viewport,\r\n    });\r\n\r\n    const e2e = {\r\n      framework,\r\n      browser,\r\n      viewport,\r\n      userJourneys,\r\n      testScenarios: [] as PerformanceTestCase[],\r\n      pageObjects: [] as any[],\r\n      selectors: [] as any[],\r\n      assertions: [] as any[],\r\n      configuration: {\r\n        headless: true,\r\n        screenshots: true,\r\n        videos: false,\r\n        retries: 2,\r\n      },\r\n      crossBrowser: {\r\n        chrome: true,\r\n        firefox: true,\r\n        safari: false,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate E2E test creation\r\n    await this.delay(4000);\r\n\r\n    e2e.testScenarios = [\r\n      {\r\n        name: 'User login and dashboard access',\r\n        steps: [\r\n          'Navigate to login page',\r\n          'Enter credentials',\r\n          'Click login button',\r\n          'Verify dashboard loads',\r\n        ],\r\n        expected: 'User successfully logged in and sees dashboard',\r\n      },\r\n    ];\r\n\r\n    return e2e;\r\n  }\r\n\r\n  private async performanceTest(task: TaskDefinition): Promise<any> {\r\n    const target = task.input?.target;\r\n    const loadPattern = task.input?.loadPattern || 'ramp-up';\r\n    const duration = task.input?.duration || '5m';\r\n    const virtualUsers = task.input?.virtualUsers || 100;\r\n\r\n    this.logger.info('Performing performance test', {\r\n      target,\r\n      loadPattern,\r\n      duration,\r\n      virtualUsers,\r\n    });\r\n\r\n    const performance = {\r\n      target,\r\n      loadPattern,\r\n      duration,\r\n      virtualUsers,\r\n      metrics: {\r\n        responseTime: {\r\n          avg: 0,\r\n          p95: 0,\r\n          p99: 0,\r\n          max: 0,\r\n        },\r\n        throughput: 0,\r\n        errorRate: 0,\r\n        resourceUtilization: {\r\n          cpu: 0,\r\n          memory: 0,\r\n          network: 0,\r\n        },\r\n      },\r\n      bottlenecks: [],\r\n      recommendations: [],\r\n      slaCompliance: {\r\n        responseTime: false,\r\n        throughput: false,\r\n        errorRate: false,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate performance testing\r\n    await this.delay(6000);\r\n\r\n    performance.metrics = {\r\n      responseTime: {\r\n        avg: 245,\r\n        p95: 520,\r\n        p99: 1200,\r\n        max: 2500,\r\n      },\r\n      throughput: 1250,\r\n      errorRate: 0.03,\r\n      resourceUtilization: {\r\n        cpu: 75,\r\n        memory: 68,\r\n        network: 45,\r\n      },\r\n    };\r\n\r\n    return performance;\r\n  }\r\n\r\n  private async securityTest(task: TaskDefinition): Promise<any> {\r\n    const target = task.input?.target;\r\n    const testTypes = task.input?.types || ['authentication', 'authorization', 'injection'];\r\n    const severity = task.input?.severity || 'all';\r\n\r\n    this.logger.info('Performing security test', {\r\n      target,\r\n      testTypes,\r\n      severity,\r\n    });\r\n\r\n    const security = {\r\n      target,\r\n      testTypes,\r\n      severity,\r\n      vulnerabilities: [] as SecurityIssue[],\r\n      compliance: {\r\n        owasp: [] as any[],\r\n        gdpr: [] as any[],\r\n        pci: [] as any[],\r\n      },\r\n      penetrationTests: [] as any[],\r\n      recommendations: [] as any[],\r\n      riskLevel: 'unknown',\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate security testing\r\n    await this.delay(5000);\r\n\r\n    security.vulnerabilities = [\r\n      {\r\n        type: 'SQL Injection',\r\n        severity: 'high',\r\n        location: '/api/users/search',\r\n        description: 'Input not properly sanitized',\r\n        impact: 'Data breach potential',\r\n      },\r\n    ];\r\n\r\n    security.riskLevel = 'medium';\r\n\r\n    return security;\r\n  }\r\n\r\n  private async testAPI(task: TaskDefinition): Promise<any> {\r\n    const endpoints = task.input?.endpoints || [];\r\n    const authentication = task.input?.auth || false;\r\n    const environment = task.input?.environment || 'staging';\r\n\r\n    this.logger.info('Testing API', {\r\n      endpoints: endpoints.length,\r\n      authentication,\r\n      environment,\r\n    });\r\n\r\n    const apiTest = {\r\n      environment,\r\n      authentication,\r\n      endpoints,\r\n      testResults: [] as ApiTestResult[],\r\n      schemas: [] as any[],\r\n      responseValidation: true,\r\n      errorHandling: [] as any[],\r\n      performance: {\r\n        averageResponseTime: 0,\r\n        slowestEndpoint: '',\r\n        fastestEndpoint: '',\r\n      },\r\n      coverage: {\r\n        endpoints: 0,\r\n        statusCodes: [] as any[],\r\n        errorScenarios: 0,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate API testing\r\n    await this.delay(3000);\r\n\r\n    apiTest.testResults = [\r\n      {\r\n        endpoint: 'GET /api/users',\r\n        status: 'passed',\r\n        responseTime: 150,\r\n        statusCode: 200,\r\n      },\r\n      {\r\n        endpoint: 'POST /api/users',\r\n        status: 'failed',\r\n        responseTime: 300,\r\n        statusCode: 500,\r\n        error: 'Internal server error',\r\n      },\r\n    ];\r\n\r\n    return apiTest;\r\n  }\r\n\r\n  private async automateTests(task: TaskDefinition): Promise<any> {\r\n    const testSuite = task.input?.testSuite;\r\n    const pipeline = task.input?.pipeline || 'ci/cd';\r\n    const triggers = task.input?.triggers || ['commit', 'pr'];\r\n\r\n    this.logger.info('Automating tests', {\r\n      testSuite,\r\n      pipeline,\r\n      triggers,\r\n    });\r\n\r\n    const automation = {\r\n      testSuite,\r\n      pipeline,\r\n      triggers,\r\n      configuration: {\r\n        parallel: true,\r\n        retries: 2,\r\n        timeout: '30m',\r\n        artifacts: ['reports', 'screenshots'],\r\n      },\r\n      environments: ['staging', 'production'],\r\n      notifications: {\r\n        slack: true,\r\n        email: true,\r\n        github: true,\r\n      },\r\n      reporting: {\r\n        format: 'junit',\r\n        coverage: true,\r\n        trends: true,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate test automation setup\r\n    await this.delay(2000);\r\n\r\n    return automation;\r\n  }\r\n\r\n  private async analyzeTests(task: TaskDefinition): Promise<any> {\r\n    const testResults = task.input?.results;\r\n    const coverage = task.input?.coverage;\r\n    const timeframe = task.input?.timeframe || '7d';\r\n\r\n    this.logger.info('Analyzing tests', {\r\n      timeframe,\r\n    });\r\n\r\n    const analysis = {\r\n      timeframe,\r\n      summary: {\r\n        totalTests: 0,\r\n        passed: 0,\r\n        failed: 0,\r\n        skipped: 0,\r\n        flaky: 0,\r\n      },\r\n      trends: {\r\n        passRate: [] as any[],\r\n        executionTime: [] as any[],\r\n        coverage: [] as any[],\r\n      },\r\n      flakyTests: [] as any[],\r\n      slowTests: [] as any[],\r\n      recommendations: [] as any[],\r\n      insights: [] as string[],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate test analysis\r\n    await this.delay(1500);\r\n\r\n    analysis.summary = {\r\n      totalTests: 245,\r\n      passed: 230,\r\n      failed: 10,\r\n      skipped: 5,\r\n      flaky: 3,\r\n    };\r\n\r\n    analysis.insights = [\r\n      'Test execution time increased by 15% this week',\r\n      'Coverage decreased in auth module',\r\n      '3 tests are consistently flaky and need attention',\r\n    ];\r\n\r\n    return analysis;\r\n  }\r\n\r\n  private async performGeneralTesting(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Performing general testing', {\r\n      description: task.description,\r\n    });\r\n\r\n    // Default to unit testing\r\n    return await this.createUnitTests(task);\r\n  }\r\n\r\n  private async delay(ms: number): Promise<void> {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  override getAgentStatus(): any {\r\n    return {\r\n      ...super.getAgentStatus(),\r\n      specialization: 'Testing & Quality Assurance',\r\n      testingTypes: [\r\n        'Unit Testing',\r\n        'Integration Testing',\r\n        'E2E Testing',\r\n        'Performance Testing',\r\n        'Security Testing',\r\n        'API Testing',\r\n      ],\r\n      frameworks: this.capabilities.frameworks,\r\n      currentTests: this.getCurrentTasks().length,\r\n      averageTestTime: '15-30 minutes',\r\n      lastTestCompleted: this.getLastTaskCompletedTime(),\r\n      testCoverageGoal: this.config.preferences?.coverageThreshold || 80,\r\n    };\r\n  }\r\n}\r\n\r\nexport const createTesterAgent = (\r\n  id: string,\r\n  config: Partial<AgentConfig>,\r\n  environment: Partial<AgentEnvironment>,\r\n  logger: ILogger,\r\n  eventBus: IEventBus,\r\n  memory: DistributedMemorySystem,\r\n): TesterAgent => {\r\n  const defaultConfig = {\r\n    autonomyLevel: 0.7,\r\n    learningEnabled: true,\r\n    adaptationEnabled: true,\r\n    maxTasksPerHour: 8,\r\n    maxConcurrentTasks: 2,\r\n    timeoutThreshold: 900000,\r\n    reportingInterval: 180000,\r\n    heartbeatInterval: 60000,\r\n    permissions: [\r\n      'test-execution',\r\n      'code-access',\r\n      'system-access',\r\n      'browser-automation',\r\n      'security-testing',\r\n    ],\r\n    trustedAgents: [],\r\n    expertise: {\r\n      'unit-testing': 0.95,\r\n      'integration-testing': 0.92,\r\n      'e2e-testing': 0.9,\r\n      'performance-testing': 0.88,\r\n      'security-testing': 0.85,\r\n      'api-testing': 0.9,\r\n    },\r\n    preferences: {\r\n      testingApproach: 'comprehensive',\r\n      coverageThreshold: 85,\r\n      testingFramework: 'jest',\r\n      automationLevel: 'high',\r\n    },\r\n  };\r\n  const defaultEnv = {\r\n    runtime: 'deno' as const,\r\n    version: '1.40.0',\r\n    workingDirectory: './agents/tester',\r\n    tempDirectory: './tmp/tester',\r\n    logDirectory: './logs/tester',\r\n    apiEndpoints: {},\r\n    credentials: {},\r\n    availableTools: ['test-runner', 'coverage-analyzer', 'browser-automation', 'api-tester'],\r\n    toolConfigs: {\r\n      testRunner: { framework: 'jest', coverage: true },\r\n      browser: { headless: true, screenshots: true },\r\n    },\r\n  };\r\n\r\n  return new TesterAgent(\r\n    id,\r\n    { ...defaultConfig, ...config } as AgentConfig,\r\n    { ...defaultEnv, ...environment } as AgentEnvironment,\r\n    logger,\r\n    eventBus,\r\n    memory,\r\n  );\r\n};\r\n"],"names":["BaseAgent","TesterAgent","id","config","environment","logger","eventBus","memory","getDefaultCapabilities","codeGeneration","codeReview","testing","documentation","research","analysis","webSearch","apiIntegration","fileSystem","terminalAccess","languages","frameworks","domains","tools","maxConcurrentTasks","maxMemoryUsage","maxExecutionTime","reliability","speed","quality","getDefaultConfig","autonomyLevel","learningEnabled","adaptationEnabled","maxTasksPerHour","timeoutThreshold","reportingInterval","heartbeatInterval","permissions","trustedAgents","expertise","preferences","testFramework","coverageThreshold","testStrategy","mockingStyle","reportFormat","executeTask","task","info","agentId","taskType","type","taskId","createUnitTests","createIntegrationTests","createE2ETests","performanceTest","securityTest","testAPI","automateTests","analyzeTests","performGeneralTesting","error","Error","message","String","code","input","framework","coverage","style","targetCoverage","testFiles","testSuites","lines","functions","branches","statements","mocks","assertions","setup","beforeEach","afterEach","fixtures","timestamp","Date","delay","path","testCount","components","database","api","length","integration","services","scenarios","dataFlow","name","steps","userJourneys","browser","viewport","e2e","testScenarios","pageObjects","selectors","configuration","headless","screenshots","videos","retries","crossBrowser","chrome","firefox","safari","expected","target","loadPattern","duration","virtualUsers","performance","metrics","responseTime","avg","p95","p99","max","throughput","errorRate","resourceUtilization","cpu","network","bottlenecks","recommendations","slaCompliance","testTypes","types","severity","security","vulnerabilities","compliance","owasp","gdpr","pci","penetrationTests","riskLevel","location","description","impact","endpoints","authentication","auth","apiTest","testResults","schemas","responseValidation","errorHandling","averageResponseTime","slowestEndpoint","fastestEndpoint","statusCodes","errorScenarios","endpoint","status","statusCode","testSuite","pipeline","triggers","automation","parallel","timeout","artifacts","environments","notifications","slack","email","github","reporting","format","trends","results","timeframe","summary","totalTests","passed","failed","skipped","flaky","passRate","executionTime","flakyTests","slowTests","insights","ms","Promise","resolve","setTimeout","getAgentStatus","specialization","testingTypes","capabilities","currentTests","getCurrentTasks","averageTestTime","lastTestCompleted","getLastTaskCompletedTime","testCoverageGoal","createTesterAgent","defaultConfig","testingApproach","testingFramework","automationLevel","defaultEnv","runtime","version","workingDirectory","tempDirectory","logDirectory","apiEndpoints","credentials","availableTools","toolConfigs","testRunner"],"mappings":"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"}