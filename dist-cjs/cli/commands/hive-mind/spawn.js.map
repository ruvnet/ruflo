{
  "version": 3,
  "sources": ["../../../../src/cli/commands/hive-mind/spawn.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n/**\n * Hive Mind Agent Spawn Command\n *\n * Spawns specialized agents into the Hive Mind swarm\n * with automatic capability assignment and coordination.\n */\n\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport inquirer from 'inquirer';\nimport { HiveMind } from '../../../hive-mind/core/HiveMind.js';\nimport { AgentType, AgentCapability } from '../../../hive-mind/types.js';\nimport { formatSuccess, formatError, formatInfo, formatWarning } from '../../formatter.js';\n\nconst AGENT_TYPES: AgentType[] = [\n  'coordinator',\n  'researcher',\n  'coder',\n  'analyst',\n  'architect',\n  'tester',\n  'reviewer',\n  'optimizer',\n  'documenter',\n  'monitor',\n  'specialist',\n  'requirements_analyst',\n  'design_architect',\n  'system-architect',\n  'task_planner',\n  'task-planner',\n  'implementation_coder',\n  'developer',\n  'quality_reviewer',\n  'steering_documenter',\n];\n\nconst CAPABILITY_MAP: Record<AgentType, AgentCapability[]> = {\n  coordinator: ['task_management', 'resource_allocation', 'consensus_building'],\n  researcher: ['information_gathering', 'pattern_recognition', 'knowledge_synthesis'],\n  coder: ['code_generation', 'refactoring', 'debugging'],\n  analyst: ['data_analysis', 'performance_metrics', 'bottleneck_detection'],\n  architect: ['system_design', 'architecture_patterns', 'integration_planning'],\n  tester: ['test_generation', 'quality_assurance', 'edge_case_detection'],\n  reviewer: ['code_review', 'standards_enforcement', 'best_practices'],\n  optimizer: ['performance_optimization', 'resource_optimization', 'algorithm_improvement'],\n  documenter: ['documentation_generation', 'api_docs', 'user_guides'],\n  monitor: ['system_monitoring', 'health_checks', 'alerting'],\n  specialist: ['domain_expertise', 'custom_capabilities', 'problem_solving'],\n  requirements_analyst: ['requirements_analysis', 'user_story_creation', 'acceptance_criteria'],\n  design_architect: ['system_design', 'architecture', 'specs_driven_design'],\n  'system-architect': ['system_design', 'architecture_patterns', 'integration_planning'],\n  task_planner: ['task_management', 'workflow_orchestration'],\n  'task-planner': ['task_management', 'workflow_orchestration'],\n  implementation_coder: ['code_generation', 'implementation', 'debugging'],\n  developer: ['code_generation', 'implementation', 'debugging'],\n  quality_reviewer: ['code_review', 'quality_assurance', 'testing'],\n  steering_documenter: ['documentation_generation', 'governance']\n};\n\nexport const spawnCommand = new Command('spawn')\n  .description('Spawn specialized agents into the Hive Mind')\n  .argument('[type]', 'Agent type to spawn')\n  .option('-n, --name <string>', 'Custom agent name')\n  .option('-c, --capabilities <items>', 'Additional capabilities (comma-separated)')\n  .option('-s, --swarm-id <id>', 'Target swarm ID')\n  .option('-i, --interactive', 'Interactive spawn mode', false)\n  .option('-b, --batch <number>', 'Spawn multiple agents of same type', '1')\n  .option('--auto-assign', 'Automatically assign to available tasks', false)\n  .action(async (type, options) => {\n    const spinner = ora('Spawning agent...').start();\n\n    try {\n      // Get or prompt for swarm ID\n      const swarmId = options.swarmId || (await getActiveSwarmId());\n      if (!swarmId) {\n        throw new Error('No active swarm found. Initialize a Hive Mind first.');\n      }\n\n      // Interactive mode\n      if (options.interactive || !type) {\n        const answers = await inquirer.prompt([\n          {\n            type: 'list',\n            name: 'type',\n            message: 'Select agent type:',\n            choices: AGENT_TYPES,\n            when: !type,\n          },\n          {\n            type: 'checkbox',\n            name: 'additionalCapabilities',\n            message: 'Select additional capabilities:',\n            choices: getAllCapabilities(),\n            when: (answers) => {\n              const agentType = type || answers.type;\n              return agentType === 'specialist';\n            },\n          },\n          {\n            type: 'input',\n            name: 'customName',\n            message: 'Enter custom agent name (optional):',\n            when: !options.name,\n          },\n        ]);\n\n        type = type || answers.type;\n        options.name = options.name || answers.customName;\n        if (answers.additionalCapabilities) {\n          options.capabilities = answers.additionalCapabilities.join(',');\n        }\n      }\n\n      // Validate agent type\n      if (!AGENT_TYPES.includes(type as AgentType)) {\n        throw new Error(`Invalid agent type: ${type}`);\n      }\n\n      // Load Hive Mind\n      const hiveMind = await HiveMind.load(swarmId);\n\n      // Determine capabilities\n      const baseCapabilities = CAPABILITY_MAP[type as AgentType] || [];\n      const additionalCapabilities = options.capabilities\n        ? options.capabilities.split(',').map((c: string) => c.trim())\n        : [];\n      const capabilities = [...baseCapabilities, ...additionalCapabilities];\n\n      // Spawn agents\n      const batchSize = parseInt(options.batch, 10);\n      const spawnedAgents = [];\n\n      for (let i = 0; i < batchSize; i++) {\n        const agentName = options.name || `${type}-${Date.now()}-${i}`;\n        const agent = await hiveMind.spawnAgent({\n          type: type as AgentType,\n          name: agentName,\n          capabilities,\n          autoAssign: options.autoAssign,\n        });\n\n        spawnedAgents.push(agent);\n\n        if (batchSize > 1) {\n          spinner.text = `Spawning agents... (${i + 1}/${batchSize})`;\n        }\n      }\n\n      spinner.succeed(formatSuccess(`Successfully spawned ${batchSize} ${type} agent(s)!`));\n\n      // Display spawned agents\n      console.log('\\n' + chalk.bold('\uD83E\uDD16 Spawned Agents:'));\n      spawnedAgents.forEach((agent) => {\n        console.log(formatInfo(`${agent.name} (${agent.id})`));\n        console.log(chalk.gray(`  Capabilities: ${agent.capabilities.join(', ')}`));\n        if (agent.currentTask) {\n          console.log(chalk.yellow(`  Assigned to: ${agent.currentTask}`));\n        }\n      });\n\n      // Show swarm stats\n      const stats = await hiveMind.getStats();\n      console.log('\\n' + chalk.bold('\uD83D\uDCCA Swarm Statistics:'));\n      console.log(formatInfo(`Total Agents: ${stats.totalAgents}`));\n      console.log(formatInfo(`Active Agents: ${stats.activeAgents}`));\n      console.log(formatInfo(`Available Capacity: ${stats.availableCapacity}%`));\n\n      if (options.autoAssign && stats.pendingTasks > 0) {\n        console.log(formatWarning(`Auto-assigned to ${stats.pendingTasks} pending task(s)`));\n      }\n    } catch (error) {\n      spinner.fail(formatError('Failed to spawn agent'));\n      console.error(formatError((error as Error).message));\n      process.exit(1);\n    }\n  });\n\nasync function getActiveSwarmId(): Promise<string | null> {\n  const { DatabaseManager } = await import('../../../hive-mind/core/DatabaseManager.js');\n  const db = await DatabaseManager.getInstance();\n  return db.getActiveSwarmId();\n}\n\nfunction getAllCapabilities(): string[] {\n  const allCapabilities = new Set<string>();\n  Object.values(CAPABILITY_MAP).forEach((caps) => {\n    caps.forEach((cap) => allCapabilities.add(cap));\n  });\n  return Array.from(allCapabilities);\n}\n"],
  "mappings": "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",
  "names": ["ora", "inquirer", "answers", "chalk"]
}
