{"version":3,"sources":["../../../src/hooks/index.ts"],"sourcesContent":["/**\r\n * Legacy Hook System - Migration Notice\r\n * \r\n * This hook system has been consolidated with the more advanced agentic-flow-hooks system.\r\n * All functionality is now available through the modern implementation at:\r\n * src/services/agentic-flow-hooks/\r\n * \r\n * This file provides backward compatibility redirects while we complete the migration.\r\n */\r\n\r\n// Re-export the modern agentic-flow-hooks system\r\nexport {\r\n  agenticHookManager,\r\n  initializeAgenticFlowHooks,\r\n} from '../services/agentic-flow-hooks/index.js';\r\n\r\n// Re-export verification system\r\nexport {\r\n  verificationHookManager,\r\n  initializeVerificationSystem,\r\n  getVerificationSystemStatus,\r\n  shutdownVerificationSystem,\r\n} from '../verification/index.js';\r\n\r\n// Re-export modern types with compatibility aliases\r\nexport type {\r\n  AgenticHookContext as HookExecutionContext,\r\n  HookRegistration as AgentHook,\r\n  HookPayload as EventPayload,\r\n  AgenticHookType as HookTrigger,\r\n  HookHandlerResult as HookExecutionResult,\r\n} from '../services/agentic-flow-hooks/types.js';\r\n\r\n// Legacy hook templates for backward compatibility\r\nexport const QUALITY_HOOKS = {\r\n  CODE_QUALITY: {\r\n    name: 'Code Quality Monitor',\r\n    description: 'Automatically runs code quality checks on file changes',\r\n    type: 'workflow-step' as const,\r\n    priority: 8,\r\n    enabled: true\r\n  },\r\n  SECURITY_SCAN: {\r\n    name: 'Security Scanner', \r\n    description: 'Scans for security vulnerabilities and credential leaks',\r\n    type: 'workflow-step' as const,\r\n    priority: 9,\r\n    enabled: true\r\n  },\r\n  DOCUMENTATION_SYNC: {\r\n    name: 'Documentation Sync',\r\n    description: 'Automatically updates documentation when specifications change',\r\n    type: 'workflow-step' as const,\r\n    priority: 7,\r\n    enabled: true\r\n  },\r\n  PERFORMANCE_MONITOR: {\r\n    name: 'Performance Monitor',\r\n    description: 'Analyzes performance impact of code changes', \r\n    type: 'workflow-step' as const,\r\n    priority: 6,\r\n    enabled: true\r\n  }\r\n};\r\n\r\n// Legacy constants for backward compatibility\r\nexport const DEFAULT_HOOK_CONFIG = {\r\n  maxConcurrentHooks: 10,\r\n  defaultThrottleMs: 1000,\r\n  defaultDebounceMs: 500,\r\n  eventQueueSize: 1000,\r\n  agentPoolSize: 50,\r\n  enableMetrics: true,\r\n  enablePersistence: true,\r\n  logLevel: 'info' as const,\r\n  watchPatterns: ['**/*.md', '**/*.ts', '**/*.js', '**/*.json'],\r\n  ignorePatterns: ['node_modules/**', '.git/**', 'dist/**', 'build/**']\r\n};\r\n\r\nexport const HOOK_TRIGGERS = {\r\n  FILE_SAVE: 'workflow-step',\r\n  FILE_CHANGE: 'workflow-step',\r\n  FILE_CREATE: 'workflow-start',\r\n  FILE_DELETE: 'workflow-complete',\r\n  TASK_COMPLETE: 'workflow-complete',\r\n  TASK_FAIL: 'workflow-error',\r\n  SPEC_UPDATE: 'workflow-step',\r\n  CODE_CHANGE: 'workflow-step',\r\n  AGENT_SPAWN: 'workflow-start',\r\n  WORKFLOW_PHASE: 'workflow-step',\r\n  TIME_INTERVAL: 'performance-metric'\r\n} as const;\r\n\r\nexport const AGENT_TYPES = {\r\n  QUALITY_ASSURANCE: 'quality_assurance',\r\n  SECURITY_SCAN: 'security_scan', \r\n  DOCUMENTATION_SYNC: 'documentation_sync',\r\n  PERFORMANCE_ANALYSIS: 'performance_analysis'\r\n} as const;\r\n\r\n/**\r\n * Migration utility class\r\n * Provides backward compatibility while encouraging migration to agentic-flow-hooks\r\n */\r\nexport class HookUtils {\r\n  /**\r\n   * @deprecated Use agenticHookManager.register() instead\r\n   */\r\n  static createFilePatternCondition(pattern: string) {\r\n    console.warn('HookUtils.createFilePatternCondition is deprecated. Use agenticHookManager.register() with proper HookFilter instead.');\r\n    return { type: 'file_pattern', pattern };\r\n  }\r\n\r\n  /**\r\n   * @deprecated Use agenticHookManager.register() instead\r\n   */\r\n  static createSpawnAgentAction(agentType: string, config: Record<string, any>) {\r\n    console.warn('HookUtils.createSpawnAgentAction is deprecated. Use agenticHookManager.register() with proper hook handlers instead.');\r\n    return { type: 'spawn_agent', agentType, agentConfig: config };\r\n  }\r\n\r\n  /**\r\n   * @deprecated Use agenticHookManager.register() instead\r\n   */\r\n  static createQualityHook(options: any) {\r\n    console.warn('HookUtils.createQualityHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');\r\n    return QUALITY_HOOKS.CODE_QUALITY;\r\n  }\r\n\r\n  /**\r\n   * @deprecated Use agenticHookManager.register() instead  \r\n   */\r\n  static createSecurityHook(options: any) {\r\n    console.warn('HookUtils.createSecurityHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');\r\n    return QUALITY_HOOKS.SECURITY_SCAN;\r\n  }\r\n\r\n  /**\r\n   * @deprecated Use agenticHookManager.register() instead\r\n   */\r\n  static createDocumentationHook(options: any) {\r\n    console.warn('HookUtils.createDocumentationHook is deprecated. Use agenticHookManager.register() with workflow-step hooks instead.');\r\n    return QUALITY_HOOKS.DOCUMENTATION_SYNC;\r\n  }\r\n\r\n  /**\r\n   * @deprecated Use agenticHookManager.register() instead\r\n   */\r\n  static createPerformanceHook(options: any) {\r\n    console.warn('HookUtils.createPerformanceHook is deprecated. Use agenticHookManager.register() with performance-metric hooks instead.');\r\n    return QUALITY_HOOKS.PERFORMANCE_MONITOR;\r\n  }\r\n}\r\n\r\n/**\r\n * @deprecated Use initializeAgenticFlowHooks() instead\r\n */\r\nexport function createHookEngine(config?: any) {\r\n  console.warn('createHookEngine is deprecated. Use initializeAgenticFlowHooks() and agenticHookManager instead.');\r\n  return {\r\n    registerHook: () => console.warn('Use agenticHookManager.register() instead'),\r\n    start: () => console.warn('Hooks are automatically initialized with agenticHookManager'),\r\n    stop: () => console.warn('Use agenticHookManager shutdown methods instead')\r\n  };\r\n}\r\n\r\n/**\r\n * @deprecated Use agenticHookManager.register() for individual hooks instead\r\n */\r\nexport async function setupDefaultHooks(engine?: any) {\r\n  console.warn('setupDefaultHooks is deprecated. Use agenticHookManager.register() to register specific hooks instead.');\r\n  console.info('Consider migrating to agentic-flow-hooks for advanced pipeline management and neural integration.');\r\n  \r\n  // Initialize verification system as part of default setup\r\n  try {\r\n    const { initializeVerificationSystem } = await import('../verification/index.js');\r\n    await initializeVerificationSystem();\r\n    console.info('âœ… Verification system initialized with default hooks');\r\n    return 9; // 4 legacy + 5 verification hooks\r\n  } catch (error) {\r\n    console.warn('Failed to initialize verification system:', error);\r\n    return 4; // Return legacy count for backward compatibility\r\n  }\r\n}\r\n\r\n// Migration notice for users\r\nconsole.info(`\r\nðŸ”„ MIGRATION NOTICE: Hook System Consolidation\r\n\r\nThe legacy hook system in src/hooks/ has been consolidated with the advanced\r\nagentic-flow-hooks system for better performance and functionality.\r\n\r\nâœ… New System Features:\r\n  - Advanced pipeline management\r\n  - Neural pattern learning  \r\n  - Performance optimization\r\n  - Memory coordination hooks\r\n  - LLM integration hooks\r\n  - Comprehensive verification system\r\n\r\nðŸ†• Verification System:\r\n  - Pre-task verification hooks\r\n  - Post-task validation hooks\r\n  - Integration test hooks\r\n  - Truth telemetry hooks\r\n  - Rollback trigger hooks\r\n\r\nðŸ“– Migration Guide:\r\n  - Replace AgentHookEngine with agenticHookManager\r\n  - Update hook registrations to use modern HookRegistration interface\r\n  - Leverage new hook types: LLM, memory, neural, performance, workflow\r\n  - Use verification hooks for quality assurance\r\n  - See docs/maestro/specs/hooks-refactoring-plan.md for details\r\n\r\nðŸš€ Get Started:\r\n  import { agenticHookManager, initializeAgenticFlowHooks } from '../services/agentic-flow-hooks/'\r\n  import { verificationHookManager, initializeVerificationSystem } from '../verification/'\r\n  await initializeAgenticFlowHooks()\r\n  await initializeVerificationSystem()\r\n  agenticHookManager.register({ ... })\r\n`);"],"names":["agenticHookManager","initializeAgenticFlowHooks","verificationHookManager","initializeVerificationSystem","getVerificationSystemStatus","shutdownVerificationSystem","QUALITY_HOOKS","CODE_QUALITY","name","description","type","priority","enabled","SECURITY_SCAN","DOCUMENTATION_SYNC","PERFORMANCE_MONITOR","DEFAULT_HOOK_CONFIG","maxConcurrentHooks","defaultThrottleMs","defaultDebounceMs","eventQueueSize","agentPoolSize","enableMetrics","enablePersistence","logLevel","watchPatterns","ignorePatterns","HOOK_TRIGGERS","FILE_SAVE","FILE_CHANGE","FILE_CREATE","FILE_DELETE","TASK_COMPLETE","TASK_FAIL","SPEC_UPDATE","CODE_CHANGE","AGENT_SPAWN","WORKFLOW_PHASE","TIME_INTERVAL","AGENT_TYPES","QUALITY_ASSURANCE","PERFORMANCE_ANALYSIS","HookUtils","createFilePatternCondition","pattern","console","warn","createSpawnAgentAction","agentType","config","agentConfig","createQualityHook","options","createSecurityHook","createDocumentationHook","createPerformanceHook","createHookEngine","registerHook","start","stop","setupDefaultHooks","engine","info","error"],"mappings":"AAWA,SACEA,kBAAkB,EAClBC,0BAA0B,QACrB,0CAA0C;AAGjD,SACEC,uBAAuB,EACvBC,4BAA4B,EAC5BC,2BAA2B,EAC3BC,0BAA0B,QACrB,2BAA2B;AAYlC,OAAO,MAAMC,gBAAgB;IAC3BC,cAAc;QACZC,MAAM;QACNC,aAAa;QACbC,MAAM;QACNC,UAAU;QACVC,SAAS;IACX;IACAC,eAAe;QACbL,MAAM;QACNC,aAAa;QACbC,MAAM;QACNC,UAAU;QACVC,SAAS;IACX;IACAE,oBAAoB;QAClBN,MAAM;QACNC,aAAa;QACbC,MAAM;QACNC,UAAU;QACVC,SAAS;IACX;IACAG,qBAAqB;QACnBP,MAAM;QACNC,aAAa;QACbC,MAAM;QACNC,UAAU;QACVC,SAAS;IACX;AACF,EAAE;AAGF,OAAO,MAAMI,sBAAsB;IACjCC,oBAAoB;IACpBC,mBAAmB;IACnBC,mBAAmB;IACnBC,gBAAgB;IAChBC,eAAe;IACfC,eAAe;IACfC,mBAAmB;IACnBC,UAAU;IACVC,eAAe;QAAC;QAAW;QAAW;QAAW;KAAY;IAC7DC,gBAAgB;QAAC;QAAmB;QAAW;QAAW;KAAW;AACvE,EAAE;AAEF,OAAO,MAAMC,gBAAgB;IAC3BC,WAAW;IACXC,aAAa;IACbC,aAAa;IACbC,aAAa;IACbC,eAAe;IACfC,WAAW;IACXC,aAAa;IACbC,aAAa;IACbC,aAAa;IACbC,gBAAgB;IAChBC,eAAe;AACjB,EAAW;AAEX,OAAO,MAAMC,cAAc;IACzBC,mBAAmB;IACnB3B,eAAe;IACfC,oBAAoB;IACpB2B,sBAAsB;AACxB,EAAW;AAMX,OAAO,MAAMC;IAIX,OAAOC,2BAA2BC,OAAe,EAAE;QACjDC,QAAQC,IAAI,CAAC;QACb,OAAO;YAAEpC,MAAM;YAAgBkC;QAAQ;IACzC;IAKA,OAAOG,uBAAuBC,SAAiB,EAAEC,MAA2B,EAAE;QAC5EJ,QAAQC,IAAI,CAAC;QACb,OAAO;YAAEpC,MAAM;YAAesC;YAAWE,aAAaD;QAAO;IAC/D;IAKA,OAAOE,kBAAkBC,OAAY,EAAE;QACrCP,QAAQC,IAAI,CAAC;QACb,OAAOxC,cAAcC,YAAY;IACnC;IAKA,OAAO8C,mBAAmBD,OAAY,EAAE;QACtCP,QAAQC,IAAI,CAAC;QACb,OAAOxC,cAAcO,aAAa;IACpC;IAKA,OAAOyC,wBAAwBF,OAAY,EAAE;QAC3CP,QAAQC,IAAI,CAAC;QACb,OAAOxC,cAAcQ,kBAAkB;IACzC;IAKA,OAAOyC,sBAAsBH,OAAY,EAAE;QACzCP,QAAQC,IAAI,CAAC;QACb,OAAOxC,cAAcS,mBAAmB;IAC1C;AACF;AAKA,OAAO,SAASyC,iBAAiBP,MAAY;IAC3CJ,QAAQC,IAAI,CAAC;IACb,OAAO;QACLW,cAAc,IAAMZ,QAAQC,IAAI,CAAC;QACjCY,OAAO,IAAMb,QAAQC,IAAI,CAAC;QAC1Ba,MAAM,IAAMd,QAAQC,IAAI,CAAC;IAC3B;AACF;AAKA,OAAO,eAAec,kBAAkBC,MAAY;IAClDhB,QAAQC,IAAI,CAAC;IACbD,QAAQiB,IAAI,CAAC;IAGb,IAAI;QACF,MAAM,EAAE3D,4BAA4B,EAAE,GAAG,MAAM,MAAM,CAAC;QACtD,MAAMA;QACN0C,QAAQiB,IAAI,CAAC;QACb,OAAO;IACT,EAAE,OAAOC,OAAO;QACdlB,QAAQC,IAAI,CAAC,6CAA6CiB;QAC1D,OAAO;IACT;AACF;AAGAlB,QAAQiB,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCd,CAAC"}