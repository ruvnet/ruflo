{"version":3,"sources":["../../../../../src/cli/simple-commands/sparc/index.js"],"sourcesContent":["// SPARC Methodology Implementation\r\n// Specification, Pseudocode, Architecture, Refinement, Completion\r\n\r\nimport { SparcSpecification } from './specification.js';\r\nimport { SparcPseudocode } from './pseudocode.js';\r\nimport { SparcArchitecture } from './architecture.js';\r\nimport { SparcRefinement } from './refinement.js';\r\nimport { SparcCompletion } from './completion.js';\r\nimport { SparcCoordinator } from './coordinator.js';\r\n\r\nexport class SparcMethodology {\r\n  constructor(taskDescription, options = {}) {\r\n    this.taskDescription = taskDescription;\r\n    this.options = {\r\n      namespace: options.namespace || 'sparc',\r\n      swarmEnabled: options.swarmEnabled || false,\r\n      neuralLearning: options.neuralLearning || false,\r\n      verbose: options.verbose || false,\r\n      ...options,\r\n    };\r\n\r\n    this.phases = {\r\n      specification: new SparcSpecification(this.taskDescription, this.options),\r\n      pseudocode: new SparcPseudocode(this.taskDescription, this.options),\r\n      architecture: new SparcArchitecture(this.taskDescription, this.options),\r\n      refinement: new SparcRefinement(this.taskDescription, this.options),\r\n      completion: new SparcCompletion(this.taskDescription, this.options),\r\n    };\r\n\r\n    this.coordinator = new SparcCoordinator(this.phases, this.options);\r\n    this.currentPhase = 'specification';\r\n    this.phaseOrder = ['specification', 'pseudocode', 'architecture', 'refinement', 'completion'];\r\n    this.artifacts = {};\r\n    this.qualityGates = {};\r\n  }\r\n\r\n  /**\r\n   * Execute the complete SPARC methodology\r\n   */\r\n  async execute() {\r\n    console.log('üöÄ Starting SPARC Methodology Execution');\r\n    console.log(`üìã Task: ${this.taskDescription}`);\r\n    console.log(`üîß Namespace: ${this.options.namespace}`);\r\n    console.log(`üêù Swarm: ${this.options.swarmEnabled ? 'Enabled' : 'Disabled'}`);\r\n    console.log();\r\n\r\n    // Initialize swarm if enabled\r\n    if (this.options.swarmEnabled) {\r\n      await this.coordinator.initializeSwarm();\r\n    }\r\n\r\n    // Execute each phase in order\r\n    for (const phaseName of this.phaseOrder) {\r\n      console.log(`\\nüìç Phase: ${phaseName.toUpperCase()}`);\r\n\r\n      try {\r\n        // Pre-phase coordination\r\n        await this.coordinator.prePhase(phaseName);\r\n\r\n        // Execute phase\r\n        const phase = this.phases[phaseName];\r\n        const result = await phase.execute();\r\n\r\n        // Store artifacts\r\n        this.artifacts[phaseName] = result;\r\n\r\n        // Quality gate validation\r\n        const qualityGate = await this.validateQualityGate(phaseName, result);\r\n        this.qualityGates[phaseName] = qualityGate;\r\n\r\n        if (!qualityGate.passed) {\r\n          console.log(`‚ùå Quality Gate Failed for ${phaseName}`);\r\n          console.log(`Reasons: ${qualityGate.reasons.join(', ')}`);\r\n\r\n          // Attempt auto-remediation\r\n          if (this.options.autoRemediation) {\r\n            await this.autoRemediate(phaseName, qualityGate);\r\n          } else {\r\n            throw new Error(`Quality gate failed for phase: ${phaseName}`);\r\n          }\r\n        }\r\n\r\n        // Post-phase coordination\r\n        await this.coordinator.postPhase(phaseName, result);\r\n\r\n        console.log(`‚úÖ ${phaseName} completed successfully`);\r\n      } catch (error) {\r\n        console.error(`‚ùå Error in ${phaseName}: ${error.message}`);\r\n\r\n        // Neural learning from failures\r\n        if (this.options.neuralLearning) {\r\n          await this.learnFromFailure(phaseName, error);\r\n        }\r\n\r\n        throw error;\r\n      }\r\n    }\r\n\r\n    // Final coordination and cleanup\r\n    await this.coordinator.finalize();\r\n\r\n    console.log('\\nüéâ SPARC Methodology Execution Complete');\r\n    return this.generateSummary();\r\n  }\r\n\r\n  /**\r\n   * Execute a specific phase\r\n   */\r\n  async executePhase(phaseName) {\r\n    if (!this.phases[phaseName]) {\r\n      throw new Error(`Unknown phase: ${phaseName}`);\r\n    }\r\n\r\n    console.log(`üìç Executing Phase: ${phaseName.toUpperCase()}`);\r\n\r\n    const phase = this.phases[phaseName];\r\n    const result = await phase.execute();\r\n\r\n    this.artifacts[phaseName] = result;\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Validate quality gate for a phase\r\n   */\r\n  async validateQualityGate(phaseName, result) {\r\n    const qualityGate = {\r\n      passed: true,\r\n      reasons: [],\r\n    };\r\n\r\n    switch (phaseName) {\r\n      case 'specification':\r\n        if (!result.requirements || result.requirements.length === 0) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('No requirements defined');\r\n        }\r\n        if (!result.acceptanceCriteria || result.acceptanceCriteria.length === 0) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('No acceptance criteria defined');\r\n        }\r\n        break;\r\n\r\n      case 'pseudocode':\r\n        if (!result.flowDiagram) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('No flow diagram created');\r\n        }\r\n        if (!result.pseudocode || result.pseudocode.length < 10) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('Insufficient pseudocode detail');\r\n        }\r\n        break;\r\n\r\n      case 'architecture':\r\n        if (!result.components || result.components.length === 0) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('No components defined');\r\n        }\r\n        if (!result.designPatterns || result.designPatterns.length === 0) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('No design patterns specified');\r\n        }\r\n        break;\r\n\r\n      case 'refinement':\r\n        if (!result.testResults || result.testResults.passed === 0) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('No passing tests');\r\n        }\r\n        if (result.codeQuality && result.codeQuality.score < 0.8) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('Code quality below threshold');\r\n        }\r\n        break;\r\n\r\n      case 'completion':\r\n        if (!result.validated) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('Final validation failed');\r\n        }\r\n        if (!result.documented) {\r\n          qualityGate.passed = false;\r\n          qualityGate.reasons.push('Documentation incomplete');\r\n        }\r\n        break;\r\n    }\r\n\r\n    return qualityGate;\r\n  }\r\n\r\n  /**\r\n   * Auto-remediate quality gate failures\r\n   */\r\n  async autoRemediate(phaseName, qualityGate) {\r\n    console.log(`üîÑ Attempting auto-remediation for ${phaseName}`);\r\n\r\n    // Neural learning can inform remediation strategies\r\n    if (this.options.neuralLearning) {\r\n      await this.learnFromFailure(\r\n        phaseName,\r\n        new Error(`Quality gate failed: ${qualityGate.reasons.join(', ')}`),\r\n      );\r\n    }\r\n\r\n    // Re-execute the phase with enhanced context\r\n    const phase = this.phases[phaseName];\r\n    phase.setRemediationContext(qualityGate);\r\n\r\n    const result = await phase.execute();\r\n    this.artifacts[phaseName] = result;\r\n\r\n    // Re-validate\r\n    const newQualityGate = await this.validateQualityGate(phaseName, result);\r\n    this.qualityGates[phaseName] = newQualityGate;\r\n\r\n    if (!newQualityGate.passed) {\r\n      throw new Error(\r\n        `Auto-remediation failed for ${phaseName}: ${newQualityGate.reasons.join(', ')}`,\r\n      );\r\n    }\r\n\r\n    console.log(`‚úÖ Auto-remediation successful for ${phaseName}`);\r\n  }\r\n\r\n  /**\r\n   * Neural learning from failures\r\n   */\r\n  async learnFromFailure(phaseName, error) {\r\n    const learningData = {\r\n      phase: phaseName,\r\n      task: this.taskDescription,\r\n      error: error.message,\r\n      timestamp: new Date().toISOString(),\r\n      context: this.artifacts,\r\n    };\r\n\r\n    // Store learning data for neural network training\r\n    if (this.options.neuralLearning) {\r\n      await this.coordinator.recordLearning(learningData);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate execution summary\r\n   */\r\n  generateSummary() {\r\n    const summary = {\r\n      taskDescription: this.taskDescription,\r\n      executionTime: Date.now() - this.startTime,\r\n      phases: this.phaseOrder.map((phase) => ({\r\n        name: phase,\r\n        status: this.qualityGates[phase]?.passed ? 'passed' : 'failed',\r\n        artifacts: this.artifacts[phase],\r\n      })),\r\n      qualityGates: this.qualityGates,\r\n      artifacts: this.artifacts,\r\n      recommendations: this.generateRecommendations(),\r\n    };\r\n\r\n    return summary;\r\n  }\r\n\r\n  /**\r\n   * Generate recommendations based on execution\r\n   */\r\n  generateRecommendations() {\r\n    const recommendations = [];\r\n\r\n    // Analyze quality gate failures\r\n    for (const [phase, gate] of Object.entries(this.qualityGates)) {\r\n      if (!gate.passed) {\r\n        recommendations.push({\r\n          type: 'quality_improvement',\r\n          phase: phase,\r\n          message: `Improve ${phase} quality: ${gate.reasons.join(', ')}`,\r\n        });\r\n      }\r\n    }\r\n\r\n    // Analyze artifacts for optimization opportunities\r\n    if (this.artifacts.architecture && this.artifacts.architecture.components.length > 10) {\r\n      recommendations.push({\r\n        type: 'architecture_optimization',\r\n        message: 'Consider breaking down architecture into smaller, more manageable components',\r\n      });\r\n    }\r\n\r\n    return recommendations;\r\n  }\r\n\r\n  /**\r\n   * Get current phase status\r\n   */\r\n  getPhaseStatus(phaseName) {\r\n    return {\r\n      name: phaseName,\r\n      completed: !!this.artifacts[phaseName],\r\n      qualityGate: this.qualityGates[phaseName],\r\n      artifacts: this.artifacts[phaseName],\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Get overall progress\r\n   */\r\n  getProgress() {\r\n    const completedPhases = Object.keys(this.artifacts).length;\r\n    const totalPhases = this.phaseOrder.length;\r\n\r\n    return {\r\n      completed: completedPhases,\r\n      total: totalPhases,\r\n      percentage: (completedPhases / totalPhases) * 100,\r\n      currentPhase: this.currentPhase,\r\n      phases: this.phaseOrder.map((phase) => this.getPhaseStatus(phase)),\r\n    };\r\n  }\r\n}\r\n\r\nexport default SparcMethodology;\r\n"],"names":["SparcSpecification","SparcPseudocode","SparcArchitecture","SparcRefinement","SparcCompletion","SparcCoordinator","SparcMethodology","taskDescription","options","namespace","swarmEnabled","neuralLearning","verbose","phases","specification","pseudocode","architecture","refinement","completion","coordinator","currentPhase","phaseOrder","artifacts","qualityGates","execute","console","log","initializeSwarm","phaseName","toUpperCase","prePhase","phase","result","qualityGate","validateQualityGate","passed","reasons","join","autoRemediation","autoRemediate","Error","postPhase","error","message","learnFromFailure","finalize","generateSummary","executePhase","requirements","length","push","acceptanceCriteria","flowDiagram","components","designPatterns","testResults","codeQuality","score","validated","documented","setRemediationContext","newQualityGate","learningData","task","timestamp","Date","toISOString","context","recordLearning","summary","executionTime","now","startTime","map","name","status","recommendations","generateRecommendations","gate","Object","entries","type","getPhaseStatus","completed","getProgress","completedPhases","keys","totalPhases","total","percentage"],"mappings":"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"}