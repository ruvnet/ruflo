{
  "version": 3,
  "sources": ["../../../../src/cli/commands/hive-mind/stop.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n/**\n * Hive Mind Stop Command\n *\n * Stop active swarm sessions and terminate child processes\n */\n\nimport { Command } from 'commander';\nimport chalk from 'chalk';\nimport { HiveMindSessionManager } from '../../simple-commands/hive-mind/session-manager.js';\nimport inquirer from 'inquirer';\n\nexport const stopCommand = new Command('stop')\n  .description('Stop active hive mind sessions')\n  .option('-s, --session <id>', 'Stop specific session by ID')\n  .option('-a, --all', 'Stop all active sessions')\n  .option('-f, --force', 'Force stop without confirmation')\n  .action(async (options) => {\n    const sessionManager = new HiveMindSessionManager();\n\n    try {\n      if (options.all) {\n        // Stop all active sessions\n        const sessions = await sessionManager.getActiveSessionsWithProcessInfo();\n\n        if (sessions.length === 0) {\n          console.log(chalk.yellow('No active sessions found'));\n          return;\n        }\n\n        if (!options.force) {\n          const { confirm } = await inquirer.prompt([\n            {\n              type: 'confirm',\n              name: 'confirm',\n              message: `Stop all ${sessions.length} active session(s)?`,\n              default: false,\n            },\n          ]);\n\n          if (!confirm) {\n            console.log(chalk.gray('Operation cancelled'));\n            return;\n          }\n        }\n\n        for (const session of sessions) {\n          console.log(chalk.cyan(`Stopping session ${session.id}...`));\n          await sessionManager.stopSession(session.id);\n          console.log(chalk.green(`\u2713 Session ${session.id} stopped`));\n        }\n\n        console.log(chalk.green(`\\n\u2705 All sessions stopped successfully`));\n      } else if (options.session) {\n        // Stop specific session\n        const sessionId = options.session;\n        const session = await sessionManager.getSession(sessionId);\n\n        if (!session) {\n          console.log(chalk.red(`Session ${sessionId} not found`));\n          return;\n        }\n\n        if ((session as any).status === 'stopped') {\n          console.log(chalk.yellow(`Session ${sessionId} is already stopped`));\n          return;\n        }\n\n        if (!options.force) {\n          const { confirm } = await inquirer.prompt([\n            {\n              type: 'confirm',\n              name: 'confirm',\n              message: `Stop session ${sessionId} (${(session as any).swarm_name || 'Unknown'})?`,\n              default: false,\n            },\n          ]);\n\n          if (!confirm) {\n            console.log(chalk.gray('Operation cancelled'));\n            return;\n          }\n        }\n\n        console.log(chalk.cyan(`Stopping session ${sessionId}...`));\n        await sessionManager.stopSession(sessionId);\n        console.log(chalk.green(`\u2713 Session ${sessionId} stopped successfully`));\n      } else {\n        // Interactive selection\n        const sessions = await sessionManager.getActiveSessionsWithProcessInfo();\n\n        if (sessions.length === 0) {\n          console.log(chalk.yellow('No active sessions found'));\n          return;\n        }\n\n        const { sessionId } = await inquirer.prompt([\n          {\n            type: 'list',\n            name: 'sessionId',\n            message: 'Select session to stop:',\n            choices: sessions.map((s: any) => ({\n              name: `${s.swarm_name} (${s.id}) - ${s.total_processes} process(es)`,\n              value: s.id,\n            })),\n          },\n        ]);\n\n        const { confirm } = await inquirer.prompt([\n          {\n            type: 'confirm',\n            name: 'confirm',\n            message: 'Stop this session?',\n            default: false,\n          },\n        ]);\n\n        if (!confirm) {\n          console.log(chalk.gray('Operation cancelled'));\n          return;\n        }\n\n        console.log(chalk.cyan(`Stopping session ${sessionId}...`));\n        await sessionManager.stopSession(sessionId);\n        console.log(chalk.green(`\u2713 Session stopped successfully`));\n      }\n\n      // Clean up orphaned processes\n      const cleanedCount = sessionManager.cleanupOrphanedProcesses();\n      if (cleanedCount > 0) {\n        console.log(chalk.blue(`\\nCleaned up ${cleanedCount} orphaned session(s)`));\n      }\n    } catch (error) {\n      console.error(chalk.red('Error stopping session:'), (error as Error).message);\n      process.exit(1);\n    } finally {\n      sessionManager.close();\n    }\n  });\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA,uBAAwB;AACxB,mBAAkB;AAClB,6BAAuC;AACvC,sBAAqB;AAEd,MAAM,cAAc,IAAI,yBAAQ,MAAM,EAC1C,YAAY,gCAAgC,EAC5C,OAAO,sBAAsB,6BAA6B,EAC1D,OAAO,aAAa,0BAA0B,EAC9C,OAAO,eAAe,iCAAiC,EACvD,OAAO,OAAO,YAAY;AACzB,QAAM,iBAAiB,IAAI,8CAAuB;AAElD,MAAI;AACF,QAAI,QAAQ,KAAK;AAEf,YAAM,WAAW,MAAM,eAAe,iCAAiC;AAEvE,UAAI,SAAS,WAAW,GAAG;AACzB,gBAAQ,IAAI,aAAAA,QAAM,OAAO,0BAA0B,CAAC;AACpD;AAAA,MACF;AAEA,UAAI,CAAC,QAAQ,OAAO;AAClB,cAAM,EAAE,QAAQ,IAAI,MAAM,gBAAAC,QAAS,OAAO;AAAA,UACxC;AAAA,YACE,MAAM;AAAA,YACN,MAAM;AAAA,YACN,SAAS,YAAY,SAAS,MAAM;AAAA,YACpC,SAAS;AAAA,UACX;AAAA,QACF,CAAC;AAED,YAAI,CAAC,SAAS;AACZ,kBAAQ,IAAI,aAAAD,QAAM,KAAK,qBAAqB,CAAC;AAC7C;AAAA,QACF;AAAA,MACF;AAEA,iBAAW,WAAW,UAAU;AAC9B,gBAAQ,IAAI,aAAAA,QAAM,KAAK,oBAAoB,QAAQ,EAAE,KAAK,CAAC;AAC3D,cAAM,eAAe,YAAY,QAAQ,EAAE;AAC3C,gBAAQ,IAAI,aAAAA,QAAM,MAAM,kBAAa,QAAQ,EAAE,UAAU,CAAC;AAAA,MAC5D;AAEA,cAAQ,IAAI,aAAAA,QAAM,MAAM;AAAA,yCAAuC,CAAC;AAAA,IAClE,WAAW,QAAQ,SAAS;AAE1B,YAAM,YAAY,QAAQ;AAC1B,YAAM,UAAU,MAAM,eAAe,WAAW,SAAS;AAEzD,UAAI,CAAC,SAAS;AACZ,gBAAQ,IAAI,aAAAA,QAAM,IAAI,WAAW,SAAS,YAAY,CAAC;AACvD;AAAA,MACF;AAEA,UAAK,QAAgB,WAAW,WAAW;AACzC,gBAAQ,IAAI,aAAAA,QAAM,OAAO,WAAW,SAAS,qBAAqB,CAAC;AACnE;AAAA,MACF;AAEA,UAAI,CAAC,QAAQ,OAAO;AAClB,cAAM,EAAE,QAAQ,IAAI,MAAM,gBAAAC,QAAS,OAAO;AAAA,UACxC;AAAA,YACE,MAAM;AAAA,YACN,MAAM;AAAA,YACN,SAAS,gBAAgB,SAAS,KAAM,QAAgB,cAAc,SAAS;AAAA,YAC/E,SAAS;AAAA,UACX;AAAA,QACF,CAAC;AAED,YAAI,CAAC,SAAS;AACZ,kBAAQ,IAAI,aAAAD,QAAM,KAAK,qBAAqB,CAAC;AAC7C;AAAA,QACF;AAAA,MACF;AAEA,cAAQ,IAAI,aAAAA,QAAM,KAAK,oBAAoB,SAAS,KAAK,CAAC;AAC1D,YAAM,eAAe,YAAY,SAAS;AAC1C,cAAQ,IAAI,aAAAA,QAAM,MAAM,kBAAa,SAAS,uBAAuB,CAAC;AAAA,IACxE,OAAO;AAEL,YAAM,WAAW,MAAM,eAAe,iCAAiC;AAEvE,UAAI,SAAS,WAAW,GAAG;AACzB,gBAAQ,IAAI,aAAAA,QAAM,OAAO,0BAA0B,CAAC;AACpD;AAAA,MACF;AAEA,YAAM,EAAE,UAAU,IAAI,MAAM,gBAAAC,QAAS,OAAO;AAAA,QAC1C;AAAA,UACE,MAAM;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,UACT,SAAS,SAAS,IAAI,CAAC,OAAY;AAAA,YACjC,MAAM,GAAG,EAAE,UAAU,KAAK,EAAE,EAAE,OAAO,EAAE,eAAe;AAAA,YACtD,OAAO,EAAE;AAAA,UACX,EAAE;AAAA,QACJ;AAAA,MACF,CAAC;AAED,YAAM,EAAE,QAAQ,IAAI,MAAM,gBAAAA,QAAS,OAAO;AAAA,QACxC;AAAA,UACE,MAAM;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,UACT,SAAS;AAAA,QACX;AAAA,MACF,CAAC;AAED,UAAI,CAAC,SAAS;AACZ,gBAAQ,IAAI,aAAAD,QAAM,KAAK,qBAAqB,CAAC;AAC7C;AAAA,MACF;AAEA,cAAQ,IAAI,aAAAA,QAAM,KAAK,oBAAoB,SAAS,KAAK,CAAC;AAC1D,YAAM,eAAe,YAAY,SAAS;AAC1C,cAAQ,IAAI,aAAAA,QAAM,MAAM,qCAAgC,CAAC;AAAA,IAC3D;AAGA,UAAM,eAAe,eAAe,yBAAyB;AAC7D,QAAI,eAAe,GAAG;AACpB,cAAQ,IAAI,aAAAA,QAAM,KAAK;AAAA,aAAgB,YAAY,sBAAsB,CAAC;AAAA,IAC5E;AAAA,EACF,SAAS,OAAO;AACd,YAAQ,MAAM,aAAAA,QAAM,IAAI,yBAAyB,GAAI,MAAgB,OAAO;AAC5E,YAAQ,KAAK,CAAC;AAAA,EAChB,UAAE;AACA,mBAAe,MAAM;AAAA,EACvB;AACF,CAAC;",
  "names": ["chalk", "inquirer"]
}
