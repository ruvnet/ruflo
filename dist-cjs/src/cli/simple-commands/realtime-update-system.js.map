{"version":3,"sources":["../../../../src/cli/simple-commands/realtime-update-system.js"],"sourcesContent":["/**\r\n * Real-time Update System for Claude-Flow Web UI\r\n * Provides event-driven architecture for live data updates\r\n * Supports WebSocket-like functionality and progressive loading\r\n */\r\n\r\nexport class RealtimeUpdateSystem {\r\n  constructor(ui) {\r\n    this.ui = ui;\r\n    this.subscribers = new Map(); // Event type -> Set of callbacks\r\n    this.updateQueues = new Map(); // View -> Queue of pending updates\r\n    this.updateTimers = new Map(); // View -> Timer for batched updates\r\n    this.batchDelay = 100; // ms to batch updates\r\n    this.eventHistory = []; // Keep last 100 events\r\n    this.maxHistorySize = 100;\r\n\r\n    // Performance monitoring\r\n    this.updateMetrics = {\r\n      totalUpdates: 0,\r\n      updateLatency: [],\r\n      batchedUpdates: 0,\r\n      droppedUpdates: 0,\r\n    };\r\n\r\n    this.initializeSystem();\r\n  }\r\n\r\n  /**\r\n   * Initialize the real-time update system\r\n   */\r\n  initializeSystem() {\r\n    // Setup system event listeners\r\n    this.setupSystemEvents();\r\n\r\n    // Initialize update queues for all views\r\n    this.initializeUpdateQueues();\r\n\r\n    // Start performance monitoring\r\n    this.startPerformanceMonitoring();\r\n\r\n    this.ui.addLog('success', 'Real-time update system initialized');\r\n  }\r\n\r\n  /**\r\n   * Setup system-level event listeners\r\n   */\r\n  setupSystemEvents() {\r\n    // Listen for tool execution events\r\n    this.subscribe('tool_start', (data) => {\r\n      this.broadcastUpdate('tools', {\r\n        type: 'execution_start',\r\n        toolName: data.toolName,\r\n        executionId: data.executionId,\r\n        timestamp: Date.now(),\r\n      });\r\n    });\r\n\r\n    this.subscribe('tool_complete', (data) => {\r\n      this.broadcastUpdate('tools', {\r\n        type: 'execution_complete',\r\n        toolName: data.toolName,\r\n        executionId: data.executionId,\r\n        result: data.result,\r\n        timestamp: Date.now(),\r\n      });\r\n\r\n      // Update relevant views based on tool type\r\n      this.updateRelatedViews(data.toolName, data.result);\r\n    });\r\n\r\n    this.subscribe('tool_error', (data) => {\r\n      this.broadcastUpdate('tools', {\r\n        type: 'execution_error',\r\n        toolName: data.toolName,\r\n        executionId: data.executionId,\r\n        error: data.error,\r\n        timestamp: Date.now(),\r\n      });\r\n    });\r\n\r\n    // Listen for swarm events\r\n    this.subscribe('swarm_status_change', (data) => {\r\n      this.broadcastUpdate('orchestration', {\r\n        type: 'swarm_update',\r\n        swarmId: data.swarmId,\r\n        status: data.status,\r\n        timestamp: Date.now(),\r\n      });\r\n    });\r\n\r\n    // Listen for memory events\r\n    this.subscribe('memory_change', (data) => {\r\n      this.broadcastUpdate('memory', {\r\n        type: 'memory_update',\r\n        namespace: data.namespace,\r\n        operation: data.operation,\r\n        timestamp: Date.now(),\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initialize update queues for all views\r\n   */\r\n  initializeUpdateQueues() {\r\n    const views = [\r\n      'neural',\r\n      'analysis',\r\n      'workflow',\r\n      'github',\r\n      'daa',\r\n      'system',\r\n      'tools',\r\n      'orchestration',\r\n      'memory',\r\n    ];\r\n    views.forEach((view) => {\r\n      this.updateQueues.set(view, []);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Subscribe to specific event types\r\n   */\r\n  subscribe(eventType, callback) {\r\n    if (!this.subscribers.has(eventType)) {\r\n      this.subscribers.set(eventType, new Set());\r\n    }\r\n    this.subscribers.get(eventType).add(callback);\r\n\r\n    // Return unsubscribe function\r\n    return () => {\r\n      const subs = this.subscribers.get(eventType);\r\n      if (subs) {\r\n        subs.delete(callback);\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Emit event to all subscribers\r\n   */\r\n  emit(eventType, data) {\r\n    const timestamp = Date.now();\r\n\r\n    // Add to event history\r\n    this.eventHistory.push({\r\n      type: eventType,\r\n      data,\r\n      timestamp,\r\n    });\r\n\r\n    // Trim history if too large\r\n    if (this.eventHistory.length > this.maxHistorySize) {\r\n      this.eventHistory.shift();\r\n    }\r\n\r\n    // Notify subscribers\r\n    const subscribers = this.subscribers.get(eventType);\r\n    if (subscribers) {\r\n      subscribers.forEach((callback) => {\r\n        try {\r\n          callback(data, timestamp);\r\n        } catch (error) {\r\n          console.error(`Error in event subscriber for ${eventType}:`, error);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Broadcast update to specific view\r\n   */\r\n  broadcastUpdate(viewName, updateData) {\r\n    const queue = this.updateQueues.get(viewName);\r\n    if (!queue) return;\r\n\r\n    // Add update to queue\r\n    queue.push({\r\n      ...updateData,\r\n      id: `update_${Date.now()}_${Math.random().toString(36).substr(2, 6)}`,\r\n    });\r\n\r\n    // Schedule batched update\r\n    this.scheduleBatchedUpdate(viewName);\r\n\r\n    this.updateMetrics.totalUpdates++;\r\n  }\r\n\r\n  /**\r\n   * Schedule batched update for a view\r\n   */\r\n  scheduleBatchedUpdate(viewName) {\r\n    // Clear existing timer\r\n    const existingTimer = this.updateTimers.get(viewName);\r\n    if (existingTimer) {\r\n      clearTimeout(existingTimer);\r\n    }\r\n\r\n    // Schedule new batched update\r\n    const timer = setTimeout(() => {\r\n      this.processBatchedUpdates(viewName);\r\n    }, this.batchDelay);\r\n\r\n    this.updateTimers.set(viewName, timer);\r\n  }\r\n\r\n  /**\r\n   * Process batched updates for a view\r\n   */\r\n  processBatchedUpdates(viewName) {\r\n    const queue = this.updateQueues.get(viewName);\r\n    if (!queue || queue.length === 0) return;\r\n\r\n    const startTime = Date.now();\r\n\r\n    // Group updates by type\r\n    const groupedUpdates = this.groupUpdatesByType(queue);\r\n\r\n    // Apply updates\r\n    this.applyUpdatesToView(viewName, groupedUpdates);\r\n\r\n    // Clear processed updates\r\n    queue.length = 0;\r\n\r\n    // Update metrics\r\n    const latency = Date.now() - startTime;\r\n    this.updateMetrics.updateLatency.push(latency);\r\n    this.updateMetrics.batchedUpdates++;\r\n\r\n    // Keep only last 100 latency measurements\r\n    if (this.updateMetrics.updateLatency.length > 100) {\r\n      this.updateMetrics.updateLatency.shift();\r\n    }\r\n\r\n    // Clear timer\r\n    this.updateTimers.delete(viewName);\r\n  }\r\n\r\n  /**\r\n   * Group updates by type for efficient processing\r\n   */\r\n  groupUpdatesByType(updates) {\r\n    const grouped = new Map();\r\n\r\n    updates.forEach((update) => {\r\n      if (!grouped.has(update.type)) {\r\n        grouped.set(update.type, []);\r\n      }\r\n      grouped.get(update.type).push(update);\r\n    });\r\n\r\n    return grouped;\r\n  }\r\n\r\n  /**\r\n   * Apply grouped updates to a specific view\r\n   */\r\n  applyUpdatesToView(viewName, groupedUpdates) {\r\n    try {\r\n      // Different views handle updates differently\r\n      switch (viewName) {\r\n        case 'neural':\r\n          this.applyNeuralUpdates(groupedUpdates);\r\n          break;\r\n        case 'analysis':\r\n          this.applyAnalysisUpdates(groupedUpdates);\r\n          break;\r\n        case 'workflow':\r\n          this.applyWorkflowUpdates(groupedUpdates);\r\n          break;\r\n        case 'tools':\r\n          this.applyToolsUpdates(groupedUpdates);\r\n          break;\r\n        case 'orchestration':\r\n          this.applyOrchestrationUpdates(groupedUpdates);\r\n          break;\r\n        case 'memory':\r\n          this.applyMemoryUpdates(groupedUpdates);\r\n          break;\r\n        default:\r\n          this.applyGenericUpdates(viewName, groupedUpdates);\r\n      }\r\n\r\n      // Trigger UI refresh if this is the current view\r\n      if (this.ui.currentView === viewName) {\r\n        this.requestUIRefresh();\r\n      }\r\n    } catch (error) {\r\n      console.error(`Error applying updates to ${viewName}:`, error);\r\n      this.updateMetrics.droppedUpdates++;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply neural-specific updates\r\n   */\r\n  applyNeuralUpdates(groupedUpdates) {\r\n    const neuralData = this.ui.enhancedViews?.viewData?.get('neural');\r\n    if (!neuralData) return;\r\n\r\n    // Handle training job updates\r\n    const trainingUpdates = groupedUpdates.get('training_progress');\r\n    if (trainingUpdates) {\r\n      trainingUpdates.forEach((update) => {\r\n        const existingJob = neuralData.trainingJobs.find((job) => job.id === update.jobId);\r\n        if (existingJob) {\r\n          Object.assign(existingJob, update.data);\r\n        } else {\r\n          neuralData.trainingJobs.push({\r\n            id: update.jobId,\r\n            ...update.data,\r\n            startTime: update.timestamp,\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    // Handle model updates\r\n    const modelUpdates = groupedUpdates.get('model_update');\r\n    if (modelUpdates) {\r\n      modelUpdates.forEach((update) => {\r\n        const existingModel = neuralData.models.find((model) => model.id === update.modelId);\r\n        if (existingModel) {\r\n          Object.assign(existingModel, update.data);\r\n        } else {\r\n          neuralData.models.push({\r\n            id: update.modelId,\r\n            ...update.data,\r\n            createdAt: update.timestamp,\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply analysis-specific updates\r\n   */\r\n  applyAnalysisUpdates(groupedUpdates) {\r\n    const analysisData = this.ui.enhancedViews?.viewData?.get('analysis');\r\n    if (!analysisData) return;\r\n\r\n    // Handle performance report updates\r\n    const reportUpdates = groupedUpdates.get('performance_report');\r\n    if (reportUpdates) {\r\n      reportUpdates.forEach((update) => {\r\n        analysisData.reports.unshift({\r\n          id: update.reportId || `report_${update.timestamp}`,\r\n          ...update.data,\r\n          timestamp: update.timestamp,\r\n        });\r\n\r\n        // Keep only last 50 reports\r\n        if (analysisData.reports.length > 50) {\r\n          analysisData.reports = analysisData.reports.slice(0, 50);\r\n        }\r\n      });\r\n    }\r\n\r\n    // Handle metrics updates\r\n    const metricsUpdates = groupedUpdates.get('metrics_update');\r\n    if (metricsUpdates) {\r\n      metricsUpdates.forEach((update) => {\r\n        analysisData.metrics.push({\r\n          ...update.data,\r\n          timestamp: update.timestamp,\r\n        });\r\n\r\n        // Keep only last 100 metric points\r\n        if (analysisData.metrics.length > 100) {\r\n          analysisData.metrics.shift();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply tools-specific updates\r\n   */\r\n  applyToolsUpdates(groupedUpdates) {\r\n    // Handle execution updates\r\n    const executionUpdates = groupedUpdates.get('execution_start');\r\n    if (executionUpdates) {\r\n      executionUpdates.forEach((update) => {\r\n        this.ui.addLog('info', `ðŸ”§ Started: ${update.toolName}`);\r\n      });\r\n    }\r\n\r\n    const completionUpdates = groupedUpdates.get('execution_complete');\r\n    if (completionUpdates) {\r\n      completionUpdates.forEach((update) => {\r\n        this.ui.addLog('success', `âœ… Completed: ${update.toolName}`);\r\n\r\n        // Show result summary if available\r\n        if (update.result && update.result.summary) {\r\n          this.ui.addLog('info', `ðŸ“‹ ${update.result.summary}`);\r\n        }\r\n      });\r\n    }\r\n\r\n    const errorUpdates = groupedUpdates.get('execution_error');\r\n    if (errorUpdates) {\r\n      errorUpdates.forEach((update) => {\r\n        this.ui.addLog('error', `âŒ Failed: ${update.toolName} - ${update.error}`);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply orchestration-specific updates\r\n   */\r\n  applyOrchestrationUpdates(groupedUpdates) {\r\n    // Handle swarm updates\r\n    const swarmUpdates = groupedUpdates.get('swarm_update');\r\n    if (swarmUpdates) {\r\n      swarmUpdates.forEach((update) => {\r\n        // Update swarm integration data\r\n        if (this.ui.swarmIntegration) {\r\n          this.ui.swarmIntegration.updateSwarmStatus();\r\n        }\r\n\r\n        this.ui.addLog('info', `ðŸ Swarm ${update.swarmId}: ${update.status}`);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply memory-specific updates\r\n   */\r\n  applyMemoryUpdates(groupedUpdates) {\r\n    // Handle memory operation updates\r\n    const memoryUpdates = groupedUpdates.get('memory_update');\r\n    if (memoryUpdates) {\r\n      memoryUpdates.forEach((update) => {\r\n        // Update memory stats\r\n        if (this.ui.memoryStats) {\r\n          const namespace = this.ui.memoryStats.namespaces.find(\r\n            (ns) => ns.name === update.namespace,\r\n          );\r\n          if (namespace) {\r\n            // Update existing namespace stats\r\n            if (update.operation === 'store') {\r\n              namespace.entries++;\r\n            } else if (update.operation === 'delete') {\r\n              namespace.entries = Math.max(0, namespace.entries - 1);\r\n            }\r\n          }\r\n        }\r\n\r\n        this.ui.addLog('info', `ðŸ’¾ Memory ${update.operation} in ${update.namespace}`);\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Apply generic updates for other views\r\n   */\r\n  applyGenericUpdates(viewName, groupedUpdates) {\r\n    // Log generic updates\r\n    groupedUpdates.forEach((updates, type) => {\r\n      updates.forEach((update) => {\r\n        this.ui.addLog('info', `ðŸ“¡ ${viewName}: ${type} update`);\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update related views based on tool execution\r\n   */\r\n  updateRelatedViews(toolName, result) {\r\n    // Map tool names to affected views\r\n    const toolViewMap = {\r\n      // Neural tools affect neural view\r\n      neural_train: ['neural'],\r\n      neural_predict: ['neural'],\r\n      neural_status: ['neural'],\r\n      model_save: ['neural'],\r\n      model_load: ['neural'],\r\n\r\n      // Analysis tools affect analysis view\r\n      performance_report: ['analysis'],\r\n      bottleneck_analyze: ['analysis'],\r\n      token_usage: ['analysis'],\r\n      benchmark_run: ['analysis'],\r\n\r\n      // Swarm tools affect orchestration view\r\n      swarm_init: ['orchestration'],\r\n      agent_spawn: ['orchestration'],\r\n      task_orchestrate: ['orchestration'],\r\n\r\n      // Memory tools affect memory view\r\n      memory_usage: ['memory'],\r\n      memory_search: ['memory'],\r\n      memory_backup: ['memory'],\r\n    };\r\n\r\n    const affectedViews = toolViewMap[toolName] || [];\r\n\r\n    affectedViews.forEach((viewName) => {\r\n      this.broadcastUpdate(viewName, {\r\n        type: 'tool_result',\r\n        toolName,\r\n        result,\r\n        timestamp: Date.now(),\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Request UI refresh (throttled)\r\n   */\r\n  requestUIRefresh() {\r\n    if (this.refreshThrottle) return;\r\n\r\n    this.refreshThrottle = setTimeout(() => {\r\n      if (this.ui && typeof this.ui.render === 'function') {\r\n        this.ui.render();\r\n      }\r\n      this.refreshThrottle = null;\r\n    }, 50); // Throttle to max 20 FPS\r\n  }\r\n\r\n  /**\r\n   * Start performance monitoring\r\n   */\r\n  startPerformanceMonitoring() {\r\n    setInterval(() => {\r\n      this.reportPerformanceMetrics();\r\n    }, 60000); // Report every minute\r\n  }\r\n\r\n  /**\r\n   * Report performance metrics\r\n   */\r\n  reportPerformanceMetrics() {\r\n    const avgLatency =\r\n      this.updateMetrics.updateLatency.length > 0\r\n        ? this.updateMetrics.updateLatency.reduce((a, b) => a + b, 0) /\r\n          this.updateMetrics.updateLatency.length\r\n        : 0;\r\n\r\n    const queueSizes = Array.from(this.updateQueues.values()).map((q) => q.length);\r\n    const totalQueueSize = queueSizes.reduce((a, b) => a + b, 0);\r\n\r\n    this.emit('performance_metrics', {\r\n      totalUpdates: this.updateMetrics.totalUpdates,\r\n      averageLatency: avgLatency,\r\n      batchedUpdates: this.updateMetrics.batchedUpdates,\r\n      droppedUpdates: this.updateMetrics.droppedUpdates,\r\n      totalQueueSize,\r\n      eventHistorySize: this.eventHistory.length,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get system status\r\n   */\r\n  getStatus() {\r\n    const queueSizes = {};\r\n    this.updateQueues.forEach((queue, viewName) => {\r\n      queueSizes[viewName] = queue.length;\r\n    });\r\n\r\n    return {\r\n      subscribers: this.subscribers.size,\r\n      queueSizes,\r\n      metrics: this.updateMetrics,\r\n      eventHistorySize: this.eventHistory.length,\r\n      activeTimers: this.updateTimers.size,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Create progressive loading handler\r\n   */\r\n  createProgressiveLoader(viewName, dataLoader, options = {}) {\r\n    const { chunkSize = 10, delay = 100, onProgress = null, onComplete = null } = options;\r\n\r\n    return async () => {\r\n      try {\r\n        const data = await dataLoader();\r\n\r\n        if (!Array.isArray(data)) {\r\n          // Non-array data, load immediately\r\n          this.broadcastUpdate(viewName, {\r\n            type: 'data_loaded',\r\n            data,\r\n            timestamp: Date.now(),\r\n          });\r\n\r\n          if (onComplete) onComplete(data);\r\n          return;\r\n        }\r\n\r\n        // Progressive loading for arrays\r\n        for (let i = 0; i < data.length; i += chunkSize) {\r\n          const chunk = data.slice(i, i + chunkSize);\r\n\r\n          this.broadcastUpdate(viewName, {\r\n            type: 'data_chunk',\r\n            chunk,\r\n            progress: {\r\n              loaded: Math.min(i + chunkSize, data.length),\r\n              total: data.length,\r\n              percentage: Math.min(((i + chunkSize) / data.length) * 100, 100),\r\n            },\r\n            timestamp: Date.now(),\r\n          });\r\n\r\n          if (onProgress) {\r\n            onProgress({\r\n              loaded: Math.min(i + chunkSize, data.length),\r\n              total: data.length,\r\n              percentage: Math.min(((i + chunkSize) / data.length) * 100, 100),\r\n            });\r\n          }\r\n\r\n          // Small delay between chunks to prevent blocking\r\n          if (i + chunkSize < data.length) {\r\n            await new Promise((resolve) => setTimeout(resolve, delay));\r\n          }\r\n        }\r\n\r\n        if (onComplete) onComplete(data);\r\n      } catch (error) {\r\n        this.broadcastUpdate(viewName, {\r\n          type: 'data_error',\r\n          error: error.message,\r\n          timestamp: Date.now(),\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Cleanup resources\r\n   */\r\n  cleanup() {\r\n    // Clear all timers\r\n    this.updateTimers.forEach((timer) => clearTimeout(timer));\r\n    this.updateTimers.clear();\r\n\r\n    // Clear refresh throttle\r\n    if (this.refreshThrottle) {\r\n      clearTimeout(this.refreshThrottle);\r\n    }\r\n\r\n    // Clear all subscribers\r\n    this.subscribers.clear();\r\n\r\n    // Clear update queues\r\n    this.updateQueues.clear();\r\n\r\n    this.ui.addLog('info', 'Real-time update system cleaned up');\r\n  }\r\n}\r\n\r\nexport default RealtimeUpdateSystem;\r\n"],"names":["RealtimeUpdateSystem","ui","subscribers","Map","updateQueues","updateTimers","batchDelay","eventHistory","maxHistorySize","updateMetrics","totalUpdates","updateLatency","batchedUpdates","droppedUpdates","initializeSystem","setupSystemEvents","initializeUpdateQueues","startPerformanceMonitoring","addLog","subscribe","data","broadcastUpdate","type","toolName","executionId","timestamp","Date","now","result","updateRelatedViews","error","swarmId","status","namespace","operation","views","forEach","view","set","eventType","callback","has","Set","get","add","subs","delete","emit","push","length","shift","console","viewName","updateData","queue","id","Math","random","toString","substr","scheduleBatchedUpdate","existingTimer","clearTimeout","timer","setTimeout","processBatchedUpdates","startTime","groupedUpdates","groupUpdatesByType","applyUpdatesToView","latency","updates","grouped","update","applyNeuralUpdates","applyAnalysisUpdates","applyWorkflowUpdates","applyToolsUpdates","applyOrchestrationUpdates","applyMemoryUpdates","applyGenericUpdates","currentView","requestUIRefresh","neuralData","enhancedViews","viewData","trainingUpdates","existingJob","trainingJobs","find","job","jobId","Object","assign","modelUpdates","existingModel","models","model","modelId","createdAt","analysisData","reportUpdates","reports","unshift","reportId","slice","metricsUpdates","metrics","executionUpdates","completionUpdates","summary","errorUpdates","swarmUpdates","swarmIntegration","updateSwarmStatus","memoryUpdates","memoryStats","namespaces","ns","name","entries","max","toolViewMap","neural_train","neural_predict","neural_status","model_save","model_load","performance_report","bottleneck_analyze","token_usage","benchmark_run","swarm_init","agent_spawn","task_orchestrate","memory_usage","memory_search","memory_backup","affectedViews","refreshThrottle","render","setInterval","reportPerformanceMetrics","avgLatency","reduce","a","b","queueSizes","Array","from","values","map","q","totalQueueSize","averageLatency","eventHistorySize","getStatus","size","activeTimers","createProgressiveLoader","dataLoader","options","chunkSize","delay","onProgress","onComplete","isArray","i","chunk","progress","loaded","min","total","percentage","Promise","resolve","message","cleanup","clear"],"mappings":"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"}