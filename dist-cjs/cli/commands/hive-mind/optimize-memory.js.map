{
  "version": 3,
  "sources": ["../../../../src/cli/commands/hive-mind/optimize-memory.ts"],
  "sourcesContent": ["/**\n * Memory Optimization Command\n *\n * Provides comprehensive memory optimization tools for the Hive Mind system.\n */\n\nimport { Command } from 'commander';\nimport { CollectiveMemory, MemoryOptimizer } from '../../simple-commands/hive-mind/memory.js';\nimport { MemoryMonitor } from '../../../hive-mind/core/MemoryMonitor.js';\nimport { Memory } from '../../../hive-mind/core/Memory.js';\nimport { DatabaseManager } from '../../../hive-mind/core/DatabaseManager.js';\nimport chalk from 'chalk';\n\nexport function createOptimizeMemoryCommand(): Command {\n  const command = new Command('optimize-memory')\n    .description('Optimize memory usage and performance for Hive Mind')\n    .option('-a, --analyze', 'Analyze current memory performance')\n    .option('-o, --optimize', 'Run comprehensive memory optimization')\n    .option('-m, --monitor', 'Start memory monitoring dashboard')\n    .option('-r, --report', 'Generate detailed memory report')\n    .option('-c, --cleanup', 'Perform memory cleanup operations')\n    .option('--cache-size <size>', 'Set cache size (entries)', '10000')\n    .option('--cache-memory <mb>', 'Set cache memory limit (MB)', '100')\n    .option('--compression-threshold <bytes>', 'Set compression threshold', '10000')\n    .action(async (options) => {\n      try {\n        console.log(chalk.blue.bold('\\n\uD83E\uDDE0 Hive Mind Memory Optimization System\\n'));\n\n        if (options.analyze) {\n          await analyzeMemoryPerformance();\n        }\n\n        if (options.optimize) {\n          await runMemoryOptimization(options);\n        }\n\n        if (options.monitor) {\n          await startMemoryMonitoring();\n        }\n\n        if (options.report) {\n          await generateMemoryReport();\n        }\n\n        if (options.cleanup) {\n          await performMemoryCleanup();\n        }\n\n        if (\n          !options.analyze &&\n          !options.optimize &&\n          !options.monitor &&\n          !options.report &&\n          !options.cleanup\n        ) {\n          await showMemoryOverview();\n        }\n      } catch (error) {\n        console.error(chalk.red('\u274C Memory optimization failed:'), (error as Error).message);\n        process.exit(1);\n      }\n    });\n\n  return command;\n}\n\n/**\n * Analyze current memory performance\n */\nasync function analyzeMemoryPerformance(): Promise<void> {\n  console.log(chalk.yellow('\uD83D\uDD0D Analyzing memory performance...\\n'));\n\n  try {\n    // Initialize memory systems\n    const memory = new Memory('hive-mind-optimizer', {\n      cacheSize: 10000,\n      cacheMemoryMB: 100,\n      enablePooling: true,\n      compressionThreshold: 10000,\n    });\n\n    await memory.initialize();\n\n    // Get comprehensive analytics\n    const analytics = memory.getAdvancedAnalytics();\n    const healthCheck = await memory.healthCheck();\n\n    // Display results\n    console.log(chalk.green.bold('\uD83D\uDCCA Memory Performance Analysis\\n'));\n\n    // Cache Performance\n    console.log(chalk.cyan('\uD83D\uDDC4\uFE0F Cache Performance:'));\n    console.log(`   Hit Rate: ${chalk.bold(analytics.cache.hitRate?.toFixed(1) || '0')}%`);\n    console.log(\n      `   Memory Usage: ${chalk.bold(analytics.cache.memoryUsage?.toFixed(1) || '0')} MB`,\n    );\n    console.log(\n      `   Utilization: ${chalk.bold(analytics.cache.utilizationPercent?.toFixed(1) || '0')}%`,\n    );\n    console.log(`   Evictions: ${chalk.bold(analytics.cache.evictions || 0)}\\n`);\n\n    // Performance Metrics\n    console.log(chalk.cyan('\u26A1 Performance Metrics:'));\n    for (const [operation, stats] of Object.entries(analytics.performance)) {\n      if (typeof stats === 'object' && stats.avg) {\n        console.log(\n          `   ${operation}: ${chalk.bold(stats.avg.toFixed(2))}ms avg (${stats.count} samples)`,\n        );\n      }\n    }\n    console.log('');\n\n    // Object Pools\n    if (analytics.pools) {\n      console.log(chalk.cyan('\uD83D\uDD04 Object Pools:'));\n      for (const [name, stats] of Object.entries(analytics.pools)) {\n        if (typeof stats === 'object' && stats.reuseRate !== undefined) {\n          console.log(`   ${name}: ${chalk.bold(stats.reuseRate.toFixed(1))}% reuse rate`);\n        }\n      }\n      console.log('');\n    }\n\n    // Health Status\n    console.log(chalk.cyan('\uD83C\uDFE5 Health Status:'));\n    const statusColor =\n      healthCheck.status === 'healthy'\n        ? 'green'\n        : healthCheck.status === 'warning'\n          ? 'yellow'\n          : 'red';\n    console.log(`   Overall: ${chalk[statusColor].bold(healthCheck.status.toUpperCase())}`);\n    console.log(`   Score: ${chalk.bold(healthCheck.score)}/100`);\n\n    if (healthCheck.issues.length > 0) {\n      console.log(`   Issues: ${chalk.red(healthCheck.issues.length)}`);\n      healthCheck.issues.forEach((issue) => {\n        console.log(`     \u2022 ${chalk.red(issue)}`);\n      });\n    }\n\n    if (healthCheck.recommendations.length > 0) {\n      console.log(`   Recommendations:`);\n      healthCheck.recommendations.forEach((rec) => {\n        console.log(`     \u2022 ${chalk.blue(rec)}`);\n      });\n    }\n\n    await memory.shutdown();\n  } catch (error) {\n    console.error(chalk.red('\u274C Analysis failed:'), (error as Error).message);\n  }\n}\n\n/**\n * Run comprehensive memory optimization\n */\nasync function runMemoryOptimization(options: any): Promise<void> {\n  console.log(chalk.yellow('\u26A1 Running memory optimization...\\n'));\n\n  try {\n    // Initialize optimized memory system\n    const memory = new Memory('hive-mind-optimizer', {\n      cacheSize: parseInt(options.cacheSize),\n      cacheMemoryMB: parseInt(options.cacheMemory),\n      enablePooling: true,\n      compressionThreshold: parseInt(options.compressionThreshold),\n      batchSize: 100,\n    });\n\n    await memory.initialize();\n\n    // Get baseline metrics\n    const baselineAnalytics = memory.getAdvancedAnalytics();\n    const baselineHealth = await memory.healthCheck();\n\n    console.log(chalk.cyan('\uD83D\uDCCB Baseline Metrics:'));\n    console.log(`   Cache Hit Rate: ${baselineAnalytics.cache.hitRate?.toFixed(1) || '0'}%`);\n    console.log(`   Health Score: ${baselineHealth.score}/100\\n`);\n\n    // Run optimization steps\n    console.log(chalk.yellow('\uD83D\uDD27 Optimization Steps:\\n'));\n\n    // Step 1: Cache optimization\n    console.log(chalk.blue('1. Optimizing cache configuration...'));\n    // Cache is already optimized in constructor\n    console.log(chalk.green('   \u2713 Cache configuration optimized\\n'));\n\n    // Step 2: Database optimization\n    console.log(chalk.blue('2. Optimizing database performance...'));\n    const db = await DatabaseManager.getInstance();\n    const dbAnalytics = db.getDatabaseAnalytics();\n\n    if (dbAnalytics.fragmentation > 20) {\n      console.log(chalk.yellow('   \u26A0\uFE0F High database fragmentation detected'));\n      console.log(chalk.blue('   Running database optimization...'));\n      // Database optimization would happen here\n    }\n    console.log(chalk.green('   \u2713 Database optimization completed\\n'));\n\n    // Step 3: Memory cleanup\n    console.log(chalk.blue('3. Performing memory cleanup...'));\n    await memory.compress();\n    console.log(chalk.green('   \u2713 Memory compression completed\\n'));\n\n    // Step 4: Pattern analysis\n    console.log(chalk.blue('4. Analyzing access patterns...'));\n    const patterns = await memory.learnPatterns();\n    console.log(chalk.green(`   \u2713 Learned ${patterns.length} access patterns\\n`));\n\n    // Get final metrics\n    const finalAnalytics = memory.getAdvancedAnalytics();\n    const finalHealth = await memory.healthCheck();\n\n    // Show improvement\n    console.log(chalk.green.bold('\uD83D\uDCC8 Optimization Results:\\n'));\n\n    const hitRateImprovement =\n      (finalAnalytics.cache.hitRate || 0) - (baselineAnalytics.cache.hitRate || 0);\n    const healthImprovement = finalHealth.score - baselineHealth.score;\n\n    console.log(chalk.cyan('Performance Improvements:'));\n    console.log(\n      `   Cache Hit Rate: ${hitRateImprovement >= 0 ? '+' : ''}${hitRateImprovement.toFixed(1)}%`,\n    );\n    console.log(\n      `   Health Score: ${healthImprovement >= 0 ? '+' : ''}${healthImprovement.toFixed(1)} points`,\n    );\n\n    if (hitRateImprovement > 0 || healthImprovement > 0) {\n      console.log(chalk.green('\\n\u2705 Memory optimization completed successfully!'));\n    } else {\n      console.log(chalk.yellow('\\n\u26A0\uFE0F System was already well-optimized'));\n    }\n\n    await memory.shutdown();\n  } catch (error) {\n    console.error(chalk.red('\u274C Optimization failed:'), (error as Error).message);\n  }\n}\n\n/**\n * Start interactive memory monitoring dashboard\n */\nasync function startMemoryMonitoring(): Promise<void> {\n  console.log(chalk.yellow('\uD83D\uDCCA Starting memory monitoring dashboard...\\n'));\n\n  try {\n    // Initialize systems\n    const memory = new Memory('hive-mind-monitor');\n    const db = await DatabaseManager.getInstance();\n    await memory.initialize();\n\n    const monitor = new MemoryMonitor(memory, db);\n\n    // Set up event listeners\n    monitor.on('alert', (alert) => {\n      const color =\n        alert.level === 'critical' ? 'red' : alert.level === 'warning' ? 'yellow' : 'blue';\n      console.log(chalk[color](`\uD83D\uDEA8 ${alert.level.toUpperCase()}: ${alert.message}`));\n    });\n\n    monitor.on('metrics:collected', (data) => {\n      // Clear screen and show current metrics\n      console.clear();\n      console.log(chalk.blue.bold('\uD83E\uDDE0 Hive Mind Memory Monitor\\n'));\n\n      const { metrics } = data;\n      console.log(chalk.cyan('\uD83D\uDCCA Real-time Metrics:'));\n      console.log(`   Cache Hit Rate: ${chalk.bold(metrics.cacheHitRate.toFixed(1))}%`);\n      console.log(`   Avg Query Time: ${chalk.bold(metrics.avgQueryTime.toFixed(1))}ms`);\n      console.log(`   Memory Utilization: ${chalk.bold(metrics.memoryUtilization.toFixed(1))}%`);\n      console.log(`   Pool Efficiency: ${chalk.bold(metrics.poolEfficiency.toFixed(1))}%`);\n      console.log(`   DB Fragmentation: ${chalk.bold(metrics.dbFragmentation.toFixed(1))}%`);\n      console.log(`   Last Updated: ${chalk.gray(new Date().toLocaleTimeString())}\\n`);\n\n      console.log(chalk.gray('Press Ctrl+C to stop monitoring...'));\n    });\n\n    monitor.on('health:analyzed', (report) => {\n      if (report.overall.status !== 'good' && report.overall.status !== 'excellent') {\n        console.log(chalk.yellow(`\\n\u26A0\uFE0F Health Status: ${report.overall.status}`));\n        console.log(`   ${report.overall.summary}`);\n      }\n    });\n\n    // Start monitoring\n    await monitor.start();\n\n    // Handle shutdown\n    process.on('SIGINT', async () => {\n      console.log(chalk.yellow('\\n\\n\uD83D\uDED1 Shutting down monitor...'));\n      monitor.stop();\n      await memory.shutdown();\n      process.exit(0);\n    });\n\n    console.log(chalk.green('\u2705 Memory monitoring started!'));\n    console.log(chalk.gray('Real-time metrics will appear below...\\n'));\n  } catch (error) {\n    console.error(chalk.red('\u274C Monitoring startup failed:'), (error as Error).message);\n  }\n}\n\n/**\n * Generate detailed memory report\n */\nasync function generateMemoryReport(): Promise<void> {\n  console.log(chalk.yellow('\uD83D\uDCC4 Generating detailed memory report...\\n'));\n\n  try {\n    // Initialize systems\n    const memory = new Memory('hive-mind-reporter');\n    const db = await DatabaseManager.getInstance();\n    await memory.initialize();\n\n    const monitor = new MemoryMonitor(memory, db);\n\n    // Generate comprehensive report\n    const report = await monitor.generateDetailedReport();\n    const analytics = memory.getAdvancedAnalytics();\n\n    console.log(chalk.green.bold('\uD83D\uDCCA Comprehensive Memory Report\\n'));\n\n    // Executive Summary\n    console.log(chalk.cyan.bold('\uD83C\uDFAF Executive Summary:'));\n    console.log(`   Overall Status: ${getStatusBadge(report.overall.status)}`);\n    console.log(`   Health Score: ${chalk.bold(report.overall.score)}/100`);\n    console.log(`   ${report.overall.summary}\\n`);\n\n    // Key Metrics\n    console.log(chalk.cyan.bold('\uD83D\uDCC8 Key Performance Metrics:'));\n    console.log(`   Cache Hit Rate: ${formatMetric(report.metrics.cacheHitRate, '%', 70)}`);\n    console.log(\n      `   Average Query Time: ${formatMetric(report.metrics.avgQueryTime, 'ms', 50, true)}`,\n    );\n    console.log(\n      `   Memory Utilization: ${formatMetric(report.metrics.memoryUtilization, '%', 80)}`,\n    );\n    console.log(`   Pool Efficiency: ${formatMetric(report.metrics.poolEfficiency, '%', 50)}`);\n    console.log(\n      `   Compression Ratio: ${formatMetric(report.metrics.compressionRatio * 100, '%', 60)}\\n`,\n    );\n\n    // Trends Analysis\n    console.log(chalk.cyan.bold('\uD83D\uDCCA Performance Trends:'));\n    console.log(`   Performance: ${getTrendIndicator(report.trends.performance)}`);\n    console.log(`   Memory Usage: ${getTrendIndicator(report.trends.memoryUsage)}`);\n    console.log(`   Cache Efficiency: ${getTrendIndicator(report.trends.cacheEfficiency)}\\n`);\n\n    // Active Alerts\n    if (report.alerts.length > 0) {\n      console.log(chalk.cyan.bold('\uD83D\uDEA8 Active Alerts:'));\n      report.alerts.forEach((alert) => {\n        const color =\n          alert.level === 'critical' ? 'red' : alert.level === 'warning' ? 'yellow' : 'blue';\n        console.log(`   ${chalk[color]('\u25CF')} ${alert.message}`);\n      });\n      console.log('');\n    }\n\n    // Optimization Suggestions\n    if (report.suggestions.length > 0) {\n      console.log(chalk.cyan.bold('\uD83D\uDCA1 Optimization Suggestions:'));\n      report.suggestions.forEach((suggestion, index) => {\n        const priorityColor =\n          suggestion.priority === 'critical'\n            ? 'red'\n            : suggestion.priority === 'high'\n              ? 'yellow'\n              : suggestion.priority === 'medium'\n                ? 'blue'\n                : 'gray';\n        console.log(`   ${index + 1}. ${chalk[priorityColor].bold(suggestion.title)}`);\n        console.log(`      ${suggestion.description}`);\n        console.log(`      Impact: ${chalk.green(suggestion.estimatedImpact)}`);\n        console.log(`      Effort: ${chalk.blue(suggestion.effort)}\\n`);\n      });\n    }\n\n    // Resource Utilization\n    console.log(chalk.cyan.bold('\uD83D\uDCBE Resource Utilization:'));\n    console.log(`   Cache Memory: ${(analytics.cache.memoryUsage / 1024 / 1024).toFixed(1)} MB`);\n    console.log(`   Cache Entries: ${analytics.cache.size || 0}`);\n    console.log(`   Access Patterns: ${analytics.accessPatterns.total || 0} tracked\\n`);\n\n    // Recommendations\n    console.log(chalk.cyan.bold('\uD83C\uDFAF Immediate Actions Recommended:'));\n    if (report.overall.score < 70) {\n      console.log(`   \u2022 ${chalk.red('Run memory optimization immediately')}`);\n    }\n    if (report.metrics.cacheHitRate < 50) {\n      console.log(`   \u2022 ${chalk.yellow('Increase cache size')}`);\n    }\n    if (report.metrics.avgQueryTime > 100) {\n      console.log(`   \u2022 ${chalk.yellow('Optimize database queries')}`);\n    }\n    if (report.alerts.filter((a) => a.level === 'critical').length > 0) {\n      console.log(`   \u2022 ${chalk.red('Address critical alerts immediately')}`);\n    }\n\n    console.log(chalk.green('\\n\u2705 Report generation completed!'));\n\n    await memory.shutdown();\n  } catch (error) {\n    console.error(chalk.red('\u274C Report generation failed:'), (error as Error).message);\n  }\n}\n\n/**\n * Perform memory cleanup operations\n */\nasync function performMemoryCleanup(): Promise<void> {\n  console.log(chalk.yellow('\uD83E\uDDF9 Performing memory cleanup...\\n'));\n\n  try {\n    const memory = new Memory('hive-mind-cleaner');\n    await memory.initialize();\n\n    console.log(chalk.blue('1. Cleaning expired entries...'));\n    // Cleanup would happen automatically through memory management\n\n    console.log(chalk.blue('2. Compressing old data...'));\n    await memory.compress();\n\n    console.log(chalk.blue('3. Optimizing cache...'));\n    // Cache optimization happens automatically\n\n    console.log(chalk.blue('4. Analyzing patterns...'));\n    const patterns = await memory.learnPatterns();\n\n    console.log(chalk.green(`\u2705 Cleanup completed!`));\n    console.log(`   \u2022 Learned ${patterns.length} patterns`);\n    console.log(`   \u2022 Cache optimized`);\n    console.log(`   \u2022 Memory compressed\\n`);\n\n    await memory.shutdown();\n  } catch (error) {\n    console.error(chalk.red('\u274C Cleanup failed:'), (error as Error).message);\n  }\n}\n\n/**\n * Show memory system overview\n */\nasync function showMemoryOverview(): Promise<void> {\n  console.log(chalk.cyan('Welcome to the Hive Mind Memory Optimization System!\\n'));\n\n  console.log('Available commands:');\n  console.log(`  ${chalk.green('--analyze')}     Analyze current memory performance`);\n  console.log(`  ${chalk.green('--optimize')}    Run comprehensive optimization`);\n  console.log(`  ${chalk.green('--monitor')}     Start real-time monitoring dashboard`);\n  console.log(`  ${chalk.green('--report')}      Generate detailed performance report`);\n  console.log(`  ${chalk.green('--cleanup')}     Perform memory cleanup operations\\n`);\n\n  console.log('Configuration options:');\n  console.log(`  ${chalk.blue('--cache-size')}         Set cache size (default: 10000)`);\n  console.log(\n    `  ${chalk.blue('--cache-memory')}       Set cache memory limit in MB (default: 100)`,\n  );\n  console.log(\n    `  ${chalk.blue('--compression-threshold')} Set compression threshold in bytes (default: 10000)\\n`,\n  );\n\n  console.log(chalk.yellow('\uD83D\uDCA1 Quick start: Run with --analyze to see current performance'));\n}\n\n/**\n * Helper functions\n */\n\nfunction getStatusBadge(status: string): string {\n  const colors: Record<string, string> = {\n    excellent: 'green',\n    good: 'cyan',\n    fair: 'yellow',\n    poor: 'red',\n    critical: 'red',\n  };\n  const color = colors[status] || 'gray';\n  return (chalk as any)[color].bold(status.toUpperCase());\n}\n\nfunction formatMetric(value: number, unit: string, threshold: number, inverse = false): string {\n  const good = inverse ? value <= threshold : value >= threshold;\n  const color = good ? 'green' : value >= threshold * 0.8 ? 'yellow' : 'red';\n  return chalk[color].bold(`${value.toFixed(1)}${unit}`);\n}\n\nfunction getTrendIndicator(trend: string): string {\n  const indicators: Record<string, string> = {\n    improving: chalk.green('\uD83D\uDCC8 Improving'),\n    stable: chalk.blue('\u27A1\uFE0F Stable'),\n    degrading: chalk.red('\uD83D\uDCC9 Degrading'),\n    increasing: chalk.red('\uD83D\uDCC8 Increasing'),\n    decreasing: chalk.green('\uD83D\uDCC9 Decreasing'),\n  };\n  return indicators[trend] || chalk.gray('\u2753 Unknown');\n}\n"],
  "mappings": "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",
  "names": ["chalk"]
}
