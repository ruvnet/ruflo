{"version":3,"sources":["../../../../src/api/routes/analysis.js"],"sourcesContent":["/**\r\n * Analysis & Monitoring API Routes\r\n * Agent 2 - Analysis & Monitoring Tools Developer\r\n *\r\n * Provides backend support for all 13 analysis tools:\r\n * 1. performance_report - Performance metrics and reports\r\n * 2. bottleneck_analyze - Bottleneck detection and analysis\r\n * 3. token_usage - Token consumption tracking\r\n * 4. benchmark_run - Performance benchmarks\r\n * 5. metrics_collect - System metrics collection\r\n * 6. trend_analysis - Trend detection and forecasting\r\n * 7. cost_analysis - Resource cost analysis\r\n * 8. quality_assess - Quality metrics assessment\r\n * 9. error_analysis - Error pattern analysis\r\n * 10. usage_stats - Usage statistics and insights\r\n * 11. health_check - System health monitoring\r\n * 12. load_monitor - Load monitoring and alerts\r\n * 13. capacity_plan - Capacity planning tools\r\n */\r\n\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst os = require('os');\r\nconst { performance } = require('perf_hooks');\r\n\r\n// In-memory storage for metrics (replace with database in production)\r\nlet metricsStore = {\r\n  performance: [],\r\n  tokens: [],\r\n  errors: [],\r\n  health: [],\r\n  load: [],\r\n  costs: [],\r\n};\r\n\r\n// Performance monitoring\r\nlet performanceMetrics = {\r\n  responseTime: [],\r\n  throughput: [],\r\n  errorRate: 0,\r\n  startTime: Date.now(),\r\n  requestCount: 0,\r\n  errorCount: 0,\r\n};\r\n\r\n// Middleware to track request metrics\r\nrouter.use((req, res, next) => {\r\n  const startTime = performance.now();\r\n\r\n  res.on('finish', () => {\r\n    const duration = performance.now() - startTime;\r\n    performanceMetrics.responseTime.push(duration);\r\n    performanceMetrics.requestCount++;\r\n\r\n    if (res.statusCode >= 400) {\r\n      performanceMetrics.errorCount++;\r\n    }\r\n\r\n    // Keep only last 100 measurements\r\n    if (performanceMetrics.responseTime.length > 100) {\r\n      performanceMetrics.responseTime.shift();\r\n    }\r\n\r\n    // Store metrics\r\n    metricsStore.performance.push({\r\n      timestamp: Date.now(),\r\n      responseTime: duration,\r\n      statusCode: res.statusCode,\r\n      method: req.method,\r\n      url: req.url,\r\n    });\r\n\r\n    // Keep only last 1000 metrics\r\n    if (metricsStore.performance.length > 1000) {\r\n      metricsStore.performance.shift();\r\n    }\r\n  });\r\n\r\n  next();\r\n});\r\n\r\n// 1. Performance Report\r\nrouter.get('/performance-report', (req, res) => {\r\n  try {\r\n    const now = Date.now();\r\n    const uptime = now - performanceMetrics.startTime;\r\n    const avgResponseTime =\r\n      performanceMetrics.responseTime.length > 0\r\n        ? performanceMetrics.responseTime.reduce((a, b) => a + b, 0) /\r\n          performanceMetrics.responseTime.length\r\n        : 0;\r\n\r\n    const throughput = performanceMetrics.requestCount / (uptime / 1000 / 60); // requests per minute\r\n    const errorRate =\r\n      performanceMetrics.requestCount > 0\r\n        ? (performanceMetrics.errorCount / performanceMetrics.requestCount) * 100\r\n        : 0;\r\n\r\n    const report = {\r\n      timestamp: now,\r\n      summary: 'System performance analysis completed',\r\n      metrics: {\r\n        averageResponseTime: Math.round(avgResponseTime),\r\n        throughput: Math.round(throughput),\r\n        errorRate: Math.round(errorRate * 100) / 100,\r\n        uptime: formatUptime(uptime),\r\n        totalRequests: performanceMetrics.requestCount,\r\n        totalErrors: performanceMetrics.errorCount,\r\n      },\r\n      recommendations: generatePerformanceRecommendations(avgResponseTime, throughput, errorRate),\r\n      trends: {\r\n        responseTime: performanceMetrics.responseTime.slice(-20),\r\n        throughput: calculateThroughputTrend(),\r\n        errorRate: calculateErrorRateTrend(),\r\n      },\r\n    };\r\n\r\n    res.json(report);\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 2. Bottleneck Analysis\r\nrouter.get('/bottleneck-analyze', (req, res) => {\r\n  try {\r\n    const bottlenecks = analyzeBottlenecks();\r\n    const recommendations = generateBottleneckRecommendations(bottlenecks);\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      bottlenecks,\r\n      recommendations,\r\n      summary: `Found ${bottlenecks.length} potential bottlenecks`,\r\n      impact: calculateBottleneckImpact(bottlenecks),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 3. Token Usage\r\nrouter.get('/token-usage', (req, res) => {\r\n  try {\r\n    const usage = calculateTokenUsage();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      ...usage,\r\n      efficiency: calculateTokenEfficiency(usage),\r\n      trends: getTokenTrends(),\r\n      recommendations: generateTokenRecommendations(usage),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 4. Benchmark Run\r\nrouter.get('/benchmark-run', (req, res) => {\r\n  try {\r\n    const benchmarks = runBenchmarks();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      benchmarks,\r\n      summary: 'Benchmark suite completed',\r\n      score: calculateOverallScore(benchmarks),\r\n      comparisons: generateBenchmarkComparisons(benchmarks),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 5. Metrics Collection\r\nrouter.get('/metrics-collect', (req, res) => {\r\n  try {\r\n    const metrics = collectSystemMetrics();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      metrics,\r\n      summary: 'System metrics collected successfully',\r\n      alerts: generateMetricAlerts(metrics),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 6. Trend Analysis\r\nrouter.get('/trend-analysis', (req, res) => {\r\n  try {\r\n    const trends = analyzeTrends();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      trends,\r\n      predictions: generatePredictions(trends),\r\n      summary: 'Trend analysis completed',\r\n      insights: generateTrendInsights(trends),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 7. Cost Analysis\r\nrouter.get('/cost-analysis', (req, res) => {\r\n  try {\r\n    const costs = analyzeCosts();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      costs,\r\n      summary: 'Cost analysis completed',\r\n      optimization: generateCostOptimizations(costs),\r\n      forecast: generateCostForecast(costs),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 8. Quality Assessment\r\nrouter.get('/quality-assess', (req, res) => {\r\n  try {\r\n    const quality = assessQuality();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      quality,\r\n      summary: 'Quality assessment completed',\r\n      score: calculateQualityScore(quality),\r\n      recommendations: generateQualityRecommendations(quality),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 9. Error Analysis\r\nrouter.get('/error-analysis', (req, res) => {\r\n  try {\r\n    const errors = analyzeErrors();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      errors,\r\n      summary: 'Error analysis completed',\r\n      patterns: identifyErrorPatterns(errors),\r\n      resolution: generateErrorResolutions(errors),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 10. Usage Statistics\r\nrouter.get('/usage-stats', (req, res) => {\r\n  try {\r\n    const stats = calculateUsageStats();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      stats,\r\n      summary: 'Usage statistics generated',\r\n      insights: generateUsageInsights(stats),\r\n      trends: calculateUsageTrends(stats),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 11. Health Check\r\nrouter.get('/health-check', (req, res) => {\r\n  try {\r\n    const health = performHealthCheck();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      health,\r\n      summary: 'System health check completed',\r\n      status: calculateOverallHealth(health),\r\n      alerts: generateHealthAlerts(health),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 12. Load Monitor\r\nrouter.get('/load-monitor', (req, res) => {\r\n  try {\r\n    const load = monitorLoad();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      load,\r\n      summary: 'Load monitoring completed',\r\n      alerts: generateLoadAlerts(load),\r\n      predictions: predictLoadTrends(load),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// 13. Capacity Planning\r\nrouter.get('/capacity-plan', (req, res) => {\r\n  try {\r\n    const capacity = planCapacity();\r\n\r\n    res.json({\r\n      timestamp: Date.now(),\r\n      capacity,\r\n      summary: 'Capacity planning completed',\r\n      recommendations: generateCapacityRecommendations(capacity),\r\n      timeline: generateCapacityTimeline(capacity),\r\n    });\r\n  } catch (error) {\r\n    res.status(500).json({ error: error.message });\r\n  }\r\n});\r\n\r\n// WebSocket endpoint for real-time metrics\r\nrouter.ws('/ws', (ws, req) => {\r\n  console.log('Analysis WebSocket connected');\r\n\r\n  // Send initial metrics\r\n  ws.send(\r\n    JSON.stringify({\r\n      type: 'metrics_update',\r\n      payload: getCurrentMetrics(),\r\n    }),\r\n  );\r\n\r\n  // Set up periodic updates\r\n  const interval = setInterval(() => {\r\n    if (ws.readyState === ws.OPEN) {\r\n      ws.send(\r\n        JSON.stringify({\r\n          type: 'metrics_update',\r\n          payload: getCurrentMetrics(),\r\n        }),\r\n      );\r\n    }\r\n  }, 5000);\r\n\r\n  ws.on('message', (message) => {\r\n    try {\r\n      const data = JSON.parse(message);\r\n      handleWebSocketMessage(ws, data);\r\n    } catch (error) {\r\n      console.error('WebSocket message error:', error);\r\n    }\r\n  });\r\n\r\n  ws.on('close', () => {\r\n    clearInterval(interval);\r\n    console.log('Analysis WebSocket disconnected');\r\n  });\r\n});\r\n\r\n// Helper Functions\r\n\r\nfunction formatUptime(milliseconds) {\r\n  const seconds = Math.floor(milliseconds / 1000);\r\n  const minutes = Math.floor(seconds / 60);\r\n  const hours = Math.floor(minutes / 60);\r\n  const days = Math.floor(hours / 24);\r\n\r\n  if (days > 0) return `${days}d ${hours % 24}h`;\r\n  if (hours > 0) return `${hours}h ${minutes % 60}m`;\r\n  if (minutes > 0) return `${minutes}m ${seconds % 60}s`;\r\n  return `${seconds}s`;\r\n}\r\n\r\nfunction generatePerformanceRecommendations(avgResponseTime, throughput, errorRate) {\r\n  const recommendations = [];\r\n\r\n  if (avgResponseTime > 1000) {\r\n    recommendations.push('Consider implementing caching to reduce response times');\r\n    recommendations.push('Optimize database queries and API calls');\r\n  }\r\n\r\n  if (throughput < 100) {\r\n    recommendations.push('Consider scaling up server resources');\r\n    recommendations.push('Implement load balancing for better distribution');\r\n  }\r\n\r\n  if (errorRate > 5) {\r\n    recommendations.push('Investigate and fix recurring errors');\r\n    recommendations.push('Implement better error handling and monitoring');\r\n  }\r\n\r\n  if (recommendations.length === 0) {\r\n    recommendations.push('System performance is within acceptable ranges');\r\n  }\r\n\r\n  return recommendations;\r\n}\r\n\r\nfunction analyzeBottlenecks() {\r\n  const bottlenecks = [];\r\n  const cpuUsage = os.loadavg()[0];\r\n  const memoryUsage = ((os.totalmem() - os.freemem()) / os.totalmem()) * 100;\r\n\r\n  if (cpuUsage > 0.8) {\r\n    bottlenecks.push({\r\n      component: 'CPU',\r\n      severity: 'high',\r\n      impact: 'Response time +25%',\r\n      value: cpuUsage,\r\n      threshold: 0.8,\r\n    });\r\n  }\r\n\r\n  if (memoryUsage > 85) {\r\n    bottlenecks.push({\r\n      component: 'Memory',\r\n      severity: 'medium',\r\n      impact: 'Performance degradation',\r\n      value: memoryUsage,\r\n      threshold: 85,\r\n    });\r\n  }\r\n\r\n  const avgResponseTime =\r\n    performanceMetrics.responseTime.length > 0\r\n      ? performanceMetrics.responseTime.reduce((a, b) => a + b, 0) /\r\n        performanceMetrics.responseTime.length\r\n      : 0;\r\n\r\n  if (avgResponseTime > 500) {\r\n    bottlenecks.push({\r\n      component: 'API Response',\r\n      severity: 'medium',\r\n      impact: 'User experience degradation',\r\n      value: avgResponseTime,\r\n      threshold: 500,\r\n    });\r\n  }\r\n\r\n  return bottlenecks;\r\n}\r\n\r\nfunction generateBottleneckRecommendations(bottlenecks) {\r\n  const recommendations = [];\r\n\r\n  bottlenecks.forEach((bottleneck) => {\r\n    switch (bottleneck.component) {\r\n      case 'CPU':\r\n        recommendations.push('Consider upgrading CPU or optimizing CPU-intensive operations');\r\n        break;\r\n      case 'Memory':\r\n        recommendations.push('Implement memory optimization or increase available RAM');\r\n        break;\r\n      case 'API Response':\r\n        recommendations.push('Optimize API endpoints and implement caching');\r\n        break;\r\n    }\r\n  });\r\n\r\n  return recommendations;\r\n}\r\n\r\nfunction calculateTokenUsage() {\r\n  // Mock token usage calculation\r\n  const baseUsage = {\r\n    totalTokens: Math.floor(Math.random() * 1000000) + 500000,\r\n    inputTokens: Math.floor(Math.random() * 600000) + 300000,\r\n    outputTokens: Math.floor(Math.random() * 400000) + 200000,\r\n    cachedTokens: Math.floor(Math.random() * 100000) + 50000,\r\n  };\r\n\r\n  baseUsage.cost = baseUsage.totalTokens * 0.0001;\r\n  return baseUsage;\r\n}\r\n\r\nfunction calculateTokenEfficiency(usage) {\r\n  const cacheHitRate = (usage.cachedTokens / usage.totalTokens) * 100;\r\n  const inputOutputRatio = usage.outputTokens / usage.inputTokens;\r\n\r\n  return {\r\n    cacheHitRate: Math.round(cacheHitRate * 100) / 100,\r\n    inputOutputRatio: Math.round(inputOutputRatio * 100) / 100,\r\n    costPerToken: Math.round((usage.cost / usage.totalTokens) * 10000) / 10000,\r\n  };\r\n}\r\n\r\nfunction runBenchmarks() {\r\n  return {\r\n    responseTime: {\r\n      name: 'Response Time',\r\n      score: Math.floor(Math.random() * 40) + 60,\r\n      unit: 'ms',\r\n      baseline: 100,\r\n    },\r\n    throughput: {\r\n      name: 'Throughput',\r\n      score: Math.floor(Math.random() * 30) + 70,\r\n      unit: 'req/s',\r\n      baseline: 1000,\r\n    },\r\n    errorRate: {\r\n      name: 'Error Rate',\r\n      score: Math.floor(Math.random() * 20) + 80,\r\n      unit: '%',\r\n      baseline: 1,\r\n    },\r\n    availability: {\r\n      name: 'Availability',\r\n      score: Math.floor(Math.random() * 5) + 95,\r\n      unit: '%',\r\n      baseline: 99.9,\r\n    },\r\n  };\r\n}\r\n\r\nfunction collectSystemMetrics() {\r\n  return {\r\n    system: {\r\n      platform: os.platform(),\r\n      architecture: os.arch(),\r\n      uptime: os.uptime(),\r\n      loadAverage: os.loadavg(),\r\n    },\r\n    memory: {\r\n      total: os.totalmem(),\r\n      free: os.freemem(),\r\n      usage: ((os.totalmem() - os.freemem()) / os.totalmem()) * 100,\r\n    },\r\n    cpu: {\r\n      count: os.cpus().length,\r\n      model: os.cpus()[0].model,\r\n      usage: os.loadavg()[0],\r\n    },\r\n    network: {\r\n      interfaces: Object.keys(os.networkInterfaces()).length,\r\n      hostname: os.hostname(),\r\n    },\r\n  };\r\n}\r\n\r\nfunction performHealthCheck() {\r\n  const memoryUsage = ((os.totalmem() - os.freemem()) / os.totalmem()) * 100;\r\n  const cpuUsage = os.loadavg()[0] * 100;\r\n\r\n  return {\r\n    cpu: Math.max(0, 100 - cpuUsage),\r\n    memory: Math.max(0, 100 - memoryUsage),\r\n    disk: Math.floor(Math.random() * 20) + 80,\r\n    network: Math.floor(Math.random() * 10) + 90,\r\n    api: Math.floor(Math.random() * 15) + 85,\r\n    database: Math.floor(Math.random() * 10) + 90,\r\n  };\r\n}\r\n\r\nfunction monitorLoad() {\r\n  const loadAvg = os.loadavg();\r\n  return {\r\n    oneMin: loadAvg[0],\r\n    fiveMin: loadAvg[1],\r\n    fifteenMin: loadAvg[2],\r\n    thirtyMin: Math.random() * 2,\r\n    oneHour: Math.random() * 2,\r\n    twentyFourHour: Math.random() * 2,\r\n    current: loadAvg[0],\r\n    peak: Math.max(...loadAvg),\r\n    average: loadAvg.reduce((a, b) => a + b, 0) / loadAvg.length,\r\n  };\r\n}\r\n\r\nfunction getCurrentMetrics() {\r\n  const avgResponseTime =\r\n    performanceMetrics.responseTime.length > 0\r\n      ? performanceMetrics.responseTime.reduce((a, b) => a + b, 0) /\r\n        performanceMetrics.responseTime.length\r\n      : 0;\r\n\r\n  const throughput =\r\n    performanceMetrics.requestCount / ((Date.now() - performanceMetrics.startTime) / 1000);\r\n  const errorRate =\r\n    performanceMetrics.requestCount > 0\r\n      ? (performanceMetrics.errorCount / performanceMetrics.requestCount) * 100\r\n      : 0;\r\n\r\n  const uptime = Date.now() - performanceMetrics.startTime;\r\n  const tokenUsage = calculateTokenUsage();\r\n  const health = performHealthCheck();\r\n  const load = monitorLoad();\r\n\r\n  return {\r\n    performance: {\r\n      responseTime: Math.round(avgResponseTime),\r\n      throughput: Math.round(throughput),\r\n      errorRate: Math.round(errorRate * 100) / 100,\r\n      uptime: formatUptime(uptime),\r\n    },\r\n    tokens: tokenUsage,\r\n    health,\r\n    load,\r\n  };\r\n}\r\n\r\nfunction handleWebSocketMessage(ws, data) {\r\n  switch (data.type) {\r\n    case 'request_metrics':\r\n      ws.send(\r\n        JSON.stringify({\r\n          type: 'metrics_update',\r\n          payload: getCurrentMetrics(),\r\n        }),\r\n      );\r\n      break;\r\n    default:\r\n      console.log('Unknown WebSocket message type:', data.type);\r\n  }\r\n}\r\n\r\n// Additional helper functions for other tools\r\nfunction calculateThroughputTrend() {\r\n  // Mock throughput trend calculation\r\n  return Array.from({ length: 20 }, (_, i) => Math.random() * 1000 + 500);\r\n}\r\n\r\nfunction calculateErrorRateTrend() {\r\n  // Mock error rate trend calculation\r\n  return Array.from({ length: 20 }, (_, i) => Math.random() * 5);\r\n}\r\n\r\nfunction calculateBottleneckImpact(bottlenecks) {\r\n  const severityWeights = { low: 1, medium: 2, high: 3 };\r\n  const totalImpact = bottlenecks.reduce((sum, b) => sum + severityWeights[b.severity], 0);\r\n  return {\r\n    score: totalImpact,\r\n    level: totalImpact > 6 ? 'critical' : totalImpact > 3 ? 'medium' : 'low',\r\n  };\r\n}\r\n\r\nfunction getTokenTrends() {\r\n  return {\r\n    daily: Array.from({ length: 7 }, () => Math.random() * 100000 + 50000),\r\n    hourly: Array.from({ length: 24 }, () => Math.random() * 10000 + 5000),\r\n  };\r\n}\r\n\r\nfunction generateTokenRecommendations(usage) {\r\n  const recommendations = [];\r\n  const efficiency = calculateTokenEfficiency(usage);\r\n\r\n  if (efficiency.cacheHitRate < 20) {\r\n    recommendations.push('Implement better caching strategies to improve token efficiency');\r\n  }\r\n\r\n  if (efficiency.inputOutputRatio > 2) {\r\n    recommendations.push('Consider optimizing output generation to reduce token consumption');\r\n  }\r\n\r\n  if (usage.cost > 100) {\r\n    recommendations.push('Monitor token usage closely to control costs');\r\n  }\r\n\r\n  return recommendations;\r\n}\r\n\r\nfunction calculateOverallScore(benchmarks) {\r\n  const scores = Object.values(benchmarks).map((b) => b.score);\r\n  return Math.round(scores.reduce((a, b) => a + b, 0) / scores.length);\r\n}\r\n\r\nfunction generateBenchmarkComparisons(benchmarks) {\r\n  return Object.entries(benchmarks).map(([key, value]) => ({\r\n    name: value.name,\r\n    current: value.score,\r\n    baseline: value.baseline,\r\n    improvement: (((value.score - value.baseline) / value.baseline) * 100).toFixed(1),\r\n  }));\r\n}\r\n\r\nfunction generateMetricAlerts(metrics) {\r\n  const alerts = [];\r\n\r\n  if (metrics.memory.usage > 85) {\r\n    alerts.push({\r\n      type: 'warning',\r\n      message: 'High memory usage detected',\r\n      value: metrics.memory.usage,\r\n    });\r\n  }\r\n\r\n  if (metrics.cpu.usage > 0.8) {\r\n    alerts.push({\r\n      type: 'critical',\r\n      message: 'High CPU usage detected',\r\n      value: metrics.cpu.usage,\r\n    });\r\n  }\r\n\r\n  return alerts;\r\n}\r\n\r\nfunction analyzeTrends() {\r\n  return {\r\n    performance: {\r\n      trend: 'improving',\r\n      change: '+5.2%',\r\n      prediction: 'stable',\r\n    },\r\n    usage: {\r\n      trend: 'increasing',\r\n      change: '+12.3%',\r\n      prediction: 'continued growth',\r\n    },\r\n    errors: {\r\n      trend: 'decreasing',\r\n      change: '-8.1%',\r\n      prediction: 'stable',\r\n    },\r\n  };\r\n}\r\n\r\nfunction generatePredictions(trends) {\r\n  return {\r\n    nextWeek: 'Performance expected to remain stable',\r\n    nextMonth: 'Usage likely to increase by 15-20%',\r\n    nextQuarter: 'Consider scaling resources to handle growth',\r\n  };\r\n}\r\n\r\nfunction generateTrendInsights(trends) {\r\n  return [\r\n    'System performance has improved by 5.2% this week',\r\n    'Usage patterns show steady growth indicating system adoption',\r\n    'Error rates are decreasing, suggesting improved stability',\r\n  ];\r\n}\r\n\r\nfunction analyzeCosts() {\r\n  return {\r\n    current: {\r\n      compute: 125.5,\r\n      storage: 45.2,\r\n      network: 23.1,\r\n      tokens: 89.4,\r\n    },\r\n    previous: {\r\n      compute: 118.3,\r\n      storage: 42.15,\r\n      network: 21.85,\r\n      tokens: 76.25,\r\n    },\r\n    change: {\r\n      compute: '+6.1%',\r\n      storage: '+7.2%',\r\n      network: '+5.7%',\r\n      tokens: '+17.2%',\r\n    },\r\n  };\r\n}\r\n\r\nfunction generateCostOptimizations(costs) {\r\n  return [\r\n    'Optimize token usage to reduce costs by ~15%',\r\n    'Implement better caching to reduce compute costs',\r\n    'Archive old data to reduce storage costs',\r\n  ];\r\n}\r\n\r\nfunction generateCostForecast(costs) {\r\n  const total = Object.values(costs.current).reduce((a, b) => a + b, 0);\r\n  return {\r\n    nextMonth: total * 1.1,\r\n    nextQuarter: total * 1.35,\r\n    nextYear: total * 1.8,\r\n  };\r\n}\r\n\r\nfunction assessQuality() {\r\n  return {\r\n    performance: 85,\r\n    reliability: 92,\r\n    security: 88,\r\n    maintainability: 79,\r\n    scalability: 83,\r\n    documentation: 76,\r\n  };\r\n}\r\n\r\nfunction calculateQualityScore(quality) {\r\n  const scores = Object.values(quality);\r\n  return Math.round(scores.reduce((a, b) => a + b, 0) / scores.length);\r\n}\r\n\r\nfunction generateQualityRecommendations(quality) {\r\n  const recommendations = [];\r\n\r\n  Object.entries(quality).forEach(([key, value]) => {\r\n    if (value < 80) {\r\n      recommendations.push(`Improve ${key} metrics (current: ${value}%)`);\r\n    }\r\n  });\r\n\r\n  return recommendations;\r\n}\r\n\r\nfunction analyzeErrors() {\r\n  return {\r\n    total: 24,\r\n    types: {\r\n      '4xx': 15,\r\n      '5xx': 9,\r\n    },\r\n    common: [\r\n      { code: 404, count: 8, message: 'Resource not found' },\r\n      { code: 500, count: 5, message: 'Internal server error' },\r\n      { code: 401, count: 4, message: 'Unauthorized access' },\r\n    ],\r\n  };\r\n}\r\n\r\nfunction identifyErrorPatterns(errors) {\r\n  return [\r\n    'Most errors occur during peak hours (12-2 PM)',\r\n    '404 errors primarily from deprecated API endpoints',\r\n    '500 errors correlate with database connection issues',\r\n  ];\r\n}\r\n\r\nfunction generateErrorResolutions(errors) {\r\n  return [\r\n    'Implement proper redirects for deprecated endpoints',\r\n    'Add database connection pooling and retry logic',\r\n    'Enhance authentication error handling',\r\n  ];\r\n}\r\n\r\nfunction calculateUsageStats() {\r\n  return {\r\n    totalUsers: 1250,\r\n    activeUsers: 340,\r\n    totalSessions: 2890,\r\n    averageSessionDuration: 15.5,\r\n    topFeatures: [\r\n      { name: 'Analysis Tools', usage: 85 },\r\n      { name: 'Monitoring', usage: 78 },\r\n      { name: 'Reports', usage: 62 },\r\n    ],\r\n  };\r\n}\r\n\r\nfunction generateUsageInsights(stats) {\r\n  return [\r\n    `${stats.activeUsers} active users out of ${stats.totalUsers} total users`,\r\n    `Average session duration is ${stats.averageSessionDuration} minutes`,\r\n    'Analysis Tools is the most popular feature',\r\n  ];\r\n}\r\n\r\nfunction calculateUsageTrends(stats) {\r\n  return {\r\n    users: Array.from({ length: 30 }, () => Math.random() * 50 + stats.activeUsers - 25),\r\n    sessions: Array.from({ length: 30 }, () => Math.random() * 100 + stats.totalSessions - 50),\r\n  };\r\n}\r\n\r\nfunction calculateOverallHealth(health) {\r\n  const scores = Object.values(health);\r\n  const average = scores.reduce((a, b) => a + b, 0) / scores.length;\r\n\r\n  if (average >= 90) return 'excellent';\r\n  if (average >= 70) return 'good';\r\n  if (average >= 50) return 'warning';\r\n  return 'critical';\r\n}\r\n\r\nfunction generateHealthAlerts(health) {\r\n  const alerts = [];\r\n\r\n  Object.entries(health).forEach(([component, score]) => {\r\n    if (score < 70) {\r\n      alerts.push({\r\n        component,\r\n        score,\r\n        severity: score < 50 ? 'critical' : 'warning',\r\n        message: `${component} health score is ${score}%`,\r\n      });\r\n    }\r\n  });\r\n\r\n  return alerts;\r\n}\r\n\r\nfunction generateLoadAlerts(load) {\r\n  const alerts = [];\r\n\r\n  if (load.current > 2.0) {\r\n    alerts.push({\r\n      type: 'critical',\r\n      message: 'High system load detected',\r\n      value: load.current,\r\n    });\r\n  } else if (load.current > 1.5) {\r\n    alerts.push({\r\n      type: 'warning',\r\n      message: 'Elevated system load',\r\n      value: load.current,\r\n    });\r\n  }\r\n\r\n  return alerts;\r\n}\r\n\r\nfunction predictLoadTrends(load) {\r\n  return {\r\n    nextHour: load.current * (0.9 + Math.random() * 0.2),\r\n    nextDay: load.current * (0.8 + Math.random() * 0.4),\r\n    nextWeek: load.current * (0.7 + Math.random() * 0.6),\r\n  };\r\n}\r\n\r\nfunction planCapacity() {\r\n  return {\r\n    current: {\r\n      cpu: 65,\r\n      memory: 72,\r\n      storage: 58,\r\n      network: 45,\r\n    },\r\n    projected: {\r\n      cpu: 78,\r\n      memory: 85,\r\n      storage: 72,\r\n      network: 58,\r\n    },\r\n    timeToLimit: {\r\n      cpu: '3 months',\r\n      memory: '2 months',\r\n      storage: '6 months',\r\n      network: '8 months',\r\n    },\r\n  };\r\n}\r\n\r\nfunction generateCapacityRecommendations(capacity) {\r\n  const recommendations = [];\r\n\r\n  Object.entries(capacity.projected).forEach(([resource, usage]) => {\r\n    if (usage > 80) {\r\n      recommendations.push(`Plan to scale ${resource} resources within next 2 months`);\r\n    } else if (usage > 70) {\r\n      recommendations.push(`Monitor ${resource} usage closely`);\r\n    }\r\n  });\r\n\r\n  return recommendations;\r\n}\r\n\r\nfunction generateCapacityTimeline(capacity) {\r\n  return {\r\n    immediate: 'Monitor current usage patterns',\r\n    '1month': 'Prepare for memory scaling',\r\n    '2months': 'Implement memory upgrades',\r\n    '3months': 'Plan CPU scaling',\r\n    '6months': 'Review storage requirements',\r\n  };\r\n}\r\n\r\nmodule.exports = router;\r\n"],"names":["express","require","router","Router","os","performance","metricsStore","tokens","errors","health","load","costs","performanceMetrics","responseTime","throughput","errorRate","startTime","Date","now","requestCount","errorCount","use","req","res","next","on","duration","push","statusCode","length","shift","timestamp","method","url","get","uptime","avgResponseTime","reduce","a","b","report","summary","metrics","averageResponseTime","Math","round","formatUptime","totalRequests","totalErrors","recommendations","generatePerformanceRecommendations","trends","slice","calculateThroughputTrend","calculateErrorRateTrend","json","error","status","message","bottlenecks","analyzeBottlenecks","generateBottleneckRecommendations","impact","calculateBottleneckImpact","usage","calculateTokenUsage","efficiency","calculateTokenEfficiency","getTokenTrends","generateTokenRecommendations","benchmarks","runBenchmarks","score","calculateOverallScore","comparisons","generateBenchmarkComparisons","collectSystemMetrics","alerts","generateMetricAlerts","analyzeTrends","predictions","generatePredictions","insights","generateTrendInsights","analyzeCosts","optimization","generateCostOptimizations","forecast","generateCostForecast","quality","assessQuality","calculateQualityScore","generateQualityRecommendations","analyzeErrors","patterns","identifyErrorPatterns","resolution","generateErrorResolutions","stats","calculateUsageStats","generateUsageInsights","calculateUsageTrends","performHealthCheck","calculateOverallHealth","generateHealthAlerts","monitorLoad","generateLoadAlerts","predictLoadTrends","capacity","planCapacity","generateCapacityRecommendations","timeline","generateCapacityTimeline","ws","console","log","send","JSON","stringify","type","payload","getCurrentMetrics","interval","setInterval","readyState","OPEN","data","parse","handleWebSocketMessage","clearInterval","milliseconds","seconds","floor","minutes","hours","days","cpuUsage","loadavg","memoryUsage","totalmem","freemem","component","severity","value","threshold","forEach","bottleneck","baseUsage","totalTokens","random","inputTokens","outputTokens","cachedTokens","cost","cacheHitRate","inputOutputRatio","costPerToken","name","unit","baseline","availability","system","platform","architecture","arch","loadAverage","memory","total","free","cpu","count","cpus","model","network","interfaces","Object","keys","networkInterfaces","hostname","max","disk","api","database","loadAvg","oneMin","fiveMin","fifteenMin","thirtyMin","oneHour","twentyFourHour","current","peak","average","tokenUsage","Array","from","_","i","severityWeights","low","medium","high","totalImpact","sum","level","daily","hourly","scores","values","map","entries","key","improvement","toFixed","trend","change","prediction","nextWeek","nextMonth","nextQuarter","compute","storage","previous","nextYear","reliability","security","maintainability","scalability","documentation","types","common","code","totalUsers","activeUsers","totalSessions","averageSessionDuration","topFeatures","users","sessions","nextHour","nextDay","projected","timeToLimit","resource","immediate","module","exports"],"mappings":"AAoBA,MAAMA,UAAUC,QAAQ;AACxB,MAAMC,SAASF,QAAQG,MAAM;AAC7B,MAAMC,KAAKH,QAAQ;AACnB,MAAM,EAAEI,WAAW,EAAE,GAAGJ,QAAQ;AAGhC,IAAIK,eAAe;IACjBD,aAAa,EAAE;IACfE,QAAQ,EAAE;IACVC,QAAQ,EAAE;IACVC,QAAQ,EAAE;IACVC,MAAM,EAAE;IACRC,OAAO,EAAE;AACX;AAGA,IAAIC,qBAAqB;IACvBC,cAAc,EAAE;IAChBC,YAAY,EAAE;IACdC,WAAW;IACXC,WAAWC,KAAKC,GAAG;IACnBC,cAAc;IACdC,YAAY;AACd;AAGAlB,OAAOmB,GAAG,CAAC,CAACC,KAAKC,KAAKC;IACpB,MAAMR,YAAYX,YAAYa,GAAG;IAEjCK,IAAIE,EAAE,CAAC,UAAU;QACf,MAAMC,WAAWrB,YAAYa,GAAG,KAAKF;QACrCJ,mBAAmBC,YAAY,CAACc,IAAI,CAACD;QACrCd,mBAAmBO,YAAY;QAE/B,IAAII,IAAIK,UAAU,IAAI,KAAK;YACzBhB,mBAAmBQ,UAAU;QAC/B;QAGA,IAAIR,mBAAmBC,YAAY,CAACgB,MAAM,GAAG,KAAK;YAChDjB,mBAAmBC,YAAY,CAACiB,KAAK;QACvC;QAGAxB,aAAaD,WAAW,CAACsB,IAAI,CAAC;YAC5BI,WAAWd,KAAKC,GAAG;YACnBL,cAAca;YACdE,YAAYL,IAAIK,UAAU;YAC1BI,QAAQV,IAAIU,MAAM;YAClBC,KAAKX,IAAIW,GAAG;QACd;QAGA,IAAI3B,aAAaD,WAAW,CAACwB,MAAM,GAAG,MAAM;YAC1CvB,aAAaD,WAAW,CAACyB,KAAK;QAChC;IACF;IAEAN;AACF;AAGAtB,OAAOgC,GAAG,CAAC,uBAAuB,CAACZ,KAAKC;IACtC,IAAI;QACF,MAAML,MAAMD,KAAKC,GAAG;QACpB,MAAMiB,SAASjB,MAAMN,mBAAmBI,SAAS;QACjD,MAAMoB,kBACJxB,mBAAmBC,YAAY,CAACgB,MAAM,GAAG,IACrCjB,mBAAmBC,YAAY,CAACwB,MAAM,CAAC,CAACC,GAAGC,IAAMD,IAAIC,GAAG,KACxD3B,mBAAmBC,YAAY,CAACgB,MAAM,GACtC;QAEN,MAAMf,aAAaF,mBAAmBO,YAAY,GAAIgB,CAAAA,SAAS,OAAO,EAAC;QACvE,MAAMpB,YACJH,mBAAmBO,YAAY,GAAG,IAC9B,AAACP,mBAAmBQ,UAAU,GAAGR,mBAAmBO,YAAY,GAAI,MACpE;QAEN,MAAMqB,SAAS;YACbT,WAAWb;YACXuB,SAAS;YACTC,SAAS;gBACPC,qBAAqBC,KAAKC,KAAK,CAACT;gBAChCtB,YAAY8B,KAAKC,KAAK,CAAC/B;gBACvBC,WAAW6B,KAAKC,KAAK,CAAC9B,YAAY,OAAO;gBACzCoB,QAAQW,aAAaX;gBACrBY,eAAenC,mBAAmBO,YAAY;gBAC9C6B,aAAapC,mBAAmBQ,UAAU;YAC5C;YACA6B,iBAAiBC,mCAAmCd,iBAAiBtB,YAAYC;YACjFoC,QAAQ;gBACNtC,cAAcD,mBAAmBC,YAAY,CAACuC,KAAK,CAAC,CAAC;gBACrDtC,YAAYuC;gBACZtC,WAAWuC;YACb;QACF;QAEA/B,IAAIgC,IAAI,CAACf;IACX,EAAE,OAAOgB,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,uBAAuB,CAACZ,KAAKC;IACtC,IAAI;QACF,MAAMoC,cAAcC;QACpB,MAAMX,kBAAkBY,kCAAkCF;QAE1DpC,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnByC;YACAV;YACAR,SAAS,CAAC,MAAM,EAAEkB,YAAY9B,MAAM,CAAC,sBAAsB,CAAC;YAC5DiC,QAAQC,0BAA0BJ;QACpC;IACF,EAAE,OAAOH,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,gBAAgB,CAACZ,KAAKC;IAC/B,IAAI;QACF,MAAMyC,QAAQC;QAEd1C,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnB,GAAG8C,KAAK;YACRE,YAAYC,yBAAyBH;YACrCb,QAAQiB;YACRnB,iBAAiBoB,6BAA6BL;QAChD;IACF,EAAE,OAAOR,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,kBAAkB,CAACZ,KAAKC;IACjC,IAAI;QACF,MAAM+C,aAAaC;QAEnBhD,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBoD;YACA7B,SAAS;YACT+B,OAAOC,sBAAsBH;YAC7BI,aAAaC,6BAA6BL;QAC5C;IACF,EAAE,OAAOd,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,oBAAoB,CAACZ,KAAKC;IACnC,IAAI;QACF,MAAMmB,UAAUkC;QAEhBrD,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBwB;YACAD,SAAS;YACToC,QAAQC,qBAAqBpC;QAC/B;IACF,EAAE,OAAOc,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,mBAAmB,CAACZ,KAAKC;IAClC,IAAI;QACF,MAAM4B,SAAS4B;QAEfxD,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBiC;YACA6B,aAAaC,oBAAoB9B;YACjCV,SAAS;YACTyC,UAAUC,sBAAsBhC;QAClC;IACF,EAAE,OAAOK,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,kBAAkB,CAACZ,KAAKC;IACjC,IAAI;QACF,MAAMZ,QAAQyE;QAEd7D,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBP;YACA8B,SAAS;YACT4C,cAAcC,0BAA0B3E;YACxC4E,UAAUC,qBAAqB7E;QACjC;IACF,EAAE,OAAO6C,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,mBAAmB,CAACZ,KAAKC;IAClC,IAAI;QACF,MAAMkE,UAAUC;QAEhBnE,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBuE;YACAhD,SAAS;YACT+B,OAAOmB,sBAAsBF;YAC7BxC,iBAAiB2C,+BAA+BH;QAClD;IACF,EAAE,OAAOjC,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,mBAAmB,CAACZ,KAAKC;IAClC,IAAI;QACF,MAAMf,SAASqF;QAEftE,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBV;YACAiC,SAAS;YACTqD,UAAUC,sBAAsBvF;YAChCwF,YAAYC,yBAAyBzF;QACvC;IACF,EAAE,OAAOgD,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,gBAAgB,CAACZ,KAAKC;IAC/B,IAAI;QACF,MAAM2E,QAAQC;QAEd5E,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBgF;YACAzD,SAAS;YACTyC,UAAUkB,sBAAsBF;YAChC/C,QAAQkD,qBAAqBH;QAC/B;IACF,EAAE,OAAO1C,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,iBAAiB,CAACZ,KAAKC;IAChC,IAAI;QACF,MAAMd,SAAS6F;QAEf/E,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBT;YACAgC,SAAS;YACTgB,QAAQ8C,uBAAuB9F;YAC/BoE,QAAQ2B,qBAAqB/F;QAC/B;IACF,EAAE,OAAO+C,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,iBAAiB,CAACZ,KAAKC;IAChC,IAAI;QACF,MAAMb,OAAO+F;QAEblF,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnBR;YACA+B,SAAS;YACToC,QAAQ6B,mBAAmBhG;YAC3BsE,aAAa2B,kBAAkBjG;QACjC;IACF,EAAE,OAAO8C,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAOgC,GAAG,CAAC,kBAAkB,CAACZ,KAAKC;IACjC,IAAI;QACF,MAAMqF,WAAWC;QAEjBtF,IAAIgC,IAAI,CAAC;YACPxB,WAAWd,KAAKC,GAAG;YACnB0F;YACAnE,SAAS;YACTQ,iBAAiB6D,gCAAgCF;YACjDG,UAAUC,yBAAyBJ;QACrC;IACF,EAAE,OAAOpD,OAAO;QACdjC,IAAIkC,MAAM,CAAC,KAAKF,IAAI,CAAC;YAAEC,OAAOA,MAAME,OAAO;QAAC;IAC9C;AACF;AAGAxD,OAAO+G,EAAE,CAAC,OAAO,CAACA,IAAI3F;IACpB4F,QAAQC,GAAG,CAAC;IAGZF,GAAGG,IAAI,CACLC,KAAKC,SAAS,CAAC;QACbC,MAAM;QACNC,SAASC;IACX;IAIF,MAAMC,WAAWC,YAAY;QAC3B,IAAIV,GAAGW,UAAU,KAAKX,GAAGY,IAAI,EAAE;YAC7BZ,GAAGG,IAAI,CACLC,KAAKC,SAAS,CAAC;gBACbC,MAAM;gBACNC,SAASC;YACX;QAEJ;IACF,GAAG;IAEHR,GAAGxF,EAAE,CAAC,WAAW,CAACiC;QAChB,IAAI;YACF,MAAMoE,OAAOT,KAAKU,KAAK,CAACrE;YACxBsE,uBAAuBf,IAAIa;QAC7B,EAAE,OAAOtE,OAAO;YACd0D,QAAQ1D,KAAK,CAAC,4BAA4BA;QAC5C;IACF;IAEAyD,GAAGxF,EAAE,CAAC,SAAS;QACbwG,cAAcP;QACdR,QAAQC,GAAG,CAAC;IACd;AACF;AAIA,SAASrE,aAAaoF,YAAY;IAChC,MAAMC,UAAUvF,KAAKwF,KAAK,CAACF,eAAe;IAC1C,MAAMG,UAAUzF,KAAKwF,KAAK,CAACD,UAAU;IACrC,MAAMG,QAAQ1F,KAAKwF,KAAK,CAACC,UAAU;IACnC,MAAME,OAAO3F,KAAKwF,KAAK,CAACE,QAAQ;IAEhC,IAAIC,OAAO,GAAG,OAAO,GAAGA,KAAK,EAAE,EAAED,QAAQ,GAAG,CAAC,CAAC;IAC9C,IAAIA,QAAQ,GAAG,OAAO,GAAGA,MAAM,EAAE,EAAED,UAAU,GAAG,CAAC,CAAC;IAClD,IAAIA,UAAU,GAAG,OAAO,GAAGA,QAAQ,EAAE,EAAEF,UAAU,GAAG,CAAC,CAAC;IACtD,OAAO,GAAGA,QAAQ,CAAC,CAAC;AACtB;AAEA,SAASjF,mCAAmCd,eAAe,EAAEtB,UAAU,EAAEC,SAAS;IAChF,MAAMkC,kBAAkB,EAAE;IAE1B,IAAIb,kBAAkB,MAAM;QAC1Ba,gBAAgBtB,IAAI,CAAC;QACrBsB,gBAAgBtB,IAAI,CAAC;IACvB;IAEA,IAAIb,aAAa,KAAK;QACpBmC,gBAAgBtB,IAAI,CAAC;QACrBsB,gBAAgBtB,IAAI,CAAC;IACvB;IAEA,IAAIZ,YAAY,GAAG;QACjBkC,gBAAgBtB,IAAI,CAAC;QACrBsB,gBAAgBtB,IAAI,CAAC;IACvB;IAEA,IAAIsB,gBAAgBpB,MAAM,KAAK,GAAG;QAChCoB,gBAAgBtB,IAAI,CAAC;IACvB;IAEA,OAAOsB;AACT;AAEA,SAASW;IACP,MAAMD,cAAc,EAAE;IACtB,MAAM6E,WAAWpI,GAAGqI,OAAO,EAAE,CAAC,EAAE;IAChC,MAAMC,cAAc,AAAEtI,CAAAA,GAAGuI,QAAQ,KAAKvI,GAAGwI,OAAO,EAAC,IAAKxI,GAAGuI,QAAQ,KAAM;IAEvE,IAAIH,WAAW,KAAK;QAClB7E,YAAYhC,IAAI,CAAC;YACfkH,WAAW;YACXC,UAAU;YACVhF,QAAQ;YACRiF,OAAOP;YACPQ,WAAW;QACb;IACF;IAEA,IAAIN,cAAc,IAAI;QACpB/E,YAAYhC,IAAI,CAAC;YACfkH,WAAW;YACXC,UAAU;YACVhF,QAAQ;YACRiF,OAAOL;YACPM,WAAW;QACb;IACF;IAEA,MAAM5G,kBACJxB,mBAAmBC,YAAY,CAACgB,MAAM,GAAG,IACrCjB,mBAAmBC,YAAY,CAACwB,MAAM,CAAC,CAACC,GAAGC,IAAMD,IAAIC,GAAG,KACxD3B,mBAAmBC,YAAY,CAACgB,MAAM,GACtC;IAEN,IAAIO,kBAAkB,KAAK;QACzBuB,YAAYhC,IAAI,CAAC;YACfkH,WAAW;YACXC,UAAU;YACVhF,QAAQ;YACRiF,OAAO3G;YACP4G,WAAW;QACb;IACF;IAEA,OAAOrF;AACT;AAEA,SAASE,kCAAkCF,WAAW;IACpD,MAAMV,kBAAkB,EAAE;IAE1BU,YAAYsF,OAAO,CAAC,CAACC;QACnB,OAAQA,WAAWL,SAAS;YAC1B,KAAK;gBACH5F,gBAAgBtB,IAAI,CAAC;gBACrB;YACF,KAAK;gBACHsB,gBAAgBtB,IAAI,CAAC;gBACrB;YACF,KAAK;gBACHsB,gBAAgBtB,IAAI,CAAC;gBACrB;QACJ;IACF;IAEA,OAAOsB;AACT;AAEA,SAASgB;IAEP,MAAMkF,YAAY;QAChBC,aAAaxG,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,WAAW;QACnDC,aAAa1G,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,UAAU;QAClDE,cAAc3G,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,UAAU;QACnDG,cAAc5G,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,UAAU;IACrD;IAEAF,UAAUM,IAAI,GAAGN,UAAUC,WAAW,GAAG;IACzC,OAAOD;AACT;AAEA,SAAShF,yBAAyBH,KAAK;IACrC,MAAM0F,eAAe,AAAC1F,MAAMwF,YAAY,GAAGxF,MAAMoF,WAAW,GAAI;IAChE,MAAMO,mBAAmB3F,MAAMuF,YAAY,GAAGvF,MAAMsF,WAAW;IAE/D,OAAO;QACLI,cAAc9G,KAAKC,KAAK,CAAC6G,eAAe,OAAO;QAC/CC,kBAAkB/G,KAAKC,KAAK,CAAC8G,mBAAmB,OAAO;QACvDC,cAAchH,KAAKC,KAAK,CAAC,AAACmB,MAAMyF,IAAI,GAAGzF,MAAMoF,WAAW,GAAI,SAAS;IACvE;AACF;AAEA,SAAS7E;IACP,OAAO;QACL1D,cAAc;YACZgJ,MAAM;YACNrF,OAAO5B,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,MAAM;YACxCS,MAAM;YACNC,UAAU;QACZ;QACAjJ,YAAY;YACV+I,MAAM;YACNrF,OAAO5B,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,MAAM;YACxCS,MAAM;YACNC,UAAU;QACZ;QACAhJ,WAAW;YACT8I,MAAM;YACNrF,OAAO5B,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,MAAM;YACxCS,MAAM;YACNC,UAAU;QACZ;QACAC,cAAc;YACZH,MAAM;YACNrF,OAAO5B,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,KAAK;YACvCS,MAAM;YACNC,UAAU;QACZ;IACF;AACF;AAEA,SAASnF;IACP,OAAO;QACLqF,QAAQ;YACNC,UAAU9J,GAAG8J,QAAQ;YACrBC,cAAc/J,GAAGgK,IAAI;YACrBjI,QAAQ/B,GAAG+B,MAAM;YACjBkI,aAAajK,GAAGqI,OAAO;QACzB;QACA6B,QAAQ;YACNC,OAAOnK,GAAGuI,QAAQ;YAClB6B,MAAMpK,GAAGwI,OAAO;YAChB5E,OAAO,AAAE5D,CAAAA,GAAGuI,QAAQ,KAAKvI,GAAGwI,OAAO,EAAC,IAAKxI,GAAGuI,QAAQ,KAAM;QAC5D;QACA8B,KAAK;YACHC,OAAOtK,GAAGuK,IAAI,GAAG9I,MAAM;YACvB+I,OAAOxK,GAAGuK,IAAI,EAAE,CAAC,EAAE,CAACC,KAAK;YACzB5G,OAAO5D,GAAGqI,OAAO,EAAE,CAAC,EAAE;QACxB;QACAoC,SAAS;YACPC,YAAYC,OAAOC,IAAI,CAAC5K,GAAG6K,iBAAiB,IAAIpJ,MAAM;YACtDqJ,UAAU9K,GAAG8K,QAAQ;QACvB;IACF;AACF;AAEA,SAAS5E;IACP,MAAMoC,cAAc,AAAEtI,CAAAA,GAAGuI,QAAQ,KAAKvI,GAAGwI,OAAO,EAAC,IAAKxI,GAAGuI,QAAQ,KAAM;IACvE,MAAMH,WAAWpI,GAAGqI,OAAO,EAAE,CAAC,EAAE,GAAG;IAEnC,OAAO;QACLgC,KAAK7H,KAAKuI,GAAG,CAAC,GAAG,MAAM3C;QACvB8B,QAAQ1H,KAAKuI,GAAG,CAAC,GAAG,MAAMzC;QAC1B0C,MAAMxI,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,MAAM;QACvCwB,SAASjI,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,MAAM;QAC1CgC,KAAKzI,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,MAAM;QACtCiC,UAAU1I,KAAKwF,KAAK,CAACxF,KAAKyG,MAAM,KAAK,MAAM;IAC7C;AACF;AAEA,SAAS5C;IACP,MAAM8E,UAAUnL,GAAGqI,OAAO;IAC1B,OAAO;QACL+C,QAAQD,OAAO,CAAC,EAAE;QAClBE,SAASF,OAAO,CAAC,EAAE;QACnBG,YAAYH,OAAO,CAAC,EAAE;QACtBI,WAAW/I,KAAKyG,MAAM,KAAK;QAC3BuC,SAAShJ,KAAKyG,MAAM,KAAK;QACzBwC,gBAAgBjJ,KAAKyG,MAAM,KAAK;QAChCyC,SAASP,OAAO,CAAC,EAAE;QACnBQ,MAAMnJ,KAAKuI,GAAG,IAAII;QAClBS,SAAST,QAAQlJ,MAAM,CAAC,CAACC,GAAGC,IAAMD,IAAIC,GAAG,KAAKgJ,QAAQ1J,MAAM;IAC9D;AACF;AAEA,SAAS4F;IACP,MAAMrF,kBACJxB,mBAAmBC,YAAY,CAACgB,MAAM,GAAG,IACrCjB,mBAAmBC,YAAY,CAACwB,MAAM,CAAC,CAACC,GAAGC,IAAMD,IAAIC,GAAG,KACxD3B,mBAAmBC,YAAY,CAACgB,MAAM,GACtC;IAEN,MAAMf,aACJF,mBAAmBO,YAAY,GAAI,CAAA,AAACF,CAAAA,KAAKC,GAAG,KAAKN,mBAAmBI,SAAS,AAAD,IAAK,IAAG;IACtF,MAAMD,YACJH,mBAAmBO,YAAY,GAAG,IAC9B,AAACP,mBAAmBQ,UAAU,GAAGR,mBAAmBO,YAAY,GAAI,MACpE;IAEN,MAAMgB,SAASlB,KAAKC,GAAG,KAAKN,mBAAmBI,SAAS;IACxD,MAAMiL,aAAahI;IACnB,MAAMxD,SAAS6F;IACf,MAAM5F,OAAO+F;IAEb,OAAO;QACLpG,aAAa;YACXQ,cAAc+B,KAAKC,KAAK,CAACT;YACzBtB,YAAY8B,KAAKC,KAAK,CAAC/B;YACvBC,WAAW6B,KAAKC,KAAK,CAAC9B,YAAY,OAAO;YACzCoB,QAAQW,aAAaX;QACvB;QACA5B,QAAQ0L;QACRxL;QACAC;IACF;AACF;AAEA,SAASsH,uBAAuBf,EAAE,EAAEa,IAAI;IACtC,OAAQA,KAAKP,IAAI;QACf,KAAK;YACHN,GAAGG,IAAI,CACLC,KAAKC,SAAS,CAAC;gBACbC,MAAM;gBACNC,SAASC;YACX;YAEF;QACF;YACEP,QAAQC,GAAG,CAAC,mCAAmCW,KAAKP,IAAI;IAC5D;AACF;AAGA,SAASlE;IAEP,OAAO6I,MAAMC,IAAI,CAAC;QAAEtK,QAAQ;IAAG,GAAG,CAACuK,GAAGC,IAAMzJ,KAAKyG,MAAM,KAAK,OAAO;AACrE;AAEA,SAAS/F;IAEP,OAAO4I,MAAMC,IAAI,CAAC;QAAEtK,QAAQ;IAAG,GAAG,CAACuK,GAAGC,IAAMzJ,KAAKyG,MAAM,KAAK;AAC9D;AAEA,SAAStF,0BAA0BJ,WAAW;IAC5C,MAAM2I,kBAAkB;QAAEC,KAAK;QAAGC,QAAQ;QAAGC,MAAM;IAAE;IACrD,MAAMC,cAAc/I,YAAYtB,MAAM,CAAC,CAACsK,KAAKpK,IAAMoK,MAAML,eAAe,CAAC/J,EAAEuG,QAAQ,CAAC,EAAE;IACtF,OAAO;QACLtE,OAAOkI;QACPE,OAAOF,cAAc,IAAI,aAAaA,cAAc,IAAI,WAAW;IACrE;AACF;AAEA,SAAStI;IACP,OAAO;QACLyI,OAAOX,MAAMC,IAAI,CAAC;YAAEtK,QAAQ;QAAE,GAAG,IAAMe,KAAKyG,MAAM,KAAK,SAAS;QAChEyD,QAAQZ,MAAMC,IAAI,CAAC;YAAEtK,QAAQ;QAAG,GAAG,IAAMe,KAAKyG,MAAM,KAAK,QAAQ;IACnE;AACF;AAEA,SAAShF,6BAA6BL,KAAK;IACzC,MAAMf,kBAAkB,EAAE;IAC1B,MAAMiB,aAAaC,yBAAyBH;IAE5C,IAAIE,WAAWwF,YAAY,GAAG,IAAI;QAChCzG,gBAAgBtB,IAAI,CAAC;IACvB;IAEA,IAAIuC,WAAWyF,gBAAgB,GAAG,GAAG;QACnC1G,gBAAgBtB,IAAI,CAAC;IACvB;IAEA,IAAIqC,MAAMyF,IAAI,GAAG,KAAK;QACpBxG,gBAAgBtB,IAAI,CAAC;IACvB;IAEA,OAAOsB;AACT;AAEA,SAASwB,sBAAsBH,UAAU;IACvC,MAAMyI,SAAShC,OAAOiC,MAAM,CAAC1I,YAAY2I,GAAG,CAAC,CAAC1K,IAAMA,EAAEiC,KAAK;IAC3D,OAAO5B,KAAKC,KAAK,CAACkK,OAAO1K,MAAM,CAAC,CAACC,GAAGC,IAAMD,IAAIC,GAAG,KAAKwK,OAAOlL,MAAM;AACrE;AAEA,SAAS8C,6BAA6BL,UAAU;IAC9C,OAAOyG,OAAOmC,OAAO,CAAC5I,YAAY2I,GAAG,CAAC,CAAC,CAACE,KAAKpE,MAAM,GAAM,CAAA;YACvDc,MAAMd,MAAMc,IAAI;YAChBiC,SAAS/C,MAAMvE,KAAK;YACpBuF,UAAUhB,MAAMgB,QAAQ;YACxBqD,aAAa,AAAC,CAAA,AAAErE,CAAAA,MAAMvE,KAAK,GAAGuE,MAAMgB,QAAQ,AAAD,IAAKhB,MAAMgB,QAAQ,GAAI,GAAE,EAAGsD,OAAO,CAAC;QACjF,CAAA;AACF;AAEA,SAASvI,qBAAqBpC,OAAO;IACnC,MAAMmC,SAAS,EAAE;IAEjB,IAAInC,QAAQ4H,MAAM,CAACtG,KAAK,GAAG,IAAI;QAC7Ba,OAAOlD,IAAI,CAAC;YACV4F,MAAM;YACN7D,SAAS;YACTqF,OAAOrG,QAAQ4H,MAAM,CAACtG,KAAK;QAC7B;IACF;IAEA,IAAItB,QAAQ+H,GAAG,CAACzG,KAAK,GAAG,KAAK;QAC3Ba,OAAOlD,IAAI,CAAC;YACV4F,MAAM;YACN7D,SAAS;YACTqF,OAAOrG,QAAQ+H,GAAG,CAACzG,KAAK;QAC1B;IACF;IAEA,OAAOa;AACT;AAEA,SAASE;IACP,OAAO;QACL1E,aAAa;YACXiN,OAAO;YACPC,QAAQ;YACRC,YAAY;QACd;QACAxJ,OAAO;YACLsJ,OAAO;YACPC,QAAQ;YACRC,YAAY;QACd;QACAhN,QAAQ;YACN8M,OAAO;YACPC,QAAQ;YACRC,YAAY;QACd;IACF;AACF;AAEA,SAASvI,oBAAoB9B,MAAM;IACjC,OAAO;QACLsK,UAAU;QACVC,WAAW;QACXC,aAAa;IACf;AACF;AAEA,SAASxI,sBAAsBhC,MAAM;IACnC,OAAO;QACL;QACA;QACA;KACD;AACH;AAEA,SAASiC;IACP,OAAO;QACL0G,SAAS;YACP8B,SAAS;YACTC,SAAS;YACThD,SAAS;YACTtK,QAAQ;QACV;QACAuN,UAAU;YACRF,SAAS;YACTC,SAAS;YACThD,SAAS;YACTtK,QAAQ;QACV;QACAgN,QAAQ;YACNK,SAAS;YACTC,SAAS;YACThD,SAAS;YACTtK,QAAQ;QACV;IACF;AACF;AAEA,SAAS+E,0BAA0B3E,KAAK;IACtC,OAAO;QACL;QACA;QACA;KACD;AACH;AAEA,SAAS6E,qBAAqB7E,KAAK;IACjC,MAAM4J,QAAQQ,OAAOiC,MAAM,CAACrM,MAAMmL,OAAO,EAAEzJ,MAAM,CAAC,CAACC,GAAGC,IAAMD,IAAIC,GAAG;IACnE,OAAO;QACLmL,WAAWnD,QAAQ;QACnBoD,aAAapD,QAAQ;QACrBwD,UAAUxD,QAAQ;IACpB;AACF;AAEA,SAAS7E;IACP,OAAO;QACLrF,aAAa;QACb2N,aAAa;QACbC,UAAU;QACVC,iBAAiB;QACjBC,aAAa;QACbC,eAAe;IACjB;AACF;AAEA,SAASzI,sBAAsBF,OAAO;IACpC,MAAMsH,SAAShC,OAAOiC,MAAM,CAACvH;IAC7B,OAAO7C,KAAKC,KAAK,CAACkK,OAAO1K,MAAM,CAAC,CAACC,GAAGC,IAAMD,IAAIC,GAAG,KAAKwK,OAAOlL,MAAM;AACrE;AAEA,SAAS+D,+BAA+BH,OAAO;IAC7C,MAAMxC,kBAAkB,EAAE;IAE1B8H,OAAOmC,OAAO,CAACzH,SAASwD,OAAO,CAAC,CAAC,CAACkE,KAAKpE,MAAM;QAC3C,IAAIA,QAAQ,IAAI;YACd9F,gBAAgBtB,IAAI,CAAC,CAAC,QAAQ,EAAEwL,IAAI,mBAAmB,EAAEpE,MAAM,EAAE,CAAC;QACpE;IACF;IAEA,OAAO9F;AACT;AAEA,SAAS4C;IACP,OAAO;QACL0E,OAAO;QACP8D,OAAO;YACL,OAAO;YACP,OAAO;QACT;QACAC,QAAQ;YACN;gBAAEC,MAAM;gBAAK7D,OAAO;gBAAGhH,SAAS;YAAqB;YACrD;gBAAE6K,MAAM;gBAAK7D,OAAO;gBAAGhH,SAAS;YAAwB;YACxD;gBAAE6K,MAAM;gBAAK7D,OAAO;gBAAGhH,SAAS;YAAsB;SACvD;IACH;AACF;AAEA,SAASqC,sBAAsBvF,MAAM;IACnC,OAAO;QACL;QACA;QACA;KACD;AACH;AAEA,SAASyF,yBAAyBzF,MAAM;IACtC,OAAO;QACL;QACA;QACA;KACD;AACH;AAEA,SAAS2F;IACP,OAAO;QACLqI,YAAY;QACZC,aAAa;QACbC,eAAe;QACfC,wBAAwB;QACxBC,aAAa;YACX;gBAAE/E,MAAM;gBAAkB7F,OAAO;YAAG;YACpC;gBAAE6F,MAAM;gBAAc7F,OAAO;YAAG;YAChC;gBAAE6F,MAAM;gBAAW7F,OAAO;YAAG;SAC9B;IACH;AACF;AAEA,SAASoC,sBAAsBF,KAAK;IAClC,OAAO;QACL,GAAGA,MAAMuI,WAAW,CAAC,qBAAqB,EAAEvI,MAAMsI,UAAU,CAAC,YAAY,CAAC;QAC1E,CAAC,4BAA4B,EAAEtI,MAAMyI,sBAAsB,CAAC,QAAQ,CAAC;QACrE;KACD;AACH;AAEA,SAAStI,qBAAqBH,KAAK;IACjC,OAAO;QACL2I,OAAO3C,MAAMC,IAAI,CAAC;YAAEtK,QAAQ;QAAG,GAAG,IAAMe,KAAKyG,MAAM,KAAK,KAAKnD,MAAMuI,WAAW,GAAG;QACjFK,UAAU5C,MAAMC,IAAI,CAAC;YAAEtK,QAAQ;QAAG,GAAG,IAAMe,KAAKyG,MAAM,KAAK,MAAMnD,MAAMwI,aAAa,GAAG;IACzF;AACF;AAEA,SAASnI,uBAAuB9F,MAAM;IACpC,MAAMsM,SAAShC,OAAOiC,MAAM,CAACvM;IAC7B,MAAMuL,UAAUe,OAAO1K,MAAM,CAAC,CAACC,GAAGC,IAAMD,IAAIC,GAAG,KAAKwK,OAAOlL,MAAM;IAEjE,IAAImK,WAAW,IAAI,OAAO;IAC1B,IAAIA,WAAW,IAAI,OAAO;IAC1B,IAAIA,WAAW,IAAI,OAAO;IAC1B,OAAO;AACT;AAEA,SAASxF,qBAAqB/F,MAAM;IAClC,MAAMoE,SAAS,EAAE;IAEjBkG,OAAOmC,OAAO,CAACzM,QAAQwI,OAAO,CAAC,CAAC,CAACJ,WAAWrE,MAAM;QAChD,IAAIA,QAAQ,IAAI;YACdK,OAAOlD,IAAI,CAAC;gBACVkH;gBACArE;gBACAsE,UAAUtE,QAAQ,KAAK,aAAa;gBACpCd,SAAS,GAAGmF,UAAU,iBAAiB,EAAErE,MAAM,CAAC,CAAC;YACnD;QACF;IACF;IAEA,OAAOK;AACT;AAEA,SAAS6B,mBAAmBhG,IAAI;IAC9B,MAAMmE,SAAS,EAAE;IAEjB,IAAInE,KAAKoL,OAAO,GAAG,KAAK;QACtBjH,OAAOlD,IAAI,CAAC;YACV4F,MAAM;YACN7D,SAAS;YACTqF,OAAOrI,KAAKoL,OAAO;QACrB;IACF,OAAO,IAAIpL,KAAKoL,OAAO,GAAG,KAAK;QAC7BjH,OAAOlD,IAAI,CAAC;YACV4F,MAAM;YACN7D,SAAS;YACTqF,OAAOrI,KAAKoL,OAAO;QACrB;IACF;IAEA,OAAOjH;AACT;AAEA,SAAS8B,kBAAkBjG,IAAI;IAC7B,OAAO;QACLqO,UAAUrO,KAAKoL,OAAO,GAAI,CAAA,MAAMlJ,KAAKyG,MAAM,KAAK,GAAE;QAClD2F,SAAStO,KAAKoL,OAAO,GAAI,CAAA,MAAMlJ,KAAKyG,MAAM,KAAK,GAAE;QACjDoE,UAAU/M,KAAKoL,OAAO,GAAI,CAAA,MAAMlJ,KAAKyG,MAAM,KAAK,GAAE;IACpD;AACF;AAEA,SAASxC;IACP,OAAO;QACLiF,SAAS;YACPrB,KAAK;YACLH,QAAQ;YACRuD,SAAS;YACThD,SAAS;QACX;QACAoE,WAAW;YACTxE,KAAK;YACLH,QAAQ;YACRuD,SAAS;YACThD,SAAS;QACX;QACAqE,aAAa;YACXzE,KAAK;YACLH,QAAQ;YACRuD,SAAS;YACThD,SAAS;QACX;IACF;AACF;AAEA,SAAS/D,gCAAgCF,QAAQ;IAC/C,MAAM3D,kBAAkB,EAAE;IAE1B8H,OAAOmC,OAAO,CAACtG,SAASqI,SAAS,EAAEhG,OAAO,CAAC,CAAC,CAACkG,UAAUnL,MAAM;QAC3D,IAAIA,QAAQ,IAAI;YACdf,gBAAgBtB,IAAI,CAAC,CAAC,cAAc,EAAEwN,SAAS,+BAA+B,CAAC;QACjF,OAAO,IAAInL,QAAQ,IAAI;YACrBf,gBAAgBtB,IAAI,CAAC,CAAC,QAAQ,EAAEwN,SAAS,cAAc,CAAC;QAC1D;IACF;IAEA,OAAOlM;AACT;AAEA,SAAS+D,yBAAyBJ,QAAQ;IACxC,OAAO;QACLwI,WAAW;QACX,UAAU;QACV,WAAW;QACX,WAAW;QACX,WAAW;IACb;AACF;AAEAC,OAAOC,OAAO,GAAGpP"}