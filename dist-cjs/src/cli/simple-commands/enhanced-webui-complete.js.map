{"version":3,"sources":["../../../../src/cli/simple-commands/enhanced-webui-complete.js"],"sourcesContent":["/**\r\n * Enhanced Web UI Complete - Full Integration\r\n * Combines all MCP tools with enhanced UI views and real-time updates\r\n * Provides access to all 87 Claude-Flow MCP tools through a comprehensive interface\r\n */\r\n\r\nimport { printSuccess, printError, printWarning, printInfo } from '../utils.js';\r\nimport { compat } from '../runtime-detector.js';\r\nimport SwarmWebUIIntegration from './swarm-webui-integration.js';\r\nimport MCPIntegrationLayer from './mcp-integration-layer.js';\r\nimport ToolExecutionFramework from './tool-execution-framework.js';\r\nimport { EnhancedUIViews, ENHANCED_VIEWS } from './enhanced-ui-views.js';\r\nimport RealtimeUpdateSystem from './realtime-update-system.js';\r\n\r\n// Enhanced view modes with all tool categories\r\nconst ALL_VIEWS = {\r\n  ...ENHANCED_VIEWS,\r\n  // Add any additional views if needed\r\n};\r\n\r\nexport class EnhancedWebUIComplete {\r\n  constructor() {\r\n    this.processes = new Map();\r\n    this.running = true;\r\n    this.selectedIndex = 0;\r\n    this.currentView = ALL_VIEWS.PROCESSES;\r\n    this.agents = [];\r\n    this.tasks = [];\r\n    this.memoryStats = {\r\n      totalEntries: 0,\r\n      totalSize: 0,\r\n      namespaces: [],\r\n    };\r\n    this.logs = [];\r\n    this.systemStats = {\r\n      uptime: 0,\r\n      totalTasks: 0,\r\n      completedTasks: 0,\r\n      activeAgents: 0,\r\n      memoryUsage: 0,\r\n      cpuUsage: 0,\r\n    };\r\n\r\n    // Enhanced components\r\n    this.mcpIntegration = null;\r\n    this.toolFramework = null;\r\n    this.enhancedViews = null;\r\n    this.realtimeUpdates = null;\r\n\r\n    // Input handling\r\n    this.inputBuffer = '';\r\n    this.commandHistory = [];\r\n    this.historyIndex = -1;\r\n\r\n    // Colors for consistent styling\r\n    this.colors = {\r\n      cyan: (text) => `\\x1b[36m${text}\\x1b[0m`,\r\n      gray: (text) => `\\x1b[90m${text}\\x1b[0m`,\r\n      white: (text) => `\\x1b[37m${text}\\x1b[0m`,\r\n      yellow: (text) => `\\x1b[33m${text}\\x1b[0m`,\r\n      green: (text) => `\\x1b[32m${text}\\x1b[0m`,\r\n      red: (text) => `\\x1b[31m${text}\\x1b[0m`,\r\n      blue: (text) => `\\x1b[34m${text}\\x1b[0m`,\r\n      magenta: (text) => `\\x1b[35m${text}\\x1b[0m`,\r\n      bold: (text) => `\\x1b[1m${text}\\x1b[0m`,\r\n      dim: (text) => `\\x1b[2m${text}\\x1b[0m`,\r\n    };\r\n\r\n    this.initializeEnhancedUI();\r\n  }\r\n\r\n  /**\r\n   * Initialize all enhanced UI components\r\n   */\r\n  async initializeEnhancedUI() {\r\n    try {\r\n      // Initialize original swarm integration\r\n      this.swarmIntegration = new SwarmWebUIIntegration(this);\r\n\r\n      // Initialize MCP integration layer\r\n      this.mcpIntegration = new MCPIntegrationLayer(this);\r\n\r\n      // Initialize tool execution framework\r\n      this.toolFramework = new ToolExecutionFramework(this);\r\n\r\n      // Initialize enhanced UI views\r\n      this.enhancedViews = new EnhancedUIViews(this);\r\n\r\n      // Initialize real-time update system\r\n      this.realtimeUpdates = new RealtimeUpdateSystem(this);\r\n\r\n      // Initialize default processes\r\n      this.initializeProcesses();\r\n\r\n      // Initialize mock data\r\n      await this.initializeSystemData();\r\n\r\n      // Start system monitoring\r\n      this.startSystemMonitoring();\r\n\r\n      this.addLog('success', 'ðŸš€ Enhanced Web UI fully initialized with all 87 MCP tools');\r\n    } catch (error) {\r\n      this.addLog('error', `Failed to initialize enhanced UI: ${error.message}`);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize system processes\r\n   */\r\n  initializeProcesses() {\r\n    const PROCESSES = [\r\n      { id: 'event-bus', name: 'Event Bus', description: 'Central event distribution system' },\r\n      { id: 'orchestrator', name: 'Orchestrator', description: 'Main coordination engine' },\r\n      { id: 'memory-manager', name: 'Memory Manager', description: 'Persistent memory system' },\r\n      { id: 'terminal-pool', name: 'Terminal Pool', description: 'Terminal session management' },\r\n      { id: 'mcp-server', name: 'MCP Server', description: 'Model Context Protocol server' },\r\n      { id: 'coordinator', name: 'Coordinator', description: 'Task coordination service' },\r\n      { id: 'neural-engine', name: 'Neural Engine', description: 'Neural network processing' },\r\n      { id: 'analysis-service', name: 'Analysis Service', description: 'Performance analysis' },\r\n      { id: 'workflow-engine', name: 'Workflow Engine', description: 'Automation workflows' },\r\n      { id: 'github-connector', name: 'GitHub Connector', description: 'GitHub integration' },\r\n      { id: 'daa-controller', name: 'DAA Controller', description: 'Dynamic agent architecture' },\r\n    ];\r\n\r\n    PROCESSES.forEach((p) => {\r\n      this.processes.set(p.id, {\r\n        ...p,\r\n        status: 'running', // Start most services as running\r\n        pid: Math.floor(Math.random() * 50000) + 1000,\r\n        uptime: Math.floor(Math.random() * 86400), // Random uptime up to 24h\r\n        cpu: Math.random() * 5,\r\n        memory: Math.random() * 100,\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initialize system data\r\n   */\r\n  async initializeSystemData() {\r\n    // Initialize swarm\r\n    await this.swarmIntegration.initializeSwarm('hierarchical', 8);\r\n\r\n    // Initialize memory stats\r\n    this.memoryStats = {\r\n      totalEntries: 156,\r\n      totalSize: '2.3 MB',\r\n      namespaces: [\r\n        { name: 'neural', entries: 42, size: '856 KB' },\r\n        { name: 'swarm', entries: 35, size: '645 KB' },\r\n        { name: 'analysis', entries: 28, size: '423 KB' },\r\n        { name: 'workflow', entries: 24, size: '298 KB' },\r\n        { name: 'github', entries: 15, size: '156 KB' },\r\n        { name: 'system', entries: 12, size: '89 KB' },\r\n      ],\r\n    };\r\n\r\n    // Initialize logs\r\n    this.logs = [\r\n      {\r\n        time: new Date(),\r\n        level: 'success',\r\n        message: 'ðŸ§  Neural engine initialized with 27 models',\r\n      },\r\n      {\r\n        time: new Date(),\r\n        level: 'success',\r\n        message: 'ðŸ Swarm orchestration active with hierarchical topology',\r\n      },\r\n      {\r\n        time: new Date(),\r\n        level: 'info',\r\n        message: 'ðŸ“Š Analysis service monitoring 13 performance metrics',\r\n      },\r\n      {\r\n        time: new Date(),\r\n        level: 'success',\r\n        message: 'ðŸ”„ Workflow engine loaded 11 automation tools',\r\n      },\r\n      {\r\n        time: new Date(),\r\n        level: 'info',\r\n        message: 'ðŸ™ GitHub connector established with 8 integration tools',\r\n      },\r\n      {\r\n        time: new Date(),\r\n        level: 'success',\r\n        message: 'ðŸ¤– DAA controller managing 8 dynamic agent tools',\r\n      },\r\n      {\r\n        time: new Date(),\r\n        level: 'success',\r\n        message: 'ðŸ’¾ Memory system active with 12 persistence tools',\r\n      },\r\n      {\r\n        time: new Date(),\r\n        level: 'success',\r\n        message: 'ðŸ› ï¸ System utilities loaded 8 management tools',\r\n      },\r\n    ];\r\n\r\n    // Start uptime counter\r\n    setInterval(() => {\r\n      this.systemStats.uptime++;\r\n      // Update process uptimes\r\n      this.processes.forEach((process) => {\r\n        if (process.status === 'running') {\r\n          process.uptime++;\r\n        }\r\n      });\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n   * Start system monitoring\r\n   */\r\n  startSystemMonitoring() {\r\n    setInterval(() => {\r\n      // Update system stats\r\n      this.systemStats.cpuUsage = Math.max(\r\n        0,\r\n        this.systemStats.cpuUsage + (Math.random() - 0.5) * 2,\r\n      );\r\n      this.systemStats.memoryUsage = Math.max(\r\n        0,\r\n        this.systemStats.memoryUsage + (Math.random() - 0.5) * 3,\r\n      );\r\n\r\n      // Update process stats\r\n      this.processes.forEach((process) => {\r\n        if (process.status === 'running') {\r\n          process.cpu = Math.max(0, process.cpu + (Math.random() - 0.5) * 1);\r\n          process.memory = Math.max(0, process.memory + (Math.random() - 0.5) * 5);\r\n        }\r\n      });\r\n\r\n      // Emit performance metrics for real-time updates\r\n      if (this.realtimeUpdates) {\r\n        this.realtimeUpdates.emit('system_stats_update', {\r\n          cpuUsage: this.systemStats.cpuUsage,\r\n          memoryUsage: this.systemStats.memoryUsage,\r\n          processCount: this.processes.size,\r\n        });\r\n      }\r\n    }, 5000);\r\n  }\r\n\r\n  /**\r\n   * Start the enhanced UI\r\n   */\r\n  async start() {\r\n    // Clear screen\r\n    console.clear();\r\n\r\n    // Show enhanced welcome\r\n    printSuccess('ðŸ§  Claude-Flow Enhanced Web UI v2.0.0');\r\n    printInfo('ðŸ”§ Comprehensive MCP Tool Integration - 87 Tools Available');\r\n    console.log('â”€'.repeat(80));\r\n    console.log();\r\n\r\n    // Show tool categories summary\r\n    this.showToolCategoriesSummary();\r\n\r\n    // Initial render\r\n    this.render();\r\n\r\n    // Setup input handling\r\n    this.setupInputHandling();\r\n\r\n    // Main UI loop\r\n    while (this.running) {\r\n      await this.handleInput();\r\n      if (this.running) {\r\n        this.render();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Show tool categories summary at startup\r\n   */\r\n  showToolCategoriesSummary() {\r\n    const categories = [\r\n      { name: 'Swarm Coordination', count: 12, icon: 'ðŸ' },\r\n      { name: 'Neural Networks', count: 15, icon: 'ðŸ§ ' },\r\n      { name: 'Memory & Persistence', count: 12, icon: 'ðŸ’¾' },\r\n      { name: 'Analysis & Monitoring', count: 13, icon: 'ðŸ“Š' },\r\n      { name: 'Workflow & Automation', count: 11, icon: 'ðŸ”„' },\r\n      { name: 'GitHub Integration', count: 8, icon: 'ðŸ™' },\r\n      { name: 'Dynamic Agents (DAA)', count: 8, icon: 'ðŸ¤–' },\r\n      { name: 'System & Utilities', count: 8, icon: 'ðŸ› ï¸' },\r\n    ];\r\n\r\n    console.log(this.colors.cyan('ðŸ“‚ Available Tool Categories:'));\r\n    categories.forEach((cat) => {\r\n      console.log(\r\n        `  ${cat.icon} ${this.colors.white(cat.name)}: ${this.colors.yellow(cat.count)} tools`,\r\n      );\r\n    });\r\n    console.log();\r\n    console.log(this.colors.green(`Total: ${this.colors.bold('87')} MCP tools ready for use`));\r\n    console.log();\r\n  }\r\n\r\n  /**\r\n   * Setup input handling for enhanced features\r\n   */\r\n  setupInputHandling() {\r\n    // Enable raw input mode for better key handling\r\n    if (process.stdin.setRawMode) {\r\n      process.stdin.setRawMode(true);\r\n    }\r\n    process.stdin.resume();\r\n  }\r\n\r\n  /**\r\n   * Enhanced render method\r\n   */\r\n  render() {\r\n    // Clear screen and move cursor to top\r\n    console.log('\\x1b[2J\\x1b[H');\r\n\r\n    // Header with enhanced navigation\r\n    this.renderEnhancedHeader();\r\n\r\n    // Main content based on current view\r\n    switch (this.currentView) {\r\n      case ALL_VIEWS.PROCESSES:\r\n        this.renderProcessView();\r\n        break;\r\n      case ALL_VIEWS.STATUS:\r\n        this.renderStatusView();\r\n        break;\r\n      case ALL_VIEWS.ORCHESTRATION:\r\n        this.renderOrchestrationView();\r\n        break;\r\n      case ALL_VIEWS.MEMORY:\r\n        this.renderMemoryView();\r\n        break;\r\n      case ALL_VIEWS.LOGS:\r\n        this.renderLogsView();\r\n        break;\r\n      case ALL_VIEWS.NEURAL:\r\n        this.enhancedViews.renderNeuralView();\r\n        break;\r\n      case ALL_VIEWS.ANALYSIS:\r\n        this.enhancedViews.renderAnalysisView();\r\n        break;\r\n      case ALL_VIEWS.WORKFLOW:\r\n        this.enhancedViews.renderWorkflowView();\r\n        break;\r\n      case ALL_VIEWS.GITHUB:\r\n        this.enhancedViews.renderGitHubView();\r\n        break;\r\n      case ALL_VIEWS.DAA:\r\n        this.enhancedViews.renderDAAView();\r\n        break;\r\n      case ALL_VIEWS.SYSTEM:\r\n        this.enhancedViews.renderSystemView();\r\n        break;\r\n      case ALL_VIEWS.TOOLS:\r\n        this.enhancedViews.renderToolsView();\r\n        break;\r\n      case ALL_VIEWS.HELP:\r\n        this.renderEnhancedHelpView();\r\n        break;\r\n    }\r\n\r\n    // Enhanced footer with more controls\r\n    this.renderEnhancedFooter();\r\n  }\r\n\r\n  /**\r\n   * Render enhanced header with all navigation options\r\n   */\r\n  renderEnhancedHeader() {\r\n    console.log(this.colors.cyan(this.colors.bold('ðŸ§  Claude-Flow Enhanced Web UI v2.0.0')));\r\n    console.log(this.colors.gray('â”€'.repeat(80)));\r\n\r\n    // Main navigation tabs (row 1)\r\n    const mainTabs = [\r\n      { key: '1', view: ALL_VIEWS.PROCESSES, label: 'Processes' },\r\n      { key: '2', view: ALL_VIEWS.STATUS, label: 'Status' },\r\n      { key: '3', view: ALL_VIEWS.ORCHESTRATION, label: 'Orchestration' },\r\n      { key: '4', view: ALL_VIEWS.MEMORY, label: 'Memory' },\r\n      { key: '5', view: ALL_VIEWS.LOGS, label: 'Logs' },\r\n    ];\r\n\r\n    let mainTabLine = '';\r\n    mainTabs.forEach((tab) => {\r\n      const isActive = this.currentView === tab.view;\r\n      const label = isActive\r\n        ? this.colors.yellow(`[${tab.label}]`)\r\n        : this.colors.gray(`${tab.label}`);\r\n      mainTabLine += `  ${this.colors.bold(tab.key)}:${label}`;\r\n    });\r\n\r\n    console.log(mainTabLine);\r\n\r\n    // Enhanced tool tabs (row 2)\r\n    const toolTabs = [\r\n      { key: '6', view: ALL_VIEWS.NEURAL, label: 'Neural', icon: 'ðŸ§ ' },\r\n      { key: '7', view: ALL_VIEWS.ANALYSIS, label: 'Analysis', icon: 'ðŸ“Š' },\r\n      { key: '8', view: ALL_VIEWS.WORKFLOW, label: 'Workflow', icon: 'ðŸ”„' },\r\n      { key: '9', view: ALL_VIEWS.GITHUB, label: 'GitHub', icon: 'ðŸ™' },\r\n      { key: '0', view: ALL_VIEWS.DAA, label: 'DAA', icon: 'ðŸ¤–' },\r\n    ];\r\n\r\n    let toolTabLine = '';\r\n    toolTabs.forEach((tab) => {\r\n      const isActive = this.currentView === tab.view;\r\n      const label = isActive\r\n        ? this.colors.yellow(`[${tab.icon}${tab.label}]`)\r\n        : this.colors.gray(`${tab.icon}${tab.label}`);\r\n      toolTabLine += `  ${this.colors.bold(tab.key)}:${label}`;\r\n    });\r\n\r\n    console.log(toolTabLine);\r\n\r\n    // Additional tabs (row 3)\r\n    const additionalTabs = [\r\n      { key: 't', view: ALL_VIEWS.TOOLS, label: 'Tools', icon: 'ðŸŽ›ï¸' },\r\n      { key: 's', view: ALL_VIEWS.SYSTEM, label: 'System', icon: 'ðŸ› ï¸' },\r\n      { key: 'h', view: ALL_VIEWS.HELP, label: 'Help', icon: 'â“' },\r\n    ];\r\n\r\n    let additionalTabLine = '';\r\n    additionalTabs.forEach((tab) => {\r\n      const isActive = this.currentView === tab.view;\r\n      const label = isActive\r\n        ? this.colors.yellow(`[${tab.icon}${tab.label}]`)\r\n        : this.colors.gray(`${tab.icon}${tab.label}`);\r\n      additionalTabLine += `  ${this.colors.bold(tab.key)}:${label}`;\r\n    });\r\n\r\n    console.log(additionalTabLine);\r\n    console.log(this.colors.gray('â”€'.repeat(80)));\r\n    console.log();\r\n  }\r\n\r\n  /**\r\n   * Render enhanced help view\r\n   */\r\n  renderEnhancedHelpView() {\r\n    console.log(this.colors.white(this.colors.bold('â“ Enhanced Web UI Help')));\r\n    console.log();\r\n\r\n    console.log(this.colors.cyan('ðŸ—ï¸ Navigation Keys:'));\r\n    console.log('  1-5: Main views (Processes, Status, Orchestration, Memory, Logs)');\r\n    console.log('  6-0: Tool categories (Neural, Analysis, Workflow, GitHub, DAA)');\r\n    console.log('  t:   Tool execution center');\r\n    console.log('  s:   System utilities');\r\n    console.log('  h:   This help screen');\r\n    console.log();\r\n\r\n    console.log(this.colors.cyan('ðŸ”§ Tool Categories:'));\r\n    console.log('  ðŸ§  Neural (15 tools): Training, prediction, model management');\r\n    console.log('  ðŸ“Š Analysis (13 tools): Performance reports, monitoring, metrics');\r\n    console.log('  ðŸ”„ Workflow (11 tools): Automation, pipelines, scheduling');\r\n    console.log('  ðŸ™ GitHub (8 tools): Repository management, PR automation');\r\n    console.log('  ðŸ¤– DAA (8 tools): Dynamic agent architecture');\r\n    console.log('  ðŸ› ï¸ System (8 tools): Configuration, security, diagnostics');\r\n    console.log('  ðŸ Swarm (12 tools): Agent coordination, task orchestration');\r\n    console.log('  ðŸ’¾ Memory (12 tools): Persistence, caching, namespaces');\r\n    console.log();\r\n\r\n    console.log(this.colors.cyan('âš¡ Quick Actions:'));\r\n    console.log('  r: Run custom tool (from any view)');\r\n    console.log('  w: Execute workflow');\r\n    console.log('  b: Batch tool execution');\r\n    console.log('  c: Clear screen');\r\n    console.log('  q: Quit application');\r\n    console.log();\r\n\r\n    console.log(this.colors.cyan('ðŸ’¡ Features:'));\r\n    console.log('  â€¢ Real-time updates and monitoring');\r\n    console.log('  â€¢ Comprehensive MCP tool integration');\r\n    console.log('  â€¢ Batch and workflow execution');\r\n    console.log('  â€¢ Performance tracking and analysis');\r\n    console.log('  â€¢ Memory management and persistence');\r\n    console.log('  â€¢ GitHub integration and automation');\r\n    console.log('  â€¢ Dynamic agent architecture');\r\n    console.log('  â€¢ Neural network management');\r\n  }\r\n\r\n  /**\r\n   * Render enhanced footer\r\n   */\r\n  renderEnhancedFooter() {\r\n    console.log();\r\n    console.log(this.colors.gray('â”€'.repeat(80)));\r\n\r\n    // Status line\r\n    const mcpStatus = this.mcpIntegration ? this.mcpIntegration.getStatus() : null;\r\n    const toolStatus = this.toolFramework ? this.toolFramework.getStatus() : null;\r\n\r\n    let statusLine = `ðŸ§  Claude-Flow Enhanced UI | `;\r\n    statusLine += `MCP: ${mcpStatus?.mcpAvailable ? this.colors.green('âœ“') : this.colors.red('âœ—')} | `;\r\n    statusLine += `Tools: ${this.colors.yellow(mcpStatus?.totalTools || 87)} | `;\r\n    statusLine += `Active: ${this.colors.blue(toolStatus?.currentExecutions || 0)} | `;\r\n    statusLine += `Queued: ${this.colors.cyan(toolStatus?.queuedExecutions || 0)} | `;\r\n    statusLine += `Uptime: ${this.colors.white(this.formatUptime(this.systemStats.uptime))}`;\r\n\r\n    console.log(statusLine);\r\n\r\n    // Controls line\r\n    let controlsLine = `${this.colors.gray('Controls:')} `;\r\n    controlsLine += `${this.colors.yellow('r')}=Run Tool | `;\r\n    controlsLine += `${this.colors.yellow('w')}=Workflow | `;\r\n    controlsLine += `${this.colors.yellow('b')}=Batch | `;\r\n    controlsLine += `${this.colors.yellow('c')}=Clear | `;\r\n    controlsLine += `${this.colors.yellow('q')}=Quit | `;\r\n    controlsLine += `${this.colors.yellow('â†‘â†“')}=Navigate`;\r\n\r\n    console.log(controlsLine);\r\n  }\r\n\r\n  /**\r\n   * Enhanced input handling\r\n   */\r\n  async handleInput() {\r\n    return new Promise((resolve) => {\r\n      const onData = async (chunk) => {\r\n        const key = chunk.toString();\r\n\r\n        // Remove listener\r\n        process.stdin.removeListener('data', onData);\r\n\r\n        try {\r\n          // Handle navigation keys\r\n          if (await this.handleNavigationInput(key)) {\r\n            resolve();\r\n            return;\r\n          }\r\n\r\n          // Handle enhanced view input\r\n          if (await this.handleEnhancedViewInput(key)) {\r\n            resolve();\r\n            return;\r\n          }\r\n\r\n          // Handle global commands\r\n          if (await this.handleGlobalCommands(key)) {\r\n            resolve();\r\n            return;\r\n          }\r\n\r\n          // Handle original input\r\n          await this.handleOriginalInput(key);\r\n        } catch (error) {\r\n          this.addLog('error', `Input handling error: ${error.message}`);\r\n        }\r\n\r\n        resolve();\r\n      };\r\n\r\n      process.stdin.once('data', onData);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle navigation input\r\n   */\r\n  async handleNavigationInput(key) {\r\n    const navigationMap = {\r\n      1: ALL_VIEWS.PROCESSES,\r\n      2: ALL_VIEWS.STATUS,\r\n      3: ALL_VIEWS.ORCHESTRATION,\r\n      4: ALL_VIEWS.MEMORY,\r\n      5: ALL_VIEWS.LOGS,\r\n      6: ALL_VIEWS.NEURAL,\r\n      7: ALL_VIEWS.ANALYSIS,\r\n      8: ALL_VIEWS.WORKFLOW,\r\n      9: ALL_VIEWS.GITHUB,\r\n      0: ALL_VIEWS.DAA,\r\n      t: ALL_VIEWS.TOOLS,\r\n      s: ALL_VIEWS.SYSTEM,\r\n      h: ALL_VIEWS.HELP,\r\n    };\r\n\r\n    if (navigationMap[key]) {\r\n      this.currentView = navigationMap[key];\r\n      this.selectedIndex = 0;\r\n      this.addLog('info', `Switched to ${this.currentView} view`);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Handle enhanced view input\r\n   */\r\n  async handleEnhancedViewInput(key) {\r\n    if (this.enhancedViews) {\r\n      return await this.enhancedViews.handleEnhancedInput(key, this.currentView);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Handle global commands\r\n   */\r\n  async handleGlobalCommands(key) {\r\n    switch (key) {\r\n      case 'r':\r\n        await this.promptRunTool();\r\n        return true;\r\n      case 'w':\r\n        await this.promptRunWorkflow();\r\n        return true;\r\n      case 'b':\r\n        await this.promptBatchExecution();\r\n        return true;\r\n      case 'c':\r\n        console.clear();\r\n        return true;\r\n      case 'q':\r\n      case '\\x03': // Ctrl+C\r\n        await this.shutdown();\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Prompt for tool execution\r\n   */\r\n  async promptRunTool() {\r\n    // In a real implementation, this would show an interactive prompt\r\n    // For now, execute a sample tool\r\n    this.addLog('info', 'Tool execution prompt (demo)');\r\n\r\n    try {\r\n      const result = await this.toolFramework.executeTool('features_detect');\r\n      this.addLog('success', 'Tool executed successfully');\r\n      this.enhancedViews.displayToolResult(result);\r\n    } catch (error) {\r\n      this.addLog('error', `Tool execution failed: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Prompt for workflow execution\r\n   */\r\n  async promptRunWorkflow() {\r\n    this.addLog('info', 'Executing sample workflow...');\r\n\r\n    try {\r\n      const result = await this.toolFramework.executePredefinedWorkflow('performance_analysis');\r\n      this.addLog('success', 'Workflow completed successfully');\r\n    } catch (error) {\r\n      this.addLog('error', `Workflow failed: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Prompt for batch execution\r\n   */\r\n  async promptBatchExecution() {\r\n    this.addLog('info', 'Executing sample batch...');\r\n\r\n    const batchTools = [\r\n      { toolName: 'swarm_status' },\r\n      { toolName: 'neural_status' },\r\n      { toolName: 'memory_usage', parameters: { action: 'list' } },\r\n    ];\r\n\r\n    try {\r\n      const result = await this.toolFramework.executeToolsBatch(batchTools, { parallel: true });\r\n      this.addLog(\r\n        'success',\r\n        `Batch completed: ${result.summary.successful}/${result.summary.total} successful`,\r\n      );\r\n    } catch (error) {\r\n      this.addLog('error', `Batch execution failed: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle original input for backward compatibility\r\n   */\r\n  async handleOriginalInput(key) {\r\n    // Handle original process view navigation\r\n    if (this.currentView === ALL_VIEWS.PROCESSES) {\r\n      switch (key) {\r\n        case '\\x1b[A': // Up arrow\r\n          this.selectedIndex = Math.max(0, this.selectedIndex - 1);\r\n          break;\r\n        case '\\x1b[B': // Down arrow\r\n          this.selectedIndex = Math.min(this.processes.size - 1, this.selectedIndex + 1);\r\n          break;\r\n        case ' ':\r\n        case '\\r':\r\n          await this.toggleSelectedProcess();\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle selected process status\r\n   */\r\n  async toggleSelectedProcess() {\r\n    const processes = Array.from(this.processes.values());\r\n    const selected = processes[this.selectedIndex];\r\n\r\n    if (selected) {\r\n      if (selected.status === 'running') {\r\n        selected.status = 'stopped';\r\n        selected.pid = null;\r\n        this.addLog('warning', `Stopped ${selected.name}`);\r\n      } else {\r\n        selected.status = 'running';\r\n        selected.pid = Math.floor(Math.random() * 50000) + 1000;\r\n        this.addLog('success', `Started ${selected.name}`);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Add log entry with enhanced formatting\r\n   */\r\n  addLog(level, message) {\r\n    const logEntry = {\r\n      time: new Date(),\r\n      level,\r\n      message,\r\n    };\r\n\r\n    this.logs.unshift(logEntry);\r\n\r\n    // Keep only last 100 logs\r\n    if (this.logs.length > 100) {\r\n      this.logs = this.logs.slice(0, 100);\r\n    }\r\n\r\n    // Emit log event for real-time updates\r\n    if (this.realtimeUpdates) {\r\n      this.realtimeUpdates.emit('log_added', logEntry);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Render process view (original)\r\n   */\r\n  renderProcessView() {\r\n    console.log(this.colors.white(this.colors.bold('Process Management')));\r\n    console.log();\r\n\r\n    let index = 0;\r\n    for (const [id, process] of this.processes) {\r\n      const selected = index === this.selectedIndex;\r\n      const prefix = selected ? this.colors.yellow('â–¶ ') : '  ';\r\n      const status = this.getStatusIcon(process.status);\r\n      const name = selected ? this.colors.yellow(process.name) : this.colors.white(process.name);\r\n\r\n      console.log(`${prefix}${status} ${name}`);\r\n      console.log(`     ${this.colors.gray(process.description)}`);\r\n\r\n      if (process.status === 'running') {\r\n        const stats = this.colors.dim(\r\n          `PID: ${process.pid} | Uptime: ${this.formatUptime(process.uptime)} | CPU: ${process.cpu.toFixed(1)}% | Mem: ${process.memory.toFixed(0)}MB`,\r\n        );\r\n        console.log(`     ${stats}`);\r\n      }\r\n      console.log();\r\n\r\n      index++;\r\n    }\r\n\r\n    // Enhanced stats\r\n    const running = Array.from(this.processes.values()).filter(\r\n      (p) => p.status === 'running',\r\n    ).length;\r\n    console.log(this.colors.gray('â”€'.repeat(80)));\r\n    console.log(\r\n      this.colors.white(\r\n        `Total: ${this.processes.size} | Running: ${this.colors.green(running)} | Stopped: ${this.colors.gray(this.processes.size - running)}`,\r\n      ),\r\n    );\r\n    console.log(\r\n      this.colors.cyan(\r\n        `Enhanced: ${this.colors.yellow('87 MCP tools')} available across ${this.colors.yellow('8 categories')}`,\r\n      ),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Render status view with enhanced metrics\r\n   */\r\n  renderStatusView() {\r\n    console.log(this.colors.white(this.colors.bold('Enhanced System Status')));\r\n    console.log();\r\n\r\n    // System overview\r\n    console.log(this.colors.cyan('ðŸ“Š System Overview'));\r\n    console.log(`  Uptime: ${this.colors.green(this.formatUptime(this.systemStats.uptime))}`);\r\n    console.log(`  Process Health: ${this.getHealthBar()}`);\r\n    console.log(`  MCP Tools: ${this.colors.yellow('87')} available`);\r\n    console.log(`  Tool Categories: ${this.colors.blue('8')} active`);\r\n    console.log();\r\n\r\n    // Enhanced resource usage\r\n    console.log(this.colors.cyan('ðŸ’» Resource Usage'));\r\n    console.log(\r\n      `  CPU Usage: ${this.getUsageBar(this.systemStats.cpuUsage, 100)} ${this.systemStats.cpuUsage.toFixed(1)}%`,\r\n    );\r\n    console.log(\r\n      `  Memory: ${this.getUsageBar(this.systemStats.memoryUsage, 100)} ${this.systemStats.memoryUsage.toFixed(1)}%`,\r\n    );\r\n    console.log();\r\n\r\n    // Enhanced activity metrics\r\n    console.log(this.colors.cyan('ðŸ“ˆ Enhanced Activity Metrics'));\r\n    console.log(\r\n      `  Active Agents: ${this.colors.yellow(this.agents.filter((a) => a.status === 'working').length)}/${this.agents.length}`,\r\n    );\r\n    console.log(`  Total Tasks: ${this.tasks.length}`);\r\n    console.log(`  Tool Executions: ${this.colors.green('Running')}`);\r\n    console.log(`  Real-time Updates: ${this.colors.green('Active')}`);\r\n    console.log();\r\n\r\n    // Tool status\r\n    const mcpStatus = this.mcpIntegration ? this.mcpIntegration.getStatus() : null;\r\n    if (mcpStatus) {\r\n      console.log(this.colors.cyan('ðŸ”§ Tool System Status'));\r\n      console.log(\r\n        `  MCP Connection: ${mcpStatus.mcpAvailable ? this.colors.green('Connected') : this.colors.red('Mock Mode')}`,\r\n      );\r\n      console.log(`  Active Executions: ${this.colors.yellow(mcpStatus.activeExecutions || 0)}`);\r\n      console.log(`  Cache Size: ${this.colors.blue(mcpStatus.cacheSize || 0)} entries`);\r\n      console.log();\r\n    }\r\n\r\n    // Recent events\r\n    console.log(this.colors.cyan('ðŸ”” Recent Events'));\r\n    this.logs.slice(0, 5).forEach((log) => {\r\n      const time = log.time.toLocaleTimeString();\r\n      const icon =\r\n        log.level === 'success'\r\n          ? 'âœ“'\r\n          : log.level === 'warning'\r\n            ? 'âš '\r\n            : log.level === 'error'\r\n              ? 'âŒ'\r\n              : 'â„¹';\r\n      const color =\r\n        log.level === 'success'\r\n          ? this.colors.green\r\n          : log.level === 'warning'\r\n            ? this.colors.yellow\r\n            : log.level === 'error'\r\n              ? this.colors.red\r\n              : this.colors.blue;\r\n      console.log(`  ${this.colors.gray(time)} ${color(icon)} ${log.message}`);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Render orchestration view (enhanced)\r\n   */\r\n  renderOrchestrationView() {\r\n    console.log(this.colors.white(this.colors.bold('Enhanced Swarm Orchestration')));\r\n    console.log();\r\n\r\n    // Enhanced swarm metrics\r\n    const metrics = this.swarmIntegration.getSwarmMetrics();\r\n    if (metrics) {\r\n      console.log(this.colors.cyan('ðŸ Swarm Status'));\r\n      console.log(`  Swarm ID: ${this.colors.yellow(metrics.swarmId)}`);\r\n      console.log(`  Topology: ${this.colors.blue('hierarchical')} (optimized)`);\r\n      console.log(\r\n        `  Agents: ${this.colors.green(metrics.agents.active)}/${metrics.agents.total} active`,\r\n      );\r\n      console.log(\r\n        `  Tasks: ${this.colors.yellow(metrics.tasks.inProgress)} in progress, ${this.colors.green(metrics.tasks.completed)} completed`,\r\n      );\r\n      console.log(`  Efficiency: ${this.colors.green(metrics.efficiency + '%')}`);\r\n      console.log(`  Coordination Tools: ${this.colors.cyan('12')} available`);\r\n      console.log();\r\n    }\r\n\r\n    // Enhanced agents section\r\n    console.log(this.colors.cyan('ðŸ¤– Enhanced Agent Pool'));\r\n    console.log();\r\n    this.agents.forEach((agent, index) => {\r\n      const selected = this.currentView === ALL_VIEWS.ORCHESTRATION && index === this.selectedIndex;\r\n      const prefix = selected ? this.colors.yellow('â–¶ ') : '  ';\r\n      const statusIcon =\r\n        agent.status === 'working' ? this.colors.green('â—') : this.colors.gray('â—‹');\r\n      const name = selected ? this.colors.yellow(agent.name) : this.colors.white(agent.name);\r\n\r\n      console.log(`${prefix}${statusIcon} ${name} (${agent.type})`);\r\n      console.log(`     ID: ${agent.id} | Tasks: ${agent.tasks} | Status: ${agent.status}`);\r\n      if (agent.capabilities && agent.capabilities.length > 0) {\r\n        console.log(`     Capabilities: ${this.colors.dim(agent.capabilities.join(', '))}`);\r\n      }\r\n      console.log();\r\n    });\r\n\r\n    console.log(this.colors.gray('â”€'.repeat(40)));\r\n    console.log(\r\n      this.colors.cyan('âš¡ Quick Actions: [1-9] Execute swarm tools | [r] Run custom tool'),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Render memory view (enhanced)\r\n   */\r\n  renderMemoryView() {\r\n    console.log(this.colors.white(this.colors.bold('Enhanced Memory Management')));\r\n    console.log();\r\n\r\n    // Enhanced memory overview\r\n    console.log(this.colors.cyan('ðŸ’¾ Memory Overview'));\r\n    console.log(`  Total Entries: ${this.colors.yellow(this.memoryStats.totalEntries)}`);\r\n    console.log(`  Total Size: ${this.colors.blue(this.memoryStats.totalSize)}`);\r\n    console.log(`  Namespaces: ${this.colors.green(this.memoryStats.namespaces.length)}`);\r\n    console.log(`  Persistence Tools: ${this.colors.cyan('12')} available`);\r\n    console.log();\r\n\r\n    // Enhanced namespace details\r\n    console.log(this.colors.cyan('ðŸ“‚ Namespace Details'));\r\n    this.memoryStats.namespaces.forEach((ns) => {\r\n      const usageBar = this.getUsageBar(ns.entries, 100);\r\n      console.log(\r\n        `  ${this.colors.white(ns.name.padEnd(12))} ${usageBar} ${this.colors.yellow(ns.entries)} entries (${this.colors.blue(ns.size)})`,\r\n      );\r\n    });\r\n\r\n    console.log();\r\n    console.log(this.colors.cyan('âš¡ Memory Tools Available:'));\r\n    console.log(`  ${this.colors.gray('â€¢ Store/Retrieve operations')}`);\r\n    console.log(`  ${this.colors.gray('â€¢ Backup and restore')}`);\r\n    console.log(`  ${this.colors.gray('â€¢ Cross-session persistence')}`);\r\n    console.log(`  ${this.colors.gray('â€¢ Memory analytics and compression')}`);\r\n  }\r\n\r\n  /**\r\n   * Render logs view (enhanced)\r\n   */\r\n  renderLogsView() {\r\n    console.log(this.colors.white(this.colors.bold('Enhanced System Logs')));\r\n    console.log();\r\n\r\n    console.log(this.colors.cyan(`ðŸ“‹ Recent Activity (${this.logs.length} total entries)`));\r\n    console.log();\r\n\r\n    this.logs.slice(0, 15).forEach((log) => {\r\n      const time = log.time.toLocaleTimeString();\r\n      const icon =\r\n        log.level === 'success'\r\n          ? this.colors.green('âœ…')\r\n          : log.level === 'warning'\r\n            ? this.colors.yellow('âš ï¸')\r\n            : log.level === 'error'\r\n              ? this.colors.red('âŒ')\r\n              : this.colors.blue('â„¹ï¸');\r\n\r\n      console.log(`${this.colors.gray(time)} ${icon} ${log.message}`);\r\n    });\r\n\r\n    console.log();\r\n    console.log(this.colors.gray('â”€'.repeat(80)));\r\n    console.log(\r\n      this.colors.cyan(\r\n        'ðŸ” Log Analysis Tools Available: Pattern detection, error analysis, usage statistics',\r\n      ),\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Utility methods\r\n   */\r\n  getStatusIcon(status) {\r\n    return status === 'running' ? this.colors.green('â—') : this.colors.gray('â—‹');\r\n  }\r\n\r\n  formatUptime(seconds) {\r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    const secs = seconds % 60;\r\n    return `${hours}h ${minutes}m ${secs}s`;\r\n  }\r\n\r\n  getHealthBar() {\r\n    const running = Array.from(this.processes.values()).filter(\r\n      (p) => p.status === 'running',\r\n    ).length;\r\n    const total = this.processes.size;\r\n    const percentage = (running / total) * 100;\r\n    return this.getUsageBar(percentage, 100);\r\n  }\r\n\r\n  getUsageBar(value, max, width = 20) {\r\n    const percentage = Math.min((value / max) * 100, 100);\r\n    const filled = Math.round((percentage / 100) * width);\r\n    const empty = width - filled;\r\n\r\n    const color =\r\n      percentage > 80 ? this.colors.red : percentage > 60 ? this.colors.yellow : this.colors.green;\r\n    return color('â–ˆ'.repeat(filled)) + this.colors.gray('â–‘'.repeat(empty));\r\n  }\r\n\r\n  /**\r\n   * Shutdown the enhanced UI\r\n   */\r\n  async shutdown() {\r\n    console.log();\r\n    this.addLog('info', 'Shutting down Enhanced Web UI...');\r\n\r\n    // Cleanup enhanced components\r\n    if (this.enhancedViews) {\r\n      this.enhancedViews.cleanup();\r\n    }\r\n\r\n    if (this.realtimeUpdates) {\r\n      this.realtimeUpdates.cleanup();\r\n    }\r\n\r\n    // Reset terminal\r\n    if (process.stdin.setRawMode) {\r\n      process.stdin.setRawMode(false);\r\n    }\r\n    process.stdin.pause();\r\n\r\n    this.running = false;\r\n\r\n    console.log();\r\n    printSuccess('ðŸ‘‹ Enhanced Web UI shutdown complete');\r\n    process.exit(0);\r\n  }\r\n}\r\n\r\nexport default EnhancedWebUIComplete;\r\n"],"names":["printSuccess","printInfo","SwarmWebUIIntegration","MCPIntegrationLayer","ToolExecutionFramework","EnhancedUIViews","ENHANCED_VIEWS","RealtimeUpdateSystem","ALL_VIEWS","EnhancedWebUIComplete","processes","Map","running","selectedIndex","currentView","PROCESSES","agents","tasks","memoryStats","totalEntries","totalSize","namespaces","logs","systemStats","uptime","totalTasks","completedTasks","activeAgents","memoryUsage","cpuUsage","mcpIntegration","toolFramework","enhancedViews","realtimeUpdates","inputBuffer","commandHistory","historyIndex","colors","cyan","text","gray","white","yellow","green","red","blue","magenta","bold","dim","initializeEnhancedUI","swarmIntegration","initializeProcesses","initializeSystemData","startSystemMonitoring","addLog","error","message","id","name","description","forEach","p","set","status","pid","Math","floor","random","cpu","memory","initializeSwarm","entries","size","time","Date","level","setInterval","process","max","emit","processCount","start","console","clear","log","repeat","showToolCategoriesSummary","render","setupInputHandling","handleInput","categories","count","icon","cat","stdin","setRawMode","resume","renderEnhancedHeader","renderProcessView","STATUS","renderStatusView","ORCHESTRATION","renderOrchestrationView","MEMORY","renderMemoryView","LOGS","renderLogsView","NEURAL","renderNeuralView","ANALYSIS","renderAnalysisView","WORKFLOW","renderWorkflowView","GITHUB","renderGitHubView","DAA","renderDAAView","SYSTEM","renderSystemView","TOOLS","renderToolsView","HELP","renderEnhancedHelpView","renderEnhancedFooter","mainTabs","key","view","label","mainTabLine","tab","isActive","toolTabs","toolTabLine","additionalTabs","additionalTabLine","mcpStatus","getStatus","toolStatus","statusLine","mcpAvailable","totalTools","currentExecutions","queuedExecutions","formatUptime","controlsLine","Promise","resolve","onData","chunk","toString","removeListener","handleNavigationInput","handleEnhancedViewInput","handleGlobalCommands","handleOriginalInput","once","navigationMap","t","s","h","handleEnhancedInput","promptRunTool","promptRunWorkflow","promptBatchExecution","shutdown","result","executeTool","displayToolResult","executePredefinedWorkflow","batchTools","toolName","parameters","action","executeToolsBatch","parallel","summary","successful","total","min","toggleSelectedProcess","Array","from","values","selected","logEntry","unshift","length","slice","index","prefix","getStatusIcon","stats","toFixed","filter","getHealthBar","getUsageBar","a","activeExecutions","cacheSize","toLocaleTimeString","color","metrics","getSwarmMetrics","swarmId","active","inProgress","completed","efficiency","agent","statusIcon","type","capabilities","join","ns","usageBar","padEnd","seconds","hours","minutes","secs","percentage","value","width","filled","round","empty","cleanup","pause","exit"],"mappings":"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"}