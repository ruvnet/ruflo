{"version":3,"sources":["../../../../../src/cli/simple-commands/sparc-modes/tdd.js"],"sourcesContent":["// tdd.js - Test-Driven Development mode orchestration template\r\nexport function getTddOrchestration(taskDescription, memoryNamespace) {\r\n  return `\r\n## Task Orchestration Steps - London School TDD\r\n\r\n1. **Test Planning & Analysis** (10 mins)\r\n   - Analyze requirements: \"${taskDescription}\"\r\n   - Query existing code and architecture:\r\n     \\\\\\`\\\\\\`\\\\\\`bash\r\n     npx claude-flow memory query ${memoryNamespace}_architecture\r\n     npx claude-flow memory query ${memoryNamespace}_implementation\r\n     npx claude-flow memory query ${memoryNamespace}_tech_specs\r\n     \\\\\\`\\\\\\`\\\\\\`\r\n   - Define test boundaries and acceptance criteria\r\n   - Plan test structure (unit, integration, e2e)\r\n   - Identify test doubles needed (mocks, stubs, spies)\r\n   - Store plan: \\`npx claude-flow memory store ${memoryNamespace}_test_plan \"Test strategy: Unit tests for domain logic, integration for APIs, e2e for workflows. Mocking: External services, database. Coverage target: 95%.\"\\`\r\n\r\n2. **Red Phase - Write Failing Tests** (20 mins)\r\n   - Create comprehensive test structure:\r\n     \\\\\\`\\\\\\`\\\\\\`\r\n     tests/\r\n     ├── unit/          # Isolated component tests\r\n     ├── integration/   # Component interaction tests\r\n     ├── e2e/          # End-to-end workflow tests\r\n     └── fixtures/      # Test data and mocks\r\n     \\\\\\`\\\\\\`\\\\\\`\r\n   - Write tests following London School TDD:\r\n     - Start with behavior/contract tests\r\n     - Use test doubles for dependencies\r\n     - Focus on interactions, not state\r\n   - Ensure NO hardcoded values in tests\r\n   - Create parameterized tests for edge cases\r\n   - Verify all tests fail with meaningful messages\r\n   - Store status: \\`npx claude-flow memory store ${memoryNamespace}_red_phase \"Written: 25 unit tests (all failing), 10 integration tests (all failing), 5 e2e tests (all failing). Coverage: 0%.\"\\`\r\n\r\n3. **Green Phase - Minimal Implementation** (20 mins)\r\n   - Implement ONLY enough code to pass tests:\r\n     - Start with the simplest implementation\r\n     - Make one test pass at a time\r\n     - Don't add unrequested functionality\r\n   - Maintain modularity (files < 500 lines)\r\n   - Use dependency injection for testability\r\n   - Implement proper error handling\r\n   - Track coverage as you progress\r\n   - Store progress: \\`npx claude-flow memory store ${memoryNamespace}_green_phase \"Progress: 20/25 unit tests passing, 8/10 integration tests passing. Current coverage: 75%. Remaining: Complex edge cases.\"\\`\r\n\r\n4. **Refactor Phase - Optimize & Clean** (15 mins)\r\n   - Refactor while keeping tests green:\r\n     - Extract common patterns into utilities\r\n     - Improve naming and code clarity\r\n     - Optimize algorithms and data structures\r\n     - Reduce duplication (DRY principle)\r\n   - Ensure files remain under 500 lines\r\n   - Add performance tests if needed\r\n   - Improve test maintainability\r\n   - Document complex test scenarios\r\n   - Store refactoring: \\`npx claude-flow memory store ${memoryNamespace}_refactor \"Extracted 3 common utilities, optimized database queries, improved test readability. All tests green. Coverage: 95%.\"\\`\r\n\r\n5. **Test Documentation & Validation** (10 mins)\r\n   - Generate coverage reports\r\n   - Document test scenarios and edge cases\r\n   - Create test execution guide\r\n   - Set up CI/CD test configuration\r\n   - Validate against acceptance criteria\r\n   - Store completion: \\`npx claude-flow memory store ${memoryNamespace}_tdd_complete \"TDD cycle complete. Coverage: 95%. All acceptance criteria met. Tests documented. CI/CD ready.\"\\`\r\n\r\n## Directory Safety\r\n- **IMPORTANT**: All test files should be created in the current working directory\r\n- **DO NOT** create files in system directories or node_modules\r\n- For named projects, create a subdirectory: \\\\\\`mkdir project-name && cd project-name\\\\\\`\r\n- Use relative paths from your working directory\r\n- Test files should follow project structure:\r\n  \\\\\\`\\\\\\`\\\\\\`\r\n  ./ (current directory)\r\n  ├── tests/\r\n  │   ├── unit/\r\n  │   ├── integration/\r\n  │   └── e2e/\r\n  ├── coverage/\r\n  └── docs/\r\n  \\\\\\`\\\\\\`\\\\\\`\r\n\r\n## Deliverables\r\n- tests/\r\n  - unit/ (isolated component tests)\r\n  - integration/ (interaction tests)\r\n  - e2e/ (workflow tests)\r\n  - fixtures/ (test data, no hardcoded values)\r\n  - helpers/ (test utilities)\r\n- coverage/\r\n  - coverage report (HTML + JSON)\r\n  - coverage badge\r\n- docs/\r\n  - TEST_GUIDE.md (how to run tests)\r\n  - TEST_SCENARIOS.md (test case documentation)\r\n- .github/workflows/ or .gitlab-ci.yml (CI configuration)\r\n\r\n## Testing Best Practices\r\n- NO hardcoded secrets or environment values in tests\r\n- Use test fixtures and factories for test data\r\n- Mock external dependencies at boundaries\r\n- Test behavior, not implementation details\r\n- Maintain test independence (no shared state)\r\n- Use descriptive test names that document behavior\r\n\r\n## Next Steps\r\nAfter TDD cycle completes:\r\n- \\`npx claude-flow sparc run debug \"Investigate any failing edge cases\" --non-interactive\\`\r\n- \\`npx claude-flow sparc run refinement-optimization-mode \"Optimize performance bottlenecks\" --non-interactive\\`\r\n- \\`npx claude-flow sparc run docs-writer \"Create user documentation\" --non-interactive\\``;\r\n}\r\n"],"names":["getTddOrchestration","taskDescription","memoryNamespace"],"mappings":"AACA,OAAO,SAASA,oBAAoBC,eAAe,EAAEC,eAAe;IAClE,OAAO,CAAC;;;;4BAIkB,EAAED,gBAAgB;;;kCAGZ,EAAEC,gBAAgB;kCAClB,EAAEA,gBAAgB;kCAClB,EAAEA,gBAAgB;;;;;gDAKJ,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;;kDAkBhB,EAAEA,gBAAgB;;;;;;;;;;;oDAWhB,EAAEA,gBAAgB;;;;;;;;;;;;uDAYf,EAAEA,gBAAgB;;;;;;;;sDAQnB,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yFA6CiB,CAAC;AAC1F"}