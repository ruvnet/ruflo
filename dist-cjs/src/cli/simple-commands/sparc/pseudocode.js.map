{"version":3,"sources":["../../../../../src/cli/simple-commands/sparc/pseudocode.js"],"sourcesContent":["// SPARC Pseudocode Phase\r\n// Generate pseudocode and flow diagrams based on specifications\r\n\r\nimport { SparcPhase } from './phase-base.js';\r\n\r\nexport class SparcPseudocode extends SparcPhase {\r\n  constructor(taskDescription, options) {\r\n    super('pseudocode', taskDescription, options);\r\n    this.flowDiagram = null;\r\n    this.pseudocode = [];\r\n    this.algorithms = [];\r\n    this.dataStructures = [];\r\n    this.interfaces = [];\r\n  }\r\n\r\n  /**\r\n   * Execute pseudocode phase\r\n   */\r\n  async execute() {\r\n    console.log('ðŸ”„ Starting Pseudocode Phase');\r\n\r\n    await this.initializePhase();\r\n\r\n    const result = {\r\n      flowDiagram: null,\r\n      pseudocode: [],\r\n      algorithms: [],\r\n      dataStructures: [],\r\n      interfaces: [],\r\n      logicFlow: [],\r\n      edgeCases: [],\r\n      complexityAnalysis: {},\r\n      dependencies: [],\r\n    };\r\n\r\n    try {\r\n      // Load specification from previous phase\r\n      const specification = await this.retrieveFromMemory('specification_complete');\r\n      if (!specification) {\r\n        throw new Error('Specification phase must be completed first');\r\n      }\r\n\r\n      // Generate flow diagram\r\n      result.flowDiagram = await this.generateFlowDiagram(specification);\r\n\r\n      // Generate pseudocode\r\n      result.pseudocode = await this.generatePseudocode(specification);\r\n\r\n      // Define algorithms\r\n      result.algorithms = await this.defineAlgorithms(specification);\r\n\r\n      // Define data structures\r\n      result.dataStructures = await this.defineDataStructures(specification);\r\n\r\n      // Define interfaces\r\n      result.interfaces = await this.defineInterfaces(specification);\r\n\r\n      // Map logic flow\r\n      result.logicFlow = await this.mapLogicFlow(specification);\r\n\r\n      // Identify edge cases\r\n      result.edgeCases = await this.identifyEdgeCases(specification);\r\n\r\n      // Analyze complexity\r\n      result.complexityAnalysis = await this.analyzeComplexity(result.pseudocode);\r\n\r\n      // Identify dependencies\r\n      result.dependencies = await this.identifyDependencies(specification);\r\n\r\n      // Generate pseudocode document\r\n      await this.generatePseudocodeDocument(result);\r\n\r\n      // Store in memory\r\n      await this.storeInMemory('pseudocode_complete', result);\r\n\r\n      console.log('âœ… Pseudocode phase completed');\r\n      return result;\r\n    } catch (error) {\r\n      console.error('âŒ Pseudocode phase failed:', error.message);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Generate flow diagram\r\n   */\r\n  async generateFlowDiagram(specification) {\r\n    const flowDiagram = {\r\n      title: `Flow Diagram: ${this.taskDescription}`,\r\n      nodes: [],\r\n      edges: [],\r\n      entry: 'start',\r\n      exit: 'end',\r\n      type: 'sequential',\r\n    };\r\n\r\n    // Determine flow type based on requirements\r\n    const requirements = specification.requirements || [];\r\n    const hasApiRequirements = requirements.some((req) => req.toLowerCase().includes('api'));\r\n    const hasUiRequirements = requirements.some(\r\n      (req) => req.toLowerCase().includes('ui') || req.toLowerCase().includes('interface'),\r\n    );\r\n    const hasDataRequirements = requirements.some((req) => req.toLowerCase().includes('data'));\r\n\r\n    if (hasApiRequirements) {\r\n      flowDiagram.type = 'api';\r\n      flowDiagram.nodes = this.generateApiFlowNodes(requirements);\r\n    } else if (hasUiRequirements) {\r\n      flowDiagram.type = 'ui';\r\n      flowDiagram.nodes = this.generateUiFlowNodes(requirements);\r\n    } else if (hasDataRequirements) {\r\n      flowDiagram.type = 'data';\r\n      flowDiagram.nodes = this.generateDataFlowNodes(requirements);\r\n    } else {\r\n      flowDiagram.type = 'general';\r\n      flowDiagram.nodes = this.generateGeneralFlowNodes(requirements);\r\n    }\r\n\r\n    // Generate edges between nodes\r\n    flowDiagram.edges = this.generateFlowEdges(flowDiagram.nodes);\r\n\r\n    return flowDiagram;\r\n  }\r\n\r\n  /**\r\n   * Generate API flow nodes\r\n   */\r\n  generateApiFlowNodes(requirements) {\r\n    return [\r\n      { id: 'start', type: 'start', label: 'Start' },\r\n      { id: 'validate_input', type: 'process', label: 'Validate Input' },\r\n      { id: 'authenticate', type: 'process', label: 'Authenticate Request' },\r\n      { id: 'authorize', type: 'process', label: 'Authorize Access' },\r\n      { id: 'process_request', type: 'process', label: 'Process Request' },\r\n      { id: 'validate_data', type: 'decision', label: 'Data Valid?' },\r\n      { id: 'handle_error', type: 'process', label: 'Handle Error' },\r\n      { id: 'execute_logic', type: 'process', label: 'Execute Business Logic' },\r\n      { id: 'prepare_response', type: 'process', label: 'Prepare Response' },\r\n      { id: 'log_activity', type: 'process', label: 'Log Activity' },\r\n      { id: 'return_response', type: 'process', label: 'Return Response' },\r\n      { id: 'end', type: 'end', label: 'End' },\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Generate UI flow nodes\r\n   */\r\n  generateUiFlowNodes(requirements) {\r\n    return [\r\n      { id: 'start', type: 'start', label: 'Start' },\r\n      { id: 'load_interface', type: 'process', label: 'Load Interface' },\r\n      { id: 'initialize_state', type: 'process', label: 'Initialize State' },\r\n      { id: 'render_components', type: 'process', label: 'Render Components' },\r\n      { id: 'wait_user_input', type: 'input', label: 'Wait for User Input' },\r\n      { id: 'validate_input', type: 'process', label: 'Validate Input' },\r\n      { id: 'input_valid', type: 'decision', label: 'Input Valid?' },\r\n      { id: 'show_error', type: 'process', label: 'Show Error Message' },\r\n      { id: 'update_state', type: 'process', label: 'Update State' },\r\n      { id: 'make_api_call', type: 'process', label: 'Make API Call' },\r\n      { id: 'handle_response', type: 'process', label: 'Handle Response' },\r\n      { id: 'update_ui', type: 'process', label: 'Update UI' },\r\n      { id: 'end', type: 'end', label: 'End' },\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Generate data flow nodes\r\n   */\r\n  generateDataFlowNodes(requirements) {\r\n    return [\r\n      { id: 'start', type: 'start', label: 'Start' },\r\n      { id: 'connect_database', type: 'process', label: 'Connect to Database' },\r\n      { id: 'validate_schema', type: 'process', label: 'Validate Schema' },\r\n      { id: 'begin_transaction', type: 'process', label: 'Begin Transaction' },\r\n      { id: 'execute_query', type: 'process', label: 'Execute Query' },\r\n      { id: 'check_results', type: 'decision', label: 'Results Valid?' },\r\n      { id: 'rollback_transaction', type: 'process', label: 'Rollback Transaction' },\r\n      { id: 'transform_data', type: 'process', label: 'Transform Data' },\r\n      { id: 'validate_constraints', type: 'process', label: 'Validate Constraints' },\r\n      { id: 'commit_transaction', type: 'process', label: 'Commit Transaction' },\r\n      { id: 'close_connection', type: 'process', label: 'Close Connection' },\r\n      { id: 'end', type: 'end', label: 'End' },\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Generate general flow nodes\r\n   */\r\n  generateGeneralFlowNodes(requirements) {\r\n    return [\r\n      { id: 'start', type: 'start', label: 'Start' },\r\n      { id: 'initialize', type: 'process', label: 'Initialize System' },\r\n      { id: 'load_configuration', type: 'process', label: 'Load Configuration' },\r\n      { id: 'validate_prerequisites', type: 'process', label: 'Validate Prerequisites' },\r\n      { id: 'execute_main_logic', type: 'process', label: 'Execute Main Logic' },\r\n      { id: 'handle_exceptions', type: 'process', label: 'Handle Exceptions' },\r\n      { id: 'cleanup_resources', type: 'process', label: 'Cleanup Resources' },\r\n      { id: 'end', type: 'end', label: 'End' },\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * Generate flow edges\r\n   */\r\n  generateFlowEdges(nodes) {\r\n    const edges = [];\r\n\r\n    for (let i = 0; i < nodes.length - 1; i++) {\r\n      const current = nodes[i];\r\n      const next = nodes[i + 1];\r\n\r\n      if (current.type === 'decision') {\r\n        // Decision nodes have multiple paths\r\n        edges.push({\r\n          from: current.id,\r\n          to: next.id,\r\n          label: 'Yes',\r\n          condition: true,\r\n        });\r\n\r\n        // Find alternative path (usually error handling)\r\n        const errorNode = nodes.find((n) => n.id.includes('error') || n.id.includes('handle'));\r\n        if (errorNode) {\r\n          edges.push({\r\n            from: current.id,\r\n            to: errorNode.id,\r\n            label: 'No',\r\n            condition: false,\r\n          });\r\n        }\r\n      } else {\r\n        edges.push({\r\n          from: current.id,\r\n          to: next.id,\r\n          label: '',\r\n        });\r\n      }\r\n    }\r\n\r\n    return edges;\r\n  }\r\n\r\n  /**\r\n   * Generate pseudocode\r\n   */\r\n  async generatePseudocode(specification) {\r\n    const pseudocode = [];\r\n    const requirements = specification.requirements || [];\r\n\r\n    // Main function\r\n    pseudocode.push({\r\n      function: 'main',\r\n      description: 'Main entry point for the system',\r\n      steps: [\r\n        'BEGIN main',\r\n        '  INITIALIZE system_configuration',\r\n        '  VALIDATE prerequisites',\r\n        '  CALL execute_primary_logic()',\r\n        '  HANDLE exceptions',\r\n        '  CLEANUP resources',\r\n        '  RETURN success_status',\r\n        'END main',\r\n      ],\r\n    });\r\n\r\n    // Generate pseudocode for each requirement\r\n    for (const [index, requirement] of requirements.entries()) {\r\n      const functionName = this.generateFunctionName(requirement);\r\n      const steps = this.generatePseudocodeSteps(requirement);\r\n\r\n      pseudocode.push({\r\n        function: functionName,\r\n        description: requirement,\r\n        steps: steps,\r\n        complexity: this.estimateComplexity(steps),\r\n      });\r\n    }\r\n\r\n    return pseudocode;\r\n  }\r\n\r\n  /**\r\n   * Generate function name from requirement\r\n   */\r\n  generateFunctionName(requirement) {\r\n    const words = requirement.toLowerCase().split(' ');\r\n    const actionWords = words.filter((word) =>\r\n      [\r\n        'provide',\r\n        'handle',\r\n        'ensure',\r\n        'validate',\r\n        'process',\r\n        'manage',\r\n        'create',\r\n        'update',\r\n        'delete',\r\n      ].includes(word),\r\n    );\r\n    const objectWords = words.filter((word) =>\r\n      [\r\n        'api',\r\n        'data',\r\n        'user',\r\n        'system',\r\n        'request',\r\n        'response',\r\n        'authentication',\r\n        'authorization',\r\n      ].includes(word),\r\n    );\r\n\r\n    const action = actionWords[0] || 'execute';\r\n    const object = objectWords[0] || 'operation';\r\n\r\n    return `${action}_${object}`;\r\n  }\r\n\r\n  /**\r\n   * Generate pseudocode steps\r\n   */\r\n  generatePseudocodeSteps(requirement) {\r\n    const steps = [];\r\n    const reqLower = requirement.toLowerCase();\r\n\r\n    // Common patterns\r\n    steps.push(`BEGIN ${this.generateFunctionName(requirement)}`);\r\n\r\n    if (reqLower.includes('validate')) {\r\n      steps.push('  VALIDATE input_parameters');\r\n      steps.push('  IF validation_fails THEN');\r\n      steps.push('    RETURN error_response');\r\n      steps.push('  END IF');\r\n    }\r\n\r\n    if (reqLower.includes('authenticate')) {\r\n      steps.push('  AUTHENTICATE user_credentials');\r\n      steps.push('  IF authentication_fails THEN');\r\n      steps.push('    RETURN unauthorized_error');\r\n      steps.push('  END IF');\r\n    }\r\n\r\n    if (reqLower.includes('data')) {\r\n      steps.push('  CONNECT to_database');\r\n      steps.push('  BEGIN transaction');\r\n      steps.push('  EXECUTE data_operation');\r\n      steps.push('  IF operation_successful THEN');\r\n      steps.push('    COMMIT transaction');\r\n      steps.push('  ELSE');\r\n      steps.push('    ROLLBACK transaction');\r\n      steps.push('  END IF');\r\n    }\r\n\r\n    if (reqLower.includes('api')) {\r\n      steps.push('  PARSE request_parameters');\r\n      steps.push('  VALIDATE request_format');\r\n      steps.push('  EXECUTE business_logic');\r\n      steps.push('  FORMAT response_data');\r\n      steps.push('  RETURN api_response');\r\n    }\r\n\r\n    // Generic steps if no specific patterns found\r\n    if (steps.length === 1) {\r\n      steps.push('  INITIALIZE operation_context');\r\n      steps.push('  EXECUTE primary_operation');\r\n      steps.push('  HANDLE potential_errors');\r\n      steps.push('  RETURN operation_result');\r\n    }\r\n\r\n    steps.push(`END ${this.generateFunctionName(requirement)}`);\r\n\r\n    return steps;\r\n  }\r\n\r\n  /**\r\n   * Estimate complexity\r\n   */\r\n  estimateComplexity(steps) {\r\n    const decisionSteps = steps.filter(\r\n      (step) => step.includes('IF') || step.includes('WHILE') || step.includes('FOR'),\r\n    );\r\n    const operationSteps = steps.filter(\r\n      (step) => step.includes('EXECUTE') || step.includes('CALL'),\r\n    );\r\n\r\n    return {\r\n      cyclomatic: decisionSteps.length + 1,\r\n      operations: operationSteps.length,\r\n      lines: steps.length,\r\n      level: decisionSteps.length > 5 ? 'high' : decisionSteps.length > 2 ? 'medium' : 'low',\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Define algorithms\r\n   */\r\n  async defineAlgorithms(specification) {\r\n    const algorithms = [];\r\n    const requirements = specification.requirements || [];\r\n\r\n    // Search for algorithmic requirements\r\n    for (const requirement of requirements) {\r\n      const reqLower = requirement.toLowerCase();\r\n\r\n      if (\r\n        reqLower.includes('sort') ||\r\n        reqLower.includes('search') ||\r\n        reqLower.includes('optimize')\r\n      ) {\r\n        algorithms.push({\r\n          name: 'Search and Sort Algorithm',\r\n          purpose: 'Efficient data retrieval and ordering',\r\n          complexity: 'O(n log n)',\r\n          approach: 'Quick sort with binary search optimization',\r\n        });\r\n      }\r\n\r\n      if (reqLower.includes('cache') || reqLower.includes('performance')) {\r\n        algorithms.push({\r\n          name: 'Caching Algorithm',\r\n          purpose: 'Improve response time through intelligent caching',\r\n          complexity: 'O(1) average case',\r\n          approach: 'LRU cache with time-based expiration',\r\n        });\r\n      }\r\n\r\n      if (reqLower.includes('validate') || reqLower.includes('check')) {\r\n        algorithms.push({\r\n          name: 'Validation Algorithm',\r\n          purpose: 'Ensure data integrity and format compliance',\r\n          complexity: 'O(n)',\r\n          approach: 'Rule-based validation with early termination',\r\n        });\r\n      }\r\n    }\r\n\r\n    // Default algorithms for common patterns\r\n    if (algorithms.length === 0) {\r\n      algorithms.push({\r\n        name: 'Sequential Processing Algorithm',\r\n        purpose: 'Process operations in defined sequence',\r\n        complexity: 'O(n)',\r\n        approach: 'Linear processing with error handling',\r\n      });\r\n    }\r\n\r\n    return algorithms;\r\n  }\r\n\r\n  /**\r\n   * Define data structures\r\n   */\r\n  async defineDataStructures(specification) {\r\n    const dataStructures = [];\r\n    const requirements = specification.requirements || [];\r\n\r\n    // Analyze requirements for data structure needs\r\n    for (const requirement of requirements) {\r\n      const reqLower = requirement.toLowerCase();\r\n\r\n      if (\r\n        reqLower.includes('list') ||\r\n        reqLower.includes('array') ||\r\n        reqLower.includes('collection')\r\n      ) {\r\n        dataStructures.push({\r\n          name: 'Dynamic Array',\r\n          purpose: 'Store variable-length collections',\r\n          operations: ['add', 'remove', 'search', 'iterate'],\r\n          complexity: { access: 'O(1)', insertion: 'O(n)', deletion: 'O(n)' },\r\n        });\r\n      }\r\n\r\n      if (reqLower.includes('map') || reqLower.includes('dictionary') || reqLower.includes('key')) {\r\n        dataStructures.push({\r\n          name: 'Hash Map',\r\n          purpose: 'Key-value pair storage with fast lookup',\r\n          operations: ['put', 'get', 'remove', 'contains'],\r\n          complexity: { access: 'O(1)', insertion: 'O(1)', deletion: 'O(1)' },\r\n        });\r\n      }\r\n\r\n      if (reqLower.includes('queue') || reqLower.includes('fifo') || reqLower.includes('buffer')) {\r\n        dataStructures.push({\r\n          name: 'Queue',\r\n          purpose: 'First-in-first-out data processing',\r\n          operations: ['enqueue', 'dequeue', 'peek', 'isEmpty'],\r\n          complexity: { access: 'O(n)', insertion: 'O(1)', deletion: 'O(1)' },\r\n        });\r\n      }\r\n\r\n      if (reqLower.includes('stack') || reqLower.includes('lifo') || reqLower.includes('undo')) {\r\n        dataStructures.push({\r\n          name: 'Stack',\r\n          purpose: 'Last-in-first-out operations',\r\n          operations: ['push', 'pop', 'peek', 'isEmpty'],\r\n          complexity: { access: 'O(n)', insertion: 'O(1)', deletion: 'O(1)' },\r\n        });\r\n      }\r\n    }\r\n\r\n    // Default data structures\r\n    if (dataStructures.length === 0) {\r\n      dataStructures.push({\r\n        name: 'Object',\r\n        purpose: 'Basic data encapsulation',\r\n        operations: ['create', 'read', 'update', 'delete'],\r\n        complexity: { access: 'O(1)', insertion: 'O(1)', deletion: 'O(1)' },\r\n      });\r\n    }\r\n\r\n    return dataStructures;\r\n  }\r\n\r\n  /**\r\n   * Define interfaces\r\n   */\r\n  async defineInterfaces(specification) {\r\n    const interfaces = [];\r\n    const requirements = specification.requirements || [];\r\n\r\n    // API interfaces\r\n    if (requirements.some((req) => req.toLowerCase().includes('api'))) {\r\n      interfaces.push({\r\n        name: 'APIInterface',\r\n        type: 'REST API',\r\n        methods: [\r\n          {\r\n            name: 'GET',\r\n            purpose: 'Retrieve data',\r\n            parameters: ['id', 'filters'],\r\n            returns: 'data object',\r\n          },\r\n          {\r\n            name: 'POST',\r\n            purpose: 'Create new resource',\r\n            parameters: ['data'],\r\n            returns: 'created resource',\r\n          },\r\n          {\r\n            name: 'PUT',\r\n            purpose: 'Update existing resource',\r\n            parameters: ['id', 'data'],\r\n            returns: 'updated resource',\r\n          },\r\n          {\r\n            name: 'DELETE',\r\n            purpose: 'Remove resource',\r\n            parameters: ['id'],\r\n            returns: 'success status',\r\n          },\r\n        ],\r\n      });\r\n    }\r\n\r\n    // Database interfaces\r\n    if (requirements.some((req) => req.toLowerCase().includes('data'))) {\r\n      interfaces.push({\r\n        name: 'DatabaseInterface',\r\n        type: 'Data Access Layer',\r\n        methods: [\r\n          {\r\n            name: 'connect',\r\n            purpose: 'Establish connection',\r\n            parameters: ['config'],\r\n            returns: 'connection object',\r\n          },\r\n          {\r\n            name: 'query',\r\n            purpose: 'Execute query',\r\n            parameters: ['sql', 'params'],\r\n            returns: 'result set',\r\n          },\r\n          {\r\n            name: 'transaction',\r\n            purpose: 'Execute transaction',\r\n            parameters: ['operations'],\r\n            returns: 'transaction result',\r\n          },\r\n          { name: 'disconnect', purpose: 'Close connection', parameters: [], returns: 'void' },\r\n        ],\r\n      });\r\n    }\r\n\r\n    // Service interfaces\r\n    interfaces.push({\r\n      name: 'ServiceInterface',\r\n      type: 'Business Logic Layer',\r\n      methods: [\r\n        {\r\n          name: 'initialize',\r\n          purpose: 'Initialize service',\r\n          parameters: ['config'],\r\n          returns: 'service instance',\r\n        },\r\n        {\r\n          name: 'execute',\r\n          purpose: 'Execute main operation',\r\n          parameters: ['request'],\r\n          returns: 'response',\r\n        },\r\n        {\r\n          name: 'validate',\r\n          purpose: 'Validate input',\r\n          parameters: ['data'],\r\n          returns: 'validation result',\r\n        },\r\n        { name: 'cleanup', purpose: 'Clean up resources', parameters: [], returns: 'void' },\r\n      ],\r\n    });\r\n\r\n    return interfaces;\r\n  }\r\n\r\n  /**\r\n   * Map logic flow\r\n   */\r\n  async mapLogicFlow(specification) {\r\n    const logicFlow = [];\r\n    const requirements = specification.requirements || [];\r\n\r\n    // Main flow\r\n    logicFlow.push({\r\n      step: 1,\r\n      name: 'Initialization',\r\n      description: 'System startup and configuration',\r\n      inputs: ['configuration', 'environment variables'],\r\n      outputs: ['initialized system'],\r\n      conditions: ['valid configuration', 'available resources'],\r\n    });\r\n\r\n    // Process each requirement as a flow step\r\n    for (const [index, requirement] of requirements.entries()) {\r\n      logicFlow.push({\r\n        step: index + 2,\r\n        name: this.generateFunctionName(requirement),\r\n        description: requirement,\r\n        inputs: this.identifyInputs(requirement),\r\n        outputs: this.identifyOutputs(requirement),\r\n        conditions: this.identifyConditions(requirement),\r\n      });\r\n    }\r\n\r\n    // Final step\r\n    logicFlow.push({\r\n      step: requirements.length + 2,\r\n      name: 'Finalization',\r\n      description: 'Cleanup and result reporting',\r\n      inputs: ['execution results'],\r\n      outputs: ['final status', 'cleanup confirmation'],\r\n      conditions: ['all operations completed'],\r\n    });\r\n\r\n    return logicFlow;\r\n  }\r\n\r\n  /**\r\n   * Identify inputs for requirement\r\n   */\r\n  identifyInputs(requirement) {\r\n    const inputs = [];\r\n    const reqLower = requirement.toLowerCase();\r\n\r\n    if (reqLower.includes('api')) inputs.push('HTTP request', 'request parameters');\r\n    if (reqLower.includes('data')) inputs.push('data payload', 'database connection');\r\n    if (reqLower.includes('user')) inputs.push('user credentials', 'user input');\r\n    if (reqLower.includes('validate')) inputs.push('validation rules', 'input data');\r\n    if (reqLower.includes('authenticate')) inputs.push('authentication credentials');\r\n\r\n    return inputs.length > 0 ? inputs : ['system input'];\r\n  }\r\n\r\n  /**\r\n   * Identify outputs for requirement\r\n   */\r\n  identifyOutputs(requirement) {\r\n    const outputs = [];\r\n    const reqLower = requirement.toLowerCase();\r\n\r\n    if (reqLower.includes('api')) outputs.push('HTTP response', 'status code');\r\n    if (reqLower.includes('data')) outputs.push('processed data', 'transaction result');\r\n    if (reqLower.includes('validate')) outputs.push('validation result', 'error messages');\r\n    if (reqLower.includes('authenticate')) outputs.push('authentication token', 'user session');\r\n\r\n    return outputs.length > 0 ? outputs : ['operation result'];\r\n  }\r\n\r\n  /**\r\n   * Identify conditions for requirement\r\n   */\r\n  identifyConditions(requirement) {\r\n    const conditions = [];\r\n    const reqLower = requirement.toLowerCase();\r\n\r\n    if (reqLower.includes('validate')) conditions.push('data is valid', 'rules are satisfied');\r\n    if (reqLower.includes('authenticate')) conditions.push('credentials are valid', 'user exists');\r\n    if (reqLower.includes('data'))\r\n      conditions.push('database is available', 'data integrity maintained');\r\n    if (reqLower.includes('api'))\r\n      conditions.push('request format is valid', 'service is available');\r\n\r\n    return conditions.length > 0 ? conditions : ['preconditions met'];\r\n  }\r\n\r\n  /**\r\n   * Identify edge cases\r\n   */\r\n  async identifyEdgeCases(specification) {\r\n    const edgeCases = [];\r\n    const requirements = specification.requirements || [];\r\n\r\n    // Common edge cases\r\n    edgeCases.push({\r\n      case: 'Empty or null input',\r\n      description: 'System receives no input or null values',\r\n      handling: 'Validate inputs and return appropriate error messages',\r\n      severity: 'high',\r\n    });\r\n\r\n    edgeCases.push({\r\n      case: 'Network connectivity issues',\r\n      description: 'External services are unavailable',\r\n      handling: 'Implement retry logic with exponential backoff',\r\n      severity: 'medium',\r\n    });\r\n\r\n    edgeCases.push({\r\n      case: 'Concurrent access',\r\n      description: 'Multiple users access same resources simultaneously',\r\n      handling: 'Implement proper locking and transaction management',\r\n      severity: 'high',\r\n    });\r\n\r\n    edgeCases.push({\r\n      case: 'Resource exhaustion',\r\n      description: 'System runs out of memory or disk space',\r\n      handling: 'Monitor resources and implement graceful degradation',\r\n      severity: 'high',\r\n    });\r\n\r\n    // Requirement-specific edge cases\r\n    for (const requirement of requirements) {\r\n      const reqLower = requirement.toLowerCase();\r\n\r\n      if (reqLower.includes('api')) {\r\n        edgeCases.push({\r\n          case: 'API rate limiting',\r\n          description: 'Too many requests from single client',\r\n          handling: 'Implement rate limiting and throttling',\r\n          severity: 'medium',\r\n        });\r\n      }\r\n\r\n      if (reqLower.includes('data')) {\r\n        edgeCases.push({\r\n          case: 'Data corruption',\r\n          description: 'Database contains invalid or corrupted data',\r\n          handling: 'Implement data validation and recovery procedures',\r\n          severity: 'high',\r\n        });\r\n      }\r\n\r\n      if (reqLower.includes('authenticate')) {\r\n        edgeCases.push({\r\n          case: 'Authentication timeout',\r\n          description: 'User session expires during operation',\r\n          handling: 'Implement session refresh and re-authentication',\r\n          severity: 'medium',\r\n        });\r\n      }\r\n    }\r\n\r\n    return edgeCases;\r\n  }\r\n\r\n  /**\r\n   * Analyze complexity\r\n   */\r\n  async analyzeComplexity(pseudocode) {\r\n    const analysis = {\r\n      overall: 'medium',\r\n      functions: {},\r\n      recommendations: [],\r\n    };\r\n\r\n    let totalComplexity = 0;\r\n    let functionCount = 0;\r\n\r\n    for (const func of pseudocode) {\r\n      if (func.complexity) {\r\n        analysis.functions[func.function] = func.complexity;\r\n        totalComplexity += func.complexity.cyclomatic;\r\n        functionCount++;\r\n      }\r\n    }\r\n\r\n    const averageComplexity = functionCount > 0 ? totalComplexity / functionCount : 1;\r\n\r\n    if (averageComplexity > 10) {\r\n      analysis.overall = 'high';\r\n      analysis.recommendations.push('Consider breaking down complex functions');\r\n    } else if (averageComplexity > 5) {\r\n      analysis.overall = 'medium';\r\n      analysis.recommendations.push('Monitor function complexity during implementation');\r\n    } else {\r\n      analysis.overall = 'low';\r\n      analysis.recommendations.push('Complexity is manageable');\r\n    }\r\n\r\n    return analysis;\r\n  }\r\n\r\n  /**\r\n   * Identify dependencies\r\n   */\r\n  async identifyDependencies(specification) {\r\n    const dependencies = [];\r\n    const requirements = specification.requirements || [];\r\n\r\n    // Analyze requirements for dependencies\r\n    for (const requirement of requirements) {\r\n      const reqLower = requirement.toLowerCase();\r\n\r\n      if (reqLower.includes('api')) {\r\n        dependencies.push('HTTP client library');\r\n        dependencies.push('JSON parsing library');\r\n        dependencies.push('Authentication middleware');\r\n      }\r\n\r\n      if (reqLower.includes('data')) {\r\n        dependencies.push('Database driver');\r\n        dependencies.push('ORM or query builder');\r\n        dependencies.push('Connection pooling');\r\n      }\r\n\r\n      if (reqLower.includes('validate')) {\r\n        dependencies.push('Validation library');\r\n        dependencies.push('Schema definition');\r\n      }\r\n\r\n      if (reqLower.includes('test')) {\r\n        dependencies.push('Testing framework');\r\n        dependencies.push('Mocking library');\r\n      }\r\n    }\r\n\r\n    // Remove duplicates\r\n    return [...new Set(dependencies)];\r\n  }\r\n\r\n  /**\r\n   * Generate pseudocode document\r\n   */\r\n  async generatePseudocodeDocument(result) {\r\n    const document = `# ${this.taskDescription} - Pseudocode\r\n\r\n## Flow Diagram\r\n**Type**: ${result.flowDiagram.type}\r\n**Entry**: ${result.flowDiagram.entry}\r\n**Exit**: ${result.flowDiagram.exit}\r\n\r\n### Nodes\r\n${result.flowDiagram.nodes.map((node) => `- **${node.id}** (${node.type}): ${node.label}`).join('\\n')}\r\n\r\n### Edges\r\n${result.flowDiagram.edges.map((edge) => `- ${edge.from} â†’ ${edge.to} ${edge.label ? `(${edge.label})` : ''}`).join('\\n')}\r\n\r\n## Pseudocode\r\n\r\n${result.pseudocode\r\n  .map(\r\n    (func, index) => `\r\n### ${index + 1}. ${func.function}\r\n**Description**: ${func.description}\r\n**Complexity**: ${func.complexity ? `Cyclomatic: ${func.complexity.cyclomatic}, Lines: ${func.complexity.lines}` : 'N/A'}\r\n\r\n\\`\\`\\`\r\n${func.steps.join('\\n')}\r\n\\`\\`\\`\r\n`,\r\n  )\r\n  .join('\\n')}\r\n\r\n## Algorithms\r\n\r\n${result.algorithms\r\n  .map(\r\n    (algo, index) => `\r\n### ${index + 1}. ${algo.name}\r\n**Purpose**: ${algo.purpose}\r\n**Complexity**: ${algo.complexity}\r\n**Approach**: ${algo.approach}\r\n`,\r\n  )\r\n  .join('\\n')}\r\n\r\n## Data Structures\r\n\r\n${result.dataStructures\r\n  .map(\r\n    (ds, index) => `\r\n### ${index + 1}. ${ds.name}\r\n**Purpose**: ${ds.purpose}\r\n**Operations**: ${ds.operations.join(', ')}\r\n**Complexity**: Access: ${ds.complexity.access}, Insertion: ${ds.complexity.insertion}, Deletion: ${ds.complexity.deletion}\r\n`,\r\n  )\r\n  .join('\\n')}\r\n\r\n## Interfaces\r\n\r\n${result.interfaces\r\n  .map(\r\n    (iface, index) => `\r\n### ${index + 1}. ${iface.name}\r\n**Type**: ${iface.type}\r\n\r\n${iface.methods\r\n  .map(\r\n    (method) => `\r\n#### ${method.name}\r\n- **Purpose**: ${method.purpose}\r\n- **Parameters**: ${method.parameters.join(', ')}\r\n- **Returns**: ${method.returns}\r\n`,\r\n  )\r\n  .join('\\n')}\r\n`,\r\n  )\r\n  .join('\\n')}\r\n\r\n## Logic Flow\r\n\r\n${result.logicFlow\r\n  .map(\r\n    (step) => `\r\n### Step ${step.step}: ${step.name}\r\n**Description**: ${step.description}\r\n**Inputs**: ${step.inputs.join(', ')}\r\n**Outputs**: ${step.outputs.join(', ')}\r\n**Conditions**: ${step.conditions.join(', ')}\r\n`,\r\n  )\r\n  .join('\\n')}\r\n\r\n## Edge Cases\r\n\r\n${result.edgeCases\r\n  .map(\r\n    (edge, index) => `\r\n### ${index + 1}. ${edge.case}\r\n**Description**: ${edge.description}\r\n**Handling**: ${edge.handling}\r\n**Severity**: ${edge.severity}\r\n`,\r\n  )\r\n  .join('\\n')}\r\n\r\n## Complexity Analysis\r\n**Overall Complexity**: ${result.complexityAnalysis.overall}\r\n\r\n### Function Complexity\r\n${Object.entries(result.complexityAnalysis.functions || {})\r\n  .map(\r\n    ([func, complexity]) => `\r\n- **${func}**: Cyclomatic: ${complexity.cyclomatic}, Lines: ${complexity.lines}, Level: ${complexity.level}\r\n`,\r\n  )\r\n  .join('\\n')}\r\n\r\n### Recommendations\r\n${result.complexityAnalysis.recommendations.map((rec) => `- ${rec}`).join('\\n')}\r\n\r\n## Dependencies\r\n${result.dependencies.map((dep, index) => `${index + 1}. ${dep}`).join('\\n')}\r\n`;\r\n\r\n    // Save document\r\n    await this.saveArtifact('pseudocode.md', document);\r\n    return document;\r\n  }\r\n}\r\n\r\nexport default SparcPseudocode;\r\n"],"names":["SparcPhase","SparcPseudocode","taskDescription","options","flowDiagram","pseudocode","algorithms","dataStructures","interfaces","execute","console","log","initializePhase","result","logicFlow","edgeCases","complexityAnalysis","dependencies","specification","retrieveFromMemory","Error","generateFlowDiagram","generatePseudocode","defineAlgorithms","defineDataStructures","defineInterfaces","mapLogicFlow","identifyEdgeCases","analyzeComplexity","identifyDependencies","generatePseudocodeDocument","storeInMemory","error","message","title","nodes","edges","entry","exit","type","requirements","hasApiRequirements","some","req","toLowerCase","includes","hasUiRequirements","hasDataRequirements","generateApiFlowNodes","generateUiFlowNodes","generateDataFlowNodes","generateGeneralFlowNodes","generateFlowEdges","id","label","i","length","current","next","push","from","to","condition","errorNode","find","n","function","description","steps","index","requirement","entries","functionName","generateFunctionName","generatePseudocodeSteps","complexity","estimateComplexity","words","split","actionWords","filter","word","objectWords","action","object","reqLower","decisionSteps","step","operationSteps","cyclomatic","operations","lines","level","name","purpose","approach","access","insertion","deletion","methods","parameters","returns","inputs","outputs","conditions","identifyInputs","identifyOutputs","identifyConditions","case","handling","severity","analysis","overall","functions","recommendations","totalComplexity","functionCount","func","averageComplexity","Set","document","map","node","join","edge","algo","ds","iface","method","Object","rec","dep","saveArtifact"],"mappings":"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"}