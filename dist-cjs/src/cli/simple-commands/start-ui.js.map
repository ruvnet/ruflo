{"version":3,"sources":["../../../../src/cli/simple-commands/start-ui.js"],"sourcesContent":["// start-ui.js - Standalone UI launcher (Web UI by default)\r\nimport { printSuccess, printError, printWarning, printInfo } from '../utils.js';\r\nimport { compat } from '../runtime-detector.js';\r\n\r\nexport async function launchUI(args = []) {\r\n  try {\r\n    // Parse arguments\r\n    const portValue = getArgValue(args, '--port') || getArgValue(args, '-p');\r\n    const port = portValue ? parseInt(portValue) : 3000;\r\n\r\n    const terminal = args.includes('--terminal') || args.includes('-t');\r\n    const web = !terminal; // Default to web UI unless terminal is specified\r\n\r\n    if (web) {\r\n      // Launch Web UI\r\n      try {\r\n        const { ClaudeCodeWebServer } = await import('./web-server.js');\r\n        const webServer = new ClaudeCodeWebServer(port);\r\n        await webServer.start();\r\n\r\n        printSuccess('ðŸŒ Claude Flow Web UI is running!');\r\n        console.log(`ðŸ“ Open your browser to: http://localhost:${port}/console`);\r\n        console.log();\r\n        console.log('Features:');\r\n        console.log('  âœ¨ Access all 71+ MCP tools through the web interface');\r\n        console.log('  ðŸ“Š Real-time monitoring and analytics');\r\n        console.log('  ðŸ§  Neural network training and management');\r\n        console.log('  ðŸ”„ Workflow automation and SPARC modes');\r\n        console.log('  ðŸ™ GitHub integration and DAA management');\r\n        console.log();\r\n        console.log('Press Ctrl+C to stop the server');\r\n\r\n        // Open browser if possible\r\n        try {\r\n          const openCommand =\r\n            process.platform === 'darwin'\r\n              ? 'open'\r\n              : process.platform === 'win32'\r\n                ? 'start'\r\n                : 'xdg-open';\r\n\r\n          const { exec } = await import('child_process');\r\n          exec(`${openCommand} http://localhost:${port}/console`);\r\n        } catch {\r\n          // Browser opening failed, that's okay\r\n        }\r\n\r\n        // Handle shutdown\r\n        const shutdown = async () => {\r\n          console.log('\\n' + 'â¹ï¸  Shutting down Web UI...');\r\n          await webServer.stop();\r\n          printSuccess('âœ“ Shutdown complete');\r\n          process.exit(0);\r\n        };\r\n\r\n        process.on('SIGINT', shutdown);\r\n        process.on('SIGTERM', shutdown);\r\n\r\n        // Keep process alive\r\n        await new Promise(() => {});\r\n      } catch (err) {\r\n        printError(`Failed to launch Web UI: ${err.message}`);\r\n        console.error('Stack trace:', err.stack);\r\n        console.log();\r\n        printWarning('Falling back to terminal UI...');\r\n        // Fall back to terminal UI\r\n        await launchTerminalUI(port);\r\n      }\r\n    }\r\n\r\n    if (terminal) {\r\n      await launchTerminalUI(port);\r\n    }\r\n  } catch (err) {\r\n    printError(`Failed to launch UI: ${err.message}`);\r\n    console.error('Stack trace:', err.stack);\r\n  }\r\n}\r\n\r\nasync function launchTerminalUI(port) {\r\n  // Launch Terminal UI\r\n  try {\r\n    // Try enhanced UI first\r\n    const { launchEnhancedUI } = await import('./process-ui-enhanced.js');\r\n    await launchEnhancedUI();\r\n  } catch (err) {\r\n    // Try simple UI as fallback\r\n    try {\r\n      let ProcessManager, ProcessUI;\r\n      try {\r\n        // Try the compiled version first (for production/npm packages)\r\n        const pmModule = await import('../../../dist/cli/commands/start/process-manager.js');\r\n        const puiModule = await import('../../../dist/cli/commands/start/process-ui-simple.js');\r\n        ProcessManager = pmModule.ProcessManager;\r\n        ProcessUI = puiModule.ProcessUI;\r\n      } catch (distError) {\r\n        // If dist version not found, try TypeScript version (for development)\r\n        const pmModule = await import('../commands/start/process-manager.ts');\r\n        const puiModule = await import('../commands/start/process-ui-simple.ts');\r\n        ProcessManager = pmModule.ProcessManager;\r\n        ProcessUI = puiModule.ProcessUI;\r\n      }\r\n\r\n      printSuccess('ðŸš€ Claude-Flow Process Management UI');\r\n      console.log('â”€'.repeat(60));\r\n\r\n      // Initialize process manager\r\n      const processManager = new ProcessManager();\r\n      await processManager.initialize();\r\n\r\n      // Start the UI\r\n      const ui = new ProcessUI(processManager);\r\n      await ui.start();\r\n\r\n      // Cleanup on exit\r\n      await processManager.stopAll();\r\n      console.log();\r\n      printSuccess('âœ“ Shutdown complete');\r\n    } catch (fallbackErr) {\r\n      printError(`Failed to launch Terminal UI: ${fallbackErr.message}`);\r\n      console.error('Stack trace:', fallbackErr.stack);\r\n\r\n      // Final fallback\r\n      console.log();\r\n      printWarning('UI launch failed. Use these commands instead:');\r\n      console.log();\r\n      console.log('Process Management Commands:');\r\n      console.log('  â€¢ Start all: claude-flow start');\r\n      console.log('  â€¢ Check status: claude-flow status');\r\n      console.log('  â€¢ View logs: claude-flow logs');\r\n      console.log('  â€¢ Stop: claude-flow stop');\r\n    }\r\n  }\r\n}\r\n\r\nfunction getArgValue(args, flag) {\r\n  const index = args.indexOf(flag);\r\n  if (index !== -1 && index < args.length - 1) {\r\n    return args[index + 1];\r\n  }\r\n  return null;\r\n}\r\n\r\n// Run if called directly\r\nif (import.meta.main) {\r\n  await launchUI();\r\n}\r\n"],"names":["printSuccess","printError","printWarning","launchUI","args","portValue","getArgValue","port","parseInt","terminal","includes","web","ClaudeCodeWebServer","webServer","start","console","log","openCommand","process","platform","exec","shutdown","stop","exit","on","Promise","err","message","error","stack","launchTerminalUI","launchEnhancedUI","ProcessManager","ProcessUI","pmModule","puiModule","distError","repeat","processManager","initialize","ui","stopAll","fallbackErr","flag","index","indexOf","length","main"],"mappings":"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"}