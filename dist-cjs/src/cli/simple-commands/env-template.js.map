{"version":3,"sources":["../../../../src/cli/simple-commands/env-template.js"],"sourcesContent":["// env-template.js - Environment template generator\r\nimport { printSuccess, printError, printWarning } from '../utils.js';\r\nimport { existsSync } from 'fs';\r\nimport { promises as fs } from 'fs';\r\nimport path from 'path';\r\n\r\n/**\r\n * Generate .env template with configuration instructions\r\n */\r\nexport async function generateEnvTemplate(workingDir = process.cwd(), force = false) {\r\n  const envPath = path.join(workingDir, '.env');\r\n\r\n  // Check if .env already exists\r\n  if (existsSync(envPath) && !force) {\r\n    printWarning('‚ö†Ô∏è  .env file already exists');\r\n    console.log('Use --force to overwrite existing .env file');\r\n    return { exists: true, created: false };\r\n  }\r\n\r\n  const template = `# Agentic Flow Configuration\r\n# Generated by claude-flow init --env\r\n# Created: ${new Date().toISOString()}\r\n\r\n# ============================================\r\n# REQUIRED FOR REASONINGBANK MEMORY\r\n# ============================================\r\n# Without these, ReasoningBank will fall back to heuristic mode (regex matching)\r\n# For actual learning and memory consolidation, you MUST provide API keys\r\n\r\n# Anthropic API key for Claude models (sk-ant-...)\r\n# Get your key: https://console.anthropic.com/settings/keys\r\nANTHROPIC_API_KEY=\r\n\r\n# OpenRouter API key for alternative models (sk-or-v1-...)\r\n# Get your key: https://openrouter.ai/keys\r\n# Enables 99% cost savings with DeepSeek R1 for judge/distill\r\nOPENROUTER_API_KEY=\r\n\r\n# Google Gemini API key (optional, for free tier)\r\n# Get your key: https://aistudio.google.com/app/apikey\r\nGOOGLE_GEMINI_API_KEY=\r\n\r\n# ============================================\r\n# MODEL CONFIGURATION\r\n# ============================================\r\n# Default model for completions (Claude 3.5 Sonnet v2 - latest)\r\nCOMPLETION_MODEL=claude-3-5-sonnet-20241022\r\n\r\n# Default provider (anthropic, openrouter, onnx, gemini)\r\nPROVIDER=anthropic\r\n\r\n# ============================================\r\n# ADVANCED: REASONINGBANK COST OPTIMIZATION\r\n# ============================================\r\n# To use cheap models for memory operations (46% savings):\r\n# 1. Set OPENROUTER_API_KEY above\r\n# 2. Create .swarm/reasoningbank.yaml with:\r\n#\r\n# reasoningbank:\r\n#   judge:\r\n#     model: \"deepseek/deepseek-r1\"\r\n#     max_tokens: 512\r\n#     temperature: 0\r\n#   distill:\r\n#     model: \"deepseek/deepseek-r1\"\r\n#     max_tokens: 2048\r\n#     temperature: 0.3\r\n#   embeddings:\r\n#     provider: \"openrouter\"\r\n#     model: \"deepseek/deepseek-r1\"\r\n#     dimensions: 1024\r\n#\r\n# This keeps Claude for main work but uses DeepSeek for memory (99% cheaper)\r\n# Result: $0.37 ‚Üí $0.20 per task with memory (46% savings!)\r\n\r\n# ============================================\r\n# OPTIONAL API KEYS\r\n# ============================================\r\n# Perplexity API key (for GOAP search integration)\r\nPERPLEXITY_API_KEY=\r\n\r\n# Hugging Face API key (for ONNX models)\r\nHUGGINGFACE_API_KEY=\r\n\r\n# E2B API keys (for Flow Nexus sandbox deployment)\r\nE2B_API_KEY=\r\nE2B_ACCESS_TOKEN=\r\n\r\n# Supabase configuration (for Flow Nexus cloud features)\r\nSUPABASE_URL=\r\nSUPABASE_ANON_KEY=\r\nSUPABASE_ACCESS_TOKEN=\r\nSUPABASE_PROJECT_ID=\r\n\r\n# ============================================\r\n# WHAT HAPPENS WITHOUT .env?\r\n# ============================================\r\n# Without this file:\r\n# 1. No automatic environment variable loading\r\n# 2. ReasoningBank falls back to heuristic judgment (regex-based)\r\n# 3. No actual learning or memory consolidation\r\n# 4. Demo will appear to work but uses pattern matching only\r\n#\r\n# You can still work without .env by:\r\n# - Manually exporting environment variables\r\n# - Or passing inline with commands\r\n#\r\n# But using .env is recommended for convenience and security.\r\n\r\n# ============================================\r\n# SECURITY NOTES\r\n# ============================================\r\n# 1. NEVER commit this file to git (it's in .gitignore)\r\n# 2. Use different keys for dev/staging/production\r\n# 3. Rotate keys regularly\r\n# 4. Use key-specific permissions when possible\r\n`;\r\n\r\n  // Write template\r\n  try {\r\n    await fs.writeFile(envPath, template, 'utf8');\r\n    printSuccess('‚úÖ Created .env template file');\r\n    return { exists: false, created: true, path: envPath };\r\n  } catch (error) {\r\n    printError(`‚ùå Failed to create .env template: ${error.message}`);\r\n    return { exists: false, created: false, error: error.message };\r\n  }\r\n}\r\n\r\n/**\r\n * Check if .env exists and has required keys\r\n */\r\nexport async function checkEnvConfig(workingDir = process.cwd()) {\r\n  const envPath = path.join(workingDir, '.env');\r\n\r\n  if (!existsSync(envPath)) {\r\n    return {\r\n      exists: false,\r\n      hasApiKeys: false,\r\n      message: '.env file not found'\r\n    };\r\n  }\r\n\r\n  try {\r\n    const envContent = await fs.readFile(envPath, 'utf8');\r\n\r\n    // Check for API keys (not commented out and not empty)\r\n    const hasAnthropicKey = /^ANTHROPIC_API_KEY=[^\\s]+$/m.test(envContent);\r\n    const hasOpenRouterKey = /^OPENROUTER_API_KEY=[^\\s]+$/m.test(envContent);\r\n    const hasGeminiKey = /^GOOGLE_GEMINI_API_KEY=[^\\s]+$/m.test(envContent);\r\n\r\n    return {\r\n      exists: true,\r\n      hasApiKeys: hasAnthropicKey || hasOpenRouterKey || hasGeminiKey,\r\n      keys: {\r\n        anthropic: hasAnthropicKey,\r\n        openrouter: hasOpenRouterKey,\r\n        gemini: hasGeminiKey\r\n      },\r\n      message: 'Configuration found'\r\n    };\r\n  } catch (error) {\r\n    return {\r\n      exists: true,\r\n      hasApiKeys: false,\r\n      message: `Error reading .env: ${error.message}`\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * Show .env setup instructions\r\n */\r\nexport function showEnvSetupInstructions() {\r\n  console.log('\\nüìã Setting up .env for ReasoningBank capabilities:\\n');\r\n  console.log('1. Create .env file:');\r\n  console.log('   claude-flow init --env\\n');\r\n  console.log('2. Add your API keys to .env:');\r\n  console.log('   ANTHROPIC_API_KEY=sk-ant-...');\r\n  console.log('   OPENROUTER_API_KEY=sk-or-v1-...  # Optional: 99% cost savings\\n');\r\n  console.log('3. Get API keys:');\r\n  console.log('   ‚Ä¢ Anthropic: https://console.anthropic.com/settings/keys');\r\n  console.log('   ‚Ä¢ OpenRouter: https://openrouter.ai/keys (for cost optimization)\\n');\r\n  console.log('üí° Without API keys:');\r\n  console.log('   ‚Ä¢ ReasoningBank falls back to regex pattern matching (no learning)');\r\n  console.log('   ‚Ä¢ Memory operations will appear to work but won\\'t actually learn\\n');\r\n  console.log('üí∞ Cost optimization:');\r\n  console.log('   ‚Ä¢ Use OpenRouter + DeepSeek R1 for judge/distill (99% cheaper)');\r\n  console.log('   ‚Ä¢ See: docs/REASONINGBANK-COST-OPTIMIZATION.md\\n');\r\n}\r\n"],"names":["printSuccess","printError","printWarning","existsSync","promises","fs","path","generateEnvTemplate","workingDir","process","cwd","force","envPath","join","console","log","exists","created","template","Date","toISOString","writeFile","error","message","checkEnvConfig","hasApiKeys","envContent","readFile","hasAnthropicKey","test","hasOpenRouterKey","hasGeminiKey","keys","anthropic","openrouter","gemini","showEnvSetupInstructions"],"mappings":"AACA,SAASA,YAAY,EAAEC,UAAU,EAAEC,YAAY,QAAQ,cAAc;AACrE,SAASC,UAAU,QAAQ,KAAK;AAChC,SAASC,YAAYC,EAAE,QAAQ,KAAK;AACpC,OAAOC,UAAU,OAAO;AAKxB,OAAO,eAAeC,oBAAoBC,aAAaC,QAAQC,GAAG,EAAE,EAAEC,QAAQ,KAAK;IACjF,MAAMC,UAAUN,KAAKO,IAAI,CAACL,YAAY;IAGtC,IAAIL,WAAWS,YAAY,CAACD,OAAO;QACjCT,aAAa;QACbY,QAAQC,GAAG,CAAC;QACZ,OAAO;YAAEC,QAAQ;YAAMC,SAAS;QAAM;IACxC;IAEA,MAAMC,WAAW,CAAC;;WAET,EAAE,IAAIC,OAAOC,WAAW,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FtC,CAAC;IAGC,IAAI;QACF,MAAMf,GAAGgB,SAAS,CAACT,SAASM,UAAU;QACtClB,aAAa;QACb,OAAO;YAAEgB,QAAQ;YAAOC,SAAS;YAAMX,MAAMM;QAAQ;IACvD,EAAE,OAAOU,OAAO;QACdrB,WAAW,CAAC,kCAAkC,EAAEqB,MAAMC,OAAO,EAAE;QAC/D,OAAO;YAAEP,QAAQ;YAAOC,SAAS;YAAOK,OAAOA,MAAMC,OAAO;QAAC;IAC/D;AACF;AAKA,OAAO,eAAeC,eAAehB,aAAaC,QAAQC,GAAG,EAAE;IAC7D,MAAME,UAAUN,KAAKO,IAAI,CAACL,YAAY;IAEtC,IAAI,CAACL,WAAWS,UAAU;QACxB,OAAO;YACLI,QAAQ;YACRS,YAAY;YACZF,SAAS;QACX;IACF;IAEA,IAAI;QACF,MAAMG,aAAa,MAAMrB,GAAGsB,QAAQ,CAACf,SAAS;QAG9C,MAAMgB,kBAAkB,8BAA8BC,IAAI,CAACH;QAC3D,MAAMI,mBAAmB,+BAA+BD,IAAI,CAACH;QAC7D,MAAMK,eAAe,kCAAkCF,IAAI,CAACH;QAE5D,OAAO;YACLV,QAAQ;YACRS,YAAYG,mBAAmBE,oBAAoBC;YACnDC,MAAM;gBACJC,WAAWL;gBACXM,YAAYJ;gBACZK,QAAQJ;YACV;YACAR,SAAS;QACX;IACF,EAAE,OAAOD,OAAO;QACd,OAAO;YACLN,QAAQ;YACRS,YAAY;YACZF,SAAS,CAAC,oBAAoB,EAAED,MAAMC,OAAO,EAAE;QACjD;IACF;AACF;AAKA,OAAO,SAASa;IACdtB,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;IACZD,QAAQC,GAAG,CAAC;AACd"}