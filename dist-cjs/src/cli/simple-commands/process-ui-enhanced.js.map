{"version":3,"sources":["../../../../src/cli/simple-commands/process-ui-enhanced.js"],"sourcesContent":["// process-ui-enhanced.js - Enhanced process management UI with multiple views - v2.0.0-alpha.83\r\nimport { printSuccess, printError, printWarning, printInfo } from '../utils.js';\r\nimport { compat } from '../runtime-detector.js';\r\nimport SwarmWebUIIntegration from './swarm-webui-integration.js';\r\n\r\n// Simple color utilities\r\nconst colors = {\r\n  cyan: (text) => `\\x1b[36m${text}\\x1b[0m`,\r\n  gray: (text) => `\\x1b[90m${text}\\x1b[0m`,\r\n  white: (text) => `\\x1b[37m${text}\\x1b[0m`,\r\n  yellow: (text) => `\\x1b[33m${text}\\x1b[0m`,\r\n  green: (text) => `\\x1b[32m${text}\\x1b[0m`,\r\n  red: (text) => `\\x1b[31m${text}\\x1b[0m`,\r\n  blue: (text) => `\\x1b[34m${text}\\x1b[0m`,\r\n  magenta: (text) => `\\x1b[35m${text}\\x1b[0m`,\r\n  bold: (text) => `\\x1b[1m${text}\\x1b[0m`,\r\n  dim: (text) => `\\x1b[2m${text}\\x1b[0m`,\r\n};\r\n\r\nconst PROCESSES = [\r\n  { id: 'event-bus', name: 'Event Bus', description: 'Central event distribution system' },\r\n  { id: 'orchestrator', name: 'Orchestrator', description: 'Main coordination engine' },\r\n  { id: 'memory-manager', name: 'Memory Manager', description: 'Persistent memory system' },\r\n  { id: 'terminal-pool', name: 'Terminal Pool', description: 'Terminal session management' },\r\n  { id: 'mcp-server', name: 'MCP Server', description: 'Model Context Protocol server' },\r\n  { id: 'coordinator', name: 'Coordinator', description: 'Task coordination service' },\r\n];\r\n\r\n// View modes\r\nconst VIEWS = {\r\n  PROCESSES: 'processes',\r\n  STATUS: 'status',\r\n  ORCHESTRATION: 'orchestration',\r\n  MEMORY: 'memory',\r\n  LOGS: 'logs',\r\n  HELP: 'help',\r\n};\r\n\r\nexport class EnhancedProcessUI {\r\n  constructor() {\r\n    this.processes = new Map();\r\n    this.running = true;\r\n    this.selectedIndex = 0;\r\n    this.currentView = VIEWS.PROCESSES;\r\n    this.agents = [];\r\n    this.tasks = [];\r\n    this.memoryStats = {\r\n      totalEntries: 0,\r\n      totalSize: 0,\r\n      namespaces: [],\r\n    };\r\n    this.logs = [];\r\n    this.systemStats = {\r\n      uptime: 0,\r\n      totalTasks: 0,\r\n      completedTasks: 0,\r\n      activeAgents: 0,\r\n      memoryUsage: 0,\r\n      cpuUsage: 0,\r\n    };\r\n\r\n    // Initialize swarm integration\r\n    this.swarmIntegration = new SwarmWebUIIntegration(this);\r\n\r\n    // Initialize process states\r\n    PROCESSES.forEach((p) => {\r\n      this.processes.set(p.id, {\r\n        ...p,\r\n        status: 'stopped',\r\n        pid: null,\r\n        uptime: 0,\r\n        cpu: Math.random() * 5,\r\n        memory: Math.random() * 100,\r\n      });\r\n    });\r\n\r\n    // Start system uptime counter\r\n    setInterval(() => {\r\n      this.systemStats.uptime++;\r\n    }, 1000);\r\n\r\n    // Initialize swarm (this will create mock data)\r\n    this.initializeSwarm();\r\n  }\r\n\r\n  async initializeSwarm() {\r\n    // Initialize swarm with mock data\r\n    await this.swarmIntegration.initializeSwarm('hierarchical', 8);\r\n\r\n    // Mock memory namespaces\r\n    this.memoryStats = {\r\n      totalEntries: 42,\r\n      totalSize: '156.3 KB',\r\n      namespaces: [\r\n        { name: 'sparc', entries: 15, size: '45.2 KB' },\r\n        { name: 'agents', entries: 12, size: '38.7 KB' },\r\n        { name: 'tasks', entries: 8, size: '24.1 KB' },\r\n        { name: 'system', entries: 7, size: '48.3 KB' },\r\n      ],\r\n    };\r\n\r\n    // Initial logs\r\n    this.logs = [\r\n      { time: new Date(), level: 'info', message: 'System initialized' },\r\n      { time: new Date(), level: 'success', message: 'All processes ready' },\r\n      { time: new Date(), level: 'success', message: 'Swarm orchestration active' },\r\n    ];\r\n  }\r\n\r\n  async start() {\r\n    // Clear screen\r\n    console.clear();\r\n\r\n    // Show welcome\r\n    printSuccess('ðŸ§  Claude-Flow Process Management UI v2.7.0-alpha.14-alpha.80');\r\n    console.log('â”€'.repeat(80));\r\n    console.log();\r\n\r\n    // Initial render\r\n    this.render();\r\n\r\n    // Main UI loop\r\n    while (this.running) {\r\n      await this.handleInput();\r\n      if (this.running) {\r\n        this.render();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // Clear screen and move cursor to top\r\n    console.log('\\x1b[2J\\x1b[H');\r\n\r\n    // Header with navigation\r\n    this.renderHeader();\r\n\r\n    // Main content based on current view\r\n    switch (this.currentView) {\r\n      case VIEWS.PROCESSES:\r\n        this.renderProcessView();\r\n        break;\r\n      case VIEWS.STATUS:\r\n        this.renderStatusView();\r\n        break;\r\n      case VIEWS.ORCHESTRATION:\r\n        this.renderOrchestrationView();\r\n        break;\r\n      case VIEWS.MEMORY:\r\n        this.renderMemoryView();\r\n        break;\r\n      case VIEWS.LOGS:\r\n        this.renderLogsView();\r\n        break;\r\n      case VIEWS.HELP:\r\n        this.renderHelpView();\r\n        break;\r\n    }\r\n\r\n    // Footer with controls\r\n    this.renderFooter();\r\n  }\r\n\r\n  renderHeader() {\r\n    console.log(colors.cyan(colors.bold('ðŸ§  Claude-Flow Process Manager')));\r\n    console.log(colors.gray('â”€'.repeat(80)));\r\n\r\n    // Navigation tabs\r\n    const tabs = [\r\n      { key: '1', view: VIEWS.PROCESSES, label: 'Processes' },\r\n      { key: '2', view: VIEWS.STATUS, label: 'Status' },\r\n      { key: '3', view: VIEWS.ORCHESTRATION, label: 'Orchestration' },\r\n      { key: '4', view: VIEWS.MEMORY, label: 'Memory' },\r\n      { key: '5', view: VIEWS.LOGS, label: 'Logs' },\r\n      { key: '6', view: VIEWS.HELP, label: 'Help' },\r\n    ];\r\n\r\n    let tabLine = '';\r\n    tabs.forEach((tab) => {\r\n      const isActive = this.currentView === tab.view;\r\n      const label = isActive ? colors.yellow(`[${tab.label}]`) : colors.gray(`${tab.label}`);\r\n      tabLine += `  ${colors.bold(tab.key)}:${label}`;\r\n    });\r\n\r\n    console.log(tabLine);\r\n    console.log(colors.gray('â”€'.repeat(80)));\r\n    console.log();\r\n  }\r\n\r\n  renderProcessView() {\r\n    console.log(colors.white(colors.bold('Process Management')));\r\n    console.log();\r\n\r\n    let index = 0;\r\n    for (const [id, process] of this.processes) {\r\n      const selected = index === this.selectedIndex;\r\n      const prefix = selected ? colors.yellow('â–¶ ') : '  ';\r\n      const status = this.getStatusIcon(process.status);\r\n      const name = selected ? colors.yellow(process.name) : colors.white(process.name);\r\n\r\n      console.log(`${prefix}${status} ${name}`);\r\n      console.log(`     ${colors.gray(process.description)}`);\r\n\r\n      if (process.status === 'running') {\r\n        const stats = colors.dim(\r\n          `PID: ${process.pid} | Uptime: ${this.formatUptime(process.uptime)} | CPU: ${process.cpu.toFixed(1)}% | Mem: ${process.memory.toFixed(0)}MB`,\r\n        );\r\n        console.log(`     ${stats}`);\r\n      }\r\n      console.log();\r\n\r\n      index++;\r\n    }\r\n\r\n    // Quick stats\r\n    const running = Array.from(this.processes.values()).filter(\r\n      (p) => p.status === 'running',\r\n    ).length;\r\n    console.log(colors.gray('â”€'.repeat(80)));\r\n    console.log(\r\n      colors.white(\r\n        `Total: ${this.processes.size} | Running: ${colors.green(running)} | Stopped: ${colors.gray(this.processes.size - running)}`,\r\n      ),\r\n    );\r\n  }\r\n\r\n  renderStatusView() {\r\n    console.log(colors.white(colors.bold('System Status')));\r\n    console.log();\r\n\r\n    // System overview\r\n    console.log(colors.cyan('ðŸ“Š System Overview'));\r\n    console.log(`  Uptime: ${colors.green(this.formatUptime(this.systemStats.uptime))}`);\r\n    console.log(`  Process Health: ${this.getHealthBar()}`);\r\n    console.log();\r\n\r\n    // Resource usage\r\n    console.log(colors.cyan('ðŸ’» Resource Usage'));\r\n    console.log(\r\n      `  CPU Usage: ${this.getUsageBar(this.systemStats.cpuUsage, 100)} ${this.systemStats.cpuUsage}%`,\r\n    );\r\n    console.log(\r\n      `  Memory: ${this.getUsageBar(this.systemStats.memoryUsage, 100)} ${this.systemStats.memoryUsage}%`,\r\n    );\r\n    console.log();\r\n\r\n    // Activity metrics\r\n    console.log(colors.cyan('ðŸ“ˆ Activity Metrics'));\r\n    console.log(\r\n      `  Active Agents: ${colors.yellow(this.agents.filter((a) => a.status === 'working').length)}/${this.agents.length}`,\r\n    );\r\n    console.log(`  Total Tasks: ${this.tasks.length}`);\r\n    console.log(\r\n      `  Completed: ${colors.green(this.tasks.filter((t) => t.status === 'completed').length)}`,\r\n    );\r\n    console.log(\r\n      `  In Progress: ${colors.yellow(this.tasks.filter((t) => t.status === 'in_progress').length)}`,\r\n    );\r\n    console.log(\r\n      `  Pending: ${colors.gray(this.tasks.filter((t) => t.status === 'pending').length)}`,\r\n    );\r\n    console.log();\r\n\r\n    // Recent events\r\n    console.log(colors.cyan('ðŸ”” Recent Events'));\r\n    this.logs.slice(-3).forEach((log) => {\r\n      const time = log.time.toLocaleTimeString();\r\n      const icon = log.level === 'success' ? 'âœ“' : log.level === 'warning' ? 'âš ' : 'â„¹';\r\n      const color =\r\n        log.level === 'success'\r\n          ? colors.green\r\n          : log.level === 'warning'\r\n            ? colors.yellow\r\n            : colors.blue;\r\n      console.log(`  ${colors.gray(time)} ${color(icon)} ${log.message}`);\r\n    });\r\n  }\r\n\r\n  renderOrchestrationView() {\r\n    console.log(colors.white(colors.bold('Swarm Orchestration Management')));\r\n    console.log();\r\n\r\n    // Swarm metrics\r\n    const metrics = this.swarmIntegration.getSwarmMetrics();\r\n    if (metrics) {\r\n      console.log(colors.cyan('ðŸ Swarm Status'));\r\n      console.log(`  Swarm ID: ${colors.yellow(metrics.swarmId)}`);\r\n      console.log(\r\n        `  Agents: ${colors.green(metrics.agents.active)}/${metrics.agents.total} active`,\r\n      );\r\n      console.log(\r\n        `  Tasks: ${colors.yellow(metrics.tasks.inProgress)} in progress, ${colors.green(metrics.tasks.completed)} completed`,\r\n      );\r\n      console.log(`  Efficiency: ${metrics.efficiency}%`);\r\n      console.log();\r\n    }\r\n\r\n    // Agents section\r\n    console.log(colors.cyan('ðŸ¤– Active Agents'));\r\n    console.log();\r\n    this.agents.forEach((agent, index) => {\r\n      const selected = this.currentView === VIEWS.ORCHESTRATION && index === this.selectedIndex;\r\n      const prefix = selected ? colors.yellow('â–¶ ') : '  ';\r\n      const statusIcon = agent.status === 'working' ? colors.green('â—') : colors.gray('â—‹');\r\n      const name = selected ? colors.yellow(agent.name) : colors.white(agent.name);\r\n\r\n      console.log(`${prefix}${statusIcon} ${name} (${agent.type})`);\r\n      console.log(`     ID: ${agent.id} | Tasks: ${agent.tasks} | Status: ${agent.status}`);\r\n      if (agent.capabilities && agent.capabilities.length > 0) {\r\n        console.log(`     Capabilities: ${colors.dim(agent.capabilities.join(', '))}`);\r\n      }\r\n      console.log();\r\n    });\r\n\r\n    console.log(colors.gray('â”€'.repeat(40)));\r\n\r\n    // Tasks section\r\n    console.log(colors.cyan('ðŸ“‹ Task Queue'));\r\n    console.log();\r\n    this.tasks.slice(0, 5).forEach((task) => {\r\n      const statusColor =\r\n        task.status === 'completed'\r\n          ? colors.green\r\n          : task.status === 'in_progress'\r\n            ? colors.yellow\r\n            : colors.gray;\r\n      const status = statusColor(`[${task.status}]`);\r\n      const priority =\r\n        task.priority === 'high'\r\n          ? colors.red(`[${task.priority}]`)\r\n          : task.priority === 'medium'\r\n            ? colors.yellow(`[${task.priority}]`)\r\n            : colors.gray(`[${task.priority}]`);\r\n      console.log(`  ${status} ${priority} ${task.description}`);\r\n      if (task.assignedTo) {\r\n        const agent = this.agents.find((a) => a.id === task.assignedTo);\r\n        console.log(`       Assigned to: ${agent ? agent.name : task.assignedTo}`);\r\n      }\r\n    });\r\n\r\n    if (this.tasks.length > 5) {\r\n      console.log(colors.gray(`  ... and ${this.tasks.length - 5} more tasks`));\r\n    }\r\n  }\r\n\r\n  renderMemoryView() {\r\n    console.log(colors.white(colors.bold('Memory Bank Management')));\r\n    console.log();\r\n\r\n    // Overview\r\n    console.log(colors.cyan('ðŸ’¾ Memory Overview'));\r\n    console.log(`  Total Entries: ${colors.yellow(this.memoryStats.totalEntries)}`);\r\n    console.log(`  Total Size: ${colors.yellow(this.memoryStats.totalSize)}`);\r\n    console.log();\r\n\r\n    // Namespaces\r\n    console.log(colors.cyan('ðŸ“ Namespaces'));\r\n    console.log();\r\n    this.memoryStats.namespaces.forEach((ns, index) => {\r\n      const selected = this.currentView === VIEWS.MEMORY && index === this.selectedIndex;\r\n      const prefix = selected ? colors.yellow('â–¶ ') : '  ';\r\n      const name = selected ? colors.yellow(ns.name) : colors.white(ns.name);\r\n\r\n      console.log(`${prefix}${name}`);\r\n      console.log(`     Entries: ${ns.entries} | Size: ${ns.size}`);\r\n      console.log();\r\n    });\r\n\r\n    // Recent operations\r\n    console.log(colors.gray('â”€'.repeat(40)));\r\n    console.log(colors.cyan('ðŸ”„ Recent Operations'));\r\n    console.log(`  ${colors.green('âœ“')} Stored: config.api.key`);\r\n    console.log(`  ${colors.blue('â†“')} Retrieved: sparc.modes`);\r\n    console.log(`  ${colors.yellow('âœŽ')} Updated: agent.status`);\r\n  }\r\n\r\n  renderLogsView() {\r\n    console.log(colors.white(colors.bold('System Logs')));\r\n    console.log();\r\n\r\n    // Log filters\r\n    console.log(colors.cyan('ðŸ” Filters: ') + colors.gray('[A]ll [I]nfo [W]arning [E]rror'));\r\n    console.log(colors.gray('â”€'.repeat(80)));\r\n    console.log();\r\n\r\n    // Display logs\r\n    const displayLogs = this.logs.slice(-15);\r\n    displayLogs.forEach((log) => {\r\n      const time = log.time.toLocaleTimeString();\r\n      let icon, color;\r\n\r\n      switch (log.level) {\r\n        case 'success':\r\n          icon = 'âœ“';\r\n          color = colors.green;\r\n          break;\r\n        case 'warning':\r\n          icon = 'âš ';\r\n          color = colors.yellow;\r\n          break;\r\n        case 'error':\r\n          icon = 'âœ—';\r\n          color = colors.red;\r\n          break;\r\n        default:\r\n          icon = 'â„¹';\r\n          color = colors.blue;\r\n      }\r\n\r\n      console.log(`${colors.gray(time)} ${color(icon)} ${log.message}`);\r\n    });\r\n\r\n    if (this.logs.length > 15) {\r\n      console.log();\r\n      console.log(colors.gray(`Showing last 15 of ${this.logs.length} logs`));\r\n    }\r\n  }\r\n\r\n  renderHelpView() {\r\n    console.log(colors.white(colors.bold('Help & Documentation')));\r\n    console.log();\r\n\r\n    console.log(colors.cyan('ðŸŽ¯ Navigation'));\r\n    console.log(`  ${colors.yellow('1-6')}     Switch between views`);\r\n    console.log(`  ${colors.yellow('Tab')}     Cycle through views`);\r\n    console.log(`  ${colors.yellow('â†‘/â†“')}     Navigate items (when available)`);\r\n    console.log();\r\n\r\n    console.log(colors.cyan('âš¡ Process Controls'));\r\n    console.log(`  ${colors.yellow('Space')}   Toggle selected process`);\r\n    console.log(`  ${colors.yellow('A')}       Start all processes`);\r\n    console.log(`  ${colors.yellow('Z')}       Stop all processes`);\r\n    console.log(`  ${colors.yellow('R')}       Restart all processes`);\r\n    console.log();\r\n\r\n    console.log(colors.cyan('ðŸ¤– Swarm Orchestration'));\r\n    console.log(`  ${colors.yellow('N')}       Spawn new agent`);\r\n    console.log(`  ${colors.yellow('T')}       Create new task`);\r\n    console.log(`  ${colors.yellow('D')}       Complete task`);\r\n    console.log(`  ${colors.yellow('S')}       Show swarm metrics`);\r\n    console.log();\r\n\r\n    console.log(colors.cyan('ðŸ’¾ Memory Operations'));\r\n    console.log(`  ${colors.yellow('S')}       Store new entry`);\r\n    console.log(`  ${colors.yellow('G')}       Get/search entries`);\r\n    console.log(`  ${colors.yellow('C')}       Clear namespace`);\r\n    console.log();\r\n\r\n    console.log(colors.cyan('ðŸ”§ Other'));\r\n    console.log(`  ${colors.yellow('L')}       Clear logs`);\r\n    console.log(`  ${colors.yellow('H/?')}     Show this help`);\r\n    console.log(`  ${colors.yellow('Q')}       Quit`);\r\n  }\r\n\r\n  renderFooter() {\r\n    console.log();\r\n    console.log(colors.gray('â”€'.repeat(80)));\r\n\r\n    // Context-sensitive controls\r\n    let controls = '';\r\n    switch (this.currentView) {\r\n      case VIEWS.PROCESSES:\r\n        controls = `${colors.yellow('Space')} Toggle | ${colors.yellow('A')} Start All | ${colors.yellow('Z')} Stop All | ${colors.yellow('R')} Restart`;\r\n        break;\r\n      case VIEWS.ORCHESTRATION:\r\n        controls = `${colors.yellow('N')} New Agent | ${colors.yellow('T')} New Task | ${colors.yellow('D')} Complete | ${colors.yellow('S')} Metrics`;\r\n        break;\r\n      case VIEWS.MEMORY:\r\n        controls = `${colors.yellow('S')} Store | ${colors.yellow('G')} Get | ${colors.yellow('C')} Clear`;\r\n        break;\r\n      case VIEWS.LOGS:\r\n        controls = `${colors.yellow('L')} Clear | ${colors.yellow('F')} Filter`;\r\n        break;\r\n      default:\r\n        controls = `${colors.yellow('Tab')} Next View | ${colors.yellow('?')} Help`;\r\n    }\r\n\r\n    console.log(`${controls} | ${colors.yellow('Q')} Quit`);\r\n    console.log(colors.gray('â”€'.repeat(80)));\r\n  }\r\n\r\n  getStatusIcon(status) {\r\n    switch (status) {\r\n      case 'running':\r\n        return colors.green('â—');\r\n      case 'stopped':\r\n        return colors.gray('â—‹');\r\n      case 'error':\r\n        return colors.red('âœ—');\r\n      case 'starting':\r\n        return colors.yellow('â—');\r\n      default:\r\n        return colors.gray('?');\r\n    }\r\n  }\r\n\r\n  getHealthBar() {\r\n    const running = Array.from(this.processes.values()).filter(\r\n      (p) => p.status === 'running',\r\n    ).length;\r\n    const total = this.processes.size;\r\n    const percentage = (running / total) * 100;\r\n    const filled = Math.round(percentage / 10);\r\n    const bar = 'â–ˆ'.repeat(filled) + 'â–‘'.repeat(10 - filled);\r\n    const color = percentage >= 80 ? colors.green : percentage >= 50 ? colors.yellow : colors.red;\r\n    return color(bar) + ` ${percentage.toFixed(0)}%`;\r\n  }\r\n\r\n  getUsageBar(value, max) {\r\n    const percentage = (value / max) * 100;\r\n    const filled = Math.round(percentage / 10);\r\n    const bar = 'â–“'.repeat(filled) + 'â–‘'.repeat(10 - filled);\r\n    const color = percentage >= 80 ? colors.red : percentage >= 50 ? colors.yellow : colors.green;\r\n    return color(bar);\r\n  }\r\n\r\n  formatUptime(seconds) {\r\n    if (seconds < 60) return `${seconds}s`;\r\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m ${seconds % 60}s`;\r\n    const hours = Math.floor(seconds / 3600);\r\n    const minutes = Math.floor((seconds % 3600) / 60);\r\n    return `${hours}h ${minutes}m`;\r\n  }\r\n\r\n  async handleInput() {\r\n    const terminal = compat.terminal;\r\n\r\n    await terminal.write('\\nCommand: ');\r\n\r\n    const buf = new Uint8Array(1024);\r\n    const n = await terminal.read(buf);\r\n    if (n === null) return;\r\n\r\n    const rawInput = terminal.decoder.decode(buf.subarray(0, n)).trim();\r\n    const input = rawInput.split('\\n')[0].toLowerCase();\r\n\r\n    // Global commands\r\n    switch (input) {\r\n      case 'q':\r\n      case 'quit':\r\n        this.running = false;\r\n        console.clear();\r\n        printSuccess('Goodbye!');\r\n        compat.terminal.exit(0);\r\n        break;\r\n\r\n      case '1':\r\n        this.currentView = VIEWS.PROCESSES;\r\n        this.selectedIndex = 0;\r\n        break;\r\n\r\n      case '2':\r\n        this.currentView = VIEWS.STATUS;\r\n        this.selectedIndex = 0;\r\n        break;\r\n\r\n      case '3':\r\n        this.currentView = VIEWS.ORCHESTRATION;\r\n        this.selectedIndex = 0;\r\n        break;\r\n\r\n      case '4':\r\n        this.currentView = VIEWS.MEMORY;\r\n        this.selectedIndex = 0;\r\n        break;\r\n\r\n      case '5':\r\n        this.currentView = VIEWS.LOGS;\r\n        this.selectedIndex = 0;\r\n        break;\r\n\r\n      case '6':\r\n      case '?':\r\n      case 'h':\r\n      case 'help':\r\n        this.currentView = VIEWS.HELP;\r\n        break;\r\n\r\n      case 'tab':\r\n      case '\\t':\r\n        // Cycle through views\r\n        const viewKeys = Object.values(VIEWS);\r\n        const currentIndex = viewKeys.indexOf(this.currentView);\r\n        this.currentView = viewKeys[(currentIndex + 1) % viewKeys.length];\r\n        this.selectedIndex = 0;\r\n        break;\r\n\r\n      default:\r\n        // View-specific commands\r\n        await this.handleViewSpecificInput(input);\r\n    }\r\n\r\n    // Update system stats\r\n    this.updateSystemStats();\r\n  }\r\n\r\n  async handleViewSpecificInput(input) {\r\n    switch (this.currentView) {\r\n      case VIEWS.PROCESSES:\r\n        await this.handleProcessInput(input);\r\n        break;\r\n      case VIEWS.ORCHESTRATION:\r\n        await this.handleOrchestrationInput(input);\r\n        break;\r\n      case VIEWS.MEMORY:\r\n        await this.handleMemoryInput(input);\r\n        break;\r\n      case VIEWS.LOGS:\r\n        await this.handleLogsInput(input);\r\n        break;\r\n    }\r\n  }\r\n\r\n  async handleProcessInput(input) {\r\n    switch (input) {\r\n      case 'a':\r\n        await this.startAll();\r\n        break;\r\n\r\n      case 'z':\r\n        await this.stopAll();\r\n        break;\r\n\r\n      case 'r':\r\n        await this.restartAll();\r\n        break;\r\n\r\n      case ' ':\r\n      case 'space':\r\n      case 'enter':\r\n      case '':\r\n        await this.toggleSelected();\r\n        break;\r\n\r\n      case 'up':\r\n      case 'k':\r\n        this.selectedIndex = Math.max(0, this.selectedIndex - 1);\r\n        break;\r\n\r\n      case 'down':\r\n      case 'j':\r\n        this.selectedIndex = Math.min(this.processes.size - 1, this.selectedIndex + 1);\r\n        break;\r\n    }\r\n  }\r\n\r\n  async handleOrchestrationInput(input) {\r\n    switch (input) {\r\n      case 'n':\r\n        // Spawn new agent\r\n        const agentTypes = ['researcher', 'coder', 'analyst', 'coordinator', 'tester'];\r\n        const randomType = agentTypes[Math.floor(Math.random() * agentTypes.length)];\r\n        await this.swarmIntegration.spawnAgent(randomType);\r\n        break;\r\n\r\n      case 't':\r\n        // Create new task\r\n        const sampleTasks = [\r\n          'Implement new feature',\r\n          'Fix critical bug',\r\n          'Optimize performance',\r\n          'Update documentation',\r\n          'Review code quality',\r\n        ];\r\n        const randomTask = sampleTasks[Math.floor(Math.random() * sampleTasks.length)];\r\n        await this.swarmIntegration.createTask(randomTask, 'medium');\r\n        break;\r\n\r\n      case 'd':\r\n        // Complete selected task (simulate)\r\n        if (this.tasks.length > 0) {\r\n          const pendingTasks = this.tasks.filter((t) => t.status === 'in_progress');\r\n          if (pendingTasks.length > 0) {\r\n            const taskToComplete = pendingTasks[0];\r\n            await this.swarmIntegration.completeTask(taskToComplete.id);\r\n          } else {\r\n            this.addLog('info', 'No in-progress tasks to complete');\r\n          }\r\n        }\r\n        break;\r\n\r\n      case 's':\r\n        // Show swarm metrics\r\n        const metrics = this.swarmIntegration.getSwarmMetrics();\r\n        if (metrics) {\r\n          this.addLog(\r\n            'info',\r\n            `Swarm efficiency: ${metrics.efficiency}% (${metrics.tasks.completed}/${metrics.tasks.total} tasks completed)`,\r\n          );\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  async handleMemoryInput(input) {\r\n    switch (input) {\r\n      case 's':\r\n        this.addLog('info', 'Memory storage not yet implemented');\r\n        break;\r\n\r\n      case 'g':\r\n        this.addLog('info', 'Memory retrieval not yet implemented');\r\n        break;\r\n\r\n      case 'c':\r\n        this.addLog('warning', 'Memory clearing not yet implemented');\r\n        break;\r\n    }\r\n  }\r\n\r\n  async handleLogsInput(input) {\r\n    switch (input) {\r\n      case 'l':\r\n        this.logs = [];\r\n        this.addLog('info', 'Logs cleared');\r\n        break;\r\n\r\n      case 'f':\r\n        this.addLog('info', 'Log filtering not yet implemented');\r\n        break;\r\n    }\r\n  }\r\n\r\n  addLog(level, message) {\r\n    this.logs.push({\r\n      time: new Date(),\r\n      level,\r\n      message,\r\n    });\r\n  }\r\n\r\n  updateSystemStats() {\r\n    // Update random stats for demo\r\n    this.systemStats.cpuUsage = Math.min(\r\n      100,\r\n      Math.max(0, this.systemStats.cpuUsage + (Math.random() - 0.5) * 10),\r\n    );\r\n    this.systemStats.memoryUsage = Math.min(\r\n      100,\r\n      Math.max(0, this.systemStats.memoryUsage + (Math.random() - 0.5) * 5),\r\n    );\r\n\r\n    // Update process stats\r\n    for (const [id, process] of this.processes) {\r\n      if (process.status === 'running') {\r\n        process.uptime++;\r\n        process.cpu = Math.min(100, Math.max(0, process.cpu + (Math.random() - 0.5) * 2));\r\n        process.memory = Math.min(200, Math.max(10, process.memory + (Math.random() - 0.5) * 5));\r\n      }\r\n    }\r\n  }\r\n\r\n  async toggleSelected() {\r\n    const process = Array.from(this.processes.values())[this.selectedIndex];\r\n    if (process.status === 'stopped') {\r\n      await this.startProcess(process.id);\r\n    } else {\r\n      await this.stopProcess(process.id);\r\n    }\r\n  }\r\n\r\n  async startProcess(id) {\r\n    const process = this.processes.get(id);\r\n    if (!process) return;\r\n\r\n    this.addLog('info', `Starting ${process.name}...`);\r\n    process.status = 'starting';\r\n\r\n    await new Promise((resolve) => setTimeout(resolve, 500));\r\n\r\n    process.status = 'running';\r\n    process.pid = Math.floor(Math.random() * 10000) + 1000;\r\n    process.uptime = 0;\r\n\r\n    this.addLog('success', `${process.name} started successfully`);\r\n  }\r\n\r\n  async stopProcess(id) {\r\n    const process = this.processes.get(id);\r\n    if (!process) return;\r\n\r\n    this.addLog('info', `Stopping ${process.name}...`);\r\n    process.status = 'stopped';\r\n    process.pid = null;\r\n    process.uptime = 0;\r\n\r\n    await new Promise((resolve) => setTimeout(resolve, 300));\r\n    this.addLog('success', `${process.name} stopped`);\r\n  }\r\n\r\n  async startAll() {\r\n    this.addLog('info', 'Starting all processes...');\r\n    for (const [id, process] of this.processes) {\r\n      if (process.status === 'stopped') {\r\n        await this.startProcess(id);\r\n      }\r\n    }\r\n    this.addLog('success', 'All processes started');\r\n  }\r\n\r\n  async stopAll() {\r\n    this.addLog('info', 'Stopping all processes...');\r\n    for (const [id, process] of this.processes) {\r\n      if (process.status === 'running') {\r\n        await this.stopProcess(id);\r\n      }\r\n    }\r\n    this.addLog('success', 'All processes stopped');\r\n  }\r\n\r\n  async restartAll() {\r\n    await this.stopAll();\r\n    await new Promise((resolve) => setTimeout(resolve, 500));\r\n    await this.startAll();\r\n  }\r\n}\r\n\r\nexport async function launchEnhancedUI() {\r\n  const ui = new EnhancedProcessUI();\r\n  await ui.start();\r\n}\r\n"],"names":["printSuccess","compat","SwarmWebUIIntegration","colors","cyan","text","gray","white","yellow","green","red","blue","magenta","bold","dim","PROCESSES","id","name","description","VIEWS","STATUS","ORCHESTRATION","MEMORY","LOGS","HELP","EnhancedProcessUI","processes","Map","running","selectedIndex","currentView","agents","tasks","memoryStats","totalEntries","totalSize","namespaces","logs","systemStats","uptime","totalTasks","completedTasks","activeAgents","memoryUsage","cpuUsage","swarmIntegration","forEach","p","set","status","pid","cpu","Math","random","memory","setInterval","initializeSwarm","entries","size","time","Date","level","message","start","console","clear","log","repeat","render","handleInput","renderHeader","renderProcessView","renderStatusView","renderOrchestrationView","renderMemoryView","renderLogsView","renderHelpView","renderFooter","tabs","key","view","label","tabLine","tab","isActive","index","process","selected","prefix","getStatusIcon","stats","formatUptime","toFixed","Array","from","values","filter","length","getHealthBar","getUsageBar","a","t","slice","toLocaleTimeString","icon","color","metrics","getSwarmMetrics","swarmId","active","total","inProgress","completed","efficiency","agent","statusIcon","type","capabilities","join","task","statusColor","priority","assignedTo","find","ns","displayLogs","controls","percentage","filled","round","bar","value","max","seconds","floor","hours","minutes","terminal","write","buf","Uint8Array","n","read","rawInput","decoder","decode","subarray","trim","input","split","toLowerCase","exit","viewKeys","Object","currentIndex","indexOf","handleViewSpecificInput","updateSystemStats","handleProcessInput","handleOrchestrationInput","handleMemoryInput","handleLogsInput","startAll","stopAll","restartAll","toggleSelected","min","agentTypes","randomType","spawnAgent","sampleTasks","randomTask","createTask","pendingTasks","taskToComplete","completeTask","addLog","push","startProcess","stopProcess","get","Promise","resolve","setTimeout","launchEnhancedUI","ui"],"mappings":"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"}