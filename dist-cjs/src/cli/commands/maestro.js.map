{"version":3,"sources":["../../../../src/cli/commands/maestro.ts"],"sourcesContent":["import { Command } from '../commander-fix.js';\r\nimport chalk from 'chalk';\r\nimport { MaestroCLIBridge } from '../maestro-cli-bridge.js';\r\n\r\nexport const maestroCommand = new Command('maestro')\r\n  .description('Specs Driven Development Framework for Claude-Flow')\r\n  .action(() => {\r\n    maestroCommand.outputHelp();\r\n  });\r\n\r\n// Global CLI bridge instance for reuse\r\nlet cliBridge: MaestroCLIBridge | undefined;\r\n\r\n// Get or create CLI bridge with caching\r\nasync function getCLIBridge(): Promise<MaestroCLIBridge> {\r\n  if (!cliBridge) {\r\n    cliBridge = new MaestroCLIBridge({\r\n      enablePerformanceMonitoring: true,\r\n      initializationTimeout: 30000,\r\n      cacheEnabled: true,\r\n      logLevel: 'info'\r\n    });\r\n  }\r\n  return cliBridge;\r\n}\r\n\r\n// Enhanced error handler with context\r\nfunction handleError(error: Error, command?: string): void {\r\n  console.error(chalk.red(`‚ùå Maestro Error${command ? ` (${command})` : ''}: ${error.message}`));\r\n  \r\n  // Provide helpful guidance based on error type\r\n  if (error.message.includes('ENOENT')) {\r\n    console.log(chalk.yellow('üí° Tip: Make sure you\\'re in the correct project directory'));\r\n  } else if (error.message.includes('permission')) {\r\n    console.log(chalk.yellow('üí° Tip: Check file permissions or run with appropriate privileges'));\r\n  } else if (error.message.includes('timeout')) {\r\n    console.log(chalk.yellow('üí° Tip: Network or service timeout - try again or check connectivity'));\r\n  }\r\n  \r\n  process.exit(1);\r\n}\r\n\r\nmaestroCommand.command('create-spec')\r\n  .description('Create a new feature specification')\r\n  .argument('<feature-name>', 'Name of the feature to create specification for')\r\n  .option('-r, --request <request>', 'Initial feature request description')\r\n  .option('--no-hive-mind', 'Disable hive mind collective intelligence')\r\n  .option('--consensus-threshold <threshold>', 'Consensus threshold (0-1)', '0.66')\r\n  .option('--max-agents <count>', 'Maximum number of agents', '8')\r\n  .action(async (featureName: string, options) => {\r\n    try {\r\n      console.log(chalk.blue(`üìã Creating specification for ${featureName}...`));\r\n      \r\n      const bridge = await getCLIBridge();\r\n      const orchestrator = await bridge.initializeOrchestrator();\r\n      \r\n      await bridge.executeWithMonitoring('create_spec', async () => {\r\n        await orchestrator.createSpec(featureName, options.request || `Feature specification for ${featureName}`);\r\n      }, { featureName, hasRequest: !!options.request });\r\n      \r\n      console.log(chalk.green(`‚úÖ Specification created successfully for '${featureName}'`));\r\n      console.log(chalk.gray(`   üìÅ Location: docs/maestro/specs/${featureName}/requirements.md`));\r\n      \r\n    } catch (error) {\r\n      handleError(error as Error, 'create-spec');\r\n    }\r\n  });\r\n\r\nmaestroCommand.command('generate-design')\r\n  .description('Generate technical design from requirements')\r\n  .argument('<feature-name>', 'Name of the feature to generate design for')\r\n  .option('--no-hive-mind', 'Disable hive mind collective intelligence')\r\n  .action(async (featureName: string, options) => {\r\n    try {\r\n      console.log(chalk.blue(`üé® Generating design for ${featureName}...`));\r\n      \r\n      const bridge = await getCLIBridge();\r\n      const orchestrator = await bridge.initializeOrchestrator();\r\n      \r\n      await bridge.executeWithMonitoring('generate_design', async () => {\r\n        await orchestrator.generateDesign(featureName);\r\n      }, { featureName, useHiveMind: !options.noHiveMind });\r\n      \r\n      console.log(chalk.green(`‚úÖ Design generated successfully for '${featureName}'`));\r\n      console.log(chalk.gray(`   üìÅ Location: docs/maestro/specs/${featureName}/design.md`));\r\n      \r\n    } catch (error) {\r\n      handleError(error as Error, 'generate-design');\r\n    }\r\n  });\r\n\r\nmaestroCommand.command('generate-tasks')\r\n  .description('Generate implementation tasks from design')\r\n  .argument('<feature-name>', 'Name of the feature to generate tasks for')\r\n  .action(async (featureName: string) => {\r\n    try {\r\n      console.log(chalk.blue(`üìã Generating tasks for ${featureName}...`));\r\n      \r\n      const bridge = await getCLIBridge();\r\n      const orchestrator = await bridge.initializeOrchestrator();\r\n      \r\n      await bridge.executeWithMonitoring('generate_tasks', async () => {\r\n        await orchestrator.generateTasks(featureName);\r\n      }, { featureName });\r\n      \r\n      console.log(chalk.green(`‚úÖ Tasks generated successfully for '${featureName}'`));\r\n      console.log(chalk.gray(`   üìÅ Location: docs/maestro/specs/${featureName}/tasks.md`));\r\n      \r\n    } catch (error) {\r\n      handleError(error as Error, 'generate-tasks');\r\n    }\r\n  });\r\n\r\nmaestroCommand.command('implement-task')\r\n  .description('Implement a specific task')\r\n  .argument('<feature-name>', 'Name of the feature')\r\n  .argument('<task-id>', 'Task number to implement')\r\n  .option('--skip-consensus', 'Skip consensus validation')\r\n  .action(async (featureName: string, taskIdStr: string, options) => {\r\n    try {\r\n      const taskId = parseInt(taskIdStr);\r\n      if (isNaN(taskId) || taskId < 1) {\r\n        throw new Error(`Invalid task ID: ${taskIdStr}. Must be a positive integer.`);\r\n      }\r\n      \r\n      console.log(chalk.blue(`üî® Implementing task ${taskId} for ${featureName}...`));\r\n      \r\n      const bridge = await getCLIBridge();\r\n      const orchestrator = await bridge.initializeOrchestrator();\r\n      \r\n      await bridge.executeWithMonitoring('implement_task', async () => {\r\n        await orchestrator.implementTask(featureName, taskId);\r\n      }, { featureName, taskId, skipConsensus: options.skipConsensus });\r\n      \r\n      console.log(chalk.green(`‚úÖ Task ${taskId} implemented successfully for '${featureName}'`));\r\n      \r\n    } catch (error) {\r\n      handleError(error as Error, 'implement-task');\r\n    }\r\n  });\r\n\r\nmaestroCommand.command('review-tasks')\r\n  .description('Review implemented tasks for quality assurance')\r\n  .argument('<feature-name>', 'Name of the feature')\r\n  .action(async (featureName: string) => {\r\n    try {\r\n      console.log(chalk.blue(`üîç Reviewing tasks for ${featureName}...`));\r\n      \r\n      const bridge = await getCLIBridge();\r\n      const orchestrator = await bridge.initializeOrchestrator();\r\n      \r\n      await bridge.executeWithMonitoring('review_tasks', async () => {\r\n        await orchestrator.reviewTasks(featureName);\r\n      }, { featureName });\r\n      \r\n      console.log(chalk.green(`‚úÖ Quality review completed for '${featureName}'`));\r\n      \r\n    } catch (error) {\r\n      handleError(error as Error, 'review-tasks');\r\n    }\r\n  });\r\n\r\nmaestroCommand.command('approve-phase')\r\n  .description('Approve current phase and progress to next')\r\n  .argument('<feature-name>', 'Name of the feature')\r\n  .action(async (featureName: string) => {\r\n    try {\r\n      console.log(chalk.blue(`‚úÖ Approving current phase for ${featureName}...`));\r\n      \r\n      const bridge = await getCLIBridge();\r\n      const orchestrator = await bridge.initializeOrchestrator();\r\n      \r\n      await bridge.executeWithMonitoring('approve_phase', async () => {\r\n        await orchestrator.approvePhase(featureName);\r\n      }, { featureName });\r\n      \r\n      console.log(chalk.green(`‚úÖ Phase approved successfully for '${featureName}'`));\r\n      \r\n    } catch (error) {\r\n      handleError(error as Error, 'approve-phase');\r\n    }\r\n  });\r\n\r\nmaestroCommand.command('status')\r\n  .description('Show workflow status')\r\n  .argument('<feature-name>', 'Name of the feature')\r\n  .option('--json', 'Output as JSON')\r\n  .option('--detailed', 'Show detailed history')\r\n  .action(async (featureName: string, options) => {\r\n    try {\r\n      const bridge = await getCLIBridge();\r\n      const orchestrator = await bridge.initializeOrchestrator();\r\n      \r\n      const state = orchestrator.getWorkflowState(featureName);\r\n      \r\n      if (!state) {\r\n        console.log(chalk.yellow(`‚ö†Ô∏è  No workflow found for '${featureName}'. Use 'create-spec' to start.`));\r\n        return;\r\n      }\r\n      \r\n      if (options.json) {\r\n        console.log(JSON.stringify(state, null, 2));\r\n        return;\r\n      }\r\n      \r\n      // Display formatted status\r\n      console.log(chalk.cyan(`üìä Workflow Status: ${featureName}`));\r\n      console.log(chalk.cyan('‚ïê'.repeat(50)));\r\n      console.log(`Current Phase: ${chalk.yellow(state.currentPhase)}`);\r\n      console.log(`Status: ${state.status === 'completed' ? chalk.green(state.status) : chalk.blue(state.status)}`);\r\n      console.log(`Current Task: ${state.currentTaskIndex}`);\r\n      console.log(`Last Activity: ${state.lastActivity.toLocaleString()}`);\r\n      \r\n      if (options.detailed && state.history.length > 0) {\r\n        console.log(chalk.cyan('\\nüìú History:'));\r\n        state.history.forEach((entry, index) => {\r\n          const status = entry.status === 'completed' ? '‚úÖ' : '‚ùå';\r\n          console.log(`  ${index + 1}. ${status} ${entry.phase} (${entry.timestamp.toLocaleString()})`);\r\n        });\r\n      }\r\n      \r\n      // Show performance summary\r\n      const perfSummary = bridge.getPerformanceSummary();\r\n      console.log(chalk.cyan('\\n‚ö° Performance Summary:'));\r\n      console.log(`  Operations: ${perfSummary.totalOperations} (${perfSummary.successRate.toFixed(1)}% success)`);\r\n      console.log(`  Avg Duration: ${perfSummary.averageDuration}ms`);\r\n      \r\n    } catch (error) {\r\n      handleError(error as Error, 'status');\r\n    }\r\n  });\r\n\r\nmaestroCommand.command('init-steering')\r\n  .description('Create steering document for project context')\r\n  .argument('[domain]', 'Domain name (e.g., product, tech, architecture)', 'general')\r\n  .option('-c, --content <content>', 'Custom content for the steering document')\r\n  .action(async (domain: string, options) => {\r\n    try {\r\n      console.log(chalk.blue(`üìã Creating steering document for ${domain}...`));\r\n      \r\n      const bridge = await getCLIBridge();\r\n      const orchestrator = await bridge.initializeOrchestrator();\r\n      \r\n      const content = options.content || `Guidelines and standards for ${domain} domain development.`;\r\n      \r\n      await bridge.executeWithMonitoring('init_steering', async () => {\r\n        await orchestrator.createSteeringDocument(domain, content);\r\n      }, { domain, hasCustomContent: !!options.content });\r\n      \r\n      console.log(chalk.green(`‚úÖ Steering document created for '${domain}'`));\r\n      console.log(chalk.gray(`   üìÅ Location: docs/maestro/steering/${domain}.md`));\r\n      \r\n    } catch (error) {\r\n      handleError(error as Error, 'init-steering');\r\n    }\r\n  });\r\n\r\nmaestroCommand.command('clean')\r\n  .description('Show cleanup status and implementation details')\r\n  .action(() => {\r\n    console.log(chalk.green(`‚úÖ Maestro Cleanup Complete`));\r\n    console.log(chalk.cyan(`‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`));\r\n    console.log(`\\nüßπ Cleanup Summary:`);\r\n    console.log(`   ‚Ä¢ ‚úÖ Removed deprecated files: kiro-enhanced-types.ts, maestro-types-optimized.ts`);\r\n    console.log(`   ‚Ä¢ ‚úÖ Removed legacy sync engines: living-documentation-sync.ts, pattern-learning-engine.ts`);\r\n    console.log(`   ‚Ä¢ ‚úÖ Removed backward compatibility adapter: maestro-command-adapter.js`);\r\n    console.log(`   ‚Ä¢ ‚úÖ Integrated with agentic-flow-hooks system`);\r\n    console.log(`   ‚Ä¢ ‚úÖ Updated maestro-orchestrator.ts with clean architecture`);\r\n    \r\n    console.log(chalk.cyan(`\\nüèóÔ∏è  Current Architecture:`));\r\n    console.log(`   üìÅ src/maestro/`);\r\n    console.log(`      ‚îú‚îÄ‚îÄ maestro-orchestrator.ts    # Main implementation (809 lines)`);\r\n    console.log(`      ‚îî‚îÄ‚îÄ maestro-types.ts          # Core type definitions`);\r\n    console.log(`   üìÅ src/services/agentic-flow-hooks/  # Integrated hooks system`);\r\n    console.log(`   üìÅ src/cli/commands/maestro.ts    # Clean CLI commands`);\r\n    \r\n    console.log(chalk.cyan(`\\nüîå Integration Points:`));\r\n    console.log(`   ‚Ä¢ Hive Mind: src/hive-mind/core/HiveMind.ts`);\r\n    console.log(`   ‚Ä¢ Consensus: src/hive-mind/integration/ConsensusEngine.ts`);\r\n    console.log(`   ‚Ä¢ Hooks: src/services/agentic-flow-hooks/`);\r\n    console.log(`   ‚Ä¢ Event Bus: Integrated with existing core systems`);\r\n    \r\n    console.log(chalk.cyan(`\\nüìã Ready for Production:`));\r\n    console.log(`   ‚Ä¢ Specs-driven development workflow`);\r\n    console.log(`   ‚Ä¢ Collective intelligence design generation`);\r\n    console.log(`   ‚Ä¢ Consensus validation for critical decisions`);\r\n    console.log(`   ‚Ä¢ Living documentation with bidirectional sync`);\r\n    console.log(`   ‚Ä¢ Agent hooks for automated quality assurance`);\r\n  });\r\n\r\nmaestroCommand.command('help')\r\n  .description('Show detailed help')\r\n  .action(() => {\r\n    console.log(chalk.cyan(`üìö Maestro - Specifications-Driven Development`));\r\n    console.log(chalk.cyan(`‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`));\r\n    console.log(`\\nMaestro enables specifications-driven development with collective intelligence:\\n`);\r\n    console.log(chalk.yellow(`üîÑ Typical Workflow:`));\r\n    console.log(`   1. maestro create-spec <feature-name> -r \"description\"`);\r\n    console.log(`   2. maestro generate-design <feature-name>`);\r\n    console.log(`   3. maestro approve-phase <feature-name>`);\r\n    console.log(`   4. maestro generate-tasks <feature-name>`);\r\n    console.log(`   5. maestro implement-task <feature-name> <task-number>`);\r\n    console.log(`   6. maestro status <feature-name>`);\r\n    console.log(chalk.yellow(`\\nüß† Hive Mind Features:`));\r\n    console.log(`   ‚Ä¢ Collective intelligence for design generation`);\r\n    console.log(`   ‚Ä¢ Consensus validation for critical decisions`);\r\n    console.log(`   ‚Ä¢ Advanced agent coordination and task distribution`);\r\n    console.log(chalk.yellow(`\\nüìÅ File Structure:`));\r\n    console.log(`   ‚Ä¢ requirements.md - Feature requirements and user stories`);\r\n    console.log(`   ‚Ä¢ design.md - Technical design and architecture`);\r\n    console.log(`   ‚Ä¢ tasks.md - Implementation task breakdown`);\r\n    console.log(chalk.yellow(`\\nüîß Development Status:`));\r\n    console.log(`   ‚Ä¢ Core implementation: COMPLETE`);\r\n    console.log(`   ‚Ä¢ Cleanup & refactoring: COMPLETE`);\r\n    console.log(`   ‚Ä¢ TypeScript compilation: PENDING (infrastructure fixes needed)`);\r\n    console.log(`   ‚Ä¢ Use 'maestro clean' for detailed cleanup status`);\r\n  });"],"names":["Command","chalk","MaestroCLIBridge","maestroCommand","description","action","outputHelp","cliBridge","getCLIBridge","enablePerformanceMonitoring","initializationTimeout","cacheEnabled","logLevel","handleError","error","command","console","red","message","includes","log","yellow","process","exit","argument","option","featureName","options","blue","bridge","orchestrator","initializeOrchestrator","executeWithMonitoring","createSpec","request","hasRequest","green","gray","generateDesign","useHiveMind","noHiveMind","generateTasks","taskIdStr","taskId","parseInt","isNaN","Error","implementTask","skipConsensus","reviewTasks","approvePhase","state","getWorkflowState","json","JSON","stringify","cyan","repeat","currentPhase","status","currentTaskIndex","lastActivity","toLocaleString","detailed","history","length","forEach","entry","index","phase","timestamp","perfSummary","getPerformanceSummary","totalOperations","successRate","toFixed","averageDuration","domain","content","createSteeringDocument","hasCustomContent"],"mappings":"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"}