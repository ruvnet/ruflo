{
  "version": 3,
  "sources": ["../../src/cli/cli-core.ts"],
  "sourcesContent": ["#!/usr/bin/env node\n/**\n * Claude-Flow CLI - Core implementation using Node.js\n */\n\nimport chalk from 'chalk';\nimport fs from 'fs-extra';\nimport path from 'path';\n\nexport const VERSION = '1.0.45';\n\ninterface CommandContext {\n  args: string[];\n  flags: Record<string, unknown>;\n  config?: Record<string, unknown> | undefined;\n}\n\ninterface Command {\n  name: string;\n  description: string;\n  aliases?: string[];\n  subcommands?: Command[];\n  action?: (ctx: CommandContext) => Promise<void> | void;\n  options?: Option[];\n}\n\ninterface Option {\n  name: string;\n  short?: string;\n  description: string;\n  type?: 'string' | 'boolean' | 'number';\n  default?: unknown;\n  required?: boolean;\n}\n\nclass CLI {\n  private commands: Map<string, Command> = new Map();\n  private globalOptions: Option[] = [\n    {\n      name: 'help',\n      short: 'h',\n      description: 'Show help',\n      type: 'boolean',\n    },\n    {\n      name: 'version',\n      short: 'v',\n      description: 'Show version',\n      type: 'boolean',\n    },\n    {\n      name: 'config',\n      short: 'c',\n      description: 'Path to configuration file',\n      type: 'string',\n    },\n    {\n      name: 'verbose',\n      description: 'Enable verbose logging',\n      type: 'boolean',\n    },\n    {\n      name: 'log-level',\n      description: 'Set log level (debug, info, warn, error)',\n      type: 'string',\n      default: 'info',\n    },\n  ];\n\n  constructor(\n    private name: string,\n    private description: string,\n  ) {}\n\n  command(cmd: Command): this {\n    // Handle both our Command interface and Commander.js Command objects\n    const cmdName =\n      typeof (cmd as any).name === 'function' ? (cmd as any).name() : cmd.name || 'unknown';\n    this.commands.set(cmdName, cmd);\n    if (cmd.aliases && typeof cmd.aliases[Symbol.iterator] === 'function') {\n      for (const alias of cmd.aliases) {\n        this.commands.set(alias, cmd);\n      }\n    }\n    return this;\n  }\n\n  async run(args = process.argv.slice(2)): Promise<void> {\n    // Parse arguments manually since we're replacing the Deno parse function\n    const flags = this.parseArgs(args);\n\n    if (flags.version || flags.v) {\n      console.log(`${this.name} v${VERSION}`);\n      return;\n    }\n\n    const commandName = flags._[0]?.toString() || '';\n\n    if (!commandName || flags.help || flags.h) {\n      this.showHelp();\n      return;\n    }\n\n    const command = this.commands.get(commandName);\n    if (!command) {\n      console.error(chalk.red(`Unknown command: ${commandName}`));\n      console.log(`Run \"${this.name} help\" for available commands`);\n      process.exit(1);\n    }\n\n    const ctx: CommandContext = {\n      args: flags._.slice(1).map(String),\n      flags: flags as Record<string, unknown>,\n      config: await this.loadConfig(flags.config as string),\n    };\n\n    try {\n      if (command.action) {\n        await command.action(ctx);\n      } else {\n        console.log(chalk.yellow(`Command '${commandName}' has no action defined`));\n      }\n    } catch (error) {\n      console.error(\n        chalk.red(`Error executing command '${commandName}':`),\n        (error as Error).message,\n      );\n      if (flags.verbose) {\n        console.error(error);\n      }\n      process.exit(1);\n    }\n  }\n\n  private parseArgs(args: string[]): Record<string, any> {\n    const result: Record<string, any> = { _: [] };\n    let i = 0;\n\n    while (i < args.length) {\n      const arg = args[i];\n\n      if (arg.startsWith('--')) {\n        const key = arg.slice(2);\n        if (i + 1 < args.length && !args[i + 1].startsWith('-')) {\n          result[key] = args[i + 1];\n          i += 2;\n        } else {\n          result[key] = true;\n          i++;\n        }\n      } else if (arg.startsWith('-')) {\n        const key = arg.slice(1);\n        if (i + 1 < args.length && !args[i + 1].startsWith('-')) {\n          result[key] = args[i + 1];\n          i += 2;\n        } else {\n          result[key] = true;\n          i++;\n        }\n      } else {\n        result._.push(arg);\n        i++;\n      }\n    }\n\n    return result;\n  }\n\n  private async loadConfig(configPath?: string): Promise<Record<string, unknown> | undefined> {\n    const configFile = configPath || 'claude-flow.config.json';\n    try {\n      const content = await fs.readFile(configFile, 'utf8');\n      return JSON.parse(content);\n    } catch {\n      return undefined;\n    }\n  }\n\n  private getBooleanFlags(): string[] {\n    const flags: string[] = [];\n    for (const opt of [...this.globalOptions, ...this.getAllOptions()]) {\n      if (opt.type === 'boolean') {\n        flags.push(opt.name);\n        if (opt.short) flags.push(opt.short);\n      }\n    }\n    return flags;\n  }\n\n  private getStringFlags(): string[] {\n    const flags: string[] = [];\n    for (const opt of [...this.globalOptions, ...this.getAllOptions()]) {\n      if (opt.type === 'string' || opt.type === 'number') {\n        flags.push(opt.name);\n        if (opt.short) flags.push(opt.short);\n      }\n    }\n    return flags;\n  }\n\n  private getAliases(): Record<string, string> {\n    const aliases: Record<string, string> = {};\n    for (const opt of [...this.globalOptions, ...this.getAllOptions()]) {\n      if (opt.short) {\n        aliases[opt.short] = opt.name;\n      }\n    }\n    return aliases;\n  }\n\n  private getDefaults(): Record<string, unknown> {\n    const defaults: Record<string, unknown> = {};\n    for (const opt of [...this.globalOptions, ...this.getAllOptions()]) {\n      if (opt.default !== undefined) {\n        defaults[opt.name] = opt.default;\n      }\n    }\n    return defaults;\n  }\n\n  private getAllOptions(): Option[] {\n    const options: Option[] = [];\n    for (const cmd of this.commands.values()) {\n      if (cmd.options) {\n        options.push(...cmd.options);\n      }\n    }\n    return options;\n  }\n\n  private showHelp(): void {\n    console.log(`\n${chalk.bold(chalk.blue(`\uD83E\uDDE0 ${this.name} v${VERSION}`))} - ${this.description}\n\n${chalk.bold('USAGE:')}\n  ${this.name} [COMMAND] [OPTIONS]\n\n${chalk.bold('COMMANDS:')}\n${this.formatCommands()}\n\n${chalk.bold('GLOBAL OPTIONS:')}\n${this.formatOptions(this.globalOptions)}\n\n${chalk.bold('EXAMPLES:')}\n  ${this.name} start                                    # Start orchestrator\n  ${this.name} agent spawn researcher --name \"Bot\"     # Spawn research agent\n  ${this.name} task create research \"Analyze data\"     # Create task\n  ${this.name} config init                             # Initialize config\n  ${this.name} status                                  # Show system status\n\nFor more detailed help on specific commands, use:\n  ${this.name} [COMMAND] --help\n\nDocumentation: https://github.com/ruvnet/claude-code-flow\nIssues: https://github.com/ruvnet/claude-code-flow/issues\n\nCreated by rUv - Built with \u2764\uFE0F for the Claude community\n`);\n  }\n\n  private formatCommands(): string {\n    const commands = Array.from(new Set(this.commands.values()));\n    return commands\n      .filter((cmd) => cmd && cmd.name) // Filter out invalid commands\n      .map((cmd) => `  ${String(cmd.name).padEnd(20)} ${cmd.description || ''}`)\n      .join('\\n');\n  }\n\n  private formatOptions(options: Option[]): string {\n    return options\n      .map((opt) => {\n        const flags = opt.short ? `-${opt.short}, --${opt.name}` : `    --${opt.name}`;\n        return `  ${flags.padEnd(25)} ${opt.description}`;\n      })\n      .join('\\n');\n  }\n}\n\n// Helper functions\nfunction success(message: string): void {\n  console.log(chalk.green(`\u2705 ${message}`));\n}\n\nfunction error(message: string): void {\n  console.error(chalk.red(`\u274C ${message}`));\n}\n\nfunction warning(message: string): void {\n  console.warn(chalk.yellow(`\u26A0\uFE0F  ${message}`));\n}\n\nfunction info(message: string): void {\n  console.log(chalk.blue(`\u2139\uFE0F  ${message}`));\n}\n\n// Export for use in other modules\nexport { CLI, success, error, warning, info };\nexport type { Command, CommandContext, Option };\n\n// Main CLI setup if running directly\nasync function main() {\n  if (\n    process.argv[1] &&\n    (process.argv[1].endsWith('cli-core.js') || process.argv[1].endsWith('cli-core.ts'))\n  ) {\n    const cli = new CLI('claude-flow', 'Advanced AI Agent Orchestration System');\n\n    // Import and register all commands\n    const { setupCommands } = await import('./commands/index.js');\n    setupCommands(cli);\n\n    // Run the CLI\n    await cli.run();\n  }\n}\n\n// Execute main if this is the entry point\nmain().catch(console.error);\n"],
  "mappings": "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",
  "names": ["chalk", "error", "fs"]
}
