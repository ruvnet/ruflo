{"version":3,"sources":["../../../../src/cli/commands/neural-init.ts"],"sourcesContent":["#!/usr/bin/env node\r\nimport { promises as fs } from 'fs';\r\nimport path from 'path';\r\nimport { fileURLToPath } from 'url';\r\nimport chalk from 'chalk';\r\nimport { logger } from '../../monitoring/logger.js';\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\ninterface InitOptions {\r\n  force?: boolean;\r\n  targetDir?: string;\r\n}\r\n\r\nexport class NeuralInitCommand {\r\n  private readonly sourcePath = path.resolve(__dirname, '../../../.claude/agents/neural');\r\n  \r\n  async execute(options: InitOptions = {}): Promise<void> {\r\n    const targetDir = options.targetDir || '.claude/agents/neural';\r\n    const absoluteTarget = path.resolve(process.cwd(), targetDir);\r\n    \r\n    logger.info(chalk.cyan('üß† Initializing Claude Flow Neural Module...'));\r\n    \r\n    try {\r\n      // Check if target exists\r\n      const exists = await this.checkExists(absoluteTarget);\r\n      \r\n      if (exists && !options.force) {\r\n        logger.warn(chalk.yellow('‚ö†Ô∏è  Neural module already exists. Use --force to overwrite.'));\r\n        const prompt = await this.confirmOverwrite();\r\n        if (!prompt) {\r\n          logger.info(chalk.gray('Installation cancelled.'));\r\n          return;\r\n        }\r\n      }\r\n      \r\n      // Create target directory\r\n      await fs.mkdir(absoluteTarget, { recursive: true });\r\n      \r\n      // Copy neural agent files\r\n      await this.copyNeuralFiles(absoluteTarget);\r\n      \r\n      // Initialize configuration\r\n      await this.initializeConfig(absoluteTarget);\r\n      \r\n      // Verify installation\r\n      const verified = await this.verifyInstallation(absoluteTarget);\r\n      \r\n      if (verified) {\r\n        logger.success(chalk.green('‚úÖ Neural module initialized successfully!'));\r\n        this.printUsage();\r\n      } else {\r\n        throw new Error('Installation verification failed');\r\n      }\r\n      \r\n    } catch (error) {\r\n      logger.error(chalk.red('‚ùå Failed to initialize neural module:'), error);\r\n      throw error;\r\n    }\r\n  }\r\n  \r\n  private async checkExists(targetPath: string): Promise<boolean> {\r\n    try {\r\n      await fs.access(targetPath);\r\n      return true;\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  private async confirmOverwrite(): Promise<boolean> {\r\n    // In a real implementation, this would use inquirer or similar\r\n    // For now, we'll return false to be safe\r\n    console.log(chalk.yellow('Would you like to overwrite? (y/N)'));\r\n    return false;\r\n  }\r\n  \r\n  private async copyNeuralFiles(targetDir: string): Promise<void> {\r\n    // Copy SAFLA neural agent\r\n    const saflaSource = path.join(this.sourcePath, 'safla-neural.md');\r\n    const saflaTarget = path.join(targetDir, 'safla-neural.md');\r\n    \r\n    // Check if source exists in package\r\n    try {\r\n      // First try to copy from local installation\r\n      await fs.copyFile(saflaSource, saflaTarget);\r\n      logger.info(chalk.gray('  ‚Ä¢ Copied safla-neural.md'));\r\n    } catch (error) {\r\n      // If not found locally, create from embedded template\r\n      await this.createSaflaTemplate(saflaTarget);\r\n      logger.info(chalk.gray('  ‚Ä¢ Created safla-neural.md from template'));\r\n    }\r\n    \r\n    // Create additional neural agents if needed\r\n    await this.createNeuralAgents(targetDir);\r\n  }\r\n  \r\n  private async createSaflaTemplate(targetPath: string): Promise<void> {\r\n    const template = `---\r\nname: safla-neural\r\ndescription: \"Self-Aware Feedback Loop Algorithm (SAFLA) neural specialist\"\r\ncolor: cyan\r\n---\r\n\r\n# SAFLA Neural Agent\r\n\r\nIntegrated with Claude Flow neural system for persistent memory and self-learning capabilities.\r\n\r\n## Core Features\r\n- 4-tier memory architecture (Vector, Episodic, Semantic, Working)\r\n- Feedback loop engineering for continuous improvement\r\n- 172,000+ operations per second\r\n- 60% memory compression\r\n- WASM SIMD optimization\r\n\r\n## Usage\r\n\\`\\`\\`bash\r\n# Initialize SAFLA neural training\r\nnpx claude-flow neural train --type safla\r\n\r\n# Run inference\r\nnpx claude-flow neural predict --model safla\r\n\\`\\`\\`\r\n`;\r\n    await fs.writeFile(targetPath, template);\r\n  }\r\n  \r\n  private async createNeuralAgents(targetDir: string): Promise<void> {\r\n    // Create additional neural agent templates\r\n    const agents = [\r\n      {\r\n        name: 'neural-trainer.md',\r\n        content: this.getTrainerTemplate()\r\n      },\r\n      {\r\n        name: 'neural-predictor.md',\r\n        content: this.getPredictorTemplate()\r\n      }\r\n    ];\r\n    \r\n    for (const agent of agents) {\r\n      const targetPath = path.join(targetDir, agent.name);\r\n      await fs.writeFile(targetPath, agent.content);\r\n      logger.info(chalk.gray(`  ‚Ä¢ Created ${agent.name}`));\r\n    }\r\n  }\r\n  \r\n  private getTrainerTemplate(): string {\r\n    return `---\r\nname: neural-trainer\r\ndescription: \"Neural network training specialist\"\r\ncolor: purple\r\n---\r\n\r\n# Neural Trainer Agent\r\n\r\nManages distributed neural network training with Claude Flow.\r\n`;\r\n  }\r\n  \r\n  private getPredictorTemplate(): string {\r\n    return `---\r\nname: neural-predictor  \r\ndescription: \"Neural inference and prediction specialist\"\r\ncolor: blue\r\n---\r\n\r\n# Neural Predictor Agent\r\n\r\nHandles neural network inference and predictions.\r\n`;\r\n  }\r\n  \r\n  private async initializeConfig(targetDir: string): Promise<void> {\r\n    const config = {\r\n      version: '1.0.0',\r\n      neural: {\r\n        enabled: true,\r\n        defaultModel: 'safla',\r\n        wasmOptimization: true,\r\n        memoryCompression: 0.6,\r\n        operationsPerSecond: 172000\r\n      },\r\n      agents: [\r\n        'safla-neural',\r\n        'neural-trainer',\r\n        'neural-predictor'\r\n      ]\r\n    };\r\n    \r\n    const configPath = path.join(targetDir, 'config.json');\r\n    await fs.writeFile(configPath, JSON.stringify(config, null, 2));\r\n    logger.info(chalk.gray('  ‚Ä¢ Created neural config.json'));\r\n  }\r\n  \r\n  private async verifyInstallation(targetDir: string): Promise<boolean> {\r\n    const requiredFiles = [\r\n      'safla-neural.md',\r\n      'neural-trainer.md',\r\n      'neural-predictor.md',\r\n      'config.json'\r\n    ];\r\n    \r\n    for (const file of requiredFiles) {\r\n      const filePath = path.join(targetDir, file);\r\n      const exists = await this.checkExists(filePath);\r\n      if (!exists) {\r\n        logger.error(chalk.red(`  ‚úó Missing required file: ${file}`));\r\n        return false;\r\n      }\r\n      logger.info(chalk.gray(`  ‚úì Verified ${file}`));\r\n    }\r\n    \r\n    return true;\r\n  }\r\n  \r\n  private printUsage(): void {\r\n    console.log('\\n' + chalk.cyan('üìö Usage:'));\r\n    console.log(chalk.gray('  npx claude-flow neural train --type safla'));\r\n    console.log(chalk.gray('  npx claude-flow neural predict --model safla'));\r\n    console.log(chalk.gray('  @agent-safla-neural \"Create self-improving system\"'));\r\n    console.log('\\n' + chalk.cyan('üîó Documentation:'));\r\n    console.log(chalk.gray('  https://github.com/ruvnet/SAFLA'));\r\n  }\r\n}\r\n\r\n// CLI execution\r\nif (import.meta.url === `file://${process.argv[1]}`) {\r\n  const command = new NeuralInitCommand();\r\n  const options: InitOptions = {};\r\n  \r\n  if (process.argv.includes('--force')) {\r\n    options.force = true;\r\n  }\r\n  \r\n  const targetIndex = process.argv.indexOf('--target');\r\n  if (targetIndex !== -1 && process.argv[targetIndex + 1]) {\r\n    options.targetDir = process.argv[targetIndex + 1];\r\n  }\r\n  \r\n  command.execute(options).catch(process.exit);\r\n}\r\n\r\nexport default NeuralInitCommand;"],"names":["promises","fs","path","fileURLToPath","chalk","logger","__filename","url","__dirname","dirname","NeuralInitCommand","sourcePath","resolve","execute","options","targetDir","absoluteTarget","process","cwd","info","cyan","exists","checkExists","force","warn","yellow","prompt","confirmOverwrite","gray","mkdir","recursive","copyNeuralFiles","initializeConfig","verified","verifyInstallation","success","green","printUsage","Error","error","red","targetPath","access","console","log","saflaSource","join","saflaTarget","copyFile","createSaflaTemplate","createNeuralAgents","template","writeFile","agents","name","content","getTrainerTemplate","getPredictorTemplate","agent","config","version","neural","enabled","defaultModel","wasmOptimization","memoryCompression","operationsPerSecond","configPath","JSON","stringify","requiredFiles","file","filePath","argv","command","includes","targetIndex","indexOf","catch","exit"],"mappings":"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"}