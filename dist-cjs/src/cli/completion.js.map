{"version":3,"sources":["../../../src/cli/completion.ts"],"sourcesContent":["/**\r\n * Shell completion generator for Claude-Flow CLI\r\n */\r\n\r\nimport chalk from 'chalk';\r\nimport { promises as fs } from 'node:fs';\r\n\r\nexport class CompletionGenerator {\r\n  private commands = [\r\n    'start',\r\n    'agent',\r\n    'task',\r\n    'memory',\r\n    'config',\r\n    'status',\r\n    'monitor',\r\n    'session',\r\n    'workflow',\r\n    'repl',\r\n    'version',\r\n    'completion',\r\n  ];\r\n\r\n  private subcommands = {\r\n    agent: ['spawn', 'list', 'terminate', 'info'],\r\n    task: ['create', 'list', 'status', 'cancel', 'workflow'],\r\n    memory: ['query', 'export', 'import', 'stats', 'cleanup'],\r\n    config: ['show', 'get', 'set', 'init', 'validate'],\r\n    session: ['list', 'save', 'restore', 'delete', 'export', 'import', 'info', 'clean'],\r\n    workflow: ['run', 'validate', 'list', 'status', 'stop', 'template'],\r\n  };\r\n\r\n  async generate(shell: string, install: boolean = false): Promise<void> {\r\n    const detectedShell = shell === 'detect' ? await this.detectShell() : shell;\r\n\r\n    switch (detectedShell) {\r\n      case 'bash':\r\n        await this.generateBashCompletion(install);\r\n        break;\r\n      case 'zsh':\r\n        await this.generateZshCompletion(install);\r\n        break;\r\n      case 'fish':\r\n        await this.generateFishCompletion(install);\r\n        break;\r\n      default:\r\n        console.error(chalk.red(`Unsupported shell: ${detectedShell}`));\r\n        console.log(chalk.gray('Supported shells: bash, zsh, fish'));\r\n        break;\r\n    }\r\n  }\r\n\r\n  private async detectShell(): Promise<string> {\r\n    const shell = process.env['SHELL'] || '';\r\n\r\n    if (shell.includes('bash')) return 'bash';\r\n    if (shell.includes('zsh')) return 'zsh';\r\n    if (shell.includes('fish')) return 'fish';\r\n\r\n    console.log(chalk.yellow('Could not detect shell, defaulting to bash'));\r\n    return 'bash';\r\n  }\r\n\r\n  private async generateBashCompletion(install: boolean): Promise<void> {\r\n    const script = this.getBashCompletionScript();\r\n\r\n    if (install) {\r\n      await this.installBashCompletion(script);\r\n    } else {\r\n      console.log(script);\r\n    }\r\n  }\r\n\r\n  private async generateZshCompletion(install: boolean): Promise<void> {\r\n    const script = this.getZshCompletionScript();\r\n\r\n    if (install) {\r\n      await this.installZshCompletion(script);\r\n    } else {\r\n      console.log(script);\r\n    }\r\n  }\r\n\r\n  private async generateFishCompletion(install: boolean): Promise<void> {\r\n    const script = this.getFishCompletionScript();\r\n\r\n    if (install) {\r\n      await this.installFishCompletion(script);\r\n    } else {\r\n      console.log(script);\r\n    }\r\n  }\r\n\r\n  private getBashCompletionScript(): string {\r\n    return `# Claude-Flow bash completion\r\n_claude_flow_completion() {\r\n    local cur prev words cword\r\n    _init_completion || return\r\n\r\n    case \\${words[1]} in\r\n        agent)\r\n            case \\${words[2]} in\r\n                spawn)\r\n                    COMPREPLY=($(compgen -W \"coordinator researcher implementer analyst custom\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                terminate|info)\r\n                    # In production, this would complete with actual agent IDs\r\n                    COMPREPLY=($(compgen -W \"agent-001 agent-002 agent-003\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                *)\r\n                    COMPREPLY=($(compgen -W \"${this.subcommands.agent.join(' ')}\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n            esac\r\n            ;;\r\n        task)\r\n            case \\${words[2]} in\r\n                create)\r\n                    if [[ \\${#words[@]} -eq 4 ]]; then\r\n                        COMPREPLY=($(compgen -W \"research implementation analysis coordination\" -- \"$cur\"))\r\n                    fi\r\n                    return\r\n                    ;;\r\n                status|cancel)\r\n                    # In production, this would complete with actual task IDs\r\n                    COMPREPLY=($(compgen -W \"task-001 task-002 task-003\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                workflow)\r\n                    COMPREPLY=($(compgen -f -X '!*.@(json|yaml|yml)' -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                *)\r\n                    COMPREPLY=($(compgen -W \"${this.subcommands.task.join(' ')}\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n            esac\r\n            ;;\r\n        memory)\r\n            COMPREPLY=($(compgen -W \"${this.subcommands.memory.join(' ')}\" -- \"$cur\"))\r\n            return\r\n            ;;\r\n        config)\r\n            COMPREPLY=($(compgen -W \"${this.subcommands.config.join(' ')}\" -- \"$cur\"))\r\n            return\r\n            ;;\r\n        session)\r\n            case \\${words[2]} in\r\n                restore|delete|info|export)\r\n                    # In production, this would complete with actual session IDs\r\n                    COMPREPLY=($(compgen -W \"session-001 session-002 session-003\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                import)\r\n                    COMPREPLY=($(compgen -f -X '!*.@(json|yaml|yml)' -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                *)\r\n                    COMPREPLY=($(compgen -W \"${this.subcommands.session.join(' ')}\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n            esac\r\n            ;;\r\n        workflow)\r\n            case \\${words[2]} in\r\n                run|validate)\r\n                    COMPREPLY=($(compgen -f -X '!*.@(json|yaml|yml)' -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                template)\r\n                    COMPREPLY=($(compgen -W \"research implementation coordination\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                status|stop)\r\n                    # In production, this would complete with actual workflow IDs\r\n                    COMPREPLY=($(compgen -W \"workflow-001 workflow-002 workflow-003\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n                *)\r\n                    COMPREPLY=($(compgen -W \"${this.subcommands.workflow.join(' ')}\" -- \"$cur\"))\r\n                    return\r\n                    ;;\r\n            esac\r\n            ;;\r\n        completion)\r\n            COMPREPLY=($(compgen -W \"bash zsh fish\" -- \"$cur\"))\r\n            return\r\n            ;;\r\n        *)\r\n            COMPREPLY=($(compgen -W \"${this.commands.join(' ')}\" -- \"$cur\"))\r\n            return\r\n            ;;\r\n    esac\r\n}\r\n\r\ncomplete -F _claude_flow_completion claude-flow`;\r\n  }\r\n\r\n  private getZshCompletionScript(): string {\r\n    return `#compdef claude-flow\r\n\r\n# Claude-Flow zsh completion\r\n\r\n_claude_flow() {\r\n    local context state state_descr line\r\n    typeset -A opt_args\r\n\r\n    _arguments -C \\\\\r\n        '(-h --help)'{-h,--help}'[Show help information]' \\\\\r\n        '(-v --verbose)'{-v,--verbose}'[Enable verbose logging]' \\\\\r\n        '(-q --quiet)'{-q,--quiet}'[Suppress non-essential output]' \\\\\r\n        '(-c --config)'{-c,--config}'[Path to configuration file]:config file:_files -g \"*.json\"' \\\\\r\n        '--log-level[Set log level]:level:(debug info warn error)' \\\\\r\n        '--no-color[Disable colored output]' \\\\\r\n        '--json[Output in JSON format]' \\\\\r\n        '--profile[Use named configuration profile]:profile:' \\\\\r\n        '1: :_claude_flow_commands' \\\\\r\n        '*::arg:->args'\r\n\r\n    case $state in\r\n        args)\r\n            case $words[1] in\r\n                agent)\r\n                    _claude_flow_agent\r\n                    ;;\r\n                task)\r\n                    _claude_flow_task\r\n                    ;;\r\n                memory)\r\n                    _claude_flow_memory\r\n                    ;;\r\n                config)\r\n                    _claude_flow_config\r\n                    ;;\r\n                session)\r\n                    _claude_flow_session\r\n                    ;;\r\n                workflow)\r\n                    _claude_flow_workflow\r\n                    ;;\r\n                completion)\r\n                    _arguments \\\\\r\n                        '--install[Install completion script automatically]' \\\\\r\n                        '1: :(bash zsh fish)'\r\n                    ;;\r\n            esac\r\n            ;;\r\n    esac\r\n}\r\n\r\n_claude_flow_commands() {\r\n    local commands\r\n    commands=(\r\n        'start:Start the Claude-Flow orchestration system'\r\n        'agent:Manage Claude-Flow agents'\r\n        'task:Manage tasks'\r\n        'memory:Manage agent memory'\r\n        'config:Manage Claude-Flow configuration'\r\n        'status:Show Claude-Flow system status'\r\n        'monitor:Start live monitoring dashboard'\r\n        'session:Manage Claude-Flow sessions'\r\n        'workflow:Execute and manage workflows'\r\n        'repl:Start interactive REPL mode'\r\n        'version:Show detailed version information'\r\n        'completion:Generate shell completion scripts'\r\n    )\r\n    _describe 'commands' commands\r\n}\r\n\r\n_claude_flow_agent() {\r\n    case $words[2] in\r\n        spawn)\r\n            _arguments \\\\\r\n                '(-n --name)'{-n,--name}'[Agent name]:name:' \\\\\r\n                '(-p --priority)'{-p,--priority}'[Agent priority]:priority:' \\\\\r\n                '(-m --max-tasks)'{-m,--max-tasks}'[Maximum concurrent tasks]:max:' \\\\\r\n                '--system-prompt[Custom system prompt]:prompt:' \\\\\r\n                '1: :(coordinator researcher implementer analyst custom)'\r\n            ;;\r\n        terminate|info)\r\n            _arguments '1: :_claude_flow_agents'\r\n            ;;\r\n        *)\r\n            _arguments '1: :(${this.subcommands.agent.join(' ')})'\r\n            ;;\r\n    esac\r\n}\r\n\r\n_claude_flow_task() {\r\n    case $words[2] in\r\n        create)\r\n            _arguments \\\\\r\n                '(-p --priority)'{-p,--priority}'[Task priority]:priority:' \\\\\r\n                '(-d --dependencies)'{-d,--dependencies}'[Comma-separated dependency task IDs]:deps:' \\\\\r\n                '(-i --input)'{-i,--input}'[Task input as JSON]:input:' \\\\\r\n                '(-a --assign)'{-a,--assign}'[Assign to specific agent]:agent:_claude_flow_agents' \\\\\r\n                '1: :(research implementation analysis coordination)' \\\\\r\n                '2: :_message_or_description'\r\n            ;;\r\n        workflow)\r\n            _arguments '1: :_files -g \"*.json *.yaml *.yml\"'\r\n            ;;\r\n        status|cancel)\r\n            _arguments '1: :_claude_flow_tasks'\r\n            ;;\r\n        *)\r\n            _arguments '1: :(${this.subcommands.task.join(' ')})'\r\n            ;;\r\n    esac\r\n}\r\n\r\n_claude_flow_memory() {\r\n    _arguments '1: :(${this.subcommands.memory.join(' ')})'\r\n}\r\n\r\n_claude_flow_config() {\r\n    _arguments '1: :(${this.subcommands.config.join(' ')})'\r\n}\r\n\r\n_claude_flow_session() {\r\n    case $words[2] in\r\n        restore|delete|info|export)\r\n            _arguments '1: :_claude_flow_sessions'\r\n            ;;\r\n        import)\r\n            _arguments '1: :_files -g \"*.json *.yaml *.yml\"'\r\n            ;;\r\n        *)\r\n            _arguments '1: :(${this.subcommands.session.join(' ')})'\r\n            ;;\r\n    esac\r\n}\r\n\r\n_claude_flow_workflow() {\r\n    case $words[2] in\r\n        run|validate)\r\n            _arguments '1: :_files -g \"*.json *.yaml *.yml\"'\r\n            ;;\r\n        template)\r\n            _arguments '1: :(research implementation coordination)'\r\n            ;;\r\n        status|stop)\r\n            _arguments '1: :_claude_flow_workflows'\r\n            ;;\r\n        *)\r\n            _arguments '1: :(${this.subcommands.workflow.join(' ')})'\r\n            ;;\r\n    esac\r\n}\r\n\r\n# Helper functions for completion\r\n_claude_flow_agents() {\r\n    # In production, this would query the running orchestrator\r\n    local agents\r\n    agents=('agent-001:Coordinator Agent' 'agent-002:Research Agent' 'agent-003:Implementation Agent')\r\n    _describe 'agents' agents\r\n}\r\n\r\n_claude_flow_tasks() {\r\n    # In production, this would query the running orchestrator\r\n    local tasks\r\n    tasks=('task-001:Research Task' 'task-002:Analysis Task' 'task-003:Implementation Task')\r\n    _describe 'tasks' tasks\r\n}\r\n\r\n_claude_flow_sessions() {\r\n    # In production, this would query saved sessions\r\n    local sessions\r\n    sessions=('session-001:Research Session' 'session-002:Development Session' 'session-003:Analysis Session')\r\n    _describe 'sessions' sessions\r\n}\r\n\r\n_claude_flow_workflows() {\r\n    # In production, this would query running workflows\r\n    local workflows\r\n    workflows=('workflow-001:Research Workflow' 'workflow-002:Implementation Workflow')\r\n    _describe 'workflows' workflows\r\n}\r\n\r\n_message_or_description() {\r\n    _message 'task description'\r\n}\r\n\r\n_claude_flow \"$@\"`;\r\n  }\r\n\r\n  private getFishCompletionScript(): string {\r\n    return `# Claude-Flow fish completion\r\n\r\nfunction __fish_claude_flow_needs_command\r\n    set cmd (commandline -opc)\r\n    if [ (count $cmd) -eq 1 ]\r\n        return 0\r\n    end\r\n    return 1\r\nend\r\n\r\nfunction __fish_claude_flow_using_command\r\n    set cmd (commandline -opc)\r\n    if [ (count $cmd) -gt 1 ]\r\n        if [ $argv[1] = $cmd[2] ]\r\n            return 0\r\n        end\r\n    end\r\n    return 1\r\nend\r\n\r\n# Main commands\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'start' -d 'Start the Claude-Flow orchestration system'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'agent' -d 'Manage Claude-Flow agents'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'task' -d 'Manage tasks'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'memory' -d 'Manage agent memory'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'config' -d 'Manage Claude-Flow configuration'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'status' -d 'Show Claude-Flow system status'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'monitor' -d 'Start live monitoring dashboard'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'session' -d 'Manage Claude-Flow sessions'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'workflow' -d 'Execute and manage workflows'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'repl' -d 'Start interactive REPL mode'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'version' -d 'Show detailed version information'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_needs_command' -a 'completion' -d 'Generate shell completion scripts'\r\n\r\n# Global options\r\ncomplete -c claude-flow -s h -l help -d 'Show help information'\r\ncomplete -c claude-flow -s v -l verbose -d 'Enable verbose logging'\r\ncomplete -c claude-flow -s q -l quiet -d 'Suppress non-essential output'\r\ncomplete -c claude-flow -s c -l config -r -d 'Path to configuration file'\r\ncomplete -c claude-flow -l log-level -r -a 'debug info warn error' -d 'Set log level'\r\ncomplete -c claude-flow -l no-color -d 'Disable colored output'\r\ncomplete -c claude-flow -l json -d 'Output in JSON format'\r\ncomplete -c claude-flow -l profile -r -d 'Use named configuration profile'\r\n\r\n# Agent subcommands\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command agent' -a 'spawn' -d 'Spawn a new agent'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command agent' -a 'list' -d 'List all agents'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command agent' -a 'terminate' -d 'Terminate an agent'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command agent' -a 'info' -d 'Get agent information'\r\n\r\n# Task subcommands\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command task' -a 'create' -d 'Create a new task'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command task' -a 'list' -d 'List all tasks'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command task' -a 'status' -d 'Get task status'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command task' -a 'cancel' -d 'Cancel a task'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command task' -a 'workflow' -d 'Execute workflow from file'\r\n\r\n# Memory subcommands\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command memory' -a 'query' -d 'Query memory entries'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command memory' -a 'export' -d 'Export memory to file'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command memory' -a 'import' -d 'Import memory from file'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command memory' -a 'stats' -d 'Show memory statistics'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command memory' -a 'cleanup' -d 'Clean up old entries'\r\n\r\n# Config subcommands\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command config' -a 'show' -d 'Show current configuration'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command config' -a 'get' -d 'Get specific config value'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command config' -a 'set' -d 'Set config value'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command config' -a 'init' -d 'Initialize config file'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command config' -a 'validate' -d 'Validate config file'\r\n\r\n# Session subcommands\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command session' -a 'list' -d 'List all saved sessions'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command session' -a 'save' -d 'Save current session state'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command session' -a 'restore' -d 'Restore a saved session'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command session' -a 'delete' -d 'Delete a saved session'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command session' -a 'export' -d 'Export session to file'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command session' -a 'import' -d 'Import session from file'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command session' -a 'info' -d 'Show detailed session information'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command session' -a 'clean' -d 'Clean up old sessions'\r\n\r\n# Workflow subcommands\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command workflow' -a 'run' -d 'Execute a workflow from file'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command workflow' -a 'validate' -d 'Validate a workflow file'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command workflow' -a 'list' -d 'List running workflows'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command workflow' -a 'status' -d 'Show workflow execution status'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command workflow' -a 'stop' -d 'Stop a running workflow'\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command workflow' -a 'template' -d 'Generate workflow templates'\r\n\r\n# Completion subcommands\r\ncomplete -f -c claude-flow -n '__fish_claude_flow_using_command completion' -a 'bash zsh fish'`;\r\n  }\r\n\r\n  private async installBashCompletion(script: string): Promise<void> {\r\n    const possiblePaths = [\r\n      '/etc/bash_completion.d/claude-flow',\r\n      '/usr/local/etc/bash_completion.d/claude-flow',\r\n      `${process.env['HOME']}/.local/share/bash-completion/completions/claude-flow`,\r\n      `${process.env['HOME']}/.bash_completion.d/claude-flow`,\r\n    ];\r\n\r\n    for (const path of possiblePaths) {\r\n      try {\r\n        const dir = path.substring(0, path.lastIndexOf('/'));\r\n        await Deno.mkdir(dir, { recursive: true });\r\n        await fs.writeFile(path, script);\r\n\r\n        console.log(chalk.green('✓ Bash completion installed'));\r\n        console.log(`${chalk.white('Location:')} ${path}`);\r\n        console.log(chalk.gray('Restart your shell or run: source ~/.bashrc'));\r\n        return;\r\n      } catch (error) {\r\n        // Try next path\r\n        continue;\r\n      }\r\n    }\r\n\r\n    console.error(chalk.red('Failed to install bash completion'));\r\n    console.log(\r\n      chalk.gray('You can manually save the completion script to a bash completion directory'),\r\n    );\r\n  }\r\n\r\n  private async installZshCompletion(script: string): Promise<void> {\r\n    const possiblePaths = [\r\n      `${process.env['HOME']}/.zsh/completions/_claude-flow`,\r\n      '/usr/local/share/zsh/site-functions/_claude-flow',\r\n      '/usr/share/zsh/site-functions/_claude-flow',\r\n    ];\r\n\r\n    for (const path of possiblePaths) {\r\n      try {\r\n        const dir = path.substring(0, path.lastIndexOf('/'));\r\n        await Deno.mkdir(dir, { recursive: true });\r\n        await fs.writeFile(path, script);\r\n\r\n        console.log(chalk.green('✓ Zsh completion installed'));\r\n        console.log(`${chalk.white('Location:')} ${path}`);\r\n        console.log(chalk.gray('Restart your shell or run: autoload -U compinit && compinit'));\r\n        return;\r\n      } catch (error) {\r\n        // Try next path\r\n        continue;\r\n      }\r\n    }\r\n\r\n    console.error(chalk.red('Failed to install zsh completion'));\r\n    console.log(\r\n      chalk.gray('You can manually save the completion script to your zsh completion directory'),\r\n    );\r\n  }\r\n\r\n  private async installFishCompletion(script: string): Promise<void> {\r\n    const possiblePaths = [\r\n      `${process.env['HOME']}/.config/fish/completions/claude-flow.fish`,\r\n      '/usr/local/share/fish/completions/claude-flow.fish',\r\n      '/usr/share/fish/completions/claude-flow.fish',\r\n    ];\r\n\r\n    for (const path of possiblePaths) {\r\n      try {\r\n        const dir = path.substring(0, path.lastIndexOf('/'));\r\n        await Deno.mkdir(dir, { recursive: true });\r\n        await fs.writeFile(path, script);\r\n\r\n        console.log(chalk.green('✓ Fish completion installed'));\r\n        console.log(`${chalk.white('Location:')} ${path}`);\r\n        console.log(chalk.gray('Completions will be available in new fish sessions'));\r\n        return;\r\n      } catch (error) {\r\n        // Try next path\r\n        continue;\r\n      }\r\n    }\r\n\r\n    console.error(chalk.red('Failed to install fish completion'));\r\n    console.log(\r\n      chalk.gray('You can manually save the completion script to your fish completion directory'),\r\n    );\r\n  }\r\n}\r\n"],"names":["chalk","promises","fs","CompletionGenerator","commands","subcommands","agent","task","memory","config","session","workflow","generate","shell","install","detectedShell","detectShell","generateBashCompletion","generateZshCompletion","generateFishCompletion","console","error","red","log","gray","process","env","includes","yellow","script","getBashCompletionScript","installBashCompletion","getZshCompletionScript","installZshCompletion","getFishCompletionScript","installFishCompletion","join","possiblePaths","path","dir","substring","lastIndexOf","Deno","mkdir","recursive","writeFile","green","white"],"mappings":"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"}