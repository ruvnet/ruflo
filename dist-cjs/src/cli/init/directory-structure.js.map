{"version":3,"sources":["../../../../src/cli/init/directory-structure.ts"],"sourcesContent":["// init/directory-structure.ts - Directory structure creation\r\nexport async function createDirectoryStructure(): Promise<void> {\r\n  const fs = await import('fs/promises');\r\n  const path = await import('path');\r\n\r\n  // Define directory structure\r\n  const directories = [\r\n    '.claude',\r\n    '.claude/commands',\r\n    '.claude/commands/swarm',\r\n    '.claude/commands/sparc',\r\n    '.claude/logs',\r\n    '.claude/memory',\r\n    '.claude/configs',\r\n    'memory',\r\n    'memory/agents',\r\n    'memory/sessions',\r\n    'coordination',\r\n    'coordination/memory_bank',\r\n    'coordination/subtasks',\r\n    'coordination/orchestration',\r\n    'reports',\r\n  ];\r\n\r\n  // Create directories\r\n  for (const dir of directories) {\r\n    try {\r\n      await fs.mkdir(dir, { recursive: true });\r\n      console.log(`  ✅ Created ${dir}/ directory`);\r\n    } catch (error: unknown) {\r\n      if ((error as any).code !== 'EEXIST') {\r\n        throw error;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Create README files for key directories\r\n  const readmeFiles = {\r\n    'memory/agents/README.md': createAgentsReadme(),\r\n    'memory/sessions/README.md': createSessionsReadme(),\r\n    'coordination/README.md': createCoordinationReadme(),\r\n    'reports/README.md': createReportsReadme(),\r\n  };\r\n\r\n  for (const [filePath, content] of Object.entries(readmeFiles)) {\r\n    await fs.writeFile(filePath, content);\r\n    console.log(`  ✅ Created ${filePath}`);\r\n  }\r\n\r\n  // Create initial persistence database\r\n  const initialData = {\r\n    agents: [],\r\n    tasks: [],\r\n    swarms: [],\r\n    lastUpdated: Date.now(),\r\n    version: '1.0.71',\r\n  };\r\n\r\n  await fs.writeFile('memory/claude-flow-data.json', JSON.stringify(initialData, null, 2));\r\n  console.log('  ✅ Created memory/claude-flow-data.json (persistence database)');\r\n}\r\n\r\nfunction createAgentsReadme(): string {\r\n  return `# Agents Directory\r\n\r\nThis directory stores persistent information about AI agents created and managed by Claude-Flow.\r\n\r\n## Structure\r\n- Each agent gets its own JSON file named by agent ID\r\n- Agent files contain configuration, state, and memory\r\n- Shared agent data is stored in agent-registry.json\r\n\r\n## Usage\r\nAgents are automatically managed by the Claude-Flow orchestration system. You can:\r\n- View agent status with \\`claude-flow agent list\\`\r\n- Create new agents with \\`claude-flow agent spawn <type>\\`\r\n- Configure agents with \\`claude-flow agent configure <id>\\`\r\n\r\n## Files\r\n- \\`agent-registry.json\\`: Central agent registry\r\n- \\`agent-<id>.json\\`: Individual agent data files\r\n- \\`templates/\\`: Agent configuration templates\r\n`;\r\n}\r\n\r\nfunction createSessionsReadme(): string {\r\n  return `# Sessions Directory\r\n\r\nThis directory stores information about Claude-Flow orchestration sessions.\r\n\r\n## Structure\r\n- Each session gets its own subdirectory\r\n- Session data includes tasks, coordination state, and results\r\n- Session logs are automatically rotated\r\n\r\n## Usage\r\nSessions are managed automatically during orchestration:\r\n- Start sessions with \\`claude-flow start\\`\r\n- Monitor sessions with \\`claude-flow status\\`\r\n- Review session history with \\`claude-flow session list\\`\r\n\r\n## Files\r\n- \\`session-<id>/\\`: Individual session directories\r\n- \\`active-sessions.json\\`: Currently active sessions\r\n- \\`session-history.json\\`: Historical session data\r\n`;\r\n}\r\n\r\nfunction createCoordinationReadme(): string {\r\n  return `# Coordination Directory\r\n\r\nThis directory manages task coordination and orchestration data.\r\n\r\n## Subdirectories\r\n- \\`memory_bank/\\`: Shared memory for agent coordination\r\n- \\`subtasks/\\`: Task breakdown and assignment data\r\n- \\`orchestration/\\`: High-level orchestration patterns\r\n\r\n## Usage\r\nCoordination data is used for:\r\n- Multi-agent task distribution\r\n- Progress tracking and monitoring\r\n- Resource allocation and balancing\r\n- Error recovery and failover\r\n\r\nAccess coordination data through the Claude-Flow API or CLI commands.\r\n`;\r\n}\r\n\r\nfunction createReportsReadme(): string {\r\n  return `# Reports Directory\r\n\r\nThis directory stores output reports from swarm operations and orchestration tasks.\r\n\r\n## Structure\r\n- Swarm reports are stored by operation ID\r\n- Reports include execution logs, results, and metrics\r\n- Multiple output formats supported (JSON, SQLite, CSV, HTML)\r\n\r\n## Usage\r\nReports are generated automatically by swarm operations:\r\n- View recent reports with \\`claude-flow swarm list\\`\r\n- Check specific reports with \\`claude-flow swarm status <id>\\`\r\n- Export reports in different formats using \\`--output\\` flags\r\n\r\n## File Types\r\n- \\`*.json\\`: Structured operation data\r\n- \\`*.sqlite\\`: Database format for complex queries\r\n- \\`*.csv\\`: Tabular data for analysis\r\n- \\`*.html\\`: Human-readable reports\r\n`;\r\n}\r\n"],"names":["createDirectoryStructure","fs","path","directories","dir","mkdir","recursive","console","log","error","code","readmeFiles","createAgentsReadme","createSessionsReadme","createCoordinationReadme","createReportsReadme","filePath","content","Object","entries","writeFile","initialData","agents","tasks","swarms","lastUpdated","Date","now","version","JSON","stringify"],"mappings":"AACA,OAAO,eAAeA;IACpB,MAAMC,KAAK,MAAM,MAAM,CAAC;IACxB,MAAMC,OAAO,MAAM,MAAM,CAAC;IAG1B,MAAMC,cAAc;QAClB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAGD,KAAK,MAAMC,OAAOD,YAAa;QAC7B,IAAI;YACF,MAAMF,GAAGI,KAAK,CAACD,KAAK;gBAAEE,WAAW;YAAK;YACtCC,QAAQC,GAAG,CAAC,CAAC,YAAY,EAAEJ,IAAI,WAAW,CAAC;QAC7C,EAAE,OAAOK,OAAgB;YACvB,IAAI,AAACA,MAAcC,IAAI,KAAK,UAAU;gBACpC,MAAMD;YACR;QACF;IACF;IAGA,MAAME,cAAc;QAClB,2BAA2BC;QAC3B,6BAA6BC;QAC7B,0BAA0BC;QAC1B,qBAAqBC;IACvB;IAEA,KAAK,MAAM,CAACC,UAAUC,QAAQ,IAAIC,OAAOC,OAAO,CAACR,aAAc;QAC7D,MAAMV,GAAGmB,SAAS,CAACJ,UAAUC;QAC7BV,QAAQC,GAAG,CAAC,CAAC,YAAY,EAAEQ,UAAU;IACvC;IAGA,MAAMK,cAAc;QAClBC,QAAQ,EAAE;QACVC,OAAO,EAAE;QACTC,QAAQ,EAAE;QACVC,aAAaC,KAAKC,GAAG;QACrBC,SAAS;IACX;IAEA,MAAM3B,GAAGmB,SAAS,CAAC,gCAAgCS,KAAKC,SAAS,CAACT,aAAa,MAAM;IACrFd,QAAQC,GAAG,CAAC;AACd;AAEA,SAASI;IACP,OAAO,CAAC;;;;;;;;;;;;;;;;;;;AAmBV,CAAC;AACD;AAEA,SAASC;IACP,OAAO,CAAC;;;;;;;;;;;;;;;;;;;AAmBV,CAAC;AACD;AAEA,SAASC;IACP,OAAO,CAAC;;;;;;;;;;;;;;;;;AAiBV,CAAC;AACD;AAEA,SAASC;IACP,OAAO,CAAC;;;;;;;;;;;;;;;;;;;;AAoBV,CAAC;AACD"}