{
  "version": 3,
  "sources": ["../../../src/cli/commands/swarm.ts"],
  "sourcesContent": ["/**\n * Claude Swarm Mode - Self-orchestrating agent swarms using claude-flow\n */\n\nimport { generateId } from '../../utils/helpers.js';\nimport { promises as fs } from 'node:fs';\nimport { success, error, warning, info } from '../cli-core.js';\nimport type { CommandContext } from '../cli-core.js';\nimport { BackgroundExecutor } from '../../coordination/background-executor.js';\nimport { SwarmCoordinator } from '../../coordination/swarm-coordinator.js';\nimport { SwarmMemoryManager } from '../../memory/swarm-memory.js';\nexport async function swarmAction(ctx: CommandContext) {\n  // First check if help is requested\n  if (ctx.flags.help || ctx.flags.h) {\n    // Show help is handled by the CLI framework\n    return;\n  }\n\n  // The objective should be all the non-flag arguments joined together\n  const objective = ctx.args.join(' ').trim();\n\n  if (!objective) {\n    error('Usage: swarm <objective>');\n    console.log('\\nExamples:');\n    console.log('  claude-flow swarm \"Build a REST API\"');\n    console.log('  claude-flow swarm \"Research cloud architecture\"');\n    console.log('\\nOptions:');\n    console.log('  --dry-run              Show configuration without executing');\n    console.log('  --strategy <type>      Strategy: auto, research, development, analysis');\n    console.log('  --max-agents <n>       Maximum number of agents (default: 5)');\n    console.log('  --timeout <minutes>    Timeout in minutes (default: 60)');\n    console.log('  --research             Enable research capabilities');\n    console.log('  --parallel             Enable parallel execution');\n    console.log('  --review               Enable peer review between agents');\n    console.log('  --monitor              Enable real-time monitoring');\n    console.log('  --ui                   Use blessed terminal UI (requires node.js)');\n    console.log('  --background           Run swarm in background mode');\n    console.log('  --distributed          Enable distributed coordination');\n    console.log('  --memory-namespace     Memory namespace for swarm (default: swarm)');\n    console.log('  --persistence          Enable task persistence (default: true)');\n    return;\n  }\n\n  const options = {\n    strategy: (ctx.flags.strategy as string) || 'auto',\n    maxAgents: (ctx.flags.maxAgents as number) || (ctx.flags['max-agents'] as number) || 5,\n    maxDepth: (ctx.flags.maxDepth as number) || (ctx.flags['max-depth'] as number) || 3,\n    research: (ctx.flags.research as boolean) || false,\n    parallel: (ctx.flags.parallel as boolean) || false,\n    memoryNamespace:\n      (ctx.flags.memoryNamespace as string) || (ctx.flags['memory-namespace'] as string) || 'swarm',\n    timeout: (ctx.flags.timeout as number) || 60,\n    review: (ctx.flags.review as boolean) || false,\n    coordinator: (ctx.flags.coordinator as boolean) || false,\n    config: (ctx.flags.config as string) || (ctx.flags.c as string),\n    verbose: (ctx.flags.verbose as boolean) || (ctx.flags.v as boolean) || false,\n    dryRun:\n      (ctx.flags.dryRun as boolean) ||\n      (ctx.flags['dry-run'] as boolean) ||\n      (ctx.flags.d as boolean) ||\n      false,\n    monitor: (ctx.flags.monitor as boolean) || false,\n    ui: (ctx.flags.ui as boolean) || false,\n    background: (ctx.flags.background as boolean) || false,\n    persistence: (ctx.flags.persistence as boolean) || true,\n    distributed: (ctx.flags.distributed as boolean) || false,\n  };\n\n  const swarmId = generateId('swarm');\n\n  if (options.dryRun) {\n    warning('DRY RUN - Swarm Configuration:');\n    console.log(`Swarm ID: ${swarmId}`);\n    console.log(`Objective: ${objective}`);\n    console.log(`Strategy: ${options.strategy}`);\n    console.log(`Max Agents: ${options.maxAgents}`);\n    console.log(`Max Depth: ${options.maxDepth}`);\n    console.log(`Research: ${options.research}`);\n    console.log(`Parallel: ${options.parallel}`);\n    console.log(`Review Mode: ${options.review}`);\n    console.log(`Coordinator: ${options.coordinator}`);\n    console.log(`Memory Namespace: ${options.memoryNamespace}`);\n    console.log(`Timeout: ${options.timeout} minutes`);\n    return;\n  }\n\n  // If UI mode is requested, use the blessed UI version\n  if (options.ui) {\n    try {\n      const scriptPath = new URL(import.meta.url).pathname;\n      const projectRoot = scriptPath.substring(0, scriptPath.indexOf('/src/'));\n      const uiScriptPath = `${projectRoot}/src/cli/simple-commands/swarm-ui.js`;\n\n      // Check if the UI script exists\n      try {\n        await fs.stat(uiScriptPath);\n      } catch {\n        warning('Swarm UI script not found. Falling back to standard mode.');\n        options.ui = false;\n      }\n\n      if (options.ui) {\n        const command = new Deno.Command('node', {\n          args: [uiScriptPath],\n          stdin: 'inherit',\n          stdout: 'inherit',\n          stderr: 'inherit',\n        });\n\n        const process = command.spawn();\n        const { code } = await process.status;\n\n        if (code !== 0) {\n          error(`Swarm UI exited with code ${code}`);\n        }\n        return;\n      }\n    } catch (err) {\n      warning(`Failed to launch blessed UI: ${(err as Error).message}`);\n      console.log('Falling back to standard mode...');\n      options.ui = false;\n    }\n  }\n\n  success(`\uD83D\uDC1D Initializing Claude Swarm: ${swarmId}`);\n  console.log(`\uD83D\uDCCB Objective: ${objective}`);\n  console.log(`\uD83C\uDFAF Strategy: ${options.strategy}`);\n\n  try {\n    // Initialize swarm coordination system\n    const coordinator = new SwarmCoordinator({\n      maxAgents: options.maxAgents,\n      maxConcurrentTasks: options.parallel ? options.maxAgents : 1,\n      taskTimeout: options.timeout * 60 * 1000, // Convert minutes to milliseconds\n      enableMonitoring: options.monitor,\n      enableWorkStealing: options.parallel,\n      enableCircuitBreaker: true,\n      memoryNamespace: options.memoryNamespace,\n      coordinationStrategy: options.distributed ? 'distributed' : 'centralized',\n    });\n\n    // Initialize background executor\n    const executor = new BackgroundExecutor({\n      maxConcurrentTasks: options.maxAgents,\n      defaultTimeout: options.timeout * 60 * 1000,\n      logPath: `./swarm-runs/${swarmId}/background-tasks`,\n      enablePersistence: options.persistence,\n    });\n\n    // Initialize swarm memory\n    const memory = new SwarmMemoryManager({\n      namespace: options.memoryNamespace,\n      enableDistribution: options.distributed,\n      enableKnowledgeBase: true,\n      persistencePath: `./swarm-runs/${swarmId}/memory`,\n    });\n\n    // Start all systems\n    await coordinator.start();\n    await executor.start();\n    await memory.initialize();\n\n    // Create swarm tracking directory\n    const swarmDir = `./swarm-runs/${swarmId}`;\n    await Deno.mkdir(swarmDir, { recursive: true });\n\n    // Create objective in coordinator\n    const objectiveId = await coordinator.createObjective(\n      objective,\n      (options.strategy || 'auto') as any\n    );\n\n    console.log(`\\n\uD83D\uDCDD Objective created with ID: ${objectiveId}`);\n\n    // Register agents based on strategy\n    const agentTypes = getAgentTypesForStrategy(options.strategy);\n    const agents = [];\n\n    for (let i = 0; i < Math.min(options.maxAgents, agentTypes.length); i++) {\n      const agentType = agentTypes[i % agentTypes.length];\n      const agentId = await coordinator.registerAgent(\n        `${agentType}-${i + 1}`,\n        agentType,\n        getCapabilitiesForType(agentType),\n      );\n      agents.push(agentId);\n      console.log(`  \uD83E\uDD16 Registered ${agentType} agent: ${agentId}`);\n    }\n\n    // Write swarm configuration\n    await fs.writeFile(\n      `${swarmDir}/config.json`,\n      JSON.stringify(\n        {\n          swarmId,\n          objectiveId,\n          objective,\n          options,\n          agents,\n          startTime: new Date().toISOString(),\n        },\n        null,\n        2,\n      ),\n    );\n\n    // Start objective execution\n    await coordinator.executeObjective(objectiveId);\n    console.log(`\\n\uD83D\uDE80 Swarm execution started...`);\n\n    if (options.background) {\n      console.log(\n        `Running in background mode. Check status with: claude-flow swarm status ${swarmId}`,\n      );\n\n      // Save coordinator state and exit\n      await fs.writeFile(\n        `${swarmDir}/coordinator.json`,\n        JSON.stringify(\n          {\n            coordinatorRunning: true,\n            pid: Deno.pid,\n            startTime: new Date().toISOString(),\n          },\n          null,\n          2,\n        ),\n      );\n    } else {\n      // Wait for completion in foreground\n      await waitForObjectiveCompletion(coordinator, objectiveId, options);\n\n      // Write completion status\n      await fs.writeFile(\n        `${swarmDir}/status.json`,\n        JSON.stringify(\n          {\n            status: 'completed',\n            endTime: new Date().toISOString(),\n          },\n          null,\n          2,\n        ),\n      );\n\n      // Show summary\n      const swarmStatus = coordinator.getSwarmStatus();\n      console.log(`\\n\uD83D\uDCCA Swarm Summary:`);\n      console.log(`  - Objectives: ${swarmStatus.objectives}`);\n      console.log(`  - Tasks Completed: ${swarmStatus.tasks.completed}`);\n      console.log(`  - Tasks Failed: ${swarmStatus.tasks.failed}`);\n      console.log(`  - Agents Used: ${swarmStatus.agents.total}`);\n      console.log(`  - Results saved to: ${swarmDir}`);\n\n      success(`\\n\u2705 Swarm ${swarmId} completed successfully`);\n    }\n\n    // Cleanup\n    if (!options.background) {\n      await coordinator.stop();\n      await executor.stop();\n      await memory.shutdown();\n    }\n  } catch (err) {\n    error(`Failed to execute swarm: ${(err as Error).message}`);\n  }\n}\n\n/**\n * Decompose objective into subtasks based on strategy\n */\nasync function decomposeObjective(objective: string, options: any): Promise<any[]> {\n  const subtasks = [];\n\n  switch (options.strategy) {\n    case 'research':\n      subtasks.push(\n        { type: 'research', description: `Research background information on: ${objective}` },\n        { type: 'analysis', description: `Analyze findings and identify key patterns` },\n        { type: 'synthesis', description: `Synthesize research into actionable insights` },\n      );\n      break;\n\n    case 'development':\n      subtasks.push(\n        { type: 'planning', description: `Plan architecture and design for: ${objective}` },\n        { type: 'implementation', description: `Implement core functionality` },\n        { type: 'testing', description: `Test and validate implementation` },\n        { type: 'documentation', description: `Document the solution` },\n      );\n      break;\n\n    case 'analysis':\n      subtasks.push(\n        { type: 'data-gathering', description: `Gather relevant data for: ${objective}` },\n        { type: 'analysis', description: `Perform detailed analysis` },\n        { type: 'visualization', description: `Create visualizations and reports` },\n      );\n      break;\n\n    default: // auto\n      // Analyze objective to determine best approach\n      if (objective.toLowerCase().includes('build') || objective.toLowerCase().includes('create')) {\n        subtasks.push(\n          { type: 'planning', description: `Plan solution for: ${objective}` },\n          { type: 'implementation', description: `Implement the solution` },\n          { type: 'testing', description: `Test and validate` },\n        );\n      } else if (\n        objective.toLowerCase().includes('research') ||\n        objective.toLowerCase().includes('analyze')\n      ) {\n        subtasks.push(\n          { type: 'research', description: `Research: ${objective}` },\n          { type: 'analysis', description: `Analyze findings` },\n          { type: 'report', description: `Generate report` },\n        );\n      } else {\n        subtasks.push(\n          { type: 'exploration', description: `Explore requirements for: ${objective}` },\n          { type: 'execution', description: `Execute main tasks` },\n          { type: 'validation', description: `Validate results` },\n        );\n      }\n  }\n\n  return subtasks;\n}\n\n/**\n * Execute tasks in parallel\n */\nasync function executeParallelTasks(tasks: any[], options: any, swarmId: string, swarmDir: string) {\n  const promises = tasks.map(async (task, index) => {\n    const agentId = generateId('agent');\n    console.log(`  \uD83E\uDD16 Spawning agent ${agentId} for: ${task.type}`);\n\n    // Create agent directory\n    const agentDir = `${swarmDir}/agents/${agentId}`;\n    await Deno.mkdir(agentDir, { recursive: true });\n\n    // Write agent task\n    await fs.writeFile(\n      `${agentDir}/task.json`,\n      JSON.stringify(\n        {\n          agentId,\n          swarmId,\n          task,\n          status: 'active',\n          startTime: new Date().toISOString(),\n        },\n        null,\n        2,\n      ),\n    );\n\n    // Execute agent task\n    await executeAgentTask(agentId, task, options, agentDir);\n\n    // Update status\n    await fs.writeFile(\n      `${agentDir}/status.json`,\n      JSON.stringify(\n        {\n          status: 'completed',\n          endTime: new Date().toISOString(),\n        },\n        null,\n        2,\n      ),\n    );\n\n    console.log(`  \u2705 Agent ${agentId} completed: ${task.type}`);\n  });\n\n  await Promise.all(promises);\n}\n\n/**\n * Execute tasks sequentially\n */\nasync function executeSequentialTasks(\n  tasks: any[],\n  options: any,\n  swarmId: string,\n  swarmDir: string,\n) {\n  for (const [index, task] of tasks.entries()) {\n    const agentId = generateId('agent');\n    console.log(`  \uD83E\uDD16 Spawning agent ${agentId} for: ${task.type}`);\n\n    // Create agent directory\n    const agentDir = `${swarmDir}/agents/${agentId}`;\n    await Deno.mkdir(agentDir, { recursive: true });\n\n    // Write agent task\n    await fs.writeFile(\n      `${agentDir}/task.json`,\n      JSON.stringify(\n        {\n          agentId,\n          swarmId,\n          task,\n          status: 'active',\n          startTime: new Date().toISOString(),\n        },\n        null,\n        2,\n      ),\n    );\n\n    // Execute agent task\n    await executeAgentTask(agentId, task, options, agentDir);\n\n    // Update status\n    await fs.writeFile(\n      `${agentDir}/status.json`,\n      JSON.stringify(\n        {\n          status: 'completed',\n          endTime: new Date().toISOString(),\n        },\n        null,\n        2,\n      ),\n    );\n\n    console.log(`  \u2705 Agent ${agentId} completed: ${task.type}`);\n  }\n}\n\n/**\n * Execute a single agent task using claude\n */\nasync function executeAgentTask(agentId: string, task: any, options: any, agentDir: string) {\n  console.log(`    \u2192 Executing: ${task.type} task`);\n\n  try {\n    // Check if claude CLI is available and not in simulation mode\n    const checkClaude = new Deno.Command('which', { args: ['claude'] });\n    const checkResult = await checkClaude.output();\n\n    if (checkResult.success && options.simulate !== true) {\n      // Write prompt to a file for claude to read\n      const promptFile = `${agentDir}/prompt.txt`;\n      const prompt = `You are an AI agent with ID: ${agentId}\n\nYour task type is: ${task.type}\nYour specific task is: ${task.description}\n\nPlease execute this task and provide a detailed response.\n${task.type === 'research' ? 'Use web search and research tools as needed.' : ''}\n${task.type === 'implementation' ? 'Write clean, well-documented code.' : ''}\n${task.type === 'testing' ? 'Create comprehensive tests.' : ''}\n\nProvide your output in a structured format.\n\nWhen you're done, please end with \"TASK COMPLETED\" on its own line.`;\n\n      await fs.writeFile(promptFile, prompt);\n\n      // Build claude command using bash to pipe the prompt\n      let tools = 'View,GlobTool,GrepTool,LS';\n      if (task.type === 'research' || options.research) {\n        tools = 'WebFetchTool,WebSearch';\n      } else if (task.type === 'implementation') {\n        tools = 'View,Edit,Replace,GlobTool,GrepTool,LS,Bash';\n      }\n\n      // Build claude command arguments for non-interactive mode\n      const claudeArgs = [\n        '-p', // Non-interactive print mode\n        task.description, // The prompt\n        '--dangerously-skip-permissions',\n        '--allowedTools',\n        tools,\n      ];\n\n      // Write command to file for tracking\n      await fs.writeFile(`${agentDir}/command.txt`, `claude ${claudeArgs.join(' ')}`);\n\n      console.log(`    \u2192 Running: ${task.description}`);\n\n      // For real-time output, we need to capture it differently\n      // First run with piped to capture for file, then run with inherit for display\n\n      // Create a wrapper script that will tee the output\n      const wrapperScript = `#!/bin/bash\nclaude ${claudeArgs.map((arg) => `\"${arg}\"`).join(' ')} | tee \"${agentDir}/output.txt\"\nexit \\${PIPESTATUS[0]}`;\n\n      const wrapperPath = `${agentDir}/wrapper.sh`;\n      await fs.writeFile(wrapperPath, wrapperScript);\n      await Deno.chmod(wrapperPath, 0o755);\n\n      console.log(`    \u250C\u2500 Claude Output \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500`);\n\n      const command = new Deno.Command('bash', {\n        args: [wrapperPath],\n        stdout: 'inherit', // This allows real-time streaming to console\n        stderr: 'inherit',\n      });\n\n      try {\n        const process = command.spawn();\n        const { code, success } = await process.status;\n\n        console.log(`    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500`);\n\n        if (!success) {\n          throw new Error(`Claude exited with code ${code}`);\n        }\n\n        console.log(`    \u2713 Task completed`);\n      } catch (err) {\n        throw err;\n      }\n    } else {\n      // Simulate execution if claude CLI not available\n      console.log(`    \u2192 Simulating: ${task.type} (claude CLI not available)`);\n\n      // For now, let's use the claude-flow claude spawn command instead\n      const claudeFlowArgs = ['claude', 'spawn', task.description];\n\n      if (task.type === 'research' || options.research) {\n        claudeFlowArgs.push('--research');\n      }\n\n      if (options.parallel) {\n        claudeFlowArgs.push('--parallel');\n      }\n\n      console.log(`    \u2192 Using: claude-flow ${claudeFlowArgs.join(' ')}`);\n\n      // Get the path to claude-flow binary\n      const claudeFlowPath = new URL(import.meta.url).pathname;\n      const projectRoot = claudeFlowPath.substring(0, claudeFlowPath.indexOf('/src/'));\n      const claudeFlowBin = `${projectRoot}/bin/claude-flow`;\n\n      // Execute claude-flow command\n      const command = new Deno.Command(claudeFlowBin, {\n        args: claudeFlowArgs,\n        stdout: 'piped',\n        stderr: 'piped',\n      });\n\n      const { code, stdout, stderr } = await command.output();\n\n      // Save output\n      await fs.writeFile(`${agentDir}/output.txt`, new TextDecoder().decode(stdout));\n      if (stderr.length > 0) {\n        await fs.writeFile(`${agentDir}/error.txt`, new TextDecoder().decode(stderr));\n      }\n\n      if (code !== 0) {\n        console.log(`    \u26A0\uFE0F  Command exited with code ${code}`);\n      }\n    }\n  } catch (err) {\n    // Log error but continue\n    console.log(`    \u26A0\uFE0F  Error executing task: ${(err as Error).message}`);\n    await fs.writeFile(`${agentDir}/error.txt`, (err as Error).message);\n  }\n}\n\nfunction getAgentTypesForStrategy(\n  strategy: string,\n): ('researcher' | 'coder' | 'analyst' | 'coordinator' | 'reviewer')[] {\n  switch (strategy) {\n    case 'research':\n      return ['researcher', 'analyst', 'coordinator'];\n    case 'development':\n      return ['coder', 'analyst', 'reviewer', 'coordinator'];\n    case 'analysis':\n      return ['analyst', 'researcher', 'coordinator'];\n    default: // auto\n      return ['coordinator', 'researcher', 'coder', 'analyst'];\n  }\n}\n\nfunction getCapabilitiesForType(type: string): string[] {\n  switch (type) {\n    case 'researcher':\n      return ['web-search', 'data-collection', 'analysis', 'documentation'];\n    case 'coder':\n      return ['coding', 'testing', 'debugging', 'architecture'];\n    case 'analyst':\n      return ['data-analysis', 'visualization', 'reporting', 'insights'];\n    case 'reviewer':\n      return ['code-review', 'quality-assurance', 'validation', 'testing'];\n    case 'coordinator':\n      return ['planning', 'coordination', 'task-management', 'communication'];\n    default:\n      return ['general'];\n  }\n}\n\nasync function waitForObjectiveCompletion(\n  coordinator: any,\n  objectiveId: string,\n  options: any,\n): Promise<void> {\n  return new Promise((resolve) => {\n    const checkInterval = setInterval(() => {\n      const objective = coordinator.getObjectiveStatus(objectiveId);\n\n      if (!objective) {\n        clearInterval(checkInterval);\n        resolve();\n        return;\n      }\n\n      if (objective.status === 'completed' || objective.status === 'failed') {\n        clearInterval(checkInterval);\n        resolve();\n        return;\n      }\n\n      // Show progress if verbose\n      if (options.verbose) {\n        const swarmStatus = coordinator.getSwarmStatus();\n        console.log(\n          `Progress: ${swarmStatus.tasks.completed}/${swarmStatus.tasks.total} tasks completed`,\n        );\n      }\n    }, 5000); // Check every 5 seconds\n\n    // Timeout after the specified time\n    setTimeout(\n      () => {\n        clearInterval(checkInterval);\n        console.log('\u26A0\uFE0F  Swarm execution timed out');\n        resolve();\n      },\n      options.timeout * 60 * 1000,\n    );\n  });\n}\n"],
  "mappings": "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",
  "names": ["fs", "success"]
}
