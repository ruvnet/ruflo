{"version":3,"sources":["../../../../src/cli/agents/coordinator.ts"],"sourcesContent":["/**\r\n * Coordinator Agent - Specialized in task orchestration and management\r\n */\r\n\r\nimport { BaseAgent } from './base-agent.js';\r\nimport type {\r\n  AgentCapabilities,\r\n  AgentConfig,\r\n  AgentEnvironment,\r\n  TaskDefinition,\r\n} from '../../swarm/types.js';\r\nimport type { ILogger } from '../../core/logger.js';\r\nimport type { IEventBus } from '../../core/event-bus.js';\r\nimport type { DistributedMemorySystem } from '../../memory/distributed-memory.js';\r\n\r\n// Type definitions for coordinator activities\r\ninterface ResourceAssignment {\r\n  resource: string;\r\n  task: string;\r\n  utilization: number;\r\n  duration: string;\r\n}\r\n\r\ninterface TaskProgressItem {\r\n  name: string;\r\n  status: string;\r\n  duration: string;\r\n}\r\n\r\nexport class CoordinatorAgent extends BaseAgent {\r\n  constructor(\r\n    id: string,\r\n    config: AgentConfig,\r\n    environment: AgentEnvironment,\r\n    logger: ILogger,\r\n    eventBus: IEventBus,\r\n    memory: DistributedMemorySystem,\r\n  ) {\r\n    super(id, 'coordinator', config, environment, logger, eventBus, memory);\r\n  }\r\n\r\n  protected getDefaultCapabilities(): AgentCapabilities {\r\n    return {\r\n      codeGeneration: false,\r\n      codeReview: false,\r\n      testing: false,\r\n      documentation: true,\r\n      research: true,\r\n      analysis: true,\r\n      webSearch: false,\r\n      apiIntegration: true,\r\n      fileSystem: true,\r\n      terminalAccess: false,\r\n      languages: [],\r\n      frameworks: [],\r\n      domains: [\r\n        'project-management',\r\n        'task-coordination',\r\n        'workflow-orchestration',\r\n        'team-management',\r\n        'planning',\r\n        'communication',\r\n        'resource-allocation',\r\n        'progress-tracking',\r\n      ],\r\n      tools: [\r\n        'task-manager',\r\n        'workflow-orchestrator',\r\n        'communication-hub',\r\n        'progress-tracker',\r\n        'resource-allocator',\r\n        'deadline-manager',\r\n        'status-reporter',\r\n      ],\r\n      maxConcurrentTasks: 8,\r\n      maxMemoryUsage: 512 * 1024 * 1024, // 512MB\r\n      maxExecutionTime: 600000, // 10 minutes\r\n      reliability: 0.95,\r\n      speed: 0.9,\r\n      quality: 0.88,\r\n    };\r\n  }\r\n\r\n  protected getDefaultConfig(): Partial<AgentConfig> {\r\n    return {\r\n      autonomyLevel: 0.9,\r\n      learningEnabled: true,\r\n      adaptationEnabled: true,\r\n      maxTasksPerHour: 30,\r\n      maxConcurrentTasks: 8,\r\n      timeoutThreshold: 600000,\r\n      reportingInterval: 15000,\r\n      heartbeatInterval: 8000,\r\n      permissions: ['file-read', 'file-write', 'api-access', 'agent-management', 'task-management'],\r\n      trustedAgents: [],\r\n      expertise: {\r\n        'task-orchestration': 0.95,\r\n        'resource-management': 0.9,\r\n        'progress-tracking': 0.92,\r\n        communication: 0.88,\r\n        planning: 0.85,\r\n      },\r\n      preferences: {\r\n        communicationStyle: 'clear',\r\n        reportingFrequency: 'regular',\r\n        prioritization: 'impact-based',\r\n        escalationThreshold: 'medium',\r\n      },\r\n    };\r\n  }\r\n\r\n  override async executeTask(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Coordinator executing task', {\r\n      agentId: this.id,\r\n      taskType: task.type,\r\n      taskId: task.id,\r\n    });\r\n\r\n    try {\r\n      switch (task.type) {\r\n        case 'task-orchestration':\r\n          return await this.orchestrateTasks(task);\r\n        case 'progress-tracking':\r\n          return await this.trackProgress(task);\r\n        case 'resource-allocation':\r\n          return await this.allocateResources(task);\r\n        case 'workflow-management':\r\n          return await this.manageWorkflow(task);\r\n        case 'team-coordination':\r\n          return await this.coordinateTeam(task);\r\n        case 'status-reporting':\r\n          return await this.generateStatusReport(task);\r\n        default:\r\n          return await this.performGeneralCoordination(task);\r\n      }\r\n    } catch (error) {\r\n      this.logger.error('Coordination task failed', {\r\n        agentId: this.id,\r\n        taskId: task.id,\r\n        error: error instanceof Error ? error.message : String(error),\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  private async orchestrateTasks(task: TaskDefinition): Promise<any> {\r\n    const tasks = task.parameters?.tasks || [];\r\n    const strategy = task.parameters?.strategy || 'sequential';\r\n    const priority = task.parameters?.priority || 'balanced';\r\n\r\n    this.logger.info('Orchestrating tasks', {\r\n      taskCount: tasks.length,\r\n      strategy,\r\n      priority,\r\n    });\r\n\r\n    const orchestration = {\r\n      strategy,\r\n      priority,\r\n      tasks: [],\r\n      dependencies: [],\r\n      timeline: {\r\n        estimated: 0,\r\n        critical_path: [],\r\n        milestones: [],\r\n      },\r\n      resource_allocation: {},\r\n      monitoring: {\r\n        checkpoints: [],\r\n        alerts: [],\r\n        metrics: [],\r\n      },\r\n      risk_assessment: {\r\n        risks: [],\r\n        mitigation: [],\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate task orchestration\r\n    await this.delay(2000);\r\n\r\n    orchestration.tasks = tasks.map((t: any, index: number) => ({\r\n      id: t.id || `task-${index + 1}`,\r\n      name: t.name || `Task ${index + 1}`,\r\n      status: 'pending',\r\n      assignee: null,\r\n      estimated_duration: t.duration || 30,\r\n      dependencies: t.dependencies || [],\r\n    }));\r\n\r\n    return orchestration;\r\n  }\r\n\r\n  private async trackProgress(task: TaskDefinition): Promise<any> {\r\n    const project = task.parameters?.project;\r\n    const timeframe = task.parameters?.timeframe || 'weekly';\r\n    const metrics = task.parameters?.metrics || ['completion', 'velocity', 'quality'];\r\n\r\n    this.logger.info('Tracking progress', {\r\n      project,\r\n      timeframe,\r\n      metrics,\r\n    });\r\n\r\n    const progress = {\r\n      project,\r\n      timeframe,\r\n      metrics,\r\n      summary: {\r\n        overall_progress: 0,\r\n        tasks_completed: 0,\r\n        tasks_in_progress: 0,\r\n        tasks_pending: 0,\r\n        blockers: 0,\r\n      },\r\n      velocity: {\r\n        current: 0,\r\n        average: 0,\r\n        trend: 'stable',\r\n      },\r\n      quality_metrics: {\r\n        defect_rate: 0,\r\n        review_coverage: 0,\r\n        test_coverage: 0,\r\n      },\r\n      timeline: {\r\n        on_track: true,\r\n        estimated_completion: new Date(),\r\n        delays: [],\r\n      },\r\n      recommendations: [],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate progress tracking\r\n    await this.delay(1500);\r\n\r\n    progress.summary = {\r\n      overall_progress: 68,\r\n      tasks_completed: 15,\r\n      tasks_in_progress: 6,\r\n      tasks_pending: 4,\r\n      blockers: 1,\r\n    };\r\n\r\n    return progress;\r\n  }\r\n\r\n  private async allocateResources(task: TaskDefinition): Promise<any> {\r\n    const resources = task.input?.resources || [];\r\n    const requirements = task.input?.requirements || [];\r\n    const constraints = task.input?.constraints || [];\r\n\r\n    this.logger.info('Allocating resources', {\r\n      resources: resources.length,\r\n      requirements: requirements.length,\r\n      constraints: constraints.length,\r\n    });\r\n\r\n    const allocation = {\r\n      resources,\r\n      requirements,\r\n      constraints,\r\n      assignments: [] as ResourceAssignment[],\r\n      utilization: {},\r\n      conflicts: [] as any[],\r\n      optimizations: [] as any[],\r\n      recommendations: [] as any[],\r\n      efficiency: 0,\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate resource allocation\r\n    await this.delay(2500);\r\n\r\n    allocation.assignments = [\r\n      {\r\n        resource: 'Agent-001',\r\n        task: 'API Development',\r\n        utilization: 0.8,\r\n        duration: '2 days',\r\n      },\r\n      {\r\n        resource: 'Agent-002',\r\n        task: 'Testing',\r\n        utilization: 0.6,\r\n        duration: '1 day',\r\n      },\r\n    ];\r\n\r\n    allocation.efficiency = 0.85;\r\n\r\n    return allocation;\r\n  }\r\n\r\n  private async manageWorkflow(task: TaskDefinition): Promise<any> {\r\n    const workflow = task.input?.workflow;\r\n    const stage = task.input?.stage || 'planning';\r\n    const automation = task.input?.automation || false;\r\n\r\n    this.logger.info('Managing workflow', {\r\n      workflow,\r\n      stage,\r\n      automation,\r\n    });\r\n\r\n    const management = {\r\n      workflow,\r\n      stage,\r\n      automation,\r\n      stages: [] as TaskProgressItem[],\r\n      transitions: [] as any[],\r\n      approvals: [] as any[],\r\n      bottlenecks: [] as any[],\r\n      optimizations: [] as any[],\r\n      sla_compliance: {\r\n        on_time: 0,\r\n        quality: 0,\r\n        budget: 0,\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate workflow management\r\n    await this.delay(2000);\r\n\r\n    management.stages = [\r\n      { name: 'Planning', status: 'completed', duration: '2 days' },\r\n      { name: 'Development', status: 'in_progress', duration: '5 days' },\r\n      { name: 'Testing', status: 'pending', duration: '2 days' },\r\n      { name: 'Deployment', status: 'pending', duration: '1 day' },\r\n    ];\r\n\r\n    return management;\r\n  }\r\n\r\n  private async coordinateTeam(task: TaskDefinition): Promise<any> {\r\n    const team = task.parameters?.team || [];\r\n    const objectives = task.parameters?.objectives || [];\r\n    const communication = task.parameters?.communication || 'daily';\r\n\r\n    this.logger.info('Coordinating team', {\r\n      teamSize: team.length,\r\n      objectives: objectives.length,\r\n      communication,\r\n    });\r\n\r\n    const coordination = {\r\n      team,\r\n      objectives,\r\n      communication,\r\n      meetings: [],\r\n      assignments: [],\r\n      collaboration: {\r\n        tools: [],\r\n        channels: [],\r\n        frequency: communication,\r\n      },\r\n      performance: {\r\n        individual: {},\r\n        team: {\r\n          productivity: 0,\r\n          satisfaction: 0,\r\n          collaboration_score: 0,\r\n        },\r\n      },\r\n      issues: [],\r\n      improvements: [],\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate team coordination\r\n    await this.delay(1800);\r\n\r\n    coordination.performance.team = {\r\n      productivity: 0.82,\r\n      satisfaction: 0.88,\r\n      collaboration_score: 0.85,\r\n    };\r\n\r\n    return coordination;\r\n  }\r\n\r\n  private async generateStatusReport(task: TaskDefinition): Promise<any> {\r\n    const scope = task.input?.scope || 'project';\r\n    const period = task.input?.period || 'weekly';\r\n    const audience = task.input?.audience || 'stakeholders';\r\n    const format = task.input?.format || 'summary';\r\n\r\n    this.logger.info('Generating status report', {\r\n      scope,\r\n      period,\r\n      audience,\r\n      format,\r\n    });\r\n\r\n    const report = {\r\n      scope,\r\n      period,\r\n      audience,\r\n      format,\r\n      executive_summary: '',\r\n      key_metrics: {},\r\n      achievements: [] as string[],\r\n      challenges: [] as any[],\r\n      next_steps: [] as any[],\r\n      risks: [] as any[],\r\n      recommendations: [] as any[],\r\n      appendix: {\r\n        detailed_metrics: {},\r\n        charts: [] as any[],\r\n        raw_data: {},\r\n      },\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    // Simulate report generation\r\n    await this.delay(3000);\r\n\r\n    report.executive_summary =\r\n      'Project is 68% complete and on track for delivery. Team productivity is high with minor blockers identified.';\r\n\r\n    report.key_metrics = {\r\n      completion: '68%',\r\n      velocity: '12 points/sprint',\r\n      quality: '4.2/5.0',\r\n      budget: '72% utilized',\r\n    };\r\n\r\n    report.achievements = [\r\n      'Completed API development milestone',\r\n      'Achieved 85% test coverage',\r\n      'Resolved 3 critical bugs',\r\n    ];\r\n\r\n    return report;\r\n  }\r\n\r\n  private async performGeneralCoordination(task: TaskDefinition): Promise<any> {\r\n    this.logger.info('Performing general coordination', {\r\n      description: task.description,\r\n    });\r\n\r\n    // Default to task orchestration\r\n    return await this.orchestrateTasks(task);\r\n  }\r\n\r\n  private async delay(ms: number): Promise<void> {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n\r\n  override getAgentStatus(): any {\r\n    return {\r\n      ...super.getAgentStatus(),\r\n      specialization: 'Task Orchestration & Project Management',\r\n      coordinationCapabilities: [\r\n        'Task Orchestration',\r\n        'Resource Allocation',\r\n        'Progress Tracking',\r\n        'Team Coordination',\r\n        'Workflow Management',\r\n        'Status Reporting',\r\n      ],\r\n      managementStyles: ['Agile', 'Waterfall', 'Hybrid'],\r\n      currentCoordinations: this.getCurrentTasks().length,\r\n      averageCoordinationTime: '5-15 minutes',\r\n      lastCoordinationCompleted: this.getLastTaskCompletedTime(),\r\n      teamSize: this.collaborators.length,\r\n    };\r\n  }\r\n}\r\n\r\nexport const createCoordinatorAgent = (\r\n  id: string,\r\n  config: Partial<AgentConfig>,\r\n  environment: Partial<AgentEnvironment>,\r\n  logger: ILogger,\r\n  eventBus: IEventBus,\r\n  memory: DistributedMemorySystem,\r\n): CoordinatorAgent => {\r\n  const defaultConfig = {\r\n    autonomyLevel: 0.9,\r\n    learningEnabled: true,\r\n    adaptationEnabled: true,\r\n    maxTasksPerHour: 20,\r\n    maxConcurrentTasks: 5,\r\n    timeoutThreshold: 180000,\r\n    reportingInterval: 30000,\r\n    heartbeatInterval: 15000,\r\n    permissions: [\r\n      'task-orchestration',\r\n      'resource-allocation',\r\n      'progress-tracking',\r\n      'team-coordination',\r\n      'reporting',\r\n      'workflow-management',\r\n    ],\r\n    trustedAgents: [],\r\n    expertise: {\r\n      'task-orchestration': 0.98,\r\n      'resource-allocation': 0.95,\r\n      'progress-tracking': 0.92,\r\n      'team-coordination': 0.9,\r\n      'workflow-management': 0.94,\r\n    },\r\n    preferences: {\r\n      coordinationStyle: 'collaborative',\r\n      reportingFrequency: 'regular',\r\n      escalationThreshold: 'medium',\r\n      teamSize: 'medium',\r\n    },\r\n  };\r\n  const defaultEnv = {\r\n    runtime: 'deno' as const,\r\n    version: '1.40.0',\r\n    workingDirectory: './agents/coordinator',\r\n    tempDirectory: './tmp/coordinator',\r\n    logDirectory: './logs/coordinator',\r\n    apiEndpoints: {},\r\n    credentials: {},\r\n    availableTools: [\r\n      'task-manager',\r\n      'workflow-orchestrator',\r\n      'communication-hub',\r\n      'progress-tracker',\r\n    ],\r\n    toolConfigs: {\r\n      taskManager: { autoAssign: true, prioritization: 'impact' },\r\n      communication: { frequency: 'regular', style: 'clear' },\r\n    },\r\n  };\r\n\r\n  return new CoordinatorAgent(\r\n    id,\r\n    { ...defaultConfig, ...config } as AgentConfig,\r\n    { ...defaultEnv, ...environment } as AgentEnvironment,\r\n    logger,\r\n    eventBus,\r\n    memory,\r\n  );\r\n};\r\n"],"names":["BaseAgent","CoordinatorAgent","id","config","environment","logger","eventBus","memory","getDefaultCapabilities","codeGeneration","codeReview","testing","documentation","research","analysis","webSearch","apiIntegration","fileSystem","terminalAccess","languages","frameworks","domains","tools","maxConcurrentTasks","maxMemoryUsage","maxExecutionTime","reliability","speed","quality","getDefaultConfig","autonomyLevel","learningEnabled","adaptationEnabled","maxTasksPerHour","timeoutThreshold","reportingInterval","heartbeatInterval","permissions","trustedAgents","expertise","communication","planning","preferences","communicationStyle","reportingFrequency","prioritization","escalationThreshold","executeTask","task","info","agentId","taskType","type","taskId","orchestrateTasks","trackProgress","allocateResources","manageWorkflow","coordinateTeam","generateStatusReport","performGeneralCoordination","error","Error","message","String","tasks","parameters","strategy","priority","taskCount","length","orchestration","dependencies","timeline","estimated","critical_path","milestones","resource_allocation","monitoring","checkpoints","alerts","metrics","risk_assessment","risks","mitigation","timestamp","Date","delay","map","t","index","name","status","assignee","estimated_duration","duration","project","timeframe","progress","summary","overall_progress","tasks_completed","tasks_in_progress","tasks_pending","blockers","velocity","current","average","trend","quality_metrics","defect_rate","review_coverage","test_coverage","on_track","estimated_completion","delays","recommendations","resources","input","requirements","constraints","allocation","assignments","utilization","conflicts","optimizations","efficiency","resource","workflow","stage","automation","management","stages","transitions","approvals","bottlenecks","sla_compliance","on_time","budget","team","objectives","teamSize","coordination","meetings","collaboration","channels","frequency","performance","individual","productivity","satisfaction","collaboration_score","issues","improvements","scope","period","audience","format","report","executive_summary","key_metrics","achievements","challenges","next_steps","appendix","detailed_metrics","charts","raw_data","completion","description","ms","Promise","resolve","setTimeout","getAgentStatus","specialization","coordinationCapabilities","managementStyles","currentCoordinations","getCurrentTasks","averageCoordinationTime","lastCoordinationCompleted","getLastTaskCompletedTime","collaborators","createCoordinatorAgent","defaultConfig","coordinationStyle","defaultEnv","runtime","version","workingDirectory","tempDirectory","logDirectory","apiEndpoints","credentials","availableTools","toolConfigs","taskManager","autoAssign","style"],"mappings":"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"}