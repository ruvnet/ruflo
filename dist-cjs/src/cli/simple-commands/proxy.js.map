{"version":3,"sources":["../../../../src/cli/simple-commands/proxy.js"],"sourcesContent":["/**\r\n * OpenRouter Proxy Server Commands\r\n * Standalone proxy server that translates Anthropic API calls to OpenRouter\r\n * Enables 85-98% cost savings with Claude Code integration\r\n * NEW in v2.6.0 - Full integration with agentic-flow v1.5.5+\r\n */\r\n\r\nimport { printSuccess, printError, printWarning } from '../utils.js';\r\nimport { exec } from 'child_process';\r\nimport { promisify } from 'util';\r\n\r\nconst execAsync = promisify(exec);\r\n\r\n/**\r\n * Main proxy command handler\r\n */\r\nexport async function proxyCommand(subArgs, flags) {\r\n  const proxyCmd = subArgs[0];\r\n\r\n  switch (proxyCmd) {\r\n    case 'start':\r\n      await startProxy(subArgs, flags);\r\n      break;\r\n\r\n    case 'stop':\r\n      await stopProxy(subArgs, flags);\r\n      break;\r\n\r\n    case 'status':\r\n      await getProxyStatus(subArgs, flags);\r\n      break;\r\n\r\n    case 'logs':\r\n      await getProxyLogs(subArgs, flags);\r\n      break;\r\n\r\n    case 'restart':\r\n      await restartProxy(subArgs, flags);\r\n      break;\r\n\r\n    case 'config':\r\n    case 'configure':\r\n      await configureProxy(subArgs, flags);\r\n      break;\r\n\r\n    default:\r\n      showProxyHelp();\r\n  }\r\n}\r\n\r\n/**\r\n * Start OpenRouter proxy server\r\n * Usage: claude-flow proxy start [--port 8080]\r\n */\r\nasync function startProxy(subArgs, flags) {\r\n  printSuccess('üöÄ Starting OpenRouter proxy server...');\r\n  console.log('This proxy enables Claude Code to use OpenRouter models');\r\n  console.log('Potential cost savings: 85-98% vs direct Anthropic API\\n');\r\n\r\n  try {\r\n    let cmd = 'npx agentic-flow proxy';\r\n\r\n    if (flags.port) {\r\n      cmd += ` --port ${flags.port}`;\r\n    }\r\n\r\n    if (flags.host) {\r\n      cmd += ` --host ${flags.host}`;\r\n    }\r\n\r\n    if (flags.daemon || flags.background) {\r\n      cmd += ' &';\r\n    }\r\n\r\n    const { stdout, stderr } = await execAsync(cmd, {\r\n      timeout: flags.daemon ? 10000 : 0, // Short timeout for daemon mode\r\n      maxBuffer: 10 * 1024 * 1024,\r\n    });\r\n\r\n    if (stdout) {\r\n      console.log(stdout);\r\n    }\r\n\r\n    printSuccess('‚úÖ OpenRouter proxy started successfully!');\r\n    console.log('\\nüìã Next steps:');\r\n    console.log('  1. Set environment variable:');\r\n    console.log(`     export ANTHROPIC_BASE_URL=http://localhost:${flags.port || 8080}`);\r\n    console.log('  2. Configure Claude Code to use the proxy');\r\n    console.log('  3. Your OpenRouter key will be used automatically');\r\n    console.log('  4. Check status: claude-flow proxy status');\r\n    console.log('\\nüí∞ Cost Savings:');\r\n    console.log('  - Anthropic Claude 3.5 Sonnet: ~$3 per million tokens');\r\n    console.log('  - OpenRouter Claude 3.5 Sonnet: ~$0.30 per million tokens');\r\n    console.log('  - Savings: ~90% (10x cheaper!)');\r\n  } catch (error) {\r\n    if (error.killed && flags.daemon) {\r\n      printSuccess('‚úÖ Proxy started in background!');\r\n      console.log('Check status: claude-flow proxy status');\r\n    } else {\r\n      printError('‚ùå Failed to start proxy server');\r\n      console.error(error.message);\r\n      if (error.stderr) {\r\n        console.error('Details:', error.stderr);\r\n      }\r\n      process.exit(1);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Stop OpenRouter proxy server\r\n * Usage: claude-flow proxy stop\r\n */\r\nasync function stopProxy(subArgs, flags) {\r\n  printWarning('üõë Stopping OpenRouter proxy server...');\r\n\r\n  try {\r\n    const { stdout } = await execAsync('npx agentic-flow proxy stop', {\r\n      timeout: 30000,\r\n    });\r\n\r\n    console.log(stdout);\r\n    printSuccess('‚úÖ Proxy server stopped');\r\n    console.log('\\nRemember to unset ANTHROPIC_BASE_URL if needed:');\r\n    console.log('  unset ANTHROPIC_BASE_URL');\r\n  } catch (error) {\r\n    printError('‚ùå Failed to stop proxy server');\r\n    console.error(error.message);\r\n    console.log('\\nTip: You can also stop it manually:');\r\n    console.log('  ps aux | grep \"agentic-flow proxy\"');\r\n    console.log('  kill -9 <PID>');\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\n/**\r\n * Get proxy server status\r\n * Usage: claude-flow proxy status\r\n */\r\nasync function getProxyStatus(subArgs, flags) {\r\n  printSuccess('üìä Getting OpenRouter proxy status...');\r\n\r\n  try {\r\n    const { stdout } = await execAsync('npx agentic-flow proxy status', {\r\n      timeout: 30000,\r\n    });\r\n\r\n    console.log(stdout);\r\n\r\n    if (flags.verbose || flags.detailed) {\r\n      console.log('\\nüîß Configuration:');\r\n      console.log('  Base URL: http://localhost:8080 (default)');\r\n      console.log('  Protocol: HTTP/1.1');\r\n      console.log('  Translation: Anthropic API ‚Üí OpenRouter API');\r\n      console.log('\\nüìù Usage:');\r\n      console.log('  1. export ANTHROPIC_BASE_URL=http://localhost:8080');\r\n      console.log('  2. Use Claude Code normally');\r\n      console.log('  3. All requests route through OpenRouter');\r\n    }\r\n  } catch (error) {\r\n    printError('‚ùå Failed to get proxy status');\r\n    console.error(error.message);\r\n    console.log('\\nTip: Proxy may not be running. Start it with:');\r\n    console.log('  claude-flow proxy start');\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\n/**\r\n * Get proxy server logs\r\n * Usage: claude-flow proxy logs [--lines 100] [--follow]\r\n */\r\nasync function getProxyLogs(subArgs, flags) {\r\n  printSuccess('üìÑ Getting OpenRouter proxy logs...');\r\n\r\n  try {\r\n    let cmd = 'npx agentic-flow proxy logs';\r\n\r\n    if (flags.lines) {\r\n      cmd += ` --lines ${flags.lines}`;\r\n    }\r\n\r\n    if (flags.follow || flags.f) {\r\n      cmd += ' --follow';\r\n    }\r\n\r\n    if (flags.error) {\r\n      cmd += ' --error';\r\n    }\r\n\r\n    const { stdout } = await execAsync(cmd, {\r\n      timeout: flags.follow ? 0 : 30000, // No timeout for follow mode\r\n      maxBuffer: 10 * 1024 * 1024,\r\n    });\r\n\r\n    console.log(stdout);\r\n  } catch (error) {\r\n    printError('‚ùå Failed to get proxy logs');\r\n    console.error(error.message);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\n/**\r\n * Restart proxy server\r\n * Usage: claude-flow proxy restart\r\n */\r\nasync function restartProxy(subArgs, flags) {\r\n  printWarning('üîÑ Restarting OpenRouter proxy server...');\r\n\r\n  try {\r\n    // Stop first\r\n    await stopProxy(subArgs, { ...flags, quiet: true });\r\n\r\n    // Wait a moment\r\n    await new Promise((resolve) => setTimeout(resolve, 2000));\r\n\r\n    // Start again\r\n    await startProxy(subArgs, flags);\r\n\r\n    printSuccess('‚úÖ Proxy server restarted successfully!');\r\n  } catch (error) {\r\n    printError('‚ùå Failed to restart proxy server');\r\n    console.error(error.message);\r\n    process.exit(1);\r\n  }\r\n}\r\n\r\n/**\r\n * Configure proxy server\r\n * Usage: claude-flow proxy config\r\n */\r\nasync function configureProxy(subArgs, flags) {\r\n  printSuccess('üîß OpenRouter Proxy Configuration');\r\n\r\n  console.log('\\nüìã Current Setup:');\r\n  console.log('  1. Proxy translates Anthropic API calls to OpenRouter');\r\n  console.log('  2. Default port: 8080');\r\n  console.log('  3. Requires OPENROUTER_API_KEY environment variable');\r\n\r\n  console.log('\\nüîë API Key Setup:');\r\n  console.log('  export OPENROUTER_API_KEY=\"sk-or-v1-...\"');\r\n\r\n  console.log('\\nüåê Claude Code Integration:');\r\n  console.log('  export ANTHROPIC_BASE_URL=\"http://localhost:8080\"');\r\n\r\n  console.log('\\nüí° Recommended Models:');\r\n  console.log('  - anthropic/claude-3.5-sonnet:beta (90% cheaper)');\r\n  console.log('  - anthropic/claude-3-opus:beta (85% cheaper)');\r\n  console.log('  - deepseek/deepseek-r1-0528:free (100% free!)');\r\n\r\n  console.log('\\n‚öôÔ∏è  Advanced Configuration:');\r\n  console.log('  export PROXY_PORT=8080              # Custom port');\r\n  console.log('  export PROXY_HOST=0.0.0.0           # Allow external connections');\r\n  console.log('  export PROXY_LOG_LEVEL=debug        # Verbose logging');\r\n\r\n  console.log('\\nüöÄ Quick Start:');\r\n  console.log('  1. claude-flow agent config set OPENROUTER_API_KEY sk-or-v1-...');\r\n  console.log('  2. claude-flow proxy start --daemon');\r\n  console.log('  3. export ANTHROPIC_BASE_URL=http://localhost:8080');\r\n  console.log('  4. Use Claude Code normally ‚Üí automatic 90% savings!');\r\n\r\n  if (flags.test) {\r\n    printSuccess('\\nüß™ Testing proxy connection...');\r\n    try {\r\n      const { stdout } = await execAsync('curl -s http://localhost:8080/health', {\r\n        timeout: 5000,\r\n      });\r\n      console.log('‚úÖ Proxy is responding:', stdout);\r\n    } catch (error) {\r\n      printWarning('‚ö†Ô∏è  Proxy not responding. Start it with: claude-flow proxy start');\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Show proxy command help\r\n */\r\nfunction showProxyHelp() {\r\n  console.log(`\r\nOpenRouter Proxy Server Commands\r\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\r\n\r\nStandalone proxy server that translates Anthropic API calls to OpenRouter.\r\nEnables 85-98% cost savings with Claude Code integration.\r\n\r\nUSAGE:\r\n  claude-flow proxy <command> [options]\r\n\r\nCOMMANDS:\r\n  start               Start OpenRouter proxy server\r\n  stop                Stop proxy server\r\n  restart             Restart proxy server\r\n  status              Get proxy server status\r\n  logs                View proxy server logs\r\n  config              Show proxy configuration guide\r\n\r\nOPTIONS:\r\n  --port <number>     Server port (default: 8080)\r\n  --host <string>     Server host (default: localhost)\r\n  --daemon            Run in background\r\n  --background        Same as --daemon\r\n  --lines <number>    Number of log lines (default: 100)\r\n  --follow, -f        Follow log output in real-time\r\n  --error             Show only error logs\r\n  --test              Test proxy connection\r\n  --verbose           Verbose output\r\n\r\nEXAMPLES:\r\n  # Start proxy server\r\n  claude-flow proxy start\r\n  claude-flow proxy start --port 8080 --daemon\r\n\r\n  # Configure Claude Code to use proxy\r\n  export ANTHROPIC_BASE_URL=http://localhost:8080\r\n\r\n  # Check status\r\n  claude-flow proxy status\r\n  claude-flow proxy status --verbose\r\n\r\n  # View logs\r\n  claude-flow proxy logs\r\n  claude-flow proxy logs --lines 50 --follow\r\n  claude-flow proxy logs --error\r\n\r\n  # Stop/restart proxy\r\n  claude-flow proxy stop\r\n  claude-flow proxy restart\r\n\r\n  # Configuration guide\r\n  claude-flow proxy config\r\n  claude-flow proxy config --test\r\n\r\nSETUP GUIDE:\r\n  1. Get OpenRouter API key: https://openrouter.ai/keys\r\n  2. Set environment variable:\r\n     claude-flow agent config set OPENROUTER_API_KEY sk-or-v1-...\r\n\r\n  3. Start proxy server:\r\n     claude-flow proxy start --daemon\r\n\r\n  4. Configure Claude Code:\r\n     export ANTHROPIC_BASE_URL=http://localhost:8080\r\n\r\n  5. Use Claude Code normally - all requests route through OpenRouter!\r\n\r\nCOST SAVINGS:\r\n  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\r\n  ‚îÇ                                                        ‚îÇ\r\n  ‚îÇ  Model: Claude 3.5 Sonnet                             ‚îÇ\r\n  ‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ                            ‚îÇ\r\n  ‚îÇ                                                        ‚îÇ\r\n  ‚îÇ  Anthropic Direct:     $3.00 per million tokens      ‚îÇ\r\n  ‚îÇ  OpenRouter Proxy:     $0.30 per million tokens      ‚îÇ\r\n  ‚îÇ  ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ                            ‚îÇ\r\n  ‚îÇ  Savings: 90% (10x cheaper!)                          ‚îÇ\r\n  ‚îÇ                                                        ‚îÇ\r\n  ‚îÇ  For 100M tokens:                                     ‚îÇ\r\n  ‚îÇ  - Anthropic: $300                                    ‚îÇ\r\n  ‚îÇ  - OpenRouter: $30                                    ‚îÇ\r\n  ‚îÇ  - You save: $270                                     ‚îÇ\r\n  ‚îÇ                                                        ‚îÇ\r\n  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\r\n\r\nFREE MODELS:\r\n  - deepseek/deepseek-r1-0528:free (100% free, high quality)\r\n  - meta-llama/llama-3.1-8b-instruct:free\r\n  - google/gemma-2-9b-it:free\r\n\r\nFEATURES:\r\n  ‚úÖ Transparent API translation (Anthropic ‚Üí OpenRouter)\r\n  ‚úÖ Works with Claude Code out of the box\r\n  ‚úÖ Automatic model mapping\r\n  ‚úÖ Request/response logging\r\n  ‚úÖ Error handling and retries\r\n  ‚úÖ Health check endpoint\r\n  ‚úÖ Zero code changes required\r\n\r\nFor more information, visit:\r\n  https://github.com/ruvnet/agentic-flow\r\n  https://www.npmjs.com/package/agentic-flow\r\n  https://openrouter.ai\r\n`);\r\n}\r\n"],"names":["printSuccess","printError","printWarning","exec","promisify","execAsync","proxyCommand","subArgs","flags","proxyCmd","startProxy","stopProxy","getProxyStatus","getProxyLogs","restartProxy","configureProxy","showProxyHelp","console","log","cmd","port","host","daemon","background","stdout","stderr","timeout","maxBuffer","error","killed","message","process","exit","verbose","detailed","lines","follow","f","quiet","Promise","resolve","setTimeout","test"],"mappings":"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"}