{"version":3,"sources":["../../../../../src/cli/commands/hive-mind/status.ts"],"sourcesContent":["#!/usr/bin/env node\r\n/**\r\n * Hive Mind Status Command\r\n *\r\n * Displays comprehensive status of the Hive Mind swarm\r\n * including agents, tasks, memory, and performance metrics.\r\n */\r\n\r\nimport { Command } from '../commander-fix.js';\r\nimport chalk from 'chalk';\r\nimport Table from 'cli-table3';\r\nimport { HiveMind } from '../../../hive-mind/core/HiveMind.js';\r\nimport { formatSuccess, formatError, formatInfo, formatWarning } from '../../formatter.js';\r\nimport { DatabaseManager } from '../../../hive-mind/core/DatabaseManager.js';\r\n\r\nexport const statusCommand = new Command('status')\r\n  .description('Display Hive Mind swarm status and metrics')\r\n  .option('-s, --swarm-id <id>', 'Specific swarm ID to check')\r\n  .option('-d, --detailed', 'Show detailed agent information', false)\r\n  .option('-m, --memory', 'Show memory usage statistics', false)\r\n  .option('-t, --tasks', 'Show task queue details', false)\r\n  .option('-p, --performance', 'Show performance metrics', false)\r\n  .option('-w, --watch', 'Watch status in real-time', false)\r\n  .option('-j, --json', 'Output as JSON', false)\r\n  .action(async (options) => {\r\n    try {\r\n      // Get swarm ID\r\n      const swarmId = options.swarmId || (await getActiveSwarmId());\r\n      if (!swarmId) {\r\n        throw new Error('No active swarm found. Initialize a Hive Mind first.');\r\n      }\r\n\r\n      // Load Hive Mind\r\n      const hiveMind = await HiveMind.load(swarmId);\r\n      const status = await hiveMind.getFullStatus();\r\n\r\n      if (options.json) {\r\n        console.log(JSON.stringify(status, null, 2));\r\n        return;\r\n      }\r\n\r\n      // Display swarm header\r\n      console.log('\\n' + chalk.bold.yellow('ğŸ Hive Mind Status'));\r\n      console.log(chalk.gray('â”'.repeat(60)));\r\n\r\n      // Basic info\r\n      console.log(formatInfo(`Swarm ID: ${status.swarmId}`));\r\n      console.log(formatInfo(`Name: ${status.name}`));\r\n      console.log(formatInfo(`Topology: ${status.topology}`));\r\n      console.log(formatInfo(`Queen Mode: ${status.queenMode}`));\r\n      console.log(formatInfo(`Status: ${getStatusEmoji(status.health)} ${status.health}`));\r\n      console.log(formatInfo(`Uptime: ${formatUptime(status.uptime)}`));\r\n\r\n      // Agent summary\r\n      console.log('\\n' + chalk.bold('ğŸ‘¥ Agent Summary'));\r\n      const agentTable = new Table({\r\n        head: ['Type', 'Total', 'Active', 'Idle', 'Busy'],\r\n        style: { head: ['cyan'] },\r\n      });\r\n\r\n      Object.entries(status.agentsByType).forEach(([type, count]) => {\r\n        const active = status.agents.filter((a) => a.type === type && a.status === 'active').length;\r\n        const idle = status.agents.filter((a) => a.type === type && a.status === 'idle').length;\r\n        const busy = status.agents.filter((a) => a.type === type && a.status === 'busy').length;\r\n\r\n        agentTable.push([type, count, active, idle, busy]);\r\n      });\r\n\r\n      console.log(agentTable.toString());\r\n\r\n      // Detailed agent info\r\n      if (options.detailed) {\r\n        console.log('\\n' + chalk.bold('ğŸ¤– Agent Details'));\r\n        const detailTable = new Table({\r\n          head: ['Name', 'Type', 'Status', 'Task', 'Messages', 'Uptime'],\r\n          style: { head: ['cyan'] },\r\n        });\r\n\r\n        status.agents.forEach((agent) => {\r\n          detailTable.push([\r\n            agent.name,\r\n            agent.type,\r\n            getAgentStatusBadge(agent.status),\r\n            agent.currentTask || '-',\r\n            agent.messageCount,\r\n            formatUptime(Date.now() - agent.createdAt),\r\n          ]);\r\n        });\r\n\r\n        console.log(detailTable.toString());\r\n      }\r\n\r\n      // Task queue\r\n      if (options.tasks || status.tasks.length > 0) {\r\n        console.log('\\n' + chalk.bold('ğŸ“‹ Task Queue'));\r\n        const taskTable = new Table({\r\n          head: ['ID', 'Description', 'Status', 'Assigned To', 'Progress'],\r\n          style: { head: ['cyan'] },\r\n        });\r\n\r\n        status.tasks.forEach((task) => {\r\n          taskTable.push([\r\n            task.id.substring(0, 8),\r\n            task.description.substring(0, 40) + (task.description.length > 40 ? '...' : ''),\r\n            getTaskStatusBadge(task.status),\r\n            task.assignedAgent || '-',\r\n            `${task.progress}%`,\r\n          ]);\r\n        });\r\n\r\n        console.log(taskTable.toString());\r\n        console.log(formatInfo(`Total Tasks: ${status.taskStats.total}`));\r\n        console.log(\r\n          formatInfo(\r\n            `Completed: ${status.taskStats.completed} | In Progress: ${status.taskStats.inProgress} | Pending: ${status.taskStats.pending}`,\r\n          ),\r\n        );\r\n      }\r\n\r\n      // Memory statistics\r\n      if (options.memory) {\r\n        console.log('\\n' + chalk.bold('ğŸ’¾ Memory Statistics'));\r\n        const memTable = new Table({\r\n          head: ['Namespace', 'Entries', 'Size', 'Avg TTL'],\r\n          style: { head: ['cyan'] },\r\n        });\r\n\r\n        Object.entries(status.memoryStats.byNamespace).forEach(([ns, stats]) => {\r\n          memTable.push([ns, stats.entries, formatBytes(stats.size), `${stats.avgTTL}s`]);\r\n        });\r\n\r\n        console.log(memTable.toString());\r\n        console.log(formatInfo(`Total Memory Usage: ${formatBytes(status.memoryStats.totalSize)}`));\r\n        console.log(formatInfo(`Total Entries: ${status.memoryStats.totalEntries}`));\r\n      }\r\n\r\n      // Performance metrics\r\n      if (options.performance) {\r\n        console.log('\\n' + chalk.bold('ğŸ“Š Performance Metrics'));\r\n        console.log(formatInfo(`Avg Task Completion: ${status.performance.avgTaskCompletion}ms`));\r\n        console.log(formatInfo(`Message Throughput: ${status.performance.messageThroughput}/min`));\r\n        console.log(\r\n          formatInfo(`Consensus Success Rate: ${status.performance.consensusSuccessRate}%`),\r\n        );\r\n        console.log(formatInfo(`Memory Hit Rate: ${status.performance.memoryHitRate}%`));\r\n        console.log(formatInfo(`Agent Utilization: ${status.performance.agentUtilization}%`));\r\n      }\r\n\r\n      // Communications\r\n      console.log('\\n' + chalk.bold('ğŸ“¡ Recent Communications'));\r\n      console.log(formatInfo(`Total Messages: ${status.communicationStats.totalMessages}`));\r\n      console.log(formatInfo(`Avg Latency: ${status.communicationStats.avgLatency}ms`));\r\n      console.log(formatInfo(`Active Channels: ${status.communicationStats.activeChannels}`));\r\n\r\n      // Health warnings\r\n      if (status.warnings.length > 0) {\r\n        console.log('\\n' + chalk.bold.yellow('âš ï¸  Warnings'));\r\n        status.warnings.forEach((warning) => {\r\n          console.log(formatWarning(warning));\r\n        });\r\n      }\r\n\r\n      // Watch mode\r\n      if (options.watch) {\r\n        console.log('\\n' + chalk.gray('Refreshing every 2 seconds... (Ctrl+C to exit)'));\r\n        setInterval(async () => {\r\n          console.clear();\r\n          await statusCommand.parseAsync([...process.argv.slice(0, 2), ...process.argv.slice(3)]);\r\n        }, 2000);\r\n      }\r\n    } catch (error) {\r\n      console.error(formatError('Failed to get swarm status'));\r\n      console.error(formatError((error as Error).message));\r\n      process.exit(1);\r\n    }\r\n  });\r\n\r\nasync function getActiveSwarmId(): Promise<string | null> {\r\n  const db = await DatabaseManager.getInstance();\r\n  return db.getActiveSwarmId();\r\n}\r\n\r\nfunction getStatusEmoji(health: string): string {\r\n  const emojis: Record<string, string> = {\r\n    healthy: 'ğŸŸ¢',\r\n    degraded: 'ğŸŸ¡',\r\n    critical: 'ğŸ”´',\r\n    unknown: 'âšª',\r\n  };\r\n  return emojis[health] || 'âšª';\r\n}\r\n\r\nfunction getAgentStatusBadge(status: string): string {\r\n  const badges: Record<string, string> = {\r\n    active: chalk.green('â— Active'),\r\n    idle: chalk.yellow('â— Idle'),\r\n    busy: chalk.blue('â— Busy'),\r\n    error: chalk.red('â— Error'),\r\n  };\r\n  return badges[status] || chalk.gray('â— Unknown');\r\n}\r\n\r\nfunction getTaskStatusBadge(status: string): string {\r\n  const badges: Record<string, string> = {\r\n    pending: chalk.gray('â³ Pending'),\r\n    assigned: chalk.yellow('ğŸ”„ Assigned'),\r\n    in_progress: chalk.blue('â–¶ï¸  In Progress'),\r\n    completed: chalk.green('âœ… Completed'),\r\n    failed: chalk.red('âŒ Failed'),\r\n  };\r\n  return badges[status] || chalk.gray('â“ Unknown');\r\n}\r\n\r\nfunction formatUptime(ms: number): string {\r\n  const seconds = Math.floor(ms / 1000);\r\n  const minutes = Math.floor(seconds / 60);\r\n  const hours = Math.floor(minutes / 60);\r\n  const days = Math.floor(hours / 24);\r\n\r\n  if (days > 0) return `${days}d ${hours % 24}h`;\r\n  if (hours > 0) return `${hours}h ${minutes % 60}m`;\r\n  if (minutes > 0) return `${minutes}m ${seconds % 60}s`;\r\n  return `${seconds}s`;\r\n}\r\n\r\nfunction formatBytes(bytes: number): string {\r\n  const units = ['B', 'KB', 'MB', 'GB'];\r\n  let size = bytes;\r\n  let unitIndex = 0;\r\n\r\n  while (size > 1024 && unitIndex < units.length - 1) {\r\n    size /= 1024;\r\n    unitIndex++;\r\n  }\r\n\r\n  return `${size.toFixed(2)} ${units[unitIndex]}`;\r\n}\r\n"],"names":["Command","chalk","Table","HiveMind","formatError","formatInfo","formatWarning","DatabaseManager","statusCommand","description","option","action","options","swarmId","getActiveSwarmId","Error","hiveMind","load","status","getFullStatus","json","console","log","JSON","stringify","bold","yellow","gray","repeat","name","topology","queenMode","getStatusEmoji","health","formatUptime","uptime","agentTable","head","style","Object","entries","agentsByType","forEach","type","count","active","agents","filter","a","length","idle","busy","push","toString","detailed","detailTable","agent","getAgentStatusBadge","currentTask","messageCount","Date","now","createdAt","tasks","taskTable","task","id","substring","getTaskStatusBadge","assignedAgent","progress","taskStats","total","completed","inProgress","pending","memory","memTable","memoryStats","byNamespace","ns","stats","formatBytes","size","avgTTL","totalSize","totalEntries","performance","avgTaskCompletion","messageThroughput","consensusSuccessRate","memoryHitRate","agentUtilization","communicationStats","totalMessages","avgLatency","activeChannels","warnings","warning","watch","setInterval","clear","parseAsync","process","argv","slice","error","message","exit","db","getInstance","emojis","healthy","degraded","critical","unknown","badges","green","blue","red","assigned","in_progress","failed","ms","seconds","Math","floor","minutes","hours","days","bytes","units","unitIndex","toFixed"],"mappings":"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"}