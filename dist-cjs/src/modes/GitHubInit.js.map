{"version":3,"sources":["../../../src/modes/GitHubInit.ts"],"sourcesContent":["/**\r\n * GitHubInit - GitHub integration initialization mode\r\n * Sets up GitHub integration with repository management and workflows\r\n */\r\n\r\nimport { IInitMode, InitConfig, InitResult } from '../types/interfaces.js';\r\n\r\nexport class GitHubInit implements IInitMode {\r\n  getDescription(): string {\r\n    return 'GitHub integration initialization with repository management, PR automation, and workflow coordination';\r\n  }\r\n\r\n  getRequiredComponents(): string[] {\r\n    return ['ConfigManager', 'DatabaseManager', 'TopologyManager', 'AgentRegistry', 'MCPIntegrator'];\r\n  }\r\n\r\n  validate(): boolean {\r\n    // Check if GitHub token is available\r\n    return !!(process.env.GITHUB_TOKEN || process.env.GH_TOKEN);\r\n  }\r\n\r\n  async initialize(config: InitConfig): Promise<InitResult> {\r\n    const components: string[] = [];\r\n\r\n    try {\r\n      // Validate GitHub configuration\r\n      if (!this.validate()) {\r\n        throw new Error('GitHub token not found. Set GITHUB_TOKEN or GH_TOKEN environment variable.');\r\n      }\r\n\r\n      // Basic initialization\r\n      if (config.configManager) {\r\n        components.push('ConfigManager');\r\n      }\r\n\r\n      if (config.databaseManager) {\r\n        await config.databaseManager.initialize();\r\n        components.push('DatabaseManager');\r\n      }\r\n\r\n      // Use hierarchical topology for GitHub workflows\r\n      if (config.topologyManager) {\r\n        await config.topologyManager.configure('hierarchical', []);\r\n        components.push('TopologyManager');\r\n      }\r\n\r\n      if (config.agentRegistry) {\r\n        await config.agentRegistry.initialize();\r\n        components.push('AgentRegistry');\r\n      }\r\n\r\n      // Spawn GitHub-specific agents\r\n      if (config.agentRegistry) {\r\n        // PR management agent\r\n        await config.agentRegistry.spawn('coordinator', {\r\n          capabilities: ['github-pr', 'code-review', 'workflow-management'],\r\n          metadata: { specialization: 'github-pr-manager' }\r\n        });\r\n\r\n        // Repository analysis agent\r\n        await config.agentRegistry.spawn('analyst', {\r\n          capabilities: ['repository-analysis', 'code-quality', 'security-audit'],\r\n          metadata: { specialization: 'repo-analyzer' }\r\n        });\r\n\r\n        // Issue tracking agent\r\n        await config.agentRegistry.spawn('coordinator', {\r\n          capabilities: ['issue-tracking', 'project-management', 'triage'],\r\n          metadata: { specialization: 'issue-manager' }\r\n        });\r\n\r\n        // Release coordination agent\r\n        await config.agentRegistry.spawn('coordinator', {\r\n          capabilities: ['release-management', 'versioning', 'deployment'],\r\n          metadata: { specialization: 'release-coordinator' }\r\n        });\r\n\r\n        // Code review agent\r\n        await config.agentRegistry.spawn('reviewer', {\r\n          capabilities: ['code-review', 'security-check', 'best-practices'],\r\n          metadata: { specialization: 'code-reviewer' }\r\n        });\r\n\r\n        components.push('GitHubAgents');\r\n      }\r\n\r\n      // Initialize GitHub MCP integration\r\n      if (config.mcpIntegrator) {\r\n        await config.mcpIntegrator.initialize();\r\n\r\n        // Test GitHub MCP functions\r\n        const githubStatus = await config.mcpIntegrator.executeCommand({\r\n          tool: 'claude-flow',\r\n          function: 'github_repo_analyze',\r\n          parameters: { repo: 'test/repo', analysis_type: 'code_quality' }\r\n        });\r\n\r\n        if (githubStatus.success) {\r\n          components.push('GitHubMCP');\r\n        }\r\n      }\r\n\r\n      // Set up GitHub-specific memory namespace\r\n      if (config.databaseManager) {\r\n        await config.databaseManager.store('github-config', {\r\n          initialized: true,\r\n          mode: 'github',\r\n          features: ['pr-automation', 'issue-tracking', 'code-review', 'release-management'],\r\n          timestamp: new Date().toISOString()\r\n        }, 'github');\r\n        components.push('GitHubMemory');\r\n      }\r\n\r\n      return {\r\n        success: true,\r\n        mode: 'github',\r\n        components,\r\n        topology: 'hierarchical',\r\n        message: 'GitHub integration initialization completed successfully',\r\n        metadata: {\r\n          githubIntegration: true,\r\n          prAutomation: true,\r\n          codeReview: true,\r\n          issueTracking: true,\r\n          releaseManagement: true\r\n        }\r\n      };\r\n\r\n    } catch (error) {\r\n      return {\r\n        success: false,\r\n        mode: 'github',\r\n        components,\r\n        error: error instanceof Error ? error.message : String(error),\r\n        message: 'GitHub initialization failed'\r\n      };\r\n    }\r\n  }\r\n}"],"names":["GitHubInit","getDescription","getRequiredComponents","validate","process","env","GITHUB_TOKEN","GH_TOKEN","initialize","config","components","Error","configManager","push","databaseManager","topologyManager","configure","agentRegistry","spawn","capabilities","metadata","specialization","mcpIntegrator","githubStatus","executeCommand","tool","function","parameters","repo","analysis_type","success","store","initialized","mode","features","timestamp","Date","toISOString","topology","message","githubIntegration","prAutomation","codeReview","issueTracking","releaseManagement","error","String"],"mappings":"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"}