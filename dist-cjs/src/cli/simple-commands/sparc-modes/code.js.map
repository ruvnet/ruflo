{"version":3,"sources":["../../../../../src/cli/simple-commands/sparc-modes/code.js"],"sourcesContent":["// code.js - Auto-Coder mode orchestration template\r\nexport function getCodeOrchestration(taskDescription, memoryNamespace) {\r\n  return `\r\n## Task Orchestration Steps\r\n\r\n1. **Project Directory Setup & Context Review** (5 mins)\r\n   - Verify current working directory and create project structure\r\n   - For named projects (e.g., \"hello-world\"), create as subdirectory\r\n   - Review implementation task: \"${taskDescription}\"\r\n   - Query architecture and pseudocode: \r\n     \\`\\`\\`bash\r\n     npx claude-flow memory query ${memoryNamespace}_architecture\r\n     npx claude-flow memory query ${memoryNamespace}_pseudocode\r\n     npx claude-flow memory query ${memoryNamespace}_tech_specs\r\n     \\`\\`\\`\r\n   - Identify modules to implement and their boundaries\r\n   - Review configuration requirements\r\n   - Check for any blocking dependencies\r\n\r\n2. **Project Setup & Configuration** (10 mins)\r\n   - Initialize project structure in current directory or subdirectory\r\n   - IMPORTANT: Use pwd to verify you're NOT in node_modules/\r\n   - Set up environment configuration (NO hardcoded values):\r\n     - Create .env.example with all required variables\r\n     - Set up config/ directory with environment loaders\r\n     - Implement secrets management abstraction\r\n   - Install dependencies based on tech specs\r\n   - Create module structure (each file < 500 lines)\r\n   - Store setup: \\`npx claude-flow memory store ${memoryNamespace}_setup \"Project structure: src/{domain,application,infrastructure}. Config: dotenv + vault integration. Dependencies: express, joi, winston.\"\\`\r\n\r\n3. **Modular Implementation** (30 mins)\r\n   - Implement features using clean architecture principles:\r\n     - Domain layer: Business entities and rules\r\n     - Application layer: Use cases and workflows\r\n     - Infrastructure layer: External integrations\r\n   - Follow SOLID principles and dependency injection\r\n   - Keep each module/file under 500 lines\r\n   - Use configuration for ALL environment-specific values\r\n   - Implement comprehensive error handling\r\n   - Add structured logging with context\r\n   - Store progress: \\`npx claude-flow memory store ${memoryNamespace}_implementation \"Completed: auth-service (3 modules), user-repository (2 modules). Remaining: notification-service.\"\\`\r\n\r\n4. **Integration & Basic Testing** (15 mins)\r\n   - Wire up dependency injection container\r\n   - Connect modules following architecture design\r\n   - Implement health checks and monitoring endpoints\r\n   - Add input validation and sanitization\r\n   - Create smoke tests for critical paths\r\n   - Verify configuration loading works correctly\r\n   - Test error scenarios and graceful degradation\r\n   - Store results: \\`npx claude-flow memory store ${memoryNamespace}_tests \"Smoke tests passing. Health checks operational. Error handling verified. Ready for TDD mode deep testing.\"\\`\r\n\r\n5. **Code Quality & Documentation** (10 mins)\r\n   - Run linters and formatters\r\n   - Add inline documentation for complex logic\r\n   - Create API documentation (if applicable)\r\n   - Generate dependency graphs\r\n   - Update README with setup instructions\r\n   - Store completion: \\`npx claude-flow memory store ${memoryNamespace}_code_complete \"Implementation complete. All modules < 500 lines. No hardcoded secrets. Ready for testing and integration.\"\\`\r\n\r\n## Directory Safety Check\r\nBefore creating any files:\r\n1. Run \\`pwd\\` to verify current directory\r\n2. Ensure you're NOT in /node_modules/ or any system directory\r\n3. If creating a named project, create it as a subdirectory\r\n4. Example: For \"hello-world\", create ./hello-world/ in current directory\r\n\r\n## Deliverables\r\nAll files should be created relative to the current working directory:\r\n- src/\r\n  - domain/ (business logic, < 500 lines per file)\r\n  - application/ (use cases, < 500 lines per file)\r\n  - infrastructure/ (external integrations)\r\n  - config/ (environment management)\r\n- tests/\r\n  - smoke/ (basic functionality tests)\r\n  - fixtures/ (test data)\r\n- config/\r\n  - .env.example (all required variables)\r\n  - config.js (environment loader)\r\n- docs/\r\n  - API.md (if applicable)\r\n  - SETUP.md (detailed setup guide)\r\n\r\n## Tool Usage Reminders\r\n- Use \\`insert_content\\` for new files or empty targets\r\n- Use \\`apply_diff\\` for modifying existing code with complete search/replace blocks\r\n- Avoid \\`search_and_replace\\` unless absolutely necessary\r\n- Always verify all tool parameters before execution\r\n\r\n## Next Steps - Sequential and Background Options\r\nAfter implementation, choose appropriate execution mode:\r\n\r\n### Sequential Mode (for simple follow-up tasks):\r\n- \\`npx claude-flow sparc run tdd \"Write comprehensive tests for ${taskDescription}\" --non-interactive\\`\r\n- \\`npx claude-flow sparc run security-review \"Security audit for ${taskDescription}\" --non-interactive\\`\r\n\r\n### Background Swarm Mode (for complex comprehensive tasks):\r\n- \\`npx claude-flow swarm \"Create comprehensive test suite with unit, integration, and e2e tests for ${taskDescription}\" --strategy testing --background --parallel\\`\r\n- \\`npx claude-flow swarm \"Perform full security audit and penetration testing for ${taskDescription}\" --strategy analysis --background --review\\`\r\n- \\`npx claude-flow swarm \"Generate complete documentation, API specs, and deployment guides for ${taskDescription}\" --strategy research --background\\`\r\n\r\n## ðŸ Enhanced Development with Background Swarms\r\nLeverage background swarm processing for large-scale development:\r\n\r\n\\`\\`\\`bash\r\n# Background comprehensive implementation swarm\r\nnpx claude-flow swarm \"Implement complete ${taskDescription} with all modules, testing, and documentation\" \\\\\r\n  --strategy development --background --parallel --monitor --testing \\\\\r\n  --max-agents 6 --output ./implementation\r\n\r\n# Background quality assurance swarm\r\nnpx claude-flow swarm \"Comprehensive QA including testing, security review, and performance optimization for ${taskDescription}\" \\\\\r\n  --strategy testing --background --review --monitor \\\\\r\n  --output ./qa-results\r\n\r\n# Background documentation and deployment swarm\r\nnpx claude-flow swarm \"Create production-ready documentation, deployment scripts, and monitoring for ${taskDescription}\" \\\\\r\n  --strategy research --background --parallel \\\\\r\n  --output ./deployment-ready\r\n\r\n# Monitor all background development\r\nnpx claude-flow status\r\nnpx claude-flow monitor\r\n\\`\\`\\`\r\n\r\n## ðŸ”„ Hybrid SPARC-Swarm Development Workflow\r\nCombine SPARC modes with background swarms for optimal development velocity:\r\n\r\n\\`\\`\\`bash\r\n# Phase 1: Quick prototyping (SPARC)\r\nnpx claude-flow sparc run code \"Core ${taskDescription} prototype\" --non-interactive\r\n\r\n# Phase 2: Parallel background development (Swarm)\r\nnpx claude-flow swarm \"Full implementation of ${taskDescription} with advanced features\" --strategy development --background --parallel &\r\nnpx claude-flow swarm \"Comprehensive testing strategy for ${taskDescription}\" --strategy testing --background &\r\nnpx claude-flow swarm \"Security hardening and performance optimization\" --strategy optimization --background &\r\n\r\n# Phase 3: Integration and deployment (Background)\r\nnpx claude-flow swarm \"Integration testing and production deployment preparation for ${taskDescription}\" \\\\\r\n  --strategy integration --background --monitor --testing \\\\\r\n  --output ./production-ready\r\n\r\n# Monitor all development streams\r\nnpx claude-flow status\r\ntail -f ./swarm-runs/*/swarm.log\r\n\\`\\`\\``;\r\n}\r\n"],"names":["getCodeOrchestration","taskDescription","memoryNamespace"],"mappings":"AACA,OAAO,SAASA,qBAAqBC,eAAe,EAAEC,eAAe;IACnE,OAAO,CAAC;;;;;;kCAMwB,EAAED,gBAAgB;;;kCAGlB,EAAEC,gBAAgB;kCAClB,EAAEA,gBAAgB;kCAClB,EAAEA,gBAAgB;;;;;;;;;;;;;;;iDAeH,EAAEA,gBAAgB;;;;;;;;;;;;oDAYf,EAAEA,gBAAgB;;;;;;;;;;mDAUnB,EAAEA,gBAAgB;;;;;;;;sDAQf,EAAEA,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;iEAoCP,EAAED,gBAAgB;kEACjB,EAAEA,gBAAgB;;;qGAGiB,EAAEA,gBAAgB;mFACpC,EAAEA,gBAAgB;iGACJ,EAAEA,gBAAgB;;;;;;;0CAOzE,EAAEA,gBAAgB;;;;;6GAKiD,EAAEA,gBAAgB;;;;;qGAK1B,EAAEA,gBAAgB;;;;;;;;;;;;;;qCAclF,EAAEA,gBAAgB;;;8CAGT,EAAEA,gBAAgB;0DACN,EAAEA,gBAAgB;;;;qFAIS,EAAEA,gBAAgB;;;;;;;MAOjG,CAAC;AACP"}