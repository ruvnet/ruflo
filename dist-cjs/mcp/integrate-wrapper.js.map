{
  "version": 3,
  "sources": ["../../src/mcp/integrate-wrapper.ts"],
  "sourcesContent": ["#!/usr/bin/env node\nimport { spawn } from 'child_process';\nimport { Client } from '@modelcontextprotocol/sdk/client/index.js';\nimport { StdioClientTransport } from '@modelcontextprotocol/sdk/client/stdio.js';\nimport { ClaudeCodeMCPWrapper } from './claude-code-wrapper.js';\n\n/**\n * Integration script that connects the Claude-Flow MCP wrapper\n * to the Claude Code MCP server\n */\nexport class MCPIntegration {\n  private claudeCodeClient?: Client;\n  private wrapper: ClaudeCodeMCPWrapper;\n\n  constructor() {\n    this.wrapper = new ClaudeCodeMCPWrapper();\n  }\n\n  async connectToClaudeCode(): Promise<void> {\n    try {\n      // Start Claude Code MCP server process\n      const claudeCodeProcess = spawn('npx', ['-y', '@anthropic/claude-code', 'mcp'], {\n        stdio: ['pipe', 'pipe', 'pipe'],\n      });\n\n      const transport = new StdioClientTransport({\n        command: 'npx',\n        args: ['-y', '@anthropic/claude-code', 'mcp'],\n      });\n\n      this.claudeCodeClient = new Client(\n        {\n          name: 'claude-flow-wrapper-client',\n          version: '1.0.0',\n        },\n        {\n          capabilities: {},\n        },\n      );\n\n      await this.claudeCodeClient.connect(transport);\n\n      // Inject the client into the wrapper\n      (this.wrapper as any).claudeCodeMCP = this.claudeCodeClient;\n\n      console.log('Connected to Claude Code MCP server');\n    } catch (error) {\n      console.error('Failed to connect to Claude Code MCP:', error);\n      throw error;\n    }\n  }\n\n  async start(): Promise<void> {\n    // Connect to Claude Code MCP\n    await this.connectToClaudeCode();\n\n    // Start the wrapper server\n    await this.wrapper.run();\n  }\n}\n\n// Update the wrapper to use the real Claude Code MCP client\nexport function injectClaudeCodeClient(wrapper: ClaudeCodeMCPWrapper, client: Client): void {\n  // Override the forwardToClaudeCode method\n  (wrapper as any).forwardToClaudeCode = async function (toolName: string, args: any) {\n    try {\n      const result = await client.callTool(toolName, args);\n      return result;\n    } catch (error) {\n      return {\n        content: [\n          {\n            type: 'text',\n            text: `Error calling Claude Code tool ${toolName}: ${error instanceof Error ? error.message : String(error)}`,\n          },\n        ],\n        isError: true,\n      };\n    }\n  };\n}\n\n// Main execution\nif (import.meta.url === `file://${process.argv[1]}`) {\n  const integration = new MCPIntegration();\n  integration.start().catch(console.error);\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,2BAAsB;AACtB,oBAAuB;AACvB,mBAAqC;AACrC,iCAAqC;AAM9B,MAAM,eAAe;AAAA,EAV5B,OAU4B;AAAA;AAAA;AAAA,EAClB;AAAA,EACA;AAAA,EAER,cAAc;AACZ,SAAK,UAAU,IAAI,gDAAqB;AAAA,EAC1C;AAAA,EAEA,MAAM,sBAAqC;AACzC,QAAI;AAEF,YAAM,wBAAoB,4BAAM,OAAO,CAAC,MAAM,0BAA0B,KAAK,GAAG;AAAA,QAC9E,OAAO,CAAC,QAAQ,QAAQ,MAAM;AAAA,MAChC,CAAC;AAED,YAAM,YAAY,IAAI,kCAAqB;AAAA,QACzC,SAAS;AAAA,QACT,MAAM,CAAC,MAAM,0BAA0B,KAAK;AAAA,MAC9C,CAAC;AAED,WAAK,mBAAmB,IAAI;AAAA,QAC1B;AAAA,UACE,MAAM;AAAA,UACN,SAAS;AAAA,QACX;AAAA,QACA;AAAA,UACE,cAAc,CAAC;AAAA,QACjB;AAAA,MACF;AAEA,YAAM,KAAK,iBAAiB,QAAQ,SAAS;AAG7C,MAAC,KAAK,QAAgB,gBAAgB,KAAK;AAE3C,cAAQ,IAAI,qCAAqC;AAAA,IACnD,SAAS,OAAO;AACd,cAAQ,MAAM,yCAAyC,KAAK;AAC5D,YAAM;AAAA,IACR;AAAA,EACF;AAAA,EAEA,MAAM,QAAuB;AAE3B,UAAM,KAAK,oBAAoB;AAG/B,UAAM,KAAK,QAAQ,IAAI;AAAA,EACzB;AACF;AAGO,SAAS,uBAAuB,SAA+B,QAAsB;AAE1F,EAAC,QAAgB,sBAAsB,eAAgB,UAAkB,MAAW;AAClF,QAAI;AACF,YAAM,SAAS,MAAM,OAAO,SAAS,UAAU,IAAI;AACnD,aAAO;AAAA,IACT,SAAS,OAAO;AACd,aAAO;AAAA,QACL,SAAS;AAAA,UACP;AAAA,YACE,MAAM;AAAA,YACN,MAAM,kCAAkC,QAAQ,KAAK,iBAAiB,QAAQ,MAAM,UAAU,OAAO,KAAK,CAAC;AAAA,UAC7G;AAAA,QACF;AAAA,QACA,SAAS;AAAA,MACX;AAAA,IACF;AAAA,EACF;AACF;AAlBgB;AAqBhB,IAAI,YAAY,QAAQ,UAAU,QAAQ,KAAK,CAAC,CAAC,IAAI;AACnD,QAAM,cAAc,IAAI,eAAe;AACvC,cAAY,MAAM,EAAE,MAAM,QAAQ,KAAK;AACzC;",
  "names": []
}
